!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.transformer=e():t.transformer=e()}("undefined"!=typeof self?self:this,(function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=8)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.SOURCE=0]="SOURCE",t[t.NAMEDTYPE=1]="NAMEDTYPE",t[t.FUNCTIONTYPE=2]="FUNCTIONTYPE",t[t.TYPENAME=3]="TYPENAME",t[t.TYPEPARAMETER=4]="TYPEPARAMETER",t[t.PARAMETER=5]="PARAMETER",t[t.IDENTIFIER=6]="IDENTIFIER",t[t.ASSERTION=7]="ASSERTION",t[t.BINARY=8]="BINARY",t[t.CALL=9]="CALL",t[t.CLASS=10]="CLASS",t[t.COMMA=11]="COMMA",t[t.ELEMENTACCESS=12]="ELEMENTACCESS",t[t.FALSE=13]="FALSE",t[t.FUNCTION=14]="FUNCTION",t[t.INSTANCEOF=15]="INSTANCEOF",t[t.LITERAL=16]="LITERAL",t[t.NEW=17]="NEW",t[t.NULL=18]="NULL",t[t.PARENTHESIZED=19]="PARENTHESIZED",t[t.PROPERTYACCESS=20]="PROPERTYACCESS",t[t.TERNARY=21]="TERNARY",t[t.SUPER=22]="SUPER",t[t.THIS=23]="THIS",t[t.TRUE=24]="TRUE",t[t.CONSTRUCTOR=25]="CONSTRUCTOR",t[t.UNARYPOSTFIX=26]="UNARYPOSTFIX",t[t.UNARYPREFIX=27]="UNARYPREFIX",t[t.BLOCK=28]="BLOCK",t[t.BREAK=29]="BREAK",t[t.CONTINUE=30]="CONTINUE",t[t.DO=31]="DO",t[t.EMPTY=32]="EMPTY",t[t.EXPORT=33]="EXPORT",t[t.EXPORTDEFAULT=34]="EXPORTDEFAULT",t[t.EXPORTIMPORT=35]="EXPORTIMPORT",t[t.EXPRESSION=36]="EXPRESSION",t[t.FOR=37]="FOR",t[t.IF=38]="IF",t[t.IMPORT=39]="IMPORT",t[t.RETURN=40]="RETURN",t[t.SWITCH=41]="SWITCH",t[t.THROW=42]="THROW",t[t.TRY=43]="TRY",t[t.VARIABLE=44]="VARIABLE",t[t.VOID=45]="VOID",t[t.WHILE=46]="WHILE",t[t.CLASSDECLARATION=47]="CLASSDECLARATION",t[t.ENUMDECLARATION=48]="ENUMDECLARATION",t[t.ENUMVALUEDECLARATION=49]="ENUMVALUEDECLARATION",t[t.FIELDDECLARATION=50]="FIELDDECLARATION",t[t.FUNCTIONDECLARATION=51]="FUNCTIONDECLARATION",t[t.IMPORTDECLARATION=52]="IMPORTDECLARATION",t[t.INDEXSIGNATUREDECLARATION=53]="INDEXSIGNATUREDECLARATION",t[t.INTERFACEDECLARATION=54]="INTERFACEDECLARATION",t[t.METHODDECLARATION=55]="METHODDECLARATION",t[t.NAMESPACEDECLARATION=56]="NAMESPACEDECLARATION",t[t.TYPEDECLARATION=57]="TYPEDECLARATION",t[t.VARIABLEDECLARATION=58]="VARIABLEDECLARATION",t[t.DECORATOR=59]="DECORATOR",t[t.EXPORTMEMBER=60]="EXPORTMEMBER",t[t.SWITCHCASE=61]="SWITCHCASE",t[t.COMMENT=62]="COMMENT"}(e.NodeKind||(e.NodeKind={})),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.OPTIONAL=1]="OPTIONAL",t[t.REST=2]="REST"}(e.ParameterKind||(e.ParameterKind={})),function(t){t[t.CUSTOM=0]="CUSTOM",t[t.GLOBAL=1]="GLOBAL",t[t.OPERATOR=2]="OPERATOR",t[t.OPERATOR_BINARY=3]="OPERATOR_BINARY",t[t.OPERATOR_PREFIX=4]="OPERATOR_PREFIX",t[t.OPERATOR_POSTFIX=5]="OPERATOR_POSTFIX",t[t.UNMANAGED=6]="UNMANAGED",t[t.SEALED=7]="SEALED",t[t.INLINE=8]="INLINE",t[t.EXTERNAL=9]="EXTERNAL",t[t.BUILTIN=10]="BUILTIN",t[t.LAZY=11]="LAZY",t[t.UNSAFE=12]="UNSAFE"}(e.DecoratorKind||(e.DecoratorKind={})),e.DecoratorKind||(e.DecoratorKind={}),function(t){t[t.LINE=0]="LINE",t[t.TRIPLE=1]="TRIPLE",t[t.BLOCK=2]="BLOCK"}(e.CommentKind||(e.CommentKind={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INTEGER=1]="INTEGER",t[t.STRING=2]="STRING",t[t.REGEXP=3]="REGEXP",t[t.ARRAY=4]="ARRAY",t[t.OBJECT=5]="OBJECT"}(e.LiteralKind||(e.LiteralKind={})),function(t){t[t.PREFIX=0]="PREFIX",t[t.AS=1]="AS",t[t.NONNULL=2]="NONNULL"}(e.AssertionKind||(e.AssertionKind={})),function(t){t[t.USER=0]="USER",t[t.USER_ENTRY=1]="USER_ENTRY",t[t.LIBRARY=2]="LIBRARY",t[t.LIBRARY_ENTRY=3]="LIBRARY_ENTRY"}(e.SourceKind||(e.SourceKind={})),function(t){t[t.NONE=0]="NONE",t[t.ARROW_PARENTHESIZED=1]="ARROW_PARENTHESIZED",t[t.ARROW_SINGLE=2]="ARROW_SINGLE"}(e.ArrowKind||(e.ArrowKind={})),e.findDecorator=function(t,e){if(e)for(var i=0,s=e.length;i<s;++i){var r=e[i];if(r.decoratorKind==t)return r}return null},e.mangleInternalPath=function(t){return t.endsWith(".ts")&&(t=t.substring(0,t.length-3)),t},e.isTypeOmitted=function(t){if(1==t.kind){var e=t.name;return!(e.next||e.identifier.text.length)}return!1},function(t){t[t.NONE=0]="NONE",t[t.IMPORT=1]="IMPORT",t[t.EXPORT=2]="EXPORT",t[t.DECLARE=4]="DECLARE",t[t.CONST=8]="CONST",t[t.LET=16]="LET",t[t.STATIC=32]="STATIC",t[t.READONLY=64]="READONLY",t[t.ABSTRACT=128]="ABSTRACT",t[t.PUBLIC=256]="PUBLIC",t[t.PRIVATE=512]="PRIVATE",t[t.PROTECTED=1024]="PROTECTED",t[t.GET=2048]="GET",t[t.SET=4096]="SET",t[t.DEFINITE_ASSIGNMENT=8192]="DEFINITE_ASSIGNMENT",t[t.AMBIENT=16384]="AMBIENT",t[t.GENERIC=32768]="GENERIC",t[t.GENERIC_CONTEXT=65536]="GENERIC_CONTEXT",t[t.INSTANCE=131072]="INSTANCE",t[t.CONSTRUCTOR=262144]="CONSTRUCTOR",t[t.MODULE_EXPORT=524288]="MODULE_EXPORT",t[t.MODULE_IMPORT=1048576]="MODULE_IMPORT",t[t.RESOLVED=2097152]="RESOLVED",t[t.COMPILED=4194304]="COMPILED",t[t.INLINED=8388608]="INLINED",t[t.SCOPED=16777216]="SCOPED",t[t.TRAMPOLINE=33554432]="TRAMPOLINE",t[t.VIRTUAL=67108864]="VIRTUAL",t[t.MAIN=134217728]="MAIN",t[t.QUOTED=268435456]="QUOTED"}(e.CommonFlags||(e.CommonFlags={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(2),r=i(3),n=i(0),a=function(){function t(){this.sb=[],this.indentLevel=0}return t.build=function(e){var i=new t;return i.visitNode(e),i.finish()},t.prototype.visitNode=function(t){switch(t.kind){case 0:this.visitSource(t);break;case 1:this.visitNamedTypeNode(t);break;case 2:this.visitFunctionTypeNode(t);break;case 4:this.visitTypeParameter(t);break;case 13:case 18:case 22:case 23:case 24:case 25:case 6:this.visitIdentifierExpression(t);break;case 7:this.visitAssertionExpression(t);break;case 8:this.visitBinaryExpression(t);break;case 9:this.visitCallExpression(t);break;case 10:this.visitClassExpression(t);break;case 11:this.visitCommaExpression(t);break;case 12:this.visitElementAccessExpression(t);break;case 14:this.visitFunctionExpression(t);break;case 15:this.visitInstanceOfExpression(t);break;case 16:this.visitLiteralExpression(t);break;case 17:this.visitNewExpression(t);break;case 19:this.visitParenthesizedExpression(t);break;case 20:this.visitPropertyAccessExpression(t);break;case 21:this.visitTernaryExpression(t);break;case 26:this.visitUnaryPostfixExpression(t);break;case 27:this.visitUnaryPrefixExpression(t);break;case 28:this.visitBlockStatement(t);break;case 29:this.visitBreakStatement(t);break;case 30:this.visitContinueStatement(t);break;case 31:this.visitDoStatement(t);break;case 32:this.visitEmptyStatement(t);break;case 33:this.visitExportStatement(t);break;case 34:this.visitExportDefaultStatement(t);break;case 35:this.visitExportImportStatement(t);break;case 36:this.visitExpressionStatement(t);break;case 37:this.visitForStatement(t);break;case 38:this.visitIfStatement(t);break;case 39:this.visitImportStatement(t);break;case 40:this.visitReturnStatement(t);break;case 41:this.visitSwitchStatement(t);break;case 42:this.visitThrowStatement(t);break;case 43:this.visitTryStatement(t);break;case 44:this.visitVariableStatement(t);break;case 46:this.visitWhileStatement(t);break;case 47:this.visitClassDeclaration(t);break;case 48:this.visitEnumDeclaration(t);break;case 49:this.visitEnumValueDeclaration(t);break;case 50:this.visitFieldDeclaration(t);break;case 51:this.visitFunctionDeclaration(t);break;case 52:this.visitImportDeclaration(t);break;case 53:this.visitIndexSignatureDeclaration(t);break;case 54:this.visitInterfaceDeclaration(t);break;case 55:this.visitMethodDeclaration(t);break;case 56:this.visitNamespaceDeclaration(t);break;case 57:this.visitTypeDeclaration(t);break;case 58:this.visitVariableDeclaration(t);break;case 59:this.serializeDecorator(t);break;case 60:this.visitExportMember(t);break;case 5:this.serializeParameter(t);break;case 61:this.visitSwitchCase(t);break;default:assert(!1)}},t.prototype.visitSource=function(t){for(var e=t.statements,i=0,s=e.length;i<s;++i)this.visitNodeAndTerminate(e[i])},t.prototype.visitTypeNode=function(t){switch(t.kind){case 1:this.visitNamedTypeNode(t);break;case 2:this.visitFunctionTypeNode(t);break;default:assert(!1)}},t.prototype.visitTypeName=function(t){this.visitIdentifierExpression(t.identifier);for(var e=this.sb,i=t.next;i;)e.push("."),this.visitIdentifierExpression(i.identifier),i=i.next},t.prototype.visitNamedTypeNode=function(t){this.visitTypeName(t.name);var e=t.typeArguments;if(e){var i=e.length,s=this.sb;if(i){s.push("<"),this.visitTypeNode(e[0]);for(var r=1;r<i;++r)s.push(", "),this.visitTypeNode(e[r]);s.push(">")}t.isNullable&&s.push(" | null")}},t.prototype.visitFunctionTypeNode=function(t){var e=t.isNullable,i=this.sb;i.push(e?"((":"(");var s=t.explicitThisType;s&&(i.push("this: "),this.visitTypeNode(s));var r=t.parameters,n=r.length;if(n){s&&i.push(", "),this.serializeParameter(r[0]);for(var a=1;a<n;++a)i.push(", "),this.serializeParameter(r[a])}var o=t.returnType;o?(i.push(") => "),this.visitTypeNode(o)):i.push(") => void"),e&&i.push(") | null")},t.prototype.visitTypeParameter=function(t){this.visitIdentifierExpression(t.name);var e=t.extendsType;e&&(this.sb.push(" extends "),this.visitTypeNode(e));var i=t.defaultType;i&&(this.sb.push("="),this.visitTypeNode(i))},t.prototype.visitIdentifierExpression=function(t){t.isQuoted?this.visitStringLiteral(t.text):this.sb.push(t.text)},t.prototype.visitArrayLiteralExpression=function(t){var e=this.sb;e.push("[");var i=t.elementExpressions,s=i.length;if(s){i[0]&&this.visitNode(i[0]);for(var r=1;r<s;++r)e.push(", "),i[r]&&this.visitNode(i[r])}e.push("]")},t.prototype.visitObjectLiteralExpression=function(t){var e=this.sb,i=t.names,r=t.values,n=i.length;if(assert(n==r.length),n){e.push("{\n"),s.indent(e,++this.indentLevel),this.visitNode(i[0]),e.push(": "),this.visitNode(r[0]);for(var a=1;a<n;++a){e.push(",\n"),s.indent(e,this.indentLevel);var o=i[a],h=r[a];o===h?this.visitNode(o):(this.visitNode(o),e.push(": "),this.visitNode(h))}e.push("\n"),s.indent(e,--this.indentLevel),e.push("}")}else e.push("{}")},t.prototype.visitAssertionExpression=function(t){var e=this.sb;switch(t.assertionKind){case n.AssertionKind.PREFIX:e.push("<"),this.visitTypeNode(assert(t.toType)),e.push(">"),this.visitNode(t.expression);break;case n.AssertionKind.AS:this.visitNode(t.expression),e.push(" as "),this.visitTypeNode(assert(t.toType));break;case n.AssertionKind.NONNULL:this.visitNode(t.expression),e.push("!");break;default:assert(!1)}},t.prototype.visitBinaryExpression=function(t){var e=this.sb;this.visitNode(t.left),e.push(" "),e.push(r.operatorTokenToString(t.operator)),e.push(" "),this.visitNode(t.right)},t.prototype.visitCallExpression=function(t){var e=this.sb;this.visitNode(t.expression);var i=t.typeArguments;if(i){var s=i.length;if(s){e.push("<"),this.visitTypeNode(i[0]);for(var r=1;r<s;++r)e.push(", "),this.visitTypeNode(i[r]);e.push(">(")}}else e.push("(");var n=t.arguments,a=n.length;if(a){this.visitNode(n[0]);for(r=1;r<a;++r)e.push(", "),this.visitNode(n[r])}e.push(")")},t.prototype.visitClassExpression=function(t){var e=t.declaration;this.visitClassDeclaration(e)},t.prototype.visitCommaExpression=function(t){var e=t.expressions,i=assert(e.length);this.visitNode(e[0]);for(var s=this.sb,r=1;r<i;++r)s.push(","),this.visitNode(e[r])},t.prototype.visitElementAccessExpression=function(t){var e=this.sb;this.visitNode(t.expression),e.push("["),this.visitNode(t.elementExpression),e.push("]")},t.prototype.visitFunctionExpression=function(t){var e=t.declaration;e.arrowKind?assert(0==e.name.text.length):e.name.text.length?this.sb.push("function "):this.sb.push("function"),this.visitFunctionCommon(e)},t.prototype.visitLiteralExpression=function(t){switch(t.literalKind){case 0:this.visitFloatLiteralExpression(t);break;case 1:this.visitIntegerLiteralExpression(t);break;case 2:this.visitStringLiteralExpression(t);break;case 3:this.visitRegexpLiteralExpression(t);break;case 4:this.visitArrayLiteralExpression(t);break;case 5:this.visitObjectLiteralExpression(t);break;default:assert(!1)}},t.prototype.visitFloatLiteralExpression=function(t){this.sb.push(t.value.toString(10))},t.prototype.visitInstanceOfExpression=function(t){this.visitNode(t.expression),this.sb.push(" instanceof "),this.visitTypeNode(t.isType)},t.prototype.visitIntegerLiteralExpression=function(t){this.sb.push(i64_to_string(t.value))},t.prototype.visitStringLiteral=function(t,e){void 0===e&&(e=!1);var i=this.sb,s=0,r=e?"'":'"';i.push(r);for(var n=0,a=t.length;n<a;)switch(t.charCodeAt(n)){case 0:n>s&&i.push(t.substring(s,s=n+1)),i.push("\\0"),s=++n;break;case 8:n>s&&i.push(t.substring(s,n)),s=++n,i.push("\\b");break;case 9:n>s&&i.push(t.substring(s,n)),s=++n,i.push("\\t");break;case 10:n>s&&i.push(t.substring(s,n)),s=++n,i.push("\\n");break;case 11:n>s&&i.push(t.substring(s,n)),s=++n,i.push("\\v");break;case 12:n>s&&i.push(t.substring(s,n)),s=++n,i.push("\\f");break;case 13:n>s&&i.push(t.substring(s,n)),i.push("\\r"),s=++n;break;case 34:e?++n:(n>s&&i.push(t.substring(s,n)),i.push('\\"'),s=++n);break;case 39:e?(n>s&&i.push(t.substring(s,n)),i.push("\\'"),s=++n):++n;break;case 92:n>s&&i.push(t.substring(s,n)),i.push("\\\\"),s=++n;break;default:++n}n>s&&i.push(t.substring(s,n)),i.push(r)},t.prototype.visitStringLiteralExpression=function(t){this.visitStringLiteral(t.value)},t.prototype.visitRegexpLiteralExpression=function(t){var e=this.sb;e.push("/"),e.push(t.pattern),e.push("/"),e.push(t.patternFlags)},t.prototype.visitNewExpression=function(t){this.sb.push("new "),this.visitCallExpression(t)},t.prototype.visitParenthesizedExpression=function(t){var e=this.sb;e.push("("),this.visitNode(t.expression),e.push(")")},t.prototype.visitPropertyAccessExpression=function(t){this.visitNode(t.expression),this.sb.push("."),this.visitIdentifierExpression(t.property)},t.prototype.visitTernaryExpression=function(t){var e=this.sb;this.visitNode(t.condition),e.push(" ? "),this.visitNode(t.ifThen),e.push(" : "),this.visitNode(t.ifElse)},t.prototype.visitUnaryExpression=function(t){switch(t.kind){case 26:this.visitUnaryPostfixExpression(t);break;case 27:this.visitUnaryPrefixExpression(t);break;default:assert(!1)}},t.prototype.visitUnaryPostfixExpression=function(t){this.visitNode(t.operand),this.sb.push(r.operatorTokenToString(t.operator))},t.prototype.visitUnaryPrefixExpression=function(t){this.sb.push(r.operatorTokenToString(t.operator)),this.visitNode(t.operand)},t.prototype.visitNodeAndTerminate=function(t){this.visitNode(t);var e=this.sb;if(e.length&&44!=t.kind&&36!=t.kind){var i=e[e.length-1],s=i.length-1;s>=0&&(125==i.charCodeAt(s)||59==i.charCodeAt(s))?e.push("\n"):e.push(";\n")}else e.push(";\n")},t.prototype.visitBlockStatement=function(t){var e=this.sb,i=t.statements,r=i.length;if(r){e.push("{\n");for(var n=++this.indentLevel,a=0;a<r;++a)s.indent(e,n),this.visitNodeAndTerminate(i[a]);s.indent(e,--this.indentLevel),e.push("}")}else e.push("{}")},t.prototype.visitBreakStatement=function(t){var e=t.label;e?(this.sb.push("break "),this.visitIdentifierExpression(e)):this.sb.push("break")},t.prototype.visitContinueStatement=function(t){var e=t.label;e?(this.sb.push("continue "),this.visitIdentifierExpression(e)):this.sb.push("continue")},t.prototype.visitClassDeclaration=function(t,e){void 0===e&&(e=!1);var i=t.decorators;if(i)for(var r=0,n=i.length;r<n;++r)this.serializeDecorator(i[r]);var a=this.sb;e?a.push("export default "):this.serializeExternalModifiers(t),t.is(128)&&a.push("abstract "),t.name.text.length?(a.push("class "),this.visitIdentifierExpression(t.name)):a.push("class");var o=t.typeParameters;if(o&&o.length){a.push("<"),this.visitTypeParameter(o[0]);for(r=1,n=o.length;r<n;++r)a.push(", "),this.visitTypeParameter(o[r]);a.push(">")}var h=t.extendsType;h&&(a.push(" extends "),this.visitTypeNode(h));var E=t.implementsTypes;if(E){var p=E.length;if(p){a.push(" implements "),this.visitTypeNode(E[0]);for(r=1;r<p;++r)a.push(", "),this.visitTypeNode(E[r])}}var u=t.members;if(u.length){a.push(" {\n");var T=++this.indentLevel;for(r=0,n=u.length;r<n;++r){var v=u[r];(50!=v.kind||v.parameterIndex<0)&&(s.indent(a,T),this.visitNodeAndTerminate(v))}s.indent(a,--this.indentLevel),a.push("}")}else a.push(" {}")},t.prototype.visitDoStatement=function(t){var e=this.sb;e.push("do "),this.visitNode(t.statement),28==t.statement.kind?e.push(" while ("):(e.push(";\n"),s.indent(e,this.indentLevel),e.push("while (")),this.visitNode(t.condition),e.push(")")},t.prototype.visitEmptyStatement=function(t){},t.prototype.visitEnumDeclaration=function(t,e){void 0===e&&(e=!1);var i=this.sb;e?i.push("export default "):this.serializeExternalModifiers(t),t.is(8)&&i.push("const "),i.push("enum "),this.visitIdentifierExpression(t.name);var r=t.values.length;if(r){i.push(" {\n");var n=++this.indentLevel;s.indent(i,n),this.visitEnumValueDeclaration(t.values[0]);for(var a=1;a<r;++a)i.push(",\n"),s.indent(i,n),this.visitEnumValueDeclaration(t.values[a]);i.push("\n"),s.indent(i,--this.indentLevel),i.push("}")}else i.push(" {}")},t.prototype.visitEnumValueDeclaration=function(t){this.visitIdentifierExpression(t.name),t.value&&(this.sb.push(" = "),this.visitNode(t.value))},t.prototype.visitExportImportStatement=function(t){var e=this.sb;e.push("export import "),this.visitIdentifierExpression(t.externalName),e.push(" = "),this.visitIdentifierExpression(t.name)},t.prototype.visitExportMember=function(t){this.visitIdentifierExpression(t.localName),t.exportedName.text!=t.localName.text&&(this.sb.push(" as "),this.visitIdentifierExpression(t.exportedName))},t.prototype.visitExportStatement=function(t){var e=this.sb;t.isDeclare&&e.push("declare ");var i=t.members;if(i&&i.length){var r=i.length;e.push("export {\n");var n=++this.indentLevel;s.indent(e,n),this.visitExportMember(i[0]);for(var a=1;a<r;++a)e.push(",\n"),s.indent(e,n),this.visitExportMember(i[a]);--this.indentLevel,e.push("\n}")}else e.push("export {}");var o=t.path;o&&(e.push(" from "),this.visitStringLiteralExpression(o)),e.push(";")},t.prototype.visitExportDefaultStatement=function(t){var e=t.declaration;switch(e.kind){case 48:this.visitEnumDeclaration(e,!0);break;case 51:this.visitFunctionDeclaration(e,!0);break;case 47:this.visitClassDeclaration(e,!0);break;case 54:this.visitInterfaceDeclaration(e,!0);break;case 56:this.visitNamespaceDeclaration(e,!0);break;default:assert(!1)}},t.prototype.visitExpressionStatement=function(t){this.visitNode(t.expression)},t.prototype.visitFieldDeclaration=function(t){var e=t.decorators;if(e)for(var i=0,s=e.length;i<s;++i)this.serializeDecorator(e[i]);this.serializeAccessModifiers(t),this.visitIdentifierExpression(t.name);var r=this.sb;8192&t.flags&&r.push("!");var n=t.type;n&&(r.push(": "),this.visitTypeNode(n));var a=t.initializer;a&&(r.push(" = "),this.visitNode(a))},t.prototype.visitForStatement=function(t){var e=this.sb;e.push("for (");var i=t.initializer;i&&this.visitNode(i);var s=t.condition;s?(e.push("; "),this.visitNode(s)):e.push(";");var r=t.incrementor;r?(e.push("; "),this.visitNode(r)):e.push(";"),e.push(") "),this.visitNode(t.statement)},t.prototype.visitFunctionDeclaration=function(t,e){void 0===e&&(e=!1);var i=this.sb,s=t.decorators;if(s)for(var r=0,n=s.length;r<n;++r)this.serializeDecorator(s[r]);e?i.push("export default "):(this.serializeExternalModifiers(t),this.serializeAccessModifiers(t)),t.name.text.length?i.push("function "):i.push("function"),this.visitFunctionCommon(t)},t.prototype.visitFunctionCommon=function(t){var e=this.sb;this.visitIdentifierExpression(t.name);var i=t.signature,s=t.typeParameters;if(s){var r=s.length;if(r){e.push("<"),this.visitTypeParameter(s[0]);for(var a=1;a<r;++a)e.push(", "),this.visitTypeParameter(s[a]);e.push(">")}}if(2==t.arrowKind){var o=i.parameters;assert(1==o.length),assert(!i.explicitThisType),this.serializeParameter(o[0])}else{e.push("(");var h=(o=i.parameters).length,E=i.explicitThisType;if(E&&(e.push("this: "),this.visitTypeNode(E)),h){E&&e.push(", "),this.serializeParameter(o[0]);for(a=1;a<h;++a)e.push(", "),this.serializeParameter(o[a])}}var p=t.body,u=i.returnType;t.arrowKind?p?(2==t.arrowKind?assert(n.isTypeOmitted(u)):n.isTypeOmitted(u)?e.push(")"):(e.push("): "),this.visitTypeNode(u)),e.push(" => "),this.visitNode(p)):(assert(!n.isTypeOmitted(u)),e.push(" => "),this.visitTypeNode(u)):(n.isTypeOmitted(u)||t.isAny(266240)?e.push(")"):(e.push("): "),this.visitTypeNode(u)),p&&(e.push(" "),this.visitNode(p)))},t.prototype.visitIfStatement=function(t){var e=this.sb;e.push("if ("),this.visitNode(t.condition),e.push(") ");var i=t.ifTrue;this.visitNode(i),28!=i.kind&&e.push(";\n");var s=t.ifFalse;s&&(28==i.kind?e.push(" else "):e.push("else "),this.visitNode(s))},t.prototype.visitImportDeclaration=function(t){var e=t.foreignName,i=t.name;this.visitIdentifierExpression(e),e.text!=i.text&&(this.sb.push(" as "),this.visitIdentifierExpression(i))},t.prototype.visitImportStatement=function(t){var e=this.sb;e.push("import ");var i=t.declarations,r=t.namespaceName;if(i){var n=i.length;if(n){e.push("{\n");var a=++this.indentLevel;s.indent(e,a),this.visitImportDeclaration(i[0]);for(var o=1;o<n;++o)e.push(",\n"),s.indent(e,a),this.visitImportDeclaration(i[o]);--this.indentLevel,e.push("\n} from ")}else e.push("{} from ")}else r&&(e.push("* as "),this.visitIdentifierExpression(r),e.push(" from "));this.visitStringLiteralExpression(t.path)},t.prototype.visitIndexSignatureDeclaration=function(t){var e=this.sb;e.push("[key: "),this.visitTypeNode(t.keyType),e.push("]: "),this.visitTypeNode(t.valueType)},t.prototype.visitInterfaceDeclaration=function(t,e){void 0===e&&(e=!1);var i=t.decorators;if(i)for(var r=0,n=i.length;r<n;++r)this.serializeDecorator(i[r]);var a=this.sb;e?a.push("export default "):this.serializeExternalModifiers(t),a.push("interface "),this.visitIdentifierExpression(t.name);var o=t.typeParameters;if(o&&o.length){a.push("<"),this.visitTypeParameter(o[0]);for(r=1,n=o.length;r<n;++r)a.push(", "),this.visitTypeParameter(o[r]);a.push(">")}var h=t.extendsType;h&&(a.push(" extends "),this.visitTypeNode(h)),a.push(" {\n");var E=++this.indentLevel,p=t.members;for(r=0,n=p.length;r<n;++r)s.indent(a,E),this.visitNodeAndTerminate(p[r]);--this.indentLevel,a.push("}")},t.prototype.visitMethodDeclaration=function(t){var e=t.decorators;if(e)for(var i=0,s=e.length;i<s;++i)this.serializeDecorator(e[i]);this.serializeAccessModifiers(t),t.is(2048)?this.sb.push("get "):t.is(4096)&&this.sb.push("set "),this.visitFunctionCommon(t)},t.prototype.visitNamespaceDeclaration=function(t,e){void 0===e&&(e=!1);var i=t.decorators;if(i)for(var r=0,n=i.length;r<n;++r)this.serializeDecorator(i[r]);var a=this.sb;e?a.push("export default "):this.serializeExternalModifiers(t),a.push("namespace "),this.visitIdentifierExpression(t.name);var o=t.members;if(o.length){a.push(" {\n");var h=++this.indentLevel;for(r=0,n=o.length;r<n;++r)s.indent(a,h),this.visitNodeAndTerminate(o[r]);s.indent(a,--this.indentLevel),a.push("}")}else a.push(" {}")},t.prototype.visitReturnStatement=function(t){var e=t.value;e?(this.sb.push("return "),this.visitNode(e)):this.sb.push("return")},t.prototype.visitSwitchCase=function(t){var e=this.sb,i=t.label;i?(e.push("case "),this.visitNode(i),e.push(":\n")):e.push("default:\n");var r=t.statements,n=r.length;if(n){var a=++this.indentLevel;s.indent(e,a),this.visitNodeAndTerminate(r[0]);for(var o=1;o<n;++o)s.indent(e,a),this.visitNodeAndTerminate(r[o]);--this.indentLevel}},t.prototype.visitSwitchStatement=function(t){var e=this.sb;e.push("switch ("),this.visitNode(t.condition),e.push(") {\n");for(var i=++this.indentLevel,r=t.cases,n=0,a=r.length;n<a;++n)s.indent(e,i),this.visitSwitchCase(r[n]),e.push("\n");--this.indentLevel,e.push("}")},t.prototype.visitThrowStatement=function(t){this.sb.push("throw "),this.visitNode(t.value)},t.prototype.visitTryStatement=function(t){var e=this.sb;e.push("try {\n");for(var i=++this.indentLevel,r=t.statements,n=0,a=r.length;n<a;++n)s.indent(e,i),this.visitNodeAndTerminate(r[n]);var o=t.catchVariable;if(o){s.indent(e,i-1),e.push("} catch ("),this.visitIdentifierExpression(o),e.push(") {\n");var h=t.catchStatements;if(h)for(n=0,a=h.length;n<a;++n)s.indent(e,i),this.visitNodeAndTerminate(h[n])}var E=t.finallyStatements;if(E){s.indent(e,i-1),e.push("} finally {\n");for(n=0,a=E.length;n<a;++n)s.indent(e,i),this.visitNodeAndTerminate(E[n])}s.indent(e,i-1),e.push("}")},t.prototype.visitTypeDeclaration=function(t){var e=t.decorators;if(e)for(var i=0,s=e.length;i<s;++i)this.serializeDecorator(e[i]);var r=this.sb;this.serializeExternalModifiers(t),r.push("type "),this.visitIdentifierExpression(t.name);var n=t.typeParameters;if(n){var a=n.length;if(a){r.push("<");for(i=0;i<a;++i)this.visitTypeParameter(n[i]);r.push(">")}}r.push(" = "),this.visitTypeNode(t.type)},t.prototype.visitVariableDeclaration=function(t){this.visitIdentifierExpression(t.name);var e=t.type,i=this.sb;8192&t.flags&&i.push("!"),e&&(i.push(": "),this.visitTypeNode(e));var s=t.initializer;s&&(i.push(" = "),this.visitNode(s))},t.prototype.visitVariableStatement=function(t){var e=t.decorators;if(e)for(var i=0,s=e.length;i<s;++i)this.serializeDecorator(e[i]);var r=this.sb,n=t.declarations,a=assert(n.length),o=n[0];this.serializeExternalModifiers(o),r.push(o.is(8)?"const ":o.is(16)?"let ":"var "),this.visitVariableDeclaration(t.declarations[0]);for(i=1;i<a;++i)r.push(", "),this.visitVariableDeclaration(t.declarations[i])},t.prototype.visitWhileStatement=function(t){var e=this.sb;e.push("while ("),this.visitNode(t.condition),32==t.statement.kind?e.push(")"):(e.push(") "),this.visitNode(t.statement))},t.prototype.serializeDecorator=function(t){var e=this.sb;e.push("@"),this.visitNode(t.name);var i=t.arguments;if(i){e.push("(");var r=i.length;if(r){this.visitNode(i[0]);for(var n=1;n<r;++n)e.push(", "),this.visitNode(i[n])}e.push(")\n")}else e.push("\n");s.indent(e,this.indentLevel)},t.prototype.serializeParameter=function(t){var e=this.sb,i=t.parameterKind,s=t.implicitFieldDeclaration;s&&this.serializeAccessModifiers(s),i==n.ParameterKind.REST&&e.push("..."),this.visitIdentifierExpression(t.name);var r=t.type,a=t.initializer;r&&(i!=n.ParameterKind.OPTIONAL||a||e.push("?"),n.isTypeOmitted(r)||(e.push(": "),this.visitTypeNode(r))),a&&(e.push(" = "),this.visitNode(a))},t.prototype.serializeExternalModifiers=function(t){var e=this.sb;t.is(2)?e.push("export "):t.is(1)?e.push("import "):t.is(4)&&e.push("declare ")},t.prototype.serializeAccessModifiers=function(t){var e=this.sb;t.is(256)?e.push("public "):t.is(512)?e.push("private "):t.is(1024)&&e.push("protected "),t.is(32)?e.push("static "):t.is(128)&&e.push("abstract "),t.is(64)&&e.push("readonly ")},t.prototype.finish=function(){var t=this.sb.join("");return this.sb=[],t},t}();e.ASTBuilder=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s="  ",r="    ",n="        ";e.indent=function(t,e){for(;e>=4;)t.push(n),e-=4;e>=2&&(t.push(r),e-=2),e&&t.push(s)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.ABSTRACT=0]="ABSTRACT",t[t.AS=1]="AS",t[t.ASYNC=2]="ASYNC",t[t.AWAIT=3]="AWAIT",t[t.BREAK=4]="BREAK",t[t.CASE=5]="CASE",t[t.CATCH=6]="CATCH",t[t.CLASS=7]="CLASS",t[t.CONST=8]="CONST",t[t.CONTINUE=9]="CONTINUE",t[t.CONSTRUCTOR=10]="CONSTRUCTOR",t[t.DEBUGGER=11]="DEBUGGER",t[t.DECLARE=12]="DECLARE",t[t.DEFAULT=13]="DEFAULT",t[t.DELETE=14]="DELETE",t[t.DO=15]="DO",t[t.ELSE=16]="ELSE",t[t.ENUM=17]="ENUM",t[t.EXPORT=18]="EXPORT",t[t.EXTENDS=19]="EXTENDS",t[t.FALSE=20]="FALSE",t[t.FINALLY=21]="FINALLY",t[t.FOR=22]="FOR",t[t.FROM=23]="FROM",t[t.FUNCTION=24]="FUNCTION",t[t.GET=25]="GET",t[t.IF=26]="IF",t[t.IMPLEMENTS=27]="IMPLEMENTS",t[t.IMPORT=28]="IMPORT",t[t.IN=29]="IN",t[t.INSTANCEOF=30]="INSTANCEOF",t[t.INTERFACE=31]="INTERFACE",t[t.IS=32]="IS",t[t.KEYOF=33]="KEYOF",t[t.LET=34]="LET",t[t.MODULE=35]="MODULE",t[t.NAMESPACE=36]="NAMESPACE",t[t.NEW=37]="NEW",t[t.NULL=38]="NULL",t[t.OF=39]="OF",t[t.PACKAGE=40]="PACKAGE",t[t.PRIVATE=41]="PRIVATE",t[t.PROTECTED=42]="PROTECTED",t[t.PUBLIC=43]="PUBLIC",t[t.READONLY=44]="READONLY",t[t.RETURN=45]="RETURN",t[t.SET=46]="SET",t[t.STATIC=47]="STATIC",t[t.SUPER=48]="SUPER",t[t.SWITCH=49]="SWITCH",t[t.THIS=50]="THIS",t[t.THROW=51]="THROW",t[t.TRUE=52]="TRUE",t[t.TRY=53]="TRY",t[t.TYPE=54]="TYPE",t[t.TYPEOF=55]="TYPEOF",t[t.VAR=56]="VAR",t[t.VOID=57]="VOID",t[t.WHILE=58]="WHILE",t[t.WITH=59]="WITH",t[t.YIELD=60]="YIELD",t[t.OPENBRACE=61]="OPENBRACE",t[t.CLOSEBRACE=62]="CLOSEBRACE",t[t.OPENPAREN=63]="OPENPAREN",t[t.CLOSEPAREN=64]="CLOSEPAREN",t[t.OPENBRACKET=65]="OPENBRACKET",t[t.CLOSEBRACKET=66]="CLOSEBRACKET",t[t.DOT=67]="DOT",t[t.DOT_DOT_DOT=68]="DOT_DOT_DOT",t[t.SEMICOLON=69]="SEMICOLON",t[t.COMMA=70]="COMMA",t[t.LESSTHAN=71]="LESSTHAN",t[t.GREATERTHAN=72]="GREATERTHAN",t[t.LESSTHAN_EQUALS=73]="LESSTHAN_EQUALS",t[t.GREATERTHAN_EQUALS=74]="GREATERTHAN_EQUALS",t[t.EQUALS_EQUALS=75]="EQUALS_EQUALS",t[t.EXCLAMATION_EQUALS=76]="EXCLAMATION_EQUALS",t[t.EQUALS_EQUALS_EQUALS=77]="EQUALS_EQUALS_EQUALS",t[t.EXCLAMATION_EQUALS_EQUALS=78]="EXCLAMATION_EQUALS_EQUALS",t[t.EQUALS_GREATERTHAN=79]="EQUALS_GREATERTHAN",t[t.PLUS=80]="PLUS",t[t.MINUS=81]="MINUS",t[t.ASTERISK_ASTERISK=82]="ASTERISK_ASTERISK",t[t.ASTERISK=83]="ASTERISK",t[t.SLASH=84]="SLASH",t[t.PERCENT=85]="PERCENT",t[t.PLUS_PLUS=86]="PLUS_PLUS",t[t.MINUS_MINUS=87]="MINUS_MINUS",t[t.LESSTHAN_LESSTHAN=88]="LESSTHAN_LESSTHAN",t[t.GREATERTHAN_GREATERTHAN=89]="GREATERTHAN_GREATERTHAN",t[t.GREATERTHAN_GREATERTHAN_GREATERTHAN=90]="GREATERTHAN_GREATERTHAN_GREATERTHAN",t[t.AMPERSAND=91]="AMPERSAND",t[t.BAR=92]="BAR",t[t.CARET=93]="CARET",t[t.EXCLAMATION=94]="EXCLAMATION",t[t.TILDE=95]="TILDE",t[t.AMPERSAND_AMPERSAND=96]="AMPERSAND_AMPERSAND",t[t.BAR_BAR=97]="BAR_BAR",t[t.QUESTION=98]="QUESTION",t[t.COLON=99]="COLON",t[t.EQUALS=100]="EQUALS",t[t.PLUS_EQUALS=101]="PLUS_EQUALS",t[t.MINUS_EQUALS=102]="MINUS_EQUALS",t[t.ASTERISK_EQUALS=103]="ASTERISK_EQUALS",t[t.ASTERISK_ASTERISK_EQUALS=104]="ASTERISK_ASTERISK_EQUALS",t[t.SLASH_EQUALS=105]="SLASH_EQUALS",t[t.PERCENT_EQUALS=106]="PERCENT_EQUALS",t[t.LESSTHAN_LESSTHAN_EQUALS=107]="LESSTHAN_LESSTHAN_EQUALS",t[t.GREATERTHAN_GREATERTHAN_EQUALS=108]="GREATERTHAN_GREATERTHAN_EQUALS",t[t.GREATERTHAN_GREATERTHAN_GREATERTHAN_EQUALS=109]="GREATERTHAN_GREATERTHAN_GREATERTHAN_EQUALS",t[t.AMPERSAND_EQUALS=110]="AMPERSAND_EQUALS",t[t.BAR_EQUALS=111]="BAR_EQUALS",t[t.CARET_EQUALS=112]="CARET_EQUALS",t[t.AT=113]="AT",t[t.IDENTIFIER=114]="IDENTIFIER",t[t.STRINGLITERAL=115]="STRINGLITERAL",t[t.INTEGERLITERAL=116]="INTEGERLITERAL",t[t.FLOATLITERAL=117]="FLOATLITERAL",t[t.INVALID=118]="INVALID",t[t.ENDOFFILE=119]="ENDOFFILE"}(e.Token||(e.Token={})),e.operatorTokenToString=function(t){switch(t){case 14:return"delete";case 29:return"in";case 30:return"instanceof";case 37:return"new";case 55:return"typeof";case 57:return"void";case 60:return"yield";case 68:return"...";case 70:return",";case 71:return"<";case 72:return">";case 73:return"<=";case 74:return">=";case 75:return"==";case 76:return"!=";case 77:return"===";case 78:return"!==";case 80:return"+";case 81:return"-";case 82:return"**";case 83:return"*";case 84:return"/";case 85:return"%";case 86:return"++";case 87:return"--";case 88:return"<<";case 89:return">>";case 90:return">>>";case 91:return"&";case 92:return"|";case 93:return"^";case 94:return"!";case 95:return"~";case 96:return"&&";case 97:return"||";case 100:return"=";case 101:return"+=";case 102:return"-=";case 103:return"*=";case 104:return"**=";case 105:return"/=";case 106:return"%=";case 107:return"<<=";case 108:return">>=";case 109:return">>>=";case 110:return"&=";case 111:return"|=";case 112:return"^=";default:return assert(!1),""}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e,i,s){this.parser=t,this.writeFile=e,this.baseDir=i,this.writer=s}return Object.defineProperty(t.prototype,"program",{get:function(){return this.parser.program},enumerable:!0,configurable:!0}),t}();e.Transformer=s},,,,function(t,e,i){"use strict";var s,r=this&&this.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),a=i(0),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.afterParse=function(){this.parser.program.sources.filter((function(t){return t.sourceKind==a.SourceKind.USER_ENTRY})).forEach((function(t){var e=n.ASTBuilder.build(t);console.log(e)}))},e}(i(4).Transformer);e.default=o}])}));