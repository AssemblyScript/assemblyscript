!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.transformer=i():t.transformer=i()}("undefined"!=typeof self?self:this,(function(){return function(t){var i={};function e(s){if(i[s])return i[s].exports;var r=i[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,e),r.l=!0,r.exports}return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var r in t)e.d(s,r,function(i){return t[i]}.bind(null,r));return s},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=5)}([function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),function(t){t[t.SOURCE=0]="SOURCE",t[t.NAMEDTYPE=1]="NAMEDTYPE",t[t.FUNCTIONTYPE=2]="FUNCTIONTYPE",t[t.TYPENAME=3]="TYPENAME",t[t.TYPEPARAMETER=4]="TYPEPARAMETER",t[t.PARAMETER=5]="PARAMETER",t[t.IDENTIFIER=6]="IDENTIFIER",t[t.ASSERTION=7]="ASSERTION",t[t.BINARY=8]="BINARY",t[t.CALL=9]="CALL",t[t.CLASS=10]="CLASS",t[t.COMMA=11]="COMMA",t[t.ELEMENTACCESS=12]="ELEMENTACCESS",t[t.FALSE=13]="FALSE",t[t.FUNCTION=14]="FUNCTION",t[t.INSTANCEOF=15]="INSTANCEOF",t[t.LITERAL=16]="LITERAL",t[t.NEW=17]="NEW",t[t.NULL=18]="NULL",t[t.PARENTHESIZED=19]="PARENTHESIZED",t[t.PROPERTYACCESS=20]="PROPERTYACCESS",t[t.TERNARY=21]="TERNARY",t[t.SUPER=22]="SUPER",t[t.THIS=23]="THIS",t[t.TRUE=24]="TRUE",t[t.CONSTRUCTOR=25]="CONSTRUCTOR",t[t.UNARYPOSTFIX=26]="UNARYPOSTFIX",t[t.UNARYPREFIX=27]="UNARYPREFIX",t[t.BLOCK=28]="BLOCK",t[t.BREAK=29]="BREAK",t[t.CONTINUE=30]="CONTINUE",t[t.DO=31]="DO",t[t.EMPTY=32]="EMPTY",t[t.EXPORT=33]="EXPORT",t[t.EXPORTDEFAULT=34]="EXPORTDEFAULT",t[t.EXPORTIMPORT=35]="EXPORTIMPORT",t[t.EXPRESSION=36]="EXPRESSION",t[t.FOR=37]="FOR",t[t.IF=38]="IF",t[t.IMPORT=39]="IMPORT",t[t.RETURN=40]="RETURN",t[t.SWITCH=41]="SWITCH",t[t.THROW=42]="THROW",t[t.TRY=43]="TRY",t[t.VARIABLE=44]="VARIABLE",t[t.VOID=45]="VOID",t[t.WHILE=46]="WHILE",t[t.CLASSDECLARATION=47]="CLASSDECLARATION",t[t.ENUMDECLARATION=48]="ENUMDECLARATION",t[t.ENUMVALUEDECLARATION=49]="ENUMVALUEDECLARATION",t[t.FIELDDECLARATION=50]="FIELDDECLARATION",t[t.FUNCTIONDECLARATION=51]="FUNCTIONDECLARATION",t[t.IMPORTDECLARATION=52]="IMPORTDECLARATION",t[t.INDEXSIGNATUREDECLARATION=53]="INDEXSIGNATUREDECLARATION",t[t.INTERFACEDECLARATION=54]="INTERFACEDECLARATION",t[t.METHODDECLARATION=55]="METHODDECLARATION",t[t.NAMESPACEDECLARATION=56]="NAMESPACEDECLARATION",t[t.TYPEDECLARATION=57]="TYPEDECLARATION",t[t.VARIABLEDECLARATION=58]="VARIABLEDECLARATION",t[t.DECORATOR=59]="DECORATOR",t[t.EXPORTMEMBER=60]="EXPORTMEMBER",t[t.SWITCHCASE=61]="SWITCHCASE",t[t.COMMENT=62]="COMMENT"}(i.NodeKind||(i.NodeKind={})),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.OPTIONAL=1]="OPTIONAL",t[t.REST=2]="REST"}(i.ParameterKind||(i.ParameterKind={})),function(t){t[t.CUSTOM=0]="CUSTOM",t[t.GLOBAL=1]="GLOBAL",t[t.OPERATOR=2]="OPERATOR",t[t.OPERATOR_BINARY=3]="OPERATOR_BINARY",t[t.OPERATOR_PREFIX=4]="OPERATOR_PREFIX",t[t.OPERATOR_POSTFIX=5]="OPERATOR_POSTFIX",t[t.UNMANAGED=6]="UNMANAGED",t[t.SEALED=7]="SEALED",t[t.INLINE=8]="INLINE",t[t.EXTERNAL=9]="EXTERNAL",t[t.BUILTIN=10]="BUILTIN",t[t.LAZY=11]="LAZY",t[t.UNSAFE=12]="UNSAFE"}(i.DecoratorKind||(i.DecoratorKind={})),i.DecoratorKind||(i.DecoratorKind={}),function(t){t[t.LINE=0]="LINE",t[t.TRIPLE=1]="TRIPLE",t[t.BLOCK=2]="BLOCK"}(i.CommentKind||(i.CommentKind={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INTEGER=1]="INTEGER",t[t.STRING=2]="STRING",t[t.REGEXP=3]="REGEXP",t[t.ARRAY=4]="ARRAY",t[t.OBJECT=5]="OBJECT"}(i.LiteralKind||(i.LiteralKind={})),function(t){t[t.PREFIX=0]="PREFIX",t[t.AS=1]="AS",t[t.NONNULL=2]="NONNULL"}(i.AssertionKind||(i.AssertionKind={})),function(t){t[t.USER=0]="USER",t[t.USER_ENTRY=1]="USER_ENTRY",t[t.LIBRARY=2]="LIBRARY",t[t.LIBRARY_ENTRY=3]="LIBRARY_ENTRY"}(i.SourceKind||(i.SourceKind={})),function(t){t[t.NONE=0]="NONE",t[t.ARROW_PARENTHESIZED=1]="ARROW_PARENTHESIZED",t[t.ARROW_SINGLE=2]="ARROW_SINGLE"}(i.ArrowKind||(i.ArrowKind={})),i.findDecorator=function(t,i){if(i)for(var e=0,s=i.length;e<s;++e){var r=i[e];if(r.decoratorKind==t)return r}return null},i.mangleInternalPath=function(t){return t.endsWith(".ts")&&(t=t.substring(0,t.length-3)),t},i.isTypeOmitted=function(t){if(1==t.kind){var i=t.name;return!(i.next||i.identifier.text.length)}return!1},function(t){t[t.NONE=0]="NONE",t[t.IMPORT=1]="IMPORT",t[t.EXPORT=2]="EXPORT",t[t.DECLARE=4]="DECLARE",t[t.CONST=8]="CONST",t[t.LET=16]="LET",t[t.STATIC=32]="STATIC",t[t.READONLY=64]="READONLY",t[t.ABSTRACT=128]="ABSTRACT",t[t.PUBLIC=256]="PUBLIC",t[t.PRIVATE=512]="PRIVATE",t[t.PROTECTED=1024]="PROTECTED",t[t.GET=2048]="GET",t[t.SET=4096]="SET",t[t.DEFINITE_ASSIGNMENT=8192]="DEFINITE_ASSIGNMENT",t[t.AMBIENT=16384]="AMBIENT",t[t.GENERIC=32768]="GENERIC",t[t.GENERIC_CONTEXT=65536]="GENERIC_CONTEXT",t[t.INSTANCE=131072]="INSTANCE",t[t.CONSTRUCTOR=262144]="CONSTRUCTOR",t[t.MODULE_EXPORT=524288]="MODULE_EXPORT",t[t.MODULE_IMPORT=1048576]="MODULE_IMPORT",t[t.RESOLVED=2097152]="RESOLVED",t[t.COMPILED=4194304]="COMPILED",t[t.INLINED=8388608]="INLINED",t[t.SCOPED=16777216]="SCOPED",t[t.TRAMPOLINE=33554432]="TRAMPOLINE",t[t.VIRTUAL=67108864]="VIRTUAL",t[t.MAIN=134217728]="MAIN",t[t.QUOTED=268435456]="QUOTED"}(i.CommonFlags||(i.CommonFlags={}))},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e(2),r=e(3),n=e(0),o=function(){function t(){this.sb=[],this.indentLevel=0}return t.build=function(i){var e=new t;return e.visitNode(i),e.finish()},t.prototype.visitNode=function(t){switch(t.kind){case 0:this.visitSource(t);break;case 1:this.visitNamedTypeNode(t);break;case 2:this.visitFunctionTypeNode(t);break;case 4:this.visitTypeParameter(t);break;case 13:case 18:case 22:case 23:case 24:case 25:case 6:this.visitIdentifierExpression(t);break;case 7:this.visitAssertionExpression(t);break;case 8:this.visitBinaryExpression(t);break;case 9:this.visitCallExpression(t);break;case 10:this.visitClassExpression(t);break;case 11:this.visitCommaExpression(t);break;case 12:this.visitElementAccessExpression(t);break;case 14:this.visitFunctionExpression(t);break;case 15:this.visitInstanceOfExpression(t);break;case 16:this.visitLiteralExpression(t);break;case 17:this.visitNewExpression(t);break;case 19:this.visitParenthesizedExpression(t);break;case 20:this.visitPropertyAccessExpression(t);break;case 21:this.visitTernaryExpression(t);break;case 26:this.visitUnaryPostfixExpression(t);break;case 27:this.visitUnaryPrefixExpression(t);break;case 28:this.visitBlockStatement(t);break;case 29:this.visitBreakStatement(t);break;case 30:this.visitContinueStatement(t);break;case 31:this.visitDoStatement(t);break;case 32:this.visitEmptyStatement(t);break;case 33:this.visitExportStatement(t);break;case 34:this.visitExportDefaultStatement(t);break;case 35:this.visitExportImportStatement(t);break;case 36:this.visitExpressionStatement(t);break;case 37:this.visitForStatement(t);break;case 38:this.visitIfStatement(t);break;case 39:this.visitImportStatement(t);break;case 40:this.visitReturnStatement(t);break;case 41:this.visitSwitchStatement(t);break;case 42:this.visitThrowStatement(t);break;case 43:this.visitTryStatement(t);break;case 44:this.visitVariableStatement(t);break;case 46:this.visitWhileStatement(t);break;case 47:this.visitClassDeclaration(t);break;case 48:this.visitEnumDeclaration(t);break;case 49:this.visitEnumValueDeclaration(t);break;case 50:this.visitFieldDeclaration(t);break;case 51:this.visitFunctionDeclaration(t);break;case 52:this.visitImportDeclaration(t);break;case 53:this.visitIndexSignatureDeclaration(t);break;case 54:this.visitInterfaceDeclaration(t);break;case 55:this.visitMethodDeclaration(t);break;case 56:this.visitNamespaceDeclaration(t);break;case 57:this.visitTypeDeclaration(t);break;case 58:this.visitVariableDeclaration(t);break;case 59:this.serializeDecorator(t);break;case 60:this.visitExportMember(t);break;case 5:this.serializeParameter(t);break;case 61:this.visitSwitchCase(t);break;default:assert(!1)}},t.prototype.visitSource=function(t){for(var i=t.statements,e=0,s=i.length;e<s;++e)this.visitNodeAndTerminate(i[e])},t.prototype.visitTypeNode=function(t){switch(t.kind){case 1:this.visitNamedTypeNode(t);break;case 2:this.visitFunctionTypeNode(t);break;default:assert(!1)}},t.prototype.visitTypeName=function(t){this.visitIdentifierExpression(t.identifier);for(var i=this.sb,e=t.next;e;)i.push("."),this.visitIdentifierExpression(e.identifier),e=e.next},t.prototype.visitNamedTypeNode=function(t){this.visitTypeName(t.name);var i=t.typeArguments;if(i){var e=i.length,s=this.sb;if(e){s.push("<"),this.visitTypeNode(i[0]);for(var r=1;r<e;++r)s.push(", "),this.visitTypeNode(i[r]);s.push(">")}t.isNullable&&s.push(" | null")}},t.prototype.visitFunctionTypeNode=function(t){var i=t.isNullable,e=this.sb;e.push(i?"((":"(");var s=t.explicitThisType;s&&(e.push("this: "),this.visitTypeNode(s));var r=t.parameters,n=r.length;if(n){s&&e.push(", "),this.serializeParameter(r[0]);for(var o=1;o<n;++o)e.push(", "),this.serializeParameter(r[o])}var a=t.returnType;a?(e.push(") => "),this.visitTypeNode(a)):e.push(") => void"),i&&e.push(") | null")},t.prototype.visitTypeParameter=function(t){this.visitIdentifierExpression(t.name);var i=t.extendsType;i&&(this.sb.push(" extends "),this.visitTypeNode(i));var e=t.defaultType;e&&(this.sb.push("="),this.visitTypeNode(e))},t.prototype.visitIdentifierExpression=function(t){t.isQuoted?this.visitStringLiteral(t.text):this.sb.push(t.text)},t.prototype.visitArrayLiteralExpression=function(t){var i=this.sb;i.push("[");var e=t.elementExpressions,s=e.length;if(s){e[0]&&this.visitNode(e[0]);for(var r=1;r<s;++r)i.push(", "),e[r]&&this.visitNode(e[r])}i.push("]")},t.prototype.visitObjectLiteralExpression=function(t){var i=this.sb,e=t.names,r=t.values,n=e.length;if(assert(n==r.length),n){i.push("{\n"),s.indent(i,++this.indentLevel),this.visitNode(e[0]),i.push(": "),this.visitNode(r[0]);for(var o=1;o<n;++o){i.push(",\n"),s.indent(i,this.indentLevel);var a=e[o],p=r[o];a===p?this.visitNode(a):(this.visitNode(a),i.push(": "),this.visitNode(p))}i.push("\n"),s.indent(i,--this.indentLevel),i.push("}")}else i.push("{}")},t.prototype.visitAssertionExpression=function(t){var i=this.sb;switch(t.assertionKind){case n.AssertionKind.PREFIX:i.push("<"),this.visitTypeNode(assert(t.toType)),i.push(">"),this.visitNode(t.expression);break;case n.AssertionKind.AS:this.visitNode(t.expression),i.push(" as "),this.visitTypeNode(assert(t.toType));break;case n.AssertionKind.NONNULL:this.visitNode(t.expression),i.push("!");break;default:assert(!1)}},t.prototype.visitBinaryExpression=function(t){var i=this.sb;this.visitNode(t.left),i.push(" "),i.push(r.operatorTokenToString(t.operator)),i.push(" "),this.visitNode(t.right)},t.prototype.visitCallExpression=function(t){var i=this.sb;this.visitNode(t.expression);var e=t.typeArguments;if(e){var s=e.length;if(s){i.push("<"),this.visitTypeNode(e[0]);for(var r=1;r<s;++r)i.push(", "),this.visitTypeNode(e[r]);i.push(">(")}}else i.push("(");var n=t.arguments,o=n.length;if(o){this.visitNode(n[0]);for(r=1;r<o;++r)i.push(", "),this.visitNode(n[r])}i.push(")")},t.prototype.visitClassExpression=function(t){var i=t.declaration;this.visitClassDeclaration(i)},t.prototype.visitCommaExpression=function(t){var i=t.expressions,e=assert(i.length);this.visitNode(i[0]);for(var s=this.sb,r=1;r<e;++r)s.push(","),this.visitNode(i[r])},t.prototype.visitElementAccessExpression=function(t){var i=this.sb;this.visitNode(t.expression),i.push("["),this.visitNode(t.elementExpression),i.push("]")},t.prototype.visitFunctionExpression=function(t){var i=t.declaration;i.arrowKind?assert(0==i.name.text.length):i.name.text.length?this.sb.push("function "):this.sb.push("function"),this.visitFunctionCommon(i)},t.prototype.visitLiteralExpression=function(t){switch(t.literalKind){case 0:this.visitFloatLiteralExpression(t);break;case 1:this.visitIntegerLiteralExpression(t);break;case 2:this.visitStringLiteralExpression(t);break;case 3:this.visitRegexpLiteralExpression(t);break;case 4:this.visitArrayLiteralExpression(t);break;case 5:this.visitObjectLiteralExpression(t);break;default:assert(!1)}},t.prototype.visitFloatLiteralExpression=function(t){this.sb.push(t.value.toString(10))},t.prototype.visitInstanceOfExpression=function(t){this.visitNode(t.expression),this.sb.push(" instanceof "),this.visitTypeNode(t.isType)},t.prototype.visitIntegerLiteralExpression=function(t){this.sb.push(i64_to_string(t.value))},t.prototype.visitStringLiteral=function(t,i){void 0===i&&(i=!1);var e=this.sb,s=0,r=i?"'":'"';e.push(r);for(var n=0,o=t.length;n<o;)switch(t.charCodeAt(n)){case 0:n>s&&e.push(t.substring(s,s=n+1)),e.push("\\0"),s=++n;break;case 8:n>s&&e.push(t.substring(s,n)),s=++n,e.push("\\b");break;case 9:n>s&&e.push(t.substring(s,n)),s=++n,e.push("\\t");break;case 10:n>s&&e.push(t.substring(s,n)),s=++n,e.push("\\n");break;case 11:n>s&&e.push(t.substring(s,n)),s=++n,e.push("\\v");break;case 12:n>s&&e.push(t.substring(s,n)),s=++n,e.push("\\f");break;case 13:n>s&&e.push(t.substring(s,n)),e.push("\\r"),s=++n;break;case 34:i?++n:(n>s&&e.push(t.substring(s,n)),e.push('\\"'),s=++n);break;case 39:i?(n>s&&e.push(t.substring(s,n)),e.push("\\'"),s=++n):++n;break;case 92:n>s&&e.push(t.substring(s,n)),e.push("\\\\"),s=++n;break;default:++n}n>s&&e.push(t.substring(s,n)),e.push(r)},t.prototype.visitStringLiteralExpression=function(t){this.visitStringLiteral(t.value)},t.prototype.visitRegexpLiteralExpression=function(t){var i=this.sb;i.push("/"),i.push(t.pattern),i.push("/"),i.push(t.patternFlags)},t.prototype.visitNewExpression=function(t){this.sb.push("new "),this.visitCallExpression(t)},t.prototype.visitParenthesizedExpression=function(t){var i=this.sb;i.push("("),this.visitNode(t.expression),i.push(")")},t.prototype.visitPropertyAccessExpression=function(t){this.visitNode(t.expression),this.sb.push("."),this.visitIdentifierExpression(t.property)},t.prototype.visitTernaryExpression=function(t){var i=this.sb;this.visitNode(t.condition),i.push(" ? "),this.visitNode(t.ifThen),i.push(" : "),this.visitNode(t.ifElse)},t.prototype.visitUnaryExpression=function(t){switch(t.kind){case 26:this.visitUnaryPostfixExpression(t);break;case 27:this.visitUnaryPrefixExpression(t);break;default:assert(!1)}},t.prototype.visitUnaryPostfixExpression=function(t){this.visitNode(t.operand),this.sb.push(r.operatorTokenToString(t.operator))},t.prototype.visitUnaryPrefixExpression=function(t){this.sb.push(r.operatorTokenToString(t.operator)),this.visitNode(t.operand)},t.prototype.visitNodeAndTerminate=function(t){this.visitNode(t);var i=this.sb;if(i.length&&44!=t.kind&&36!=t.kind){var e=i[i.length-1],s=e.length-1;s>=0&&(125==e.charCodeAt(s)||59==e.charCodeAt(s))?i.push("\n"):i.push(";\n")}else i.push(";\n")},t.prototype.visitBlockStatement=function(t){var i=this.sb,e=t.statements,r=e.length;if(r){i.push("{\n");for(var n=++this.indentLevel,o=0;o<r;++o)s.indent(i,n),this.visitNodeAndTerminate(e[o]);s.indent(i,--this.indentLevel),i.push("}")}else i.push("{}")},t.prototype.visitBreakStatement=function(t){var i=t.label;i?(this.sb.push("break "),this.visitIdentifierExpression(i)):this.sb.push("break")},t.prototype.visitContinueStatement=function(t){var i=t.label;i?(this.sb.push("continue "),this.visitIdentifierExpression(i)):this.sb.push("continue")},t.prototype.visitClassDeclaration=function(t,i){void 0===i&&(i=!1);var e=t.decorators;if(e)for(var r=0,n=e.length;r<n;++r)this.serializeDecorator(e[r]);var o=this.sb;i?o.push("export default "):this.serializeExternalModifiers(t),t.is(128)&&o.push("abstract "),t.name.text.length?(o.push("class "),this.visitIdentifierExpression(t.name)):o.push("class");var a=t.typeParameters;if(a&&a.length){o.push("<"),this.visitTypeParameter(a[0]);for(r=1,n=a.length;r<n;++r)o.push(", "),this.visitTypeParameter(a[r]);o.push(">")}var p=t.extendsType;p&&(o.push(" extends "),this.visitTypeNode(p));var h=t.implementsTypes;if(h){var u=h.length;if(u){o.push(" implements "),this.visitTypeNode(h[0]);for(r=1;r<u;++r)o.push(", "),this.visitTypeNode(h[r])}}var c=t.members;if(c.length){o.push(" {\n");var v=++this.indentLevel;for(r=0,n=c.length;r<n;++r){var E=c[r];(50!=E.kind||E.parameterIndex<0)&&(s.indent(o,v),this.visitNodeAndTerminate(E))}s.indent(o,--this.indentLevel),o.push("}")}else o.push(" {}")},t.prototype.visitDoStatement=function(t){var i=this.sb;i.push("do "),this.visitNode(t.statement),28==t.statement.kind?i.push(" while ("):(i.push(";\n"),s.indent(i,this.indentLevel),i.push("while (")),this.visitNode(t.condition),i.push(")")},t.prototype.visitEmptyStatement=function(t){},t.prototype.visitEnumDeclaration=function(t,i){void 0===i&&(i=!1);var e=this.sb;i?e.push("export default "):this.serializeExternalModifiers(t),t.is(8)&&e.push("const "),e.push("enum "),this.visitIdentifierExpression(t.name);var r=t.values.length;if(r){e.push(" {\n");var n=++this.indentLevel;s.indent(e,n),this.visitEnumValueDeclaration(t.values[0]);for(var o=1;o<r;++o)e.push(",\n"),s.indent(e,n),this.visitEnumValueDeclaration(t.values[o]);e.push("\n"),s.indent(e,--this.indentLevel),e.push("}")}else e.push(" {}")},t.prototype.visitEnumValueDeclaration=function(t){this.visitIdentifierExpression(t.name),t.value&&(this.sb.push(" = "),this.visitNode(t.value))},t.prototype.visitExportImportStatement=function(t){var i=this.sb;i.push("export import "),this.visitIdentifierExpression(t.externalName),i.push(" = "),this.visitIdentifierExpression(t.name)},t.prototype.visitExportMember=function(t){this.visitIdentifierExpression(t.localName),t.exportedName.text!=t.localName.text&&(this.sb.push(" as "),this.visitIdentifierExpression(t.exportedName))},t.prototype.visitExportStatement=function(t){var i=this.sb;t.isDeclare&&i.push("declare ");var e=t.members;if(e&&e.length){var r=e.length;i.push("export {\n");var n=++this.indentLevel;s.indent(i,n),this.visitExportMember(e[0]);for(var o=1;o<r;++o)i.push(",\n"),s.indent(i,n),this.visitExportMember(e[o]);--this.indentLevel,i.push("\n}")}else i.push("export {}");var a=t.path;a&&(i.push(" from "),this.visitStringLiteralExpression(a)),i.push(";")},t.prototype.visitExportDefaultStatement=function(t){var i=t.declaration;switch(i.kind){case 48:this.visitEnumDeclaration(i,!0);break;case 51:this.visitFunctionDeclaration(i,!0);break;case 47:this.visitClassDeclaration(i,!0);break;case 54:this.visitInterfaceDeclaration(i,!0);break;case 56:this.visitNamespaceDeclaration(i,!0);break;default:assert(!1)}},t.prototype.visitExpressionStatement=function(t){this.visitNode(t.expression)},t.prototype.visitFieldDeclaration=function(t){var i=t.decorators;if(i)for(var e=0,s=i.length;e<s;++e)this.serializeDecorator(i[e]);this.serializeAccessModifiers(t),this.visitIdentifierExpression(t.name);var r=this.sb;8192&t.flags&&r.push("!");var n=t.type;n&&(r.push(": "),this.visitTypeNode(n));var o=t.initializer;o&&(r.push(" = "),this.visitNode(o))},t.prototype.visitForStatement=function(t){var i=this.sb;i.push("for (");var e=t.initializer;e&&this.visitNode(e);var s=t.condition;s?(i.push("; "),this.visitNode(s)):i.push(";");var r=t.incrementor;r?(i.push("; "),this.visitNode(r)):i.push(";"),i.push(") "),this.visitNode(t.statement)},t.prototype.visitFunctionDeclaration=function(t,i){void 0===i&&(i=!1);var e=this.sb,s=t.decorators;if(s)for(var r=0,n=s.length;r<n;++r)this.serializeDecorator(s[r]);i?e.push("export default "):(this.serializeExternalModifiers(t),this.serializeAccessModifiers(t)),t.name.text.length?e.push("function "):e.push("function"),this.visitFunctionCommon(t)},t.prototype.visitFunctionCommon=function(t){var i=this.sb;this.visitIdentifierExpression(t.name);var e=t.signature,s=t.typeParameters;if(s){var r=s.length;if(r){i.push("<"),this.visitTypeParameter(s[0]);for(var o=1;o<r;++o)i.push(", "),this.visitTypeParameter(s[o]);i.push(">")}}if(2==t.arrowKind){var a=e.parameters;assert(1==a.length),assert(!e.explicitThisType),this.serializeParameter(a[0])}else{i.push("(");var p=(a=e.parameters).length,h=e.explicitThisType;if(h&&(i.push("this: "),this.visitTypeNode(h)),p){h&&i.push(", "),this.serializeParameter(a[0]);for(o=1;o<p;++o)i.push(", "),this.serializeParameter(a[o])}}var u=t.body,c=e.returnType;t.arrowKind?u?(2==t.arrowKind?assert(n.isTypeOmitted(c)):n.isTypeOmitted(c)?i.push(")"):(i.push("): "),this.visitTypeNode(c)),i.push(" => "),this.visitNode(u)):(assert(!n.isTypeOmitted(c)),i.push(" => "),this.visitTypeNode(c)):(n.isTypeOmitted(c)||t.isAny(266240)?i.push(")"):(i.push("): "),this.visitTypeNode(c)),u&&(i.push(" "),this.visitNode(u)))},t.prototype.visitIfStatement=function(t){var i=this.sb;i.push("if ("),this.visitNode(t.condition),i.push(") ");var e=t.ifTrue;this.visitNode(e),28!=e.kind&&i.push(";\n");var s=t.ifFalse;s&&(28==e.kind?i.push(" else "):i.push("else "),this.visitNode(s))},t.prototype.visitImportDeclaration=function(t){var i=t.foreignName,e=t.name;this.visitIdentifierExpression(i),i.text!=e.text&&(this.sb.push(" as "),this.visitIdentifierExpression(e))},t.prototype.visitImportStatement=function(t){var i=this.sb;i.push("import ");var e=t.declarations,r=t.namespaceName;if(e){var n=e.length;if(n){i.push("{\n");var o=++this.indentLevel;s.indent(i,o),this.visitImportDeclaration(e[0]);for(var a=1;a<n;++a)i.push(",\n"),s.indent(i,o),this.visitImportDeclaration(e[a]);--this.indentLevel,i.push("\n} from ")}else i.push("{} from ")}else r&&(i.push("* as "),this.visitIdentifierExpression(r),i.push(" from "));this.visitStringLiteralExpression(t.path)},t.prototype.visitIndexSignatureDeclaration=function(t){var i=this.sb;i.push("[key: "),this.visitTypeNode(t.keyType),i.push("]: "),this.visitTypeNode(t.valueType)},t.prototype.visitInterfaceDeclaration=function(t,i){void 0===i&&(i=!1);var e=t.decorators;if(e)for(var r=0,n=e.length;r<n;++r)this.serializeDecorator(e[r]);var o=this.sb;i?o.push("export default "):this.serializeExternalModifiers(t),o.push("interface "),this.visitIdentifierExpression(t.name);var a=t.typeParameters;if(a&&a.length){o.push("<"),this.visitTypeParameter(a[0]);for(r=1,n=a.length;r<n;++r)o.push(", "),this.visitTypeParameter(a[r]);o.push(">")}var p=t.extendsType;p&&(o.push(" extends "),this.visitTypeNode(p)),o.push(" {\n");var h=++this.indentLevel,u=t.members;for(r=0,n=u.length;r<n;++r)s.indent(o,h),this.visitNodeAndTerminate(u[r]);--this.indentLevel,o.push("}")},t.prototype.visitMethodDeclaration=function(t){var i=t.decorators;if(i)for(var e=0,s=i.length;e<s;++e)this.serializeDecorator(i[e]);this.serializeAccessModifiers(t),t.is(2048)?this.sb.push("get "):t.is(4096)&&this.sb.push("set "),this.visitFunctionCommon(t)},t.prototype.visitNamespaceDeclaration=function(t,i){void 0===i&&(i=!1);var e=t.decorators;if(e)for(var r=0,n=e.length;r<n;++r)this.serializeDecorator(e[r]);var o=this.sb;i?o.push("export default "):this.serializeExternalModifiers(t),o.push("namespace "),this.visitIdentifierExpression(t.name);var a=t.members;if(a.length){o.push(" {\n");var p=++this.indentLevel;for(r=0,n=a.length;r<n;++r)s.indent(o,p),this.visitNodeAndTerminate(a[r]);s.indent(o,--this.indentLevel),o.push("}")}else o.push(" {}")},t.prototype.visitReturnStatement=function(t){var i=t.value;i?(this.sb.push("return "),this.visitNode(i)):this.sb.push("return")},t.prototype.visitSwitchCase=function(t){var i=this.sb,e=t.label;e?(i.push("case "),this.visitNode(e),i.push(":\n")):i.push("default:\n");var r=t.statements,n=r.length;if(n){var o=++this.indentLevel;s.indent(i,o),this.visitNodeAndTerminate(r[0]);for(var a=1;a<n;++a)s.indent(i,o),this.visitNodeAndTerminate(r[a]);--this.indentLevel}},t.prototype.visitSwitchStatement=function(t){var i=this.sb;i.push("switch ("),this.visitNode(t.condition),i.push(") {\n");for(var e=++this.indentLevel,r=t.cases,n=0,o=r.length;n<o;++n)s.indent(i,e),this.visitSwitchCase(r[n]),i.push("\n");--this.indentLevel,i.push("}")},t.prototype.visitThrowStatement=function(t){this.sb.push("throw "),this.visitNode(t.value)},t.prototype.visitTryStatement=function(t){var i=this.sb;i.push("try {\n");for(var e=++this.indentLevel,r=t.statements,n=0,o=r.length;n<o;++n)s.indent(i,e),this.visitNodeAndTerminate(r[n]);var a=t.catchVariable;if(a){s.indent(i,e-1),i.push("} catch ("),this.visitIdentifierExpression(a),i.push(") {\n");var p=t.catchStatements;if(p)for(n=0,o=p.length;n<o;++n)s.indent(i,e),this.visitNodeAndTerminate(p[n])}var h=t.finallyStatements;if(h){s.indent(i,e-1),i.push("} finally {\n");for(n=0,o=h.length;n<o;++n)s.indent(i,e),this.visitNodeAndTerminate(h[n])}s.indent(i,e-1),i.push("}")},t.prototype.visitTypeDeclaration=function(t){var i=t.decorators;if(i)for(var e=0,s=i.length;e<s;++e)this.serializeDecorator(i[e]);var r=this.sb;this.serializeExternalModifiers(t),r.push("type "),this.visitIdentifierExpression(t.name);var n=t.typeParameters;if(n){var o=n.length;if(o){r.push("<");for(e=0;e<o;++e)this.visitTypeParameter(n[e]);r.push(">")}}r.push(" = "),this.visitTypeNode(t.type)},t.prototype.visitVariableDeclaration=function(t){this.visitIdentifierExpression(t.name);var i=t.type,e=this.sb;8192&t.flags&&e.push("!"),i&&(e.push(": "),this.visitTypeNode(i));var s=t.initializer;s&&(e.push(" = "),this.visitNode(s))},t.prototype.visitVariableStatement=function(t){var i=t.decorators;if(i)for(var e=0,s=i.length;e<s;++e)this.serializeDecorator(i[e]);var r=this.sb,n=t.declarations,o=assert(n.length),a=n[0];this.serializeExternalModifiers(a),r.push(a.is(8)?"const ":a.is(16)?"let ":"var "),this.visitVariableDeclaration(t.declarations[0]);for(e=1;e<o;++e)r.push(", "),this.visitVariableDeclaration(t.declarations[e])},t.prototype.visitWhileStatement=function(t){var i=this.sb;i.push("while ("),this.visitNode(t.condition),32==t.statement.kind?i.push(")"):(i.push(") "),this.visitNode(t.statement))},t.prototype.serializeDecorator=function(t){var i=this.sb;i.push("@"),this.visitNode(t.name);var e=t.arguments;if(e){i.push("(");var r=e.length;if(r){this.visitNode(e[0]);for(var n=1;n<r;++n)i.push(", "),this.visitNode(e[n])}i.push(")\n")}else i.push("\n");s.indent(i,this.indentLevel)},t.prototype.serializeParameter=function(t){var i=this.sb,e=t.parameterKind,s=t.implicitFieldDeclaration;s&&this.serializeAccessModifiers(s),e==n.ParameterKind.REST&&i.push("..."),this.visitIdentifierExpression(t.name);var r=t.type,o=t.initializer;r&&(e!=n.ParameterKind.OPTIONAL||o||i.push("?"),n.isTypeOmitted(r)||(i.push(": "),this.visitTypeNode(r))),o&&(i.push(" = "),this.visitNode(o))},t.prototype.serializeExternalModifiers=function(t){var i=this.sb;t.is(2)?i.push("export "):t.is(1)?i.push("import "):t.is(4)&&i.push("declare ")},t.prototype.serializeAccessModifiers=function(t){var i=this.sb;t.is(256)?i.push("public "):t.is(512)?i.push("private "):t.is(1024)&&i.push("protected "),t.is(32)?i.push("static "):t.is(128)&&i.push("abstract "),t.is(64)&&i.push("readonly ")},t.prototype.finish=function(){var t=this.sb.join("");return this.sb=[],t},t}();i.ASTBuilder=o},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s="  ",r="    ",n="        ";i.indent=function(t,i){for(;i>=4;)t.push(n),i-=4;i>=2&&(t.push(r),i-=2),i&&t.push(s)}},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),function(t){t[t.ABSTRACT=0]="ABSTRACT",t[t.AS=1]="AS",t[t.ASYNC=2]="ASYNC",t[t.AWAIT=3]="AWAIT",t[t.BREAK=4]="BREAK",t[t.CASE=5]="CASE",t[t.CATCH=6]="CATCH",t[t.CLASS=7]="CLASS",t[t.CONST=8]="CONST",t[t.CONTINUE=9]="CONTINUE",t[t.CONSTRUCTOR=10]="CONSTRUCTOR",t[t.DEBUGGER=11]="DEBUGGER",t[t.DECLARE=12]="DECLARE",t[t.DEFAULT=13]="DEFAULT",t[t.DELETE=14]="DELETE",t[t.DO=15]="DO",t[t.ELSE=16]="ELSE",t[t.ENUM=17]="ENUM",t[t.EXPORT=18]="EXPORT",t[t.EXTENDS=19]="EXTENDS",t[t.FALSE=20]="FALSE",t[t.FINALLY=21]="FINALLY",t[t.FOR=22]="FOR",t[t.FROM=23]="FROM",t[t.FUNCTION=24]="FUNCTION",t[t.GET=25]="GET",t[t.IF=26]="IF",t[t.IMPLEMENTS=27]="IMPLEMENTS",t[t.IMPORT=28]="IMPORT",t[t.IN=29]="IN",t[t.INSTANCEOF=30]="INSTANCEOF",t[t.INTERFACE=31]="INTERFACE",t[t.IS=32]="IS",t[t.KEYOF=33]="KEYOF",t[t.LET=34]="LET",t[t.MODULE=35]="MODULE",t[t.NAMESPACE=36]="NAMESPACE",t[t.NEW=37]="NEW",t[t.NULL=38]="NULL",t[t.OF=39]="OF",t[t.PACKAGE=40]="PACKAGE",t[t.PRIVATE=41]="PRIVATE",t[t.PROTECTED=42]="PROTECTED",t[t.PUBLIC=43]="PUBLIC",t[t.READONLY=44]="READONLY",t[t.RETURN=45]="RETURN",t[t.SET=46]="SET",t[t.STATIC=47]="STATIC",t[t.SUPER=48]="SUPER",t[t.SWITCH=49]="SWITCH",t[t.THIS=50]="THIS",t[t.THROW=51]="THROW",t[t.TRUE=52]="TRUE",t[t.TRY=53]="TRY",t[t.TYPE=54]="TYPE",t[t.TYPEOF=55]="TYPEOF",t[t.VAR=56]="VAR",t[t.VOID=57]="VOID",t[t.WHILE=58]="WHILE",t[t.WITH=59]="WITH",t[t.YIELD=60]="YIELD",t[t.OPENBRACE=61]="OPENBRACE",t[t.CLOSEBRACE=62]="CLOSEBRACE",t[t.OPENPAREN=63]="OPENPAREN",t[t.CLOSEPAREN=64]="CLOSEPAREN",t[t.OPENBRACKET=65]="OPENBRACKET",t[t.CLOSEBRACKET=66]="CLOSEBRACKET",t[t.DOT=67]="DOT",t[t.DOT_DOT_DOT=68]="DOT_DOT_DOT",t[t.SEMICOLON=69]="SEMICOLON",t[t.COMMA=70]="COMMA",t[t.LESSTHAN=71]="LESSTHAN",t[t.GREATERTHAN=72]="GREATERTHAN",t[t.LESSTHAN_EQUALS=73]="LESSTHAN_EQUALS",t[t.GREATERTHAN_EQUALS=74]="GREATERTHAN_EQUALS",t[t.EQUALS_EQUALS=75]="EQUALS_EQUALS",t[t.EXCLAMATION_EQUALS=76]="EXCLAMATION_EQUALS",t[t.EQUALS_EQUALS_EQUALS=77]="EQUALS_EQUALS_EQUALS",t[t.EXCLAMATION_EQUALS_EQUALS=78]="EXCLAMATION_EQUALS_EQUALS",t[t.EQUALS_GREATERTHAN=79]="EQUALS_GREATERTHAN",t[t.PLUS=80]="PLUS",t[t.MINUS=81]="MINUS",t[t.ASTERISK_ASTERISK=82]="ASTERISK_ASTERISK",t[t.ASTERISK=83]="ASTERISK",t[t.SLASH=84]="SLASH",t[t.PERCENT=85]="PERCENT",t[t.PLUS_PLUS=86]="PLUS_PLUS",t[t.MINUS_MINUS=87]="MINUS_MINUS",t[t.LESSTHAN_LESSTHAN=88]="LESSTHAN_LESSTHAN",t[t.GREATERTHAN_GREATERTHAN=89]="GREATERTHAN_GREATERTHAN",t[t.GREATERTHAN_GREATERTHAN_GREATERTHAN=90]="GREATERTHAN_GREATERTHAN_GREATERTHAN",t[t.AMPERSAND=91]="AMPERSAND",t[t.BAR=92]="BAR",t[t.CARET=93]="CARET",t[t.EXCLAMATION=94]="EXCLAMATION",t[t.TILDE=95]="TILDE",t[t.AMPERSAND_AMPERSAND=96]="AMPERSAND_AMPERSAND",t[t.BAR_BAR=97]="BAR_BAR",t[t.QUESTION=98]="QUESTION",t[t.COLON=99]="COLON",t[t.EQUALS=100]="EQUALS",t[t.PLUS_EQUALS=101]="PLUS_EQUALS",t[t.MINUS_EQUALS=102]="MINUS_EQUALS",t[t.ASTERISK_EQUALS=103]="ASTERISK_EQUALS",t[t.ASTERISK_ASTERISK_EQUALS=104]="ASTERISK_ASTERISK_EQUALS",t[t.SLASH_EQUALS=105]="SLASH_EQUALS",t[t.PERCENT_EQUALS=106]="PERCENT_EQUALS",t[t.LESSTHAN_LESSTHAN_EQUALS=107]="LESSTHAN_LESSTHAN_EQUALS",t[t.GREATERTHAN_GREATERTHAN_EQUALS=108]="GREATERTHAN_GREATERTHAN_EQUALS",t[t.GREATERTHAN_GREATERTHAN_GREATERTHAN_EQUALS=109]="GREATERTHAN_GREATERTHAN_GREATERTHAN_EQUALS",t[t.AMPERSAND_EQUALS=110]="AMPERSAND_EQUALS",t[t.BAR_EQUALS=111]="BAR_EQUALS",t[t.CARET_EQUALS=112]="CARET_EQUALS",t[t.AT=113]="AT",t[t.IDENTIFIER=114]="IDENTIFIER",t[t.STRINGLITERAL=115]="STRINGLITERAL",t[t.INTEGERLITERAL=116]="INTEGERLITERAL",t[t.FLOATLITERAL=117]="FLOATLITERAL",t[t.INVALID=118]="INVALID",t[t.ENDOFFILE=119]="ENDOFFILE"}(i.Token||(i.Token={})),i.operatorTokenToString=function(t){switch(t){case 14:return"delete";case 29:return"in";case 30:return"instanceof";case 37:return"new";case 55:return"typeof";case 57:return"void";case 60:return"yield";case 68:return"...";case 70:return",";case 71:return"<";case 72:return">";case 73:return"<=";case 74:return">=";case 75:return"==";case 76:return"!=";case 77:return"===";case 78:return"!==";case 80:return"+";case 81:return"-";case 82:return"**";case 83:return"*";case 84:return"/";case 85:return"%";case 86:return"++";case 87:return"--";case 88:return"<<";case 89:return">>";case 90:return">>>";case 91:return"&";case 92:return"|";case 93:return"^";case 94:return"!";case 95:return"~";case 96:return"&&";case 97:return"||";case 100:return"=";case 101:return"+=";case 102:return"-=";case 103:return"*=";case 104:return"**=";case 105:return"/=";case 106:return"%=";case 107:return"<<=";case 108:return">>=";case 109:return">>>=";case 110:return"&=";case 111:return"|=";case 112:return"^=";default:return assert(!1),""}}},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,i,e,s){this.parser=t,this.writeFile=i,this.baseDir=e,this.writer=s}return Object.defineProperty(t.prototype,"program",{get:function(){return this.parser.program},enumerable:!0,configurable:!0}),t}();i.Transformer=s},function(t,i,e){"use strict";var s,r=this&&this.__extends||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"__esModule",{value:!0});var n=e(1),o=e(6),a=e(0),p=e(4);function h(t){return t.text.includes("@nearfile")||c(t)}function u(t){return n.ASTBuilder.build(t)}function c(t){return(0==t.kind?t:t.range.source).sourceKind==a.SourceKind.USER_ENTRY}function v(t){return 47==t.kind}function E(t){return 50==t.kind}i.preamble='\nimport { JSONEncoder } from "assemblyscript-json";\n',i.isEntry=c;var l=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.typeMapping={i32:"Integer",u32:"Integer",i64:"String",u64:"String",string:"String",bool:"Boolean",Uint8Array:"String"},i.nonNullableTypes=["i32","u32","i64","u64","bool","boolean"],i.sb=[],i.exportedClasses=new Map,i.wrappedFuncs=new Set,i}return r(e,t),e.build=function(t,i){return(new e).build(i)},e.nearFiles=function(t){return t.program.sources.filter(h)},e.prototype.visitClassDeclaration=function(t){this.exportedClasses.has(u(t.name))||this.exportedClasses.set(u(t.name),t)},e.prototype.visitFunctionDeclaration=function(i){!c(i)||this.wrappedFuncs.has(u(i.name))||!i.is(2)||0==function(t){return t.signature.parameters.length}(i)&&function(t){return"void"===u(t.signature.returnType)}(i)?t.prototype.visitFunctionDeclaration.call(this,i):(this.generateWrapperFunction(i),i.flags=2^i.flags,this.wrappedFuncs.add(u(i.name)))},e.prototype.generateWrapperFunction=function(t){var i=t.signature,e=i.parameters,s=i.returnType,r=u(s).split("|").filter((function(t){return"null"!==t.trim()})).join("|"),n=u(s).includes("null"),o=t.name.symbol;this.sb.push("\n//@ts-ignore\nfunction __wrapper_"+o+"(): void {"),e.length>0&&this.sb.push(" const json = getInput();\n  read_register(0, <usize>json.buffer);\n  const obj: Obj = JSON.parse(json);"),"void"!==u(s)?this.sb.push("  let result: "+u(s)+" = "+o+"("):this.sb.push("  "+o+"("),e.length>0&&(this.sb[this.sb.length-1]+=e.map((function(t){return f(t)})).join(", ")),this.sb[this.sb.length-1]+=");","void"!==u(s)&&this.sb.push("\n  let encoder = new JSONEncoder();\n  let val: Uint8Array;\n  if ((isString<"+r+">() || isNullable<"+r+">()) && result == null) {\n    encoder.setNull(null);\n    val = encoder.serialize();\n  } else {\n    val = encode<"+r+">(result"+(n?"!":"")+", null, encoder);\n  }\n  value_return(val.byteLength, <usize>val.buffer);"),this.sb.push("}\n\nexport { __wrapper_"+o+" as "+o+" }\n")},e.prototype.typeName=function(t){if(!v(t))return n.ASTBuilder.build(t);var i=u((t=t).name);return t.isGeneric&&(i+="<"+t.typeParameters.map(u).join(", ")+">"),i},e.prototype.build=function(t){var e=this;this.sb=[i.preamble],this.visit(t);var s=t.statements.map((function(t){var i=n.ASTBuilder.build(t);if(v(t)){var s=t;if(i=i.slice(0,i.lastIndexOf("}")),s.members.filter(E).map((function(t){return t})).some((function(t){return null==t.type})))throw new Error("All Fields must have explict type declaration.");var r=e.typeName(s);i+="\n\n  decode<V = Uint8Array>(buf: V): "+r+' {\n    let json: Obj;\n    if (buf instanceof Uint8Array) {\n      json = JSON.parse(buf);\n    }else {\n      assert(buf instanceof Obj, "argument must be Uint8Array or Json Object");\n      json = <Obj> buf;\n    }\n    return this._decode(json);\n  }\n\n  private _decode(obj: Obj): '+r+" {\n    "+function(t){return t.members.filter(E).map((function(t){var i=u(t.name);return f(t,"this."+i+' = obj.has("'+i+'") ? ')+": this."+i+";"}))}(s).join("\n    ")+'\n    return this;\n  }\n\n  _encode(name: string | null = "", _encoder: JSONEncoder | null = null): JSONEncoder {\n    let encoder = (_encoder != null ? _encoder : new JSONEncoder())!;\n    encoder.pushObject(name);\n    '+function(t){return t.members.filter(E).map((function(t){var i=u(t.type),e=u(t.name);return"encode<"+i+", JSONEncoder>(this."+e+', "'+e+'", encoder);'}))}(s).join("\n    ")+"\n    encoder.popObject();\n    return encoder;\n  }\n  encode(): Uint8Array {\n    return this._encode().serialize();\n  }\n\n  serialize(): Uint8Array {\n    return this.encode();\n  }\n\n  toJSON(): string {\n    return this._encode().toString();\n  }\n}"}return i}));return this.sb.concat(s).join("\n")},e}(o.BaseVisitor);function f(t,i){return void 0===i&&(i=""),i+"decode<"+u(t.type)+', Obj>(obj, "'+u(t.name)+'")'}var d=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return r(i,t),i.prototype.afterParse=function(){var t=this.parser,i=this.writeFile,e=this.baseDir;l.nearFiles(t).forEach((function(s){var r=s.text.substr(0,s.text.indexOf("\n")).includes("out");t.donelog.delete(s.internalPath),t.seenlog.delete(s.internalPath),t.program.sources=t.program.sources.filter((function(t){return t!==s}));var n=l.build(t,s);r&&i("out/"+s.normalizedPath,n,e),t.parseFile(n,(c(s)?"":"./")+s.normalizedPath,c(s))}))},i}(p.Transformer);i.default=d},function(t,i,e){"use strict";var s,r=this&&this.__extends||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),n=this&&this.__values||function(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0});var o=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.depth=0,i}return r(i,t),i.prototype._visit=function(t){switch(t.kind){case 0:this.visitSource(t);break;case 1:this.visitNamedTypeNode(t);break;case 2:this.visitFunctionTypeNode(t);break;case 3:this.visitTypeName(t);case 4:this.visitTypeParameter(t);break;case 13:case 18:case 22:case 23:case 24:case 25:case 6:this.visitIdentifierExpression(t);break;case 7:this.visitAssertionExpression(t);break;case 8:this.visitBinaryExpression(t);break;case 9:this.visitCallExpression(t);break;case 10:this.visitClassExpression(t);break;case 11:this.visitCommaExpression(t);break;case 12:this.visitElementAccessExpression(t);break;case 14:this.visitFunctionExpression(t);break;case 15:this.visitInstanceOfExpression(t);break;case 16:this.visitLiteralExpression(t);break;case 17:this.visitNewExpression(t);break;case 19:this.visitParenthesizedExpression(t);break;case 20:this.visitPropertyAccessExpression(t);break;case 21:this.visitTernaryExpression(t);break;case 26:this.visitUnaryPostfixExpression(t);break;case 27:this.visitUnaryPrefixExpression(t);break;case 28:this.visitBlockStatement(t);break;case 29:this.visitBreakStatement(t);break;case 30:this.visitContinueStatement(t);break;case 31:this.visitDoStatement(t);break;case 32:this.visitEmptyStatement(t);break;case 33:this.visitExportStatement(t);break;case 34:this.visitExportDefaultStatement(t);break;case 35:this.visitExportImportStatement(t);break;case 36:this.visitExpressionStatement(t);break;case 37:this.visitForStatement(t);break;case 38:this.visitIfStatement(t);break;case 39:this.visitImportStatement(t);break;case 40:this.visitReturnStatement(t);break;case 41:this.visitSwitchStatement(t);break;case 42:this.visitThrowStatement(t);break;case 43:this.visitTryStatement(t);break;case 44:this.visitVariableStatement(t);break;case 46:this.visitWhileStatement(t);break;case 47:this.visitClassDeclaration(t);break;case 48:this.visitEnumDeclaration(t);break;case 49:this.visitEnumValueDeclaration(t);break;case 50:this.visitFieldDeclaration(t);break;case 51:this.visitFunctionDeclaration(t);break;case 52:this.visitImportDeclaration(t);break;case 53:this.visitIndexSignatureDeclaration(t);break;case 54:this.visitInterfaceDeclaration(t);break;case 55:this.visitMethodDeclaration(t);break;case 56:this.visitNamespaceDeclaration(t);break;case 57:this.visitTypeDeclaration(t);break;case 58:this.visitVariableDeclaration(t);break;case 59:this.visitDecoratorNode(t);break;case 60:this.visitExportMember(t);break;case 5:this.visitParameter(t);break;case 61:this.visitSwitchCase(t);break;default:assert(!1)}},i.prototype.visitSource=function(t){var i,e;try{for(var s=n(t.statements),r=s.next();!r.done;r=s.next()){var o=r.value;this.depth++,this.visit(o),this.depth--}}catch(t){i={error:t}}finally{try{r&&!r.done&&(e=s.return)&&e.call(s)}finally{if(i)throw i.error}}},i.prototype.visitTypeNode=function(t){},i.prototype.visitTypeName=function(t){this.visit(t.identifier),t.next&&this.visit(t)},i.prototype.visitNamedTypeNode=function(t){this.visit(t.name),this.visit(t.typeArguments)},i.prototype.visitFunctionTypeNode=function(t){var i,e;try{for(var s=n(t.parameters),r=s.next();!r.done;r=s.next()){var o=r.value;this.visit(o)}}catch(t){i={error:t}}finally{try{r&&!r.done&&(e=s.return)&&e.call(s)}finally{if(i)throw i.error}}this.visit(t.returnType)},i.prototype.visitTypeParameter=function(t){this.visit(t.name),t.extendsType&&this.visit(t.extendsType),t.defaultType&&this.visit(t.defaultType)},i.prototype.visitIdentifierExpression=function(t){},i.prototype.visitArrayLiteralExpression=function(t){var i=this;t.elementExpressions.map((function(t){t&&i.visit(t)}))},i.prototype.visitObjectLiteralExpression=function(t){if(t.values&&t.names){assert(t.values.length==t.names.length);for(var i=0;i<t.values.length;i++)this.visit(t.names[i]),this.visit(t.values[i])}},i.prototype.visitAssertionExpression=function(t){t.toType&&this.visit(t.toType),this.visit(t.expression)},i.prototype.visitBinaryExpression=function(t){this.visit(t.left),this.visit(t.right)},i.prototype.visitCallExpression=function(t){this.visit(t.expression),this.visit(t.typeArguments),this.visit(t.arguments)},i.prototype.visitClassExpression=function(t){this.visit(t.declaration)},i.prototype.visitCommaExpression=function(t){this.visit(t.expressions)},i.prototype.visitElementAccessExpression=function(t){this.visit(t.elementExpression),this.visit(t.expression)},i.prototype.visitFunctionExpression=function(t){this.visit(t.declaration)},i.prototype.visitLiteralExpression=function(t){},i.prototype.visitFloatLiteralExpression=function(t){},i.prototype.visitInstanceOfExpression=function(t){this.visit(t.expression),this.visit(t.isType)},i.prototype.visitIntegerLiteralExpression=function(t){},i.prototype.visitStringLiteral=function(t,i){},i.prototype.visitStringLiteralExpression=function(t){},i.prototype.visitRegexpLiteralExpression=function(t){},i.prototype.visitNewExpression=function(t){this.visit(t.expression),this.visit(t.typeArguments),this.visit(t.arguments)},i.prototype.visitParenthesizedExpression=function(t){this.visit(t.expression)},i.prototype.visitPropertyAccessExpression=function(t){this.visit(t.property),this.visit(t.expression)},i.prototype.visitTernaryExpression=function(t){this.visit(t.condition),this.visit(t.ifThen),this.visit(t.ifElse)},i.prototype.visitUnaryExpression=function(t){this.visit(t.operand)},i.prototype.visitUnaryPostfixExpression=function(t){this.visit(t.operand)},i.prototype.visitUnaryPrefixExpression=function(t){this.visit(t.operand)},i.prototype.visitSuperExpression=function(t){},i.prototype.visitFalseExpression=function(t){},i.prototype.visitTrueExpression=function(t){},i.prototype.visitThisExpression=function(t){},i.prototype.visitNullExperssion=function(t){},i.prototype.visitConstructorExpression=function(t){},i.prototype.visitNodeAndTerminate=function(t){},i.prototype.visitBlockStatement=function(t){this.depth++,this.visit(t.statements),this.depth--},i.prototype.visitBreakStatement=function(t){t.label&&this.visit(t.label)},i.prototype.visitContinueStatement=function(t){t.label&&this.visit(t.label)},i.prototype.visitClassDeclaration=function(t,i){this.visit(t.name),this.depth++,this.visit(t.decorators),assert(t.isGeneric?null!=t.typeParameters:null==t.typeParameters),t.isGeneric&&this.visit(t.typeParameters),t.extendsType&&this.visit(t.extendsType),this.visit(t.implementsTypes),this.visit(t.members),this.depth--},i.prototype.visitDoStatement=function(t){this.visit(t.condition),this.visit(t.statement)},i.prototype.visitEmptyStatement=function(t){},i.prototype.visitEnumDeclaration=function(t,i){this.visit(t.name),this.visit(t.decorators),this.visit(t.values)},i.prototype.visitEnumValueDeclaration=function(t){this.visit(t.name),t.initializer&&this.visit(t.initializer)},i.prototype.visitExportImportStatement=function(t){this.visit(t.name),this.visit(t.externalName)},i.prototype.visitExportMember=function(t){this.visit(t.localName),this.visit(t.exportedName)},i.prototype.visitExportStatement=function(t){t.path&&this.visit(t.path),this.visit(t.members)},i.prototype.visitExportDefaultStatement=function(t){this.visit(t.declaration)},i.prototype.visitExpressionStatement=function(t){this.visit(t.expression)},i.prototype.visitFieldDeclaration=function(t){this.visit(t.name),t.type&&this.visit(t.type),t.initializer&&this.visit(t.initializer),this.visit(t.decorators)},i.prototype.visitForStatement=function(t){t.initializer&&this.visit(t.initializer),t.condition&&this.visit(t.condition),t.incrementor&&this.visit(t.incrementor),this.visit(t.statement)},i.prototype.visitFunctionDeclaration=function(t,i){this.visit(t.name),this.visit(t.decorators),t.isGeneric&&this.visit(t.typeParameters),this.visit(t.signature),this.depth++,t.body&&this.visit(t.body),this.depth--},i.prototype.visitFunctionCommon=function(t){},i.prototype.visitIfStatement=function(t){this.visit(t.condition),this.visit(t.ifTrue),t.ifFalse&&this.visit(t.ifFalse)},i.prototype.visitImportDeclaration=function(t){this.visit(t.foreignName),this.visit(t.name),this.visit(t.decorators)},i.prototype.visitImportStatement=function(t){t.namespaceName&&this.visit(t.namespaceName),this.visit(t.declarations)},i.prototype.visitIndexSignatureDeclaration=function(t){},i.prototype.visitInterfaceDeclaration=function(t,i){this.visit(t.name),t.isGeneric&&this.visit(t.typeParameters),this.visit(t.implementsTypes),t.extendsType&&this.visit(t.extendsType),this.depth++,this.visit(t.members),this.depth--},i.prototype.visitMethodDeclaration=function(t){this.visit(t.name),t.isGeneric&&this.visit(t.typeParameters),this.visit(t.signature),this.visit(t.decorators),this.depth++,t.body&&this.visit(t.body),this.depth--},i.prototype.visitNamespaceDeclaration=function(t,i){this.visit(t.name),this.visit(t.decorators),this.visit(t.members)},i.prototype.visitReturnStatement=function(t){t.value&&this.visit(t.value)},i.prototype.visitSwitchCase=function(t){t.label&&this.visit(t.label),this.visit(t.statements)},i.prototype.visitSwitchStatement=function(t){this.visit(t.condition),this.depth++,this.visit(t.cases),this.depth--},i.prototype.visitThrowStatement=function(t){this.visit(t.value)},i.prototype.visitTryStatement=function(t){this.visit(t.statements),t.catchVariable&&this.visit(t.catchVariable),this.visit(t.catchStatements),this.visit(t.finallyStatements)},i.prototype.visitTypeDeclaration=function(t){this.visit(t.name),this.visit(t.decorators),this.visit(t.type),this.visit(t.typeParameters)},i.prototype.visitVariableDeclaration=function(t){this.visit(t.name),t.type&&this.visit(t.type),t.initializer&&this.visit(t.initializer)},i.prototype.visitVariableStatement=function(t){this.visit(t.decorators),this.visit(t.declarations)},i.prototype.visitWhileStatement=function(t){this.visit(t.condition),this.depth++,this.visit(t.statement),this.depth--},i.prototype.visitVoidStatement=function(t){},i.prototype.visitComment=function(t){},i.prototype.visitDecoratorNode=function(t){this.visit(t.name),this.visit(t.arguments)},i.prototype.visitParameter=function(t){this.visit(t.name),t.implicitFieldDeclaration&&this.visit(t.implicitFieldDeclaration),t.initializer&&this.visit(t.initializer),this.visit(t.type)},i}(e(7).AbstractVisitor);i.BaseVisitor=o},function(t,i,e){"use strict";var s=this&&this.__values||function(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},r=this&&this.__read||function(t,i){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var s,r,n=e.call(t),o=[];try{for(;(void 0===i||i-- >0)&&!(s=n.next()).done;)o.push(s.value)}catch(t){r={error:t}}finally{try{s&&!s.done&&(e=n.return)&&e.call(n)}finally{if(r)throw r.error}}return o};Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.visit=function(t){var i,e,n,o,a,p=this;if(null!=t)if(t instanceof Array)t.map((function(t){p.visit(t)}));else if(t instanceof Map)try{for(var h=s(t.entries()),u=h.next();!u.done;u=h.next()){var c=r(u.value,2),v=(c[0],c[1]);this.visit(v)}}catch(t){i={error:t}}finally{try{u&&!u.done&&(e=h.return)&&e.call(h)}finally{if(i)throw i.error}}else if(null!=(a=t)&&"function"==typeof a[Symbol.iterator])try{for(var E=s(t),l=E.next();!l.done;l=E.next()){v=l.value;this.visit(v)}}catch(t){n={error:t}}finally{try{l&&!l.done&&(o=E.return)&&o.call(E)}finally{if(n)throw n.error}}else this._visit(t)},t}();i.AbstractVisitor=n}])}));