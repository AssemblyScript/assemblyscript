!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("binaryen")):"function"==typeof define&&define.amd?define(["binaryen"],r):"object"==typeof exports?exports.assemblyscript=r(require("binaryen")):e.assemblyscript=r(e.binaryen)}("undefined"!=typeof self?self:this,(function(e){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)t.d(n,i,function(r){return e[r]}.bind(null,i));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=17)}([function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e){e[e.NONE=0]="NONE",e[e.IMPORT=1]="IMPORT",e[e.EXPORT=2]="EXPORT",e[e.DECLARE=4]="DECLARE",e[e.CONST=8]="CONST",e[e.LET=16]="LET",e[e.STATIC=32]="STATIC",e[e.READONLY=64]="READONLY",e[e.ABSTRACT=128]="ABSTRACT",e[e.PUBLIC=256]="PUBLIC",e[e.PRIVATE=512]="PRIVATE",e[e.PROTECTED=1024]="PROTECTED",e[e.GET=2048]="GET",e[e.SET=4096]="SET",e[e.DEFINITE_ASSIGNMENT=8192]="DEFINITE_ASSIGNMENT",e[e.AMBIENT=16384]="AMBIENT",e[e.GENERIC=32768]="GENERIC",e[e.GENERIC_CONTEXT=65536]="GENERIC_CONTEXT",e[e.INSTANCE=131072]="INSTANCE",e[e.CONSTRUCTOR=262144]="CONSTRUCTOR",e[e.MODULE_EXPORT=524288]="MODULE_EXPORT",e[e.MODULE_IMPORT=1048576]="MODULE_IMPORT",e[e.RESOLVED=2097152]="RESOLVED",e[e.COMPILED=4194304]="COMPILED",e[e.INLINED=8388608]="INLINED",e[e.SCOPED=16777216]="SCOPED",e[e.TRAMPOLINE=33554432]="TRAMPOLINE",e[e.VIRTUAL=67108864]="VIRTUAL",e[e.MAIN=134217728]="MAIN",e[e.QUOTED=268435456]="QUOTED"}(r.CommonFlags||(r.CommonFlags={})),r.PATH_DELIMITER="/",r.PARENT_SUBST="..",r.GETTER_PREFIX="get:",r.SETTER_PREFIX="set:",r.INSTANCE_DELIMITER="#",r.STATIC_DELIMITER=".",r.INNER_DELIMITER="~",r.LIBRARY_SUBST="~lib",r.LIBRARY_PREFIX=r.LIBRARY_SUBST+r.PATH_DELIMITER,r.INDEX_SUFFIX=r.PATH_DELIMITER+"index",function(e){e.EMPTY="",e.i8="i8",e.i16="i16",e.i32="i32",e.i64="i64",e.isize="isize",e.u8="u8",e.u16="u16",e.u32="u32",e.u64="u64",e.usize="usize",e.bool="bool",e.f32="f32",e.f64="f64",e.v128="v128",e.anyref="anyref",e.i8x16="i8x16",e.u8x16="u8x16",e.i16x8="i16x8",e.u16x8="u16x8",e.i32x4="i32x4",e.u32x4="u32x4",e.i64x2="i64x2",e.u64x2="u64x2",e.f32x4="f32x4",e.f64x2="f64x2",e.void_="void",e.number="number",e.boolean="boolean",e.string="string",e.native="native",e.indexof="indexof",e.valueof="valueof",e.returnof="returnof",e.null_="null",e.true_="true",e.false_="false",e.this_="this",e.super_="super",e.constructor="constructor",e.ASC_TARGET="ASC_TARGET",e.ASC_NO_TREESHAKING="ASC_NO_TREESHAKING",e.ASC_NO_ASSERT="ASC_NO_ASSERT",e.ASC_MEMORY_BASE="ASC_MEMORY_BASE",e.ASC_OPTIMIZE_LEVEL="ASC_OPTIMIZE_LEVEL",e.ASC_SHRINK_LEVEL="ASC_SHRINK_LEVEL",e.ASC_FEATURE_SIGN_EXTENSION="ASC_FEATURE_SIGN_EXTENSION",e.ASC_FEATURE_MUTABLE_GLOBALS="ASC_FEATURE_MUTABLE_GLOBALS",e.ASC_FEATURE_NONTRAPPING_F2I="ASC_FEATURE_NONTRAPPING_F2I",e.ASC_FEATURE_BULK_MEMORY="ASC_FEATURE_BULK_MEMORY",e.ASC_FEATURE_SIMD="ASC_FEATURE_SIMD",e.ASC_FEATURE_THREADS="ASC_FEATURE_THREADS",e.ASC_FEATURE_EXCEPTION_HANDLING="ASC_FEATURE_EXCEPTION_HANDLING",e.ASC_FEATURE_TAIL_CALLS="ASC_FEATURE_TAIL_CALLS",e.ASC_FEATURE_REFERENCE_TYPES="ASC_FEATURE_REFERENCE_TYPES",e.I8="I8",e.I16="I16",e.I32="I32",e.I64="I64",e.Isize="Isize",e.U8="U8",e.U16="U16",e.U32="U32",e.U64="U64",e.Usize="Usize",e.Bool="Bool",e.F32="F32",e.F64="F64",e.V128="V128",e.Anyref="Anyref",e.String="String",e.Array="Array",e.FixedArray="FixedArray",e.Set="Set",e.Map="Map",e.ArrayBufferView="ArrayBufferView",e.ArrayBuffer="ArrayBuffer",e.Math="Math",e.Mathf="Mathf",e.Int8Array="Int8Array",e.Int16Array="Int16Array",e.Int32Array="Int32Array",e.Int64Array="Int64Array",e.Uint8Array="Uint8Array",e.Uint8ClampedArray="Uint8ClampedArray",e.Uint16Array="Uint16Array",e.Uint32Array="Uint32Array",e.Uint64Array="Uint64Array",e.Float32Array="Float32Array",e.Float64Array="Float64Array",e.abort="abort",e.pow="pow",e.mod="mod",e.alloc="__alloc",e.realloc="__realloc",e.free="__free",e.retain="__retain",e.release="__release",e.collect="__collect",e.typeinfo="__typeinfo",e.instanceof_="__instanceof",e.visit="__visit",e.allocArray="__allocArray"}(r.CommonSymbols||(r.CommonSymbols={}));var n=t(25);r.Feature=n.Feature,r.featureToString=n.featureToString;var i=t(26);r.Target=i.Target;var a=t(27);r.Typeinfo=a.Typeinfo,r.TypeinfoFlags=a.TypeinfoFlags},function(e,r,t){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}Object.defineProperty(r,"__esModule",{value:!0}),n(t(29)),n(t(30)),n(t(31)),n(t(32)),n(t(33)),n(t(34)),r.isPowerOf2=function(e){return 0!=e&&0==(e&e-1)}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,i=t(12),a=t(1),s=t(12);function o(e){switch(e){case n.INFO:return"INFO";case n.WARNING:return"WARNING";case n.ERROR:return"ERROR";default:return assert(!1),""}}function l(e){switch(e){case n.INFO:return r.COLOR_BLUE;case n.WARNING:return r.COLOR_YELLOW;case n.ERROR:return r.COLOR_RED;default:return assert(!1),""}}r.DiagnosticCode=s.DiagnosticCode,r.diagnosticCodeToString=s.diagnosticCodeToString,function(e){e[e.INFO=0]="INFO",e[e.WARNING=1]="WARNING",e[e.ERROR=2]="ERROR"}(n=r.DiagnosticCategory||(r.DiagnosticCategory={})),r.diagnosticCategoryToString=o,r.COLOR_BLUE="[96m",r.COLOR_YELLOW="[93m",r.COLOR_RED="[91m",r.COLOR_RESET="[0m",r.diagnosticCategoryToColor=l;var c=function(){function e(e,r,t){this.range=null,this.relatedRange=null,this.code=e,this.category=r,this.message=t}return e.create=function(r,t,n,a,s){void 0===n&&(n=null),void 0===a&&(a=null),void 0===s&&(s=null);var o=i.diagnosticCodeToString(r);return null!=n&&(o=o.replace("{0}",n)),null!=a&&(o=o.replace("{1}",a)),null!=s&&(o=o.replace("{2}",s)),new e(r,t,o)},e.createInfo=function(r,t,i){return void 0===t&&(t=null),void 0===i&&(i=null),e.create(r,n.INFO,t,i)},e.createWarning=function(r,t,i){return void 0===t&&(t=null),void 0===i&&(i=null),e.create(r,n.WARNING,t,i)},e.createError=function(r,t,i){return void 0===t&&(t=null),void 0===i&&(i=null),e.create(r,n.ERROR,t,i)},e.prototype.withRange=function(e){return this.range=e,this},e.prototype.withRelatedRange=function(e){return this.relatedRange=e,this},e.prototype.toString=function(){return this.range?o(this.category)+" "+this.code.toString(10)+': "'+this.message+'" in '+this.range.source.normalizedPath+":"+this.range.line.toString(10)+":"+this.range.column.toString(10):o(this.category)+" "+this.code.toString(10)+": "+this.message},e}();function u(e,t){void 0===t&&(t=!1);for(var n=e.source.text,i=n.length,s=e.start,o=e.end;s>0&&!a.isLineBreak(n.charCodeAt(s-1));)s--;for(;o<i&&!a.isLineBreak(n.charCodeAt(o));)o++;for(var l=["\n ",n.substring(s,o),"\n "];s<e.start;)l.push(" "),s++;if(t&&l.push(r.COLOR_RED),e.start==e.end)l.push("^");else for(;s++<e.end;){if(a.isLineBreak(n.charCodeAt(s))){l.push(s==e.start+1?"^":"~");break}l.push("~")}return t&&l.push(r.COLOR_RESET),l.join("")}r.DiagnosticMessage=c,r.formatDiagnosticMessage=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var i=[];if(t&&i.push(l(e.category)),i.push(o(e.category)),t&&i.push(r.COLOR_RESET),i.push(e.code<1e3?" AS":" TS"),i.push(e.code.toString(10)),i.push(": "),i.push(e.message),e.range){var a=e.range;n&&(i.push("\n"),i.push(u(a,t))),i.push("\n"),i.push(" in "),i.push(a.source.normalizedPath),i.push("("),i.push(a.line.toString(10)),i.push(","),i.push(a.column.toString(10)),i.push(")");var s=e.relatedRange;s&&(n&&(i.push("\n"),i.push(u(s,t))),i.push("\n"),i.push(" in "),i.push(s.source.normalizedPath),i.push("("),i.push(s.line.toString(10)),i.push(","),i.push(s.column.toString(10)),i.push(")"))}return i.join("")},r.formatDiagnosticContext=u;var p=function(){function e(e){void 0===e&&(e=null),this.diagnostics=e||new Array}return e.prototype.emitDiagnostic=function(e,r,t,n,i,a,s){void 0===i&&(i=null),void 0===a&&(a=null),void 0===s&&(s=null);var o=c.create(e,r,i,a,s).withRange(t);n&&(o.relatedRange=n),this.diagnostics.push(o)},e.prototype.info=function(e,r,t,i,a){void 0===t&&(t=null),void 0===i&&(i=null),void 0===a&&(a=null),this.emitDiagnostic(e,n.INFO,r,null,t,i,a)},e.prototype.infoRelated=function(e,r,t,i,a,s){void 0===i&&(i=null),void 0===a&&(a=null),void 0===s&&(s=null),this.emitDiagnostic(e,n.INFO,r,t,i,a,s)},e.prototype.warning=function(e,r,t,i,a){void 0===t&&(t=null),void 0===i&&(i=null),void 0===a&&(a=null),this.emitDiagnostic(e,n.WARNING,r,null,t,i,a)},e.prototype.warningRelated=function(e,r,t,i,a,s){void 0===i&&(i=null),void 0===a&&(a=null),void 0===s&&(s=null),this.emitDiagnostic(e,n.WARNING,r,t,i,a,s)},e.prototype.error=function(e,r,t,i,a){void 0===t&&(t=null),void 0===i&&(i=null),void 0===a&&(a=null),this.emitDiagnostic(e,n.ERROR,r,null,t,i,a)},e.prototype.errorRelated=function(e,r,t,i,a,s){void 0===i&&(i=null),void 0===a&&(a=null),void 0===s&&(s=null),this.emitDiagnostic(e,n.ERROR,r,t,i,a,s)},e}();r.DiagnosticEmitter=p},function(e,r,t){"use strict";var n,i=this&&this.__extends||(n=function(e,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(e,r)},function(e,r){function t(){this.constructor=e}n(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)});Object.defineProperty(r,"__esModule",{value:!0});var a=t(0),s=t(7);r.Token=s.Token,r.Range=s.Range;var o,l=t(1);!function(e){e[e.SOURCE=0]="SOURCE",e[e.NAMEDTYPE=1]="NAMEDTYPE",e[e.FUNCTIONTYPE=2]="FUNCTIONTYPE",e[e.TYPENAME=3]="TYPENAME",e[e.TYPEPARAMETER=4]="TYPEPARAMETER",e[e.PARAMETER=5]="PARAMETER",e[e.IDENTIFIER=6]="IDENTIFIER",e[e.ASSERTION=7]="ASSERTION",e[e.BINARY=8]="BINARY",e[e.CALL=9]="CALL",e[e.CLASS=10]="CLASS",e[e.COMMA=11]="COMMA",e[e.ELEMENTACCESS=12]="ELEMENTACCESS",e[e.FALSE=13]="FALSE",e[e.FUNCTION=14]="FUNCTION",e[e.INSTANCEOF=15]="INSTANCEOF",e[e.LITERAL=16]="LITERAL",e[e.NEW=17]="NEW",e[e.NULL=18]="NULL",e[e.PARENTHESIZED=19]="PARENTHESIZED",e[e.PROPERTYACCESS=20]="PROPERTYACCESS",e[e.TERNARY=21]="TERNARY",e[e.SUPER=22]="SUPER",e[e.THIS=23]="THIS",e[e.TRUE=24]="TRUE",e[e.CONSTRUCTOR=25]="CONSTRUCTOR",e[e.UNARYPOSTFIX=26]="UNARYPOSTFIX",e[e.UNARYPREFIX=27]="UNARYPREFIX",e[e.BLOCK=28]="BLOCK",e[e.BREAK=29]="BREAK",e[e.CONTINUE=30]="CONTINUE",e[e.DO=31]="DO",e[e.EMPTY=32]="EMPTY",e[e.EXPORT=33]="EXPORT",e[e.EXPORTDEFAULT=34]="EXPORTDEFAULT",e[e.EXPORTIMPORT=35]="EXPORTIMPORT",e[e.EXPRESSION=36]="EXPRESSION",e[e.FOR=37]="FOR",e[e.IF=38]="IF",e[e.IMPORT=39]="IMPORT",e[e.RETURN=40]="RETURN",e[e.SWITCH=41]="SWITCH",e[e.THROW=42]="THROW",e[e.TRY=43]="TRY",e[e.VARIABLE=44]="VARIABLE",e[e.VOID=45]="VOID",e[e.WHILE=46]="WHILE",e[e.CLASSDECLARATION=47]="CLASSDECLARATION",e[e.ENUMDECLARATION=48]="ENUMDECLARATION",e[e.ENUMVALUEDECLARATION=49]="ENUMVALUEDECLARATION",e[e.FIELDDECLARATION=50]="FIELDDECLARATION",e[e.FUNCTIONDECLARATION=51]="FUNCTIONDECLARATION",e[e.IMPORTDECLARATION=52]="IMPORTDECLARATION",e[e.INDEXSIGNATUREDECLARATION=53]="INDEXSIGNATUREDECLARATION",e[e.INTERFACEDECLARATION=54]="INTERFACEDECLARATION",e[e.METHODDECLARATION=55]="METHODDECLARATION",e[e.NAMESPACEDECLARATION=56]="NAMESPACEDECLARATION",e[e.TYPEDECLARATION=57]="TYPEDECLARATION",e[e.VARIABLEDECLARATION=58]="VARIABLEDECLARATION",e[e.DECORATOR=59]="DECORATOR",e[e.EXPORTMEMBER=60]="EXPORTMEMBER",e[e.SWITCHCASE=61]="SWITCHCASE",e[e.COMMENT=62]="COMMENT"}(o=r.NodeKind||(r.NodeKind={})),r.nodeIsConstantValue=function(e){switch(e){case o.LITERAL:case o.NULL:case o.TRUE:case o.FALSE:return!0}return!1},r.nodeIsCallable=function(e){switch(e){case o.IDENTIFIER:case o.ASSERTION:case o.CALL:case o.ELEMENTACCESS:case o.PARENTHESIZED:case o.PROPERTYACCESS:case o.SUPER:return!0}return!1},r.nodeIsGenericCallable=function(e){switch(e){case o.IDENTIFIER:case o.PROPERTYACCESS:return!0}return!1};var c=function(){function e(){}return e.createTypeName=function(e,r){var t=new p;return t.range=r,t.identifier=e,t.next=null,t},e.createSimpleTypeName=function(r,t){return e.createTypeName(e.createIdentifierExpression(r,t),t)},e.createNamedType=function(e,r,t,n){var i=new _;return i.range=n,i.name=e,i.typeArguments=r,i.isNullable=t,i},e.createFunctionType=function(e,r,t,n,i){var a=new h;return a.range=i,a.parameters=e,a.returnType=r,a.explicitThisType=t,a.isNullable=n,a},e.createOmittedType=function(r){return e.createNamedType(e.createSimpleTypeName("",r),null,!1,r)},e.createTypeParameter=function(e,r,t,n){var i=new d;return i.range=n,i.name=e,i.extendsType=r,i.defaultType=t,i},e.createParameter=function(e,r,t,n,i){var a=new T;return a.range=i,a.name=e,a.type=r,a.initializer=t,a.parameterKind=n,a},e.createDecorator=function(e,r,t){var n=new m;return n.range=t,n.name=e,n.arguments=r,n.decoratorKind=y.fromNode(e),n},e.createComment=function(e,r,t){var n=new f;return n.range=t,n.commentKind=r,n.text=e,n},e.createIdentifierExpression=function(e,r,t){void 0===t&&(t=!1);var n=new v;return n.range=r,n.text=e,n.symbol=e,n.isQuoted=t,n},e.createEmptyIdentifierExpression=function(e){var r=new v;return r.range=e,r.text="",r},e.createArrayLiteralExpression=function(e,r){var t=new I;return t.range=r,t.elementExpressions=e,t},e.createAssertionExpression=function(e,r,t,n){var i=new x;return i.range=n,i.assertionKind=e,i.expression=r,i.toType=t,i},e.createBinaryExpression=function(e,r,t,n){var i=new A;return i.range=n,i.operator=e,i.left=r,i.right=t,i},e.createCallExpression=function(e,r,t,n){var i=new N;return i.range=n,i.expression=e,i.typeArguments=r,i.arguments=t,i},e.createClassExpression=function(e){var r=new S;return r.range=e.range,r.declaration=e,r},e.createCommaExpression=function(e,r){var t=new O;return t.range=r,t.expressions=e,t},e.createConstructorExpression=function(e){var r=new C;return r.range=e,r},e.createElementAccessExpression=function(e,r,t){var n=new R;return n.range=t,n.expression=e,n.elementExpression=r,n},e.createFalseExpression=function(e){var r=new W;return r.range=e,r},e.createFloatLiteralExpression=function(e,r){var t=new L;return t.range=r,t.value=e,t},e.createFunctionExpression=function(e){var r=new k;return r.range=e.range,r.declaration=e,r},e.createInstanceOfExpression=function(e,r,t){var n=new F;return n.range=t,n.expression=e,n.isType=r,n},e.createIntegerLiteralExpression=function(e,r){var t=new D;return t.range=r,t.value=e,t},e.createNewExpression=function(e,r,t,n){var i=new B;return i.range=n,i.expression=e,i.typeArguments=r,i.arguments=t,i},e.createNullExpression=function(e){var r=new P;return r.range=e,r},e.createObjectLiteralExpression=function(e,r,t){var n=new w;return n.range=t,n.names=e,n.values=r,n},e.createParenthesizedExpression=function(e,r){var t=new U;return t.range=r,t.expression=e,t},e.createPropertyAccessExpression=function(e,r,t){var n=new M;return n.range=t,n.expression=e,n.property=r,n},e.createRegexpLiteralExpression=function(e,r,t){var n=new G;return n.range=t,n.pattern=e,n.patternFlags=r,n},e.createTernaryExpression=function(e,r,t,n){var i=new V;return i.range=n,i.condition=e,i.ifThen=r,i.ifElse=t,i},e.createStringLiteralExpression=function(e,r){var t=new K;return t.range=r,t.value=e,t},e.createSuperExpression=function(e){var r=new z;return r.range=e,r},e.createThisExpression=function(e){var r=new Y;return r.range=e,r},e.createTrueExpression=function(e){var r=new H;return r.range=e,r},e.createUnaryPostfixExpression=function(e,r,t){var n=new q;return n.range=t,n.operator=e,n.operand=r,n},e.createUnaryPrefixExpression=function(e,r,t){var n=new Q;return n.range=t,n.operator=e,n.operand=r,n},e.createBlockStatement=function(e,r){var t=new te;return t.range=r,t.statements=e,t},e.createBreakStatement=function(e,r){var t=new ne;return t.range=r,t.label=e,t},e.createClassDeclaration=function(e,r,t,n,i,a,s,o){var l=new ie;return l.range=o,l.flags=s,l.name=e,l.typeParameters=r,l.extendsType=t,l.implementsTypes=n,l.members=i,l.decorators=a,l},e.createContinueStatement=function(e,r){var t=new ae;return t.range=r,t.label=e,t},e.createDoStatement=function(e,r,t){var n=new se;return n.range=t,n.statement=e,n.condition=r,n},e.createEmptyStatement=function(e){var r=new oe;return r.range=e,r},e.createEnumDeclaration=function(e,r,t,n,i){var a=new le;return a.range=i,a.flags=n,a.name=e,a.values=r,a.decorators=t,a},e.createEnumValueDeclaration=function(e,r,t,n){var i=new ce;return i.range=n,i.flags=t,i.name=e,i.value=r,i},e.createExportStatement=function(e,r,t,n){var i=new _e;if(i.range=n,i.members=e,i.path=r,r){var s=l.normalizePath(r.value);r.value.startsWith(".")?s=l.resolvePath(s,n.source.internalPath):s.startsWith(a.LIBRARY_PREFIX)||(s=a.LIBRARY_PREFIX+s),i.internalPath=De(s)}else i.internalPath=null;return i.isDeclare=t,i},e.createExportDefaultStatement=function(e,r){var t=new he;return t.declaration=e,t.range=r,t},e.createExportImportStatement=function(e,r,t){var n=new ue;return n.range=t,n.name=e,n.externalName=r,n},e.createExportMember=function(e,r,t){var n=new pe;return n.range=t,n.localName=e,r||(r=e),n.exportedName=r,n},e.createExpressionStatement=function(e){var r=new de;return r.range=e.range,r.expression=e,r},e.createIfStatement=function(e,r,t,n){var i=new fe;return i.range=n,i.condition=e,i.ifTrue=r,i.ifFalse=t,i},e.createImportStatement=function(e,r,t){var n=new Ee;n.range=t,n.declarations=e,n.namespaceName=null,n.path=r;var i=l.normalizePath(r.value);return r.value.startsWith(".")?i=l.resolvePath(i,t.source.internalPath):i.startsWith(a.LIBRARY_PREFIX)||(i=a.LIBRARY_PREFIX+i),n.internalPath=De(i),n},e.createImportStatementWithWildcard=function(e,r,t){var n=new Ee;n.range=t,n.declarations=null,n.namespaceName=e,n.path=r;var i=l.normalizePath(r.value);return r.value.startsWith(".")?i=l.resolvePath(i,t.source.internalPath):i.startsWith(a.LIBRARY_PREFIX)||(i=a.LIBRARY_PREFIX+i),n.internalPath=De(i),n},e.createImportDeclaration=function(e,r,t){var n=new ge;return n.range=t,n.foreignName=e,r||(r=e),n.name=r,n},e.createInterfaceDeclaration=function(e,r,t,n,i,a,s){var o=new ve;return o.range=s,o.flags=a,o.name=e,o.typeParameters=r,o.extendsType=t,o.members=n,o.decorators=i,o},e.createFieldDeclaration=function(e,r,t,n,i,a){var s=new ye;return s.range=a,s.flags=i,s.name=e,s.type=r,s.initializer=t,s.decorators=n,s},e.createForStatement=function(e,r,t,n,i){var a=new Te;return a.range=i,a.initializer=e,a.condition=r,a.incrementor=t,a.statement=n,a},e.createFunctionDeclaration=function(e,r,t,n,i,a,s,o){var l=new me;return l.range=o,l.flags=a,l.name=e,l.typeParameters=r,l.signature=t,l.body=n,l.decorators=i,l.arrowKind=s,l},e.createIndexSignatureDeclaration=function(e,r,t){var n=new ee;return n.range=t,n.keyType=e,n.valueType=r,n},e.createMethodDeclaration=function(e,r,t,n,i,a,s){var o=new be;return o.range=s,o.flags=a,o.name=e,o.typeParameters=r,o.signature=t,o.body=n,o.decorators=i,o},e.createNamespaceDeclaration=function(e,r,t,n,i){var a=new Ie;return a.range=i,a.flags=n,a.name=e,a.members=r,a.decorators=t,a},e.createReturnStatement=function(e,r){var t=new xe;return t.range=r,t.value=e,t},e.createSwitchStatement=function(e,r,t){var n=new Ne;return n.range=t,n.condition=e,n.cases=r,n},e.createSwitchCase=function(e,r,t){var n=new Ae;return n.range=t,n.label=e,n.statements=r,n},e.createThrowStatement=function(e,r){var t=new Se;return t.range=r,t.value=e,t},e.createTryStatement=function(e,r,t,n,i){var a=new Oe;return a.range=i,a.statements=e,a.catchVariable=r,a.catchStatements=t,a.finallyStatements=n,a},e.createTypeDeclaration=function(e,r,t,n,i,a){var s=new Ce;return s.range=a,s.flags=i,s.name=e,s.typeParameters=r,s.type=t,s.decorators=n,s},e.createVariableStatement=function(e,r,t){var n=new Le;return n.range=t,n.declarations=e,n.decorators=r,n},e.createVariableDeclaration=function(e,r,t,n,i,a){var s=new Re;return s.range=a,s.flags=i,s.name=e,s.type=r,s.initializer=t,s.decorators=n,s},e.createVoidStatement=function(e,r){var t=new ke;return t.range=r,t.expression=e,t},e.createWhileStatement=function(e,r,t){var n=new Fe;return n.range=t,n.condition=e,n.statement=r,n},e}();r.Node=c;var u=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return i(r,e),r.prototype.hasGenericComponent=function(e){if(this.kind==o.NAMEDTYPE){if(!this.name.next){var r=this.typeArguments;if(null!==r&&r.length){for(var t=0,n=r.length;t<n;++t)if(r[t].hasGenericComponent(e))return!0}else{var i=this.name.identifier.text;for(t=0,n=e.length;t<n;++t)if(e[t].name.text==i)return!0}}}else if(this.kind==o.FUNCTIONTYPE){var a=this.parameters;for(t=0,n=a.length;t<n;++t)if(a[t].type.hasGenericComponent(e))return!0;if(this.returnType.hasGenericComponent(e))return!0;var s=this.explicitThisType;if(null!==s&&s.hasGenericComponent(e))return!0}else assert(!1);return!1},r}(c);r.TypeNode=u;var p=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.TYPENAME,r}return i(r,e),r}(c);r.TypeName=p;var _=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.NAMEDTYPE,r}return i(r,e),r}(u);r.NamedTypeNode=_;var h=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.FUNCTIONTYPE,r}return i(r,e),r}(u);r.FunctionTypeNode=h;var d=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.TYPEPARAMETER,r}return i(r,e),r}(c);r.TypeParameterNode=d,function(e){e[e.DEFAULT=0]="DEFAULT",e[e.OPTIONAL=1]="OPTIONAL",e[e.REST=2]="REST"}(r.ParameterKind||(r.ParameterKind={}));var y,T=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.PARAMETER,r.implicitFieldDeclaration=null,r.flags=a.CommonFlags.NONE,r}return i(r,e),r.prototype.is=function(e){return(this.flags&e)==e},r.prototype.isAny=function(e){return 0!=(this.flags&e)},r.prototype.set=function(e){this.flags|=e},r}(c);r.ParameterNode=T,function(e){e[e.CUSTOM=0]="CUSTOM",e[e.GLOBAL=1]="GLOBAL",e[e.OPERATOR=2]="OPERATOR",e[e.OPERATOR_BINARY=3]="OPERATOR_BINARY",e[e.OPERATOR_PREFIX=4]="OPERATOR_PREFIX",e[e.OPERATOR_POSTFIX=5]="OPERATOR_POSTFIX",e[e.UNMANAGED=6]="UNMANAGED",e[e.SEALED=7]="SEALED",e[e.INLINE=8]="INLINE",e[e.EXTERNAL=9]="EXTERNAL",e[e.BUILTIN=10]="BUILTIN",e[e.LAZY=11]="LAZY",e[e.UNSAFE=12]="UNSAFE"}(y=r.DecoratorKind||(r.DecoratorKind={})),function(e){e.fromNode=function(r){if(r.kind==o.IDENTIFIER){var t=r.text;switch(assert(t.length),t.charCodeAt(0)){case 98:if("builtin"==t)return e.BUILTIN;break;case 101:if("external"==t)return e.EXTERNAL;break;case 103:if("global"==t)return e.GLOBAL;break;case 105:if("inline"==t)return e.INLINE;break;case 108:if("lazy"==t)return e.LAZY;break;case 111:if("operator"==t)return e.OPERATOR;break;case 115:if("sealed"==t)return e.SEALED;break;case 117:if("unmanaged"==t)return e.UNMANAGED;if("unsafe"==t)return e.UNSAFE}}else if(r.kind==o.PROPERTYACCESS&&r.expression.kind==o.IDENTIFIER){t=r.expression.text;assert(t.length);var n=r.property.text;if(assert(n.length),"operator"==t)switch(n.charCodeAt(0)){case 98:if("binary"==n)return e.OPERATOR_BINARY;break;case 112:switch(n){case"prefix":return e.OPERATOR_PREFIX;case"postfix":return e.OPERATOR_POSTFIX}}}return e.CUSTOM}}(y=r.DecoratorKind||(r.DecoratorKind={}));var m=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.DECORATOR,r}return i(r,e),r}(c);r.DecoratorNode=m,function(e){e[e.LINE=0]="LINE",e[e.TRIPLE=1]="TRIPLE",e[e.BLOCK=2]="BLOCK"}(r.CommentKind||(r.CommentKind={}));var f=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.COMMENT,r}return i(r,e),r}(c);r.CommentNode=f;var g=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return i(r,e),r}(c);r.Expression=g;var E,v=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.IDENTIFIER,r}return i(r,e),r}(g);r.IdentifierExpression=v,function(e){e[e.FLOAT=0]="FLOAT",e[e.INTEGER=1]="INTEGER",e[e.STRING=2]="STRING",e[e.REGEXP=3]="REGEXP",e[e.ARRAY=4]="ARRAY",e[e.OBJECT=5]="OBJECT"}(E=r.LiteralKind||(r.LiteralKind={})),r.isNumericLiteral=function(e){if(e.kind==o.LITERAL)switch(e.literalKind){case E.FLOAT:case E.INTEGER:return!0}return!1};var b=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.LITERAL,r}return i(r,e),r}(g);r.LiteralExpression=b;var I=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.literalKind=E.ARRAY,r}return i(r,e),r}(b);r.ArrayLiteralExpression=I,function(e){e[e.PREFIX=0]="PREFIX",e[e.AS=1]="AS",e[e.NONNULL=2]="NONNULL"}(r.AssertionKind||(r.AssertionKind={}));var x=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.ASSERTION,r}return i(r,e),r}(g);r.AssertionExpression=x;var A=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.BINARY,r}return i(r,e),r}(g);r.BinaryExpression=A;var N=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.CALL,r}return i(r,e),Object.defineProperty(r.prototype,"typeArgumentsRange",{get:function(){var e,r=this.typeArguments;return r&&(e=r.length)?s.Range.join(r[0].range,r[e-1].range):this.expression.range},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"argumentsRange",{get:function(){var e=this.arguments,r=e.length;return r?s.Range.join(e[0].range,e[r-1].range):this.expression.range},enumerable:!0,configurable:!0}),r}(g);r.CallExpression=N;var S=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.CLASS,r}return i(r,e),r}(g);r.ClassExpression=S;var O=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.COMMA,r}return i(r,e),r}(g);r.CommaExpression=O;var C=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.CONSTRUCTOR,r.text="constructor",r.symbol=a.CommonSymbols.constructor,r}return i(r,e),r}(v);r.ConstructorExpression=C;var R=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.ELEMENTACCESS,r}return i(r,e),r}(g);r.ElementAccessExpression=R;var L=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.literalKind=E.FLOAT,r}return i(r,e),r}(b);r.FloatLiteralExpression=L;var k=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.FUNCTION,r}return i(r,e),r}(g);r.FunctionExpression=k;var F=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.INSTANCEOF,r}return i(r,e),r}(g);r.InstanceOfExpression=F;var D=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.literalKind=E.INTEGER,r}return i(r,e),r}(b);r.IntegerLiteralExpression=D;var B=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.NEW,r}return i(r,e),r}(N);r.NewExpression=B;var P=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.NULL,r.text="null",r.symbol=a.CommonSymbols.null_,r}return i(r,e),r}(v);r.NullExpression=P;var w=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.literalKind=E.OBJECT,r}return i(r,e),r}(b);r.ObjectLiteralExpression=w;var U=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.PARENTHESIZED,r}return i(r,e),r}(g);r.ParenthesizedExpression=U;var M=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.PROPERTYACCESS,r}return i(r,e),r}(g);r.PropertyAccessExpression=M;var G=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.literalKind=E.REGEXP,r}return i(r,e),r}(b);r.RegexpLiteralExpression=G;var V=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.TERNARY,r}return i(r,e),r}(g);r.TernaryExpression=V;var K=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.literalKind=E.STRING,r}return i(r,e),r}(b);r.StringLiteralExpression=K;var z=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.SUPER,r.text="super",r.symbol=a.CommonSymbols.super_,r}return i(r,e),r}(v);r.SuperExpression=z;var Y=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.THIS,r.text="this",r.symbol=a.CommonSymbols.this_,r}return i(r,e),r}(v);r.ThisExpression=Y;var H=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.TRUE,r.text="true",r.symbol=a.CommonSymbols.true_,r}return i(r,e),r}(v);r.TrueExpression=H;var W=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.FALSE,r.text="false",r.symbol=a.CommonSymbols.false_,r}return i(r,e),r}(v);r.FalseExpression=W;var X=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return i(r,e),r}(g);r.UnaryExpression=X;var q=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.UNARYPOSTFIX,r}return i(r,e),r}(X);r.UnaryPostfixExpression=q;var Q=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.UNARYPREFIX,r}return i(r,e),r}(X);r.UnaryPrefixExpression=Q;var j,Z=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return i(r,e),r}(c);r.Statement=Z,function(e){e[e.USER=0]="USER",e[e.USER_ENTRY=1]="USER_ENTRY",e[e.LIBRARY=2]="LIBRARY",e[e.LIBRARY_ENTRY=3]="LIBRARY_ENTRY"}(j=r.SourceKind||(r.SourceKind={}));var J=function(e){function r(r,t,n){var i=e.call(this)||this;i.kind=o.SOURCE,i.parent=null,i.tokenizer=null,i.debugInfoIndex=-1,i.exportPaths=null,i.sourceKind=n,i.normalizedPath=r;var l=De(i.normalizedPath);i.internalPath=l;var c=l.lastIndexOf(a.PATH_DELIMITER);return i.simplePath=c>=0?l.substring(c+1):l,i.statements=new Array,i.range=new s.Range(i,0,t.length),i.text=t,i}return i(r,e),Object.defineProperty(r.prototype,"isNative",{get:function(){return this.internalPath==a.LIBRARY_SUBST},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isLibrary",{get:function(){var e=this.sourceKind;return e==j.LIBRARY||e==j.LIBRARY_ENTRY},enumerable:!0,configurable:!0}),r}(c);r.Source=J;var $=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.decorators=null,r.flags=a.CommonFlags.NONE,r}return i(r,e),r.prototype.is=function(e){return(this.flags&e)==e},r.prototype.isAny=function(e){return 0!=(this.flags&e)},r.prototype.set=function(e){this.flags|=e},r}(Z);r.DeclarationStatement=$;var ee=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.INDEXSIGNATUREDECLARATION,r}return i(r,e),r}($);r.IndexSignatureDeclaration=ee;var re=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return i(r,e),r}($);r.VariableLikeDeclarationStatement=re;var te=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.BLOCK,r}return i(r,e),r}(Z);r.BlockStatement=te;var ne=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.BREAK,r}return i(r,e),r}(Z);r.BreakStatement=ne;var ie=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.CLASSDECLARATION,r}return i(r,e),Object.defineProperty(r.prototype,"isGeneric",{get:function(){var e=this.typeParameters;return null!=e&&e.length>0},enumerable:!0,configurable:!0}),r}($);r.ClassDeclaration=ie;var ae=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.CONTINUE,r}return i(r,e),r}(Z);r.ContinueStatement=ae;var se=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.DO,r}return i(r,e),r}(Z);r.DoStatement=se;var oe=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.EMPTY,r}return i(r,e),r}(Z);r.EmptyStatement=oe;var le=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.ENUMDECLARATION,r}return i(r,e),r}($);r.EnumDeclaration=le;var ce=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.ENUMVALUEDECLARATION,r}return i(r,e),r}(re);r.EnumValueDeclaration=ce;var ue=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.EXPORTIMPORT,r}return i(r,e),r}(c);r.ExportImportStatement=ue;var pe=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.EXPORTMEMBER,r}return i(r,e),r}(c);r.ExportMember=pe;var _e=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.EXPORT,r}return i(r,e),r}(Z);r.ExportStatement=_e;var he=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.EXPORTDEFAULT,r}return i(r,e),r}(Z);r.ExportDefaultStatement=he;var de=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.EXPRESSION,r}return i(r,e),r}(Z);r.ExpressionStatement=de;var ye=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.FIELDDECLARATION,r.parameterIndex=-1,r}return i(r,e),r}(re);r.FieldDeclaration=ye;var Te=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.FOR,r}return i(r,e),r}(Z);r.ForStatement=Te,function(e){e[e.NONE=0]="NONE",e[e.ARROW_PARENTHESIZED=1]="ARROW_PARENTHESIZED",e[e.ARROW_SINGLE=2]="ARROW_SINGLE"}(r.ArrowKind||(r.ArrowKind={}));var me=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.FUNCTIONDECLARATION,r}return i(r,e),Object.defineProperty(r.prototype,"isGeneric",{get:function(){var e=this.typeParameters;return null!=e&&e.length>0},enumerable:!0,configurable:!0}),r.prototype.clone=function(){return c.createFunctionDeclaration(this.name,this.typeParameters,this.signature,this.body,this.decorators,this.flags,this.arrowKind,this.range)},r}($);r.FunctionDeclaration=me;var fe=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.IF,r}return i(r,e),r}(Z);r.IfStatement=fe;var ge=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.IMPORTDECLARATION,r}return i(r,e),r}($);r.ImportDeclaration=ge;var Ee=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.IMPORT,r}return i(r,e),r}(Z);r.ImportStatement=Ee;var ve=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.INTERFACEDECLARATION,r}return i(r,e),r}(ie);r.InterfaceDeclaration=ve;var be=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.METHODDECLARATION,r}return i(r,e),r}(me);r.MethodDeclaration=be;var Ie=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.NAMESPACEDECLARATION,r}return i(r,e),r}($);r.NamespaceDeclaration=Ie;var xe=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.RETURN,r}return i(r,e),r}(Z);r.ReturnStatement=xe;var Ae=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.SWITCHCASE,r}return i(r,e),r}(c);r.SwitchCase=Ae;var Ne=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.SWITCH,r}return i(r,e),r}(Z);r.SwitchStatement=Ne;var Se=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.THROW,r}return i(r,e),r}(Z);r.ThrowStatement=Se;var Oe=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.TRY,r}return i(r,e),r}(Z);r.TryStatement=Oe;var Ce=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.TYPEDECLARATION,r}return i(r,e),r}($);r.TypeDeclaration=Ce;var Re=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.VARIABLEDECLARATION,r}return i(r,e),r}(re);r.VariableDeclaration=Re;var Le=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.VARIABLE,r}return i(r,e),r}(Z);r.VariableStatement=Le;var ke=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.VOID,r}return i(r,e),r}(Z);r.VoidStatement=ke;var Fe=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.kind=o.WHILE,r}return i(r,e),r}(Z);function De(e){return e.endsWith(".ts")&&(e=e.substring(0,e.length-3)),e}r.WhileStatement=Fe,r.findDecorator=function(e,r){if(r)for(var t=0,n=r.length;t<n;++t){var i=r[t];if(i.decoratorKind==e)return i}return null},r.mangleInternalPath=De,r.isTypeOmitted=function(e){if(e.kind==o.NAMEDTYPE){var r=e.name;return!(r.next||r.identifier.text.length)}return!1}},function(e,r,t){"use strict";var n,i=this&&this.__extends||(n=function(e,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(e,r)},function(e,r){function t(){this.constructor=e}n(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}),a=this&&this.__values||function(e){var r="function"==typeof Symbol&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,i,a=t.call(e),s=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(t=a.return)&&t.call(a)}finally{if(i)throw i.error}}return s};Object.defineProperty(r,"__esModule",{value:!0});var o,l=t(0),c=t(2),u=t(6),p=t(3),_=t(1),h=t(9),d=t(10),y=function(e,r,t,n,i){this.localFile=e,this.localIdentifier=r,this.foreignIdentifier=t,this.foreignPath=n,this.foreignPathAlt=i},T=function(e,r,t,n){this.localIdentifier=e,this.foreignIdentifier=r,this.foreignPath=t,this.foreignPathAlt=n},m=function(e,r,t){this.foreignPath=e,this.foreignPathAlt=r,this.pathLiteral=t};!function(e){e[e.INVALID=0]="INVALID",e[e.INDEXED_GET=1]="INDEXED_GET",e[e.INDEXED_SET=2]="INDEXED_SET",e[e.UNCHECKED_INDEXED_GET=3]="UNCHECKED_INDEXED_GET",e[e.UNCHECKED_INDEXED_SET=4]="UNCHECKED_INDEXED_SET",e[e.ADD=5]="ADD",e[e.SUB=6]="SUB",e[e.MUL=7]="MUL",e[e.DIV=8]="DIV",e[e.REM=9]="REM",e[e.POW=10]="POW",e[e.BITWISE_AND=11]="BITWISE_AND",e[e.BITWISE_OR=12]="BITWISE_OR",e[e.BITWISE_XOR=13]="BITWISE_XOR",e[e.BITWISE_SHL=14]="BITWISE_SHL",e[e.BITWISE_SHR=15]="BITWISE_SHR",e[e.BITWISE_SHR_U=16]="BITWISE_SHR_U",e[e.EQ=17]="EQ",e[e.NE=18]="NE",e[e.GT=19]="GT",e[e.GE=20]="GE",e[e.LT=21]="LT",e[e.LE=22]="LE",e[e.PLUS=23]="PLUS",e[e.MINUS=24]="MINUS",e[e.NOT=25]="NOT",e[e.BITWISE_NOT=26]="BITWISE_NOT",e[e.PREFIX_INC=27]="PREFIX_INC",e[e.PREFIX_DEC=28]="PREFIX_DEC",e[e.POSTFIX_INC=29]="POSTFIX_INC",e[e.POSTFIX_DEC=30]="POSTFIX_DEC"}(o=r.OperatorKind||(r.OperatorKind={})),function(e){e.fromDecorator=function(r,t){switch(assert(t.length),r){case p.DecoratorKind.OPERATOR:case p.DecoratorKind.OPERATOR_BINARY:switch(t.charCodeAt(0)){case 91:if("[]"==t)return e.INDEXED_GET;if("[]="==t)return e.INDEXED_SET;break;case 123:if("{}"==t)return e.UNCHECKED_INDEXED_GET;if("{}="==t)return e.UNCHECKED_INDEXED_SET;break;case 43:if("+"==t)return e.ADD;break;case 45:if("-"==t)return e.SUB;break;case 42:if("*"==t)return e.MUL;if("**"==t)return e.POW;break;case 47:if("/"==t)return e.DIV;break;case 37:if("%"==t)return e.REM;break;case 38:if("&"==t)return e.BITWISE_AND;break;case 124:if("|"==t)return e.BITWISE_OR;break;case 94:if("^"==t)return e.BITWISE_XOR;break;case 61:if("=="==t)return e.EQ;break;case 33:if("!="==t)return e.NE;break;case 62:if(">"==t)return e.GT;if(">="==t)return e.GE;if(">>"==t)return e.BITWISE_SHR;if(">>>"==t)return e.BITWISE_SHR_U;break;case 60:if("<"==t)return e.LT;if("<="==t)return e.LE;if("<<"==t)return e.BITWISE_SHL}break;case p.DecoratorKind.OPERATOR_PREFIX:switch(t.charCodeAt(0)){case 43:if("+"==t)return e.PLUS;if("++"==t)return e.PREFIX_INC;break;case 45:if("-"==t)return e.MINUS;if("--"==t)return e.PREFIX_DEC;break;case 33:if("!"==t)return e.NOT;break;case 126:if("~"==t)return e.BITWISE_NOT}break;case p.DecoratorKind.OPERATOR_POSTFIX:switch(t.charCodeAt(0)){case 43:if("++"==t)return e.POSTFIX_INC;break;case 45:if("--"==t)return e.POSTFIX_DEC}}return e.INVALID},e.fromBinaryToken=function(r){switch(r){case p.Token.PLUS:case p.Token.PLUS_EQUALS:return e.ADD;case p.Token.MINUS:case p.Token.MINUS_EQUALS:return e.SUB;case p.Token.ASTERISK:case p.Token.ASTERISK_EQUALS:return e.MUL;case p.Token.SLASH:case p.Token.SLASH_EQUALS:return e.DIV;case p.Token.PERCENT:case p.Token.PERCENT_EQUALS:return e.REM;case p.Token.ASTERISK_ASTERISK:case p.Token.ASTERISK_ASTERISK_EQUALS:return e.POW;case p.Token.AMPERSAND:case p.Token.AMPERSAND_EQUALS:return e.BITWISE_AND;case p.Token.BAR:case p.Token.BAR_EQUALS:return e.BITWISE_OR;case p.Token.CARET:case p.Token.CARET_EQUALS:return e.BITWISE_XOR;case p.Token.LESSTHAN_LESSTHAN:case p.Token.LESSTHAN_LESSTHAN_EQUALS:return e.BITWISE_SHL;case p.Token.GREATERTHAN_GREATERTHAN:case p.Token.GREATERTHAN_GREATERTHAN_EQUALS:return e.BITWISE_SHR;case p.Token.GREATERTHAN_GREATERTHAN_GREATERTHAN:case p.Token.GREATERTHAN_GREATERTHAN_GREATERTHAN_EQUALS:return e.BITWISE_SHR_U;case p.Token.EQUALS_EQUALS:return e.EQ;case p.Token.EXCLAMATION_EQUALS:return e.NE;case p.Token.GREATERTHAN:return e.GT;case p.Token.GREATERTHAN_EQUALS:return e.GE;case p.Token.LESSTHAN:return e.LT;case p.Token.LESSTHAN_EQUALS:return e.LE}return e.INVALID},e.fromUnaryPrefixToken=function(r){switch(r){case p.Token.PLUS:return e.PLUS;case p.Token.MINUS:return e.MINUS;case p.Token.EXCLAMATION:return e.NOT;case p.Token.TILDE:return e.BITWISE_NOT;case p.Token.PLUS_PLUS:return e.PREFIX_INC;case p.Token.MINUS_MINUS:return e.PREFIX_DEC}return e.INVALID},e.fromUnaryPostfixToken=function(r){switch(r){case p.Token.PLUS_PLUS:return e.POSTFIX_INC;case p.Token.MINUS_MINUS:return e.POSTFIX_DEC}return e.INVALID}}(o=r.OperatorKind||(r.OperatorKind={}));var f,g,E=function(e){function r(r){void 0===r&&(r=null);var t=e.call(this,r)||this;t.sources=[],t.diagnosticsOffset=0,t.filesByName=new Map,t.elementsByName=new Map,t.elementsByDeclaration=new Map,t.instancesByName=new Map,t.wrapperClasses=new Map,t.managedClasses=new Map,t.uniqueSignatures=new Array(0),t.nextClassId=0,t.nextSignatureId=0,t.nativeDummySignature=null;var n=new p.Source(l.LIBRARY_SUBST,"[native code]",p.SourceKind.LIBRARY_ENTRY);t.nativeSource=n;var i=new S(t,n);return t.nativeFile=i,t.filesByName.set(i.internalName,i),t.resolver=new h.Resolver(t),t}return i(r,e),r.prototype.getSource=function(e){for(var r=this.sources,t=0;t<r.length;++t){var n=r[t];if(n.internalPath==e)return n.text}return null},r.prototype.writeRuntimeHeader=function(e,r,t,n){assert(n<1<<28),_.writeI32(n,e,r),_.writeI32(1,e,r+4),_.writeI32(t.id,e,r+8),_.writeI32(n,e,r+12)},Object.defineProperty(r.prototype,"runtimeHeaderSize",{get:function(){return 16},enumerable:!0,configurable:!0}),r.prototype.makeNativeVariableDeclaration=function(e,r){void 0===r&&(r=l.CommonFlags.NONE);var t=this.nativeSource.range;return p.Node.createVariableDeclaration(p.Node.createIdentifierExpression(e,t),null,null,null,r,t)},r.prototype.makeNativeTypeDeclaration=function(e,r){void 0===r&&(r=l.CommonFlags.NONE);var t=this.nativeSource.range,n=p.Node.createIdentifierExpression(e,t);return p.Node.createTypeDeclaration(n,null,p.Node.createOmittedType(t),null,r,t)},r.prototype.makeNativeFunctionDeclaration=function(e,r){void 0===r&&(r=l.CommonFlags.NONE);var t=this.nativeSource.range;return p.Node.createFunctionDeclaration(p.Node.createIdentifierExpression(e,t),null,this.nativeDummySignature||(this.nativeDummySignature=p.Node.createFunctionType([],p.Node.createNamedType(p.Node.createSimpleTypeName(l.CommonSymbols.void_,t),null,!1,t),null,!1,t)),null,null,r,0,t)},r.prototype.makeNativeNamespaceDeclaration=function(e,r){void 0===r&&(r=l.CommonFlags.NONE);var t=this.nativeSource.range;return p.Node.createNamespaceDeclaration(p.Node.createIdentifierExpression(e,t),[],null,r,t)},r.prototype.makeNativeFunction=function(e,r,t,n,i){return void 0===t&&(t=this.nativeFile),void 0===n&&(n=l.CommonFlags.NONE),void 0===i&&(i=g.NONE),new w(e,new P(e,t,this.makeNativeFunctionDeclaration(e,n),i),r)},r.prototype.getElementByDeclaration=function(e){var r=this.elementsByDeclaration;return r.has(e)?r.get(e):null},r.prototype.initialize=function(e){var r,t,n,i,o,_,h,d,y,T,m,E;this.options=e,this.registerNativeType(l.CommonSymbols.i8,u.Type.i8),this.registerNativeType(l.CommonSymbols.i16,u.Type.i16),this.registerNativeType(l.CommonSymbols.i32,u.Type.i32),this.registerNativeType(l.CommonSymbols.i64,u.Type.i64),this.registerNativeType(l.CommonSymbols.isize,e.isizeType),this.registerNativeType(l.CommonSymbols.u8,u.Type.u8),this.registerNativeType(l.CommonSymbols.u16,u.Type.u16),this.registerNativeType(l.CommonSymbols.u32,u.Type.u32),this.registerNativeType(l.CommonSymbols.u64,u.Type.u64),this.registerNativeType(l.CommonSymbols.usize,e.usizeType),this.registerNativeType(l.CommonSymbols.bool,u.Type.bool),this.registerNativeType(l.CommonSymbols.f32,u.Type.f32),this.registerNativeType(l.CommonSymbols.f64,u.Type.f64),this.registerNativeType(l.CommonSymbols.void_,u.Type.void),this.registerNativeType(l.CommonSymbols.number,u.Type.f64),this.registerNativeType(l.CommonSymbols.boolean,u.Type.bool),this.nativeFile.add(l.CommonSymbols.native,new O(l.CommonSymbols.native,this.nativeFile,this.makeNativeTypeDeclaration(l.CommonSymbols.native,l.CommonFlags.EXPORT|l.CommonFlags.GENERIC),g.BUILTIN)),this.nativeFile.add(l.CommonSymbols.indexof,new O(l.CommonSymbols.indexof,this.nativeFile,this.makeNativeTypeDeclaration(l.CommonSymbols.indexof,l.CommonFlags.EXPORT|l.CommonFlags.GENERIC),g.BUILTIN)),this.nativeFile.add(l.CommonSymbols.valueof,new O(l.CommonSymbols.valueof,this.nativeFile,this.makeNativeTypeDeclaration(l.CommonSymbols.valueof,l.CommonFlags.EXPORT|l.CommonFlags.GENERIC),g.BUILTIN)),this.nativeFile.add(l.CommonSymbols.returnof,new O(l.CommonSymbols.returnof,this.nativeFile,this.makeNativeTypeDeclaration(l.CommonSymbols.returnof,l.CommonFlags.EXPORT|l.CommonFlags.GENERIC),g.BUILTIN)),e.hasFeature(16)&&this.registerNativeType(l.CommonSymbols.v128,u.Type.v128),e.hasFeature(256)&&this.registerNativeType(l.CommonSymbols.anyref,u.Type.anyref),this.registerConstantInteger(l.CommonSymbols.ASC_TARGET,u.Type.i32,i64_new(e.isWasm64?l.Target.WASM64:l.Target.WASM32)),this.registerConstantInteger(l.CommonSymbols.ASC_NO_ASSERT,u.Type.bool,i64_new(e.noAssert?1:0,0)),this.registerConstantInteger(l.CommonSymbols.ASC_MEMORY_BASE,u.Type.i32,i64_new(e.memoryBase,0)),this.registerConstantInteger(l.CommonSymbols.ASC_OPTIMIZE_LEVEL,u.Type.i32,i64_new(e.optimizeLevelHint,0)),this.registerConstantInteger(l.CommonSymbols.ASC_SHRINK_LEVEL,u.Type.i32,i64_new(e.shrinkLevelHint,0)),this.registerConstantInteger(l.CommonSymbols.ASC_FEATURE_SIGN_EXTENSION,u.Type.bool,i64_new(e.hasFeature(1)?1:0,0)),this.registerConstantInteger(l.CommonSymbols.ASC_FEATURE_MUTABLE_GLOBALS,u.Type.bool,i64_new(e.hasFeature(2)?1:0,0)),this.registerConstantInteger(l.CommonSymbols.ASC_FEATURE_NONTRAPPING_F2I,u.Type.bool,i64_new(e.hasFeature(4)?1:0,0)),this.registerConstantInteger(l.CommonSymbols.ASC_FEATURE_BULK_MEMORY,u.Type.bool,i64_new(e.hasFeature(8)?1:0,0)),this.registerConstantInteger(l.CommonSymbols.ASC_FEATURE_SIMD,u.Type.bool,i64_new(e.hasFeature(16)?1:0,0)),this.registerConstantInteger(l.CommonSymbols.ASC_FEATURE_THREADS,u.Type.bool,i64_new(e.hasFeature(32)?1:0,0)),this.registerConstantInteger(l.CommonSymbols.ASC_FEATURE_EXCEPTION_HANDLING,u.Type.bool,i64_new(e.hasFeature(64)?1:0,0)),this.registerConstantInteger(l.CommonSymbols.ASC_FEATURE_TAIL_CALLS,u.Type.bool,i64_new(e.hasFeature(128)?1:0,0)),this.registerConstantInteger(l.CommonSymbols.ASC_FEATURE_REFERENCE_TYPES,u.Type.bool,i64_new(e.hasFeature(256)?1:0,0));for(var v=new Array,b=new Map,I=new Map,A=new Array,N=new Array,C=0,R=this.sources.length;C<R;++C){var L=this.sources[C],k=new S(this,L);this.filesByName.set(k.internalName,k);for(var F=L.statements,D=0,B=F.length;D<B;++D){var P=F[D];switch(P.kind){case p.NodeKind.EXPORT:this.initializeExports(P,k,b,I);break;case p.NodeKind.EXPORTDEFAULT:this.initializeExportDefault(P,k,A,N);break;case p.NodeKind.IMPORT:this.initializeImports(P,k,v,b);break;case p.NodeKind.VARIABLE:this.initializeVariables(P,k);break;case p.NodeKind.CLASSDECLARATION:this.initializeClass(P,k,A,N);break;case p.NodeKind.ENUMDECLARATION:this.initializeEnum(P,k);break;case p.NodeKind.FUNCTIONDECLARATION:this.initializeFunction(P,k);break;case p.NodeKind.INTERFACEDECLARATION:this.initializeInterface(P,k);break;case p.NodeKind.NAMESPACEDECLARATION:this.initializeNamespace(P,k,A,N);break;case p.NodeKind.TYPEDECLARATION:this.initializeTypeDefinition(P,k)}}}try{for(var w=a(I),U=w.next();!U.done;U=w.next()){var M=s(U.value,2),G=(k=M[0],M[1]);for(C=0,R=G.length;C<R;++C){var V=G[C];(K=this.lookupForeignFile(V.foreignPath,V.foreignPathAlt))?k.ensureExportStar(K):this.error(c.DiagnosticCode.File_0_not_found,V.pathLiteral.range,V.pathLiteral.value)}}}catch(e){r={error:e}}finally{try{U&&!U.done&&(t=w.return)&&t.call(w)}finally{if(r)throw r.error}}for(C=0,R=v.length;C<R;++C){var K,z=v[C],Y=z.foreignIdentifier;if(Y)(ve=this.lookupForeign(Y.text,z.foreignPath,z.foreignPathAlt,b))?z.localFile.add(z.localIdentifier.text,ve,!0):this.error(c.DiagnosticCode.Module_0_has_no_exported_member_1,Y.range,z.foreignPath,Y.text);else if(K=this.lookupForeignFile(z.foreignPath,z.foreignPathAlt)){var H=z.localFile,W=z.localIdentifier.text;H.add(W,K.asImportedNamespace(W,H),!0)}else assert(!1)}try{for(var X=a(b),q=X.next();!q.done;q=X.next()){var Q=s(q.value,2),j=(k=Q[0],Q[1]);try{for(var Z=(o=void 0,a(j)),J=Z.next();!J.done;J=Z.next()){var $=s(J.value,2),ee=$[0],re=$[1],te=(W=re.localIdentifier.text,re.foreignPath);if(te)(ve=this.lookupForeign(W,te,assert(re.foreignPathAlt),b))?k.ensureExport(ee,ve):this.error(c.DiagnosticCode.Module_0_has_no_exported_member_1,re.localIdentifier.range,te,W);else if(ve=k.lookupInSelf(W))k.ensureExport(ee,ve);else{var ne=this.lookupGlobal(W);ne&&ne instanceof x?k.ensureExport(ee,ne):this.error(c.DiagnosticCode.Module_0_has_no_exported_member_1,re.foreignIdentifier.range,k.internalName,re.foreignIdentifier.text)}}}catch(e){o={error:e}}finally{try{J&&!J.done&&(_=Z.return)&&_.call(Z)}finally{if(o)throw o.error}}}}catch(e){n={error:e}}finally{try{q&&!q.done&&(i=X.return)&&i.call(X)}finally{if(n)throw n.error}}assert(0==this.nextClassId),this.arrayBufferInstance=this.requireClass(l.CommonSymbols.ArrayBuffer),assert(0==this.arrayBufferInstance.id),this.stringInstance=this.requireClass(l.CommonSymbols.String),assert(1==this.stringInstance.id),this.arrayBufferViewInstance=this.requireClass(l.CommonSymbols.ArrayBufferView),assert(2==this.arrayBufferViewInstance.id),this.registerWrapperClass(u.Type.i8,l.CommonSymbols.I8),this.registerWrapperClass(u.Type.i16,l.CommonSymbols.I16),this.registerWrapperClass(u.Type.i32,l.CommonSymbols.I32),this.registerWrapperClass(u.Type.i64,l.CommonSymbols.I64),this.registerWrapperClass(e.isizeType,l.CommonSymbols.Isize),this.registerWrapperClass(u.Type.u8,l.CommonSymbols.U8),this.registerWrapperClass(u.Type.u16,l.CommonSymbols.U16),this.registerWrapperClass(u.Type.u32,l.CommonSymbols.U32),this.registerWrapperClass(u.Type.u64,l.CommonSymbols.U64),this.registerWrapperClass(e.usizeType,l.CommonSymbols.Usize),this.registerWrapperClass(u.Type.bool,l.CommonSymbols.Bool),this.registerWrapperClass(u.Type.f32,l.CommonSymbols.F32),this.registerWrapperClass(u.Type.f64,l.CommonSymbols.F64),e.hasFeature(16)&&this.registerWrapperClass(u.Type.v128,l.CommonSymbols.V128),e.hasFeature(256)&&this.registerWrapperClass(u.Type.anyref,l.CommonSymbols.Anyref),this.i8ArrayPrototype=this.require(l.CommonSymbols.Int8Array,f.CLASS_PROTOTYPE),this.i16ArrayPrototype=this.require(l.CommonSymbols.Int16Array,f.CLASS_PROTOTYPE),this.i32ArrayPrototype=this.require(l.CommonSymbols.Int32Array,f.CLASS_PROTOTYPE),this.i64ArrayPrototype=this.require(l.CommonSymbols.Int64Array,f.CLASS_PROTOTYPE),this.u8ArrayPrototype=this.require(l.CommonSymbols.Uint8Array,f.CLASS_PROTOTYPE),this.u8ClampedArrayPrototype=this.require(l.CommonSymbols.Uint8ClampedArray,f.CLASS_PROTOTYPE),this.u16ArrayPrototype=this.require(l.CommonSymbols.Uint16Array,f.CLASS_PROTOTYPE),this.u32ArrayPrototype=this.require(l.CommonSymbols.Uint32Array,f.CLASS_PROTOTYPE),this.u64ArrayPrototype=this.require(l.CommonSymbols.Uint64Array,f.CLASS_PROTOTYPE),this.f32ArrayPrototype=this.require(l.CommonSymbols.Float32Array,f.CLASS_PROTOTYPE),this.f64ArrayPrototype=this.require(l.CommonSymbols.Float64Array,f.CLASS_PROTOTYPE);var ie=this.resolver;for(C=0,R=A.length;C<R;++C){var ae=A[C],se=assert(ae.extendsNode),oe=ie.resolveTypeName(se.name,ae.parent);if(oe)if(oe.kind==f.CLASS_PROTOTYPE){var le=oe;le.hasDecorator(g.SEALED)&&this.error(c.DiagnosticCode.Class_0_is_sealed_and_cannot_be_extended,se.range,oe.identifierNode.text),le.hasDecorator(g.UNMANAGED)!=ae.hasDecorator(g.UNMANAGED)&&this.error(c.DiagnosticCode.Unmanaged_classes_cannot_extend_managed_classes_and_vice_versa,p.Range.join(ae.identifierNode.range,se.range)),ae.basePrototype=le}else this.error(c.DiagnosticCode.A_class_may_only_extend_another_class,se.range)}var ce=e.globalAliases;if(ce)try{for(var ue=a(ce),pe=ue.next();!pe.done;pe=ue.next()){var _e=s(pe.value,2),he=_e[0],de=_e[1];if(de.length){var ye=de.charCodeAt(0);if(ye>=48&&ye<=57)this.registerConstantInteger(he,u.Type.i32,i64_new(parseInt(de,10)));else{var Te=this.elementsByName;if(!(ve=Te.get(de)))throw new Error("no such global element: "+de);if(Te.has(he))throw new Error("duplicate global element: "+de);Te.set(he,ve)}}}}catch(e){h={error:e}}finally{try{pe&&!pe.done&&(d=ue.return)&&d.call(ue)}finally{if(h)throw h.error}}this.arrayPrototype=this.require(l.CommonSymbols.Array,f.CLASS_PROTOTYPE),this.fixedArrayPrototype=this.require(l.CommonSymbols.FixedArray,f.CLASS_PROTOTYPE),this.setPrototype=this.require(l.CommonSymbols.Set,f.CLASS_PROTOTYPE),this.mapPrototype=this.require(l.CommonSymbols.Map,f.CLASS_PROTOTYPE),this.abortInstance=this.lookupFunction(l.CommonSymbols.abort),this.allocInstance=this.requireFunction(l.CommonSymbols.alloc),this.reallocInstance=this.requireFunction(l.CommonSymbols.realloc),this.freeInstance=this.requireFunction(l.CommonSymbols.free),this.retainInstance=this.requireFunction(l.CommonSymbols.retain),this.releaseInstance=this.requireFunction(l.CommonSymbols.release),this.collectInstance=this.requireFunction(l.CommonSymbols.collect),this.typeinfoInstance=this.requireFunction(l.CommonSymbols.typeinfo),this.instanceofInstance=this.requireFunction(l.CommonSymbols.instanceof_),this.visitInstance=this.requireFunction(l.CommonSymbols.visit),this.allocArrayInstance=this.requireFunction(l.CommonSymbols.allocArray);try{for(var me=a(this.filesByName.values()),fe=me.next();!fe.done;fe=me.next()){if(null!==(j=(k=fe.value).exports)&&k.source.sourceKind==p.SourceKind.USER_ENTRY)try{for(var ge=(m=void 0,a(j.values())),Ee=ge.next();!Ee.done;Ee=ge.next()){var ve=Ee.value;this.markModuleExport(ve)}}catch(e){m={error:e}}finally{try{Ee&&!Ee.done&&(E=ge.return)&&E.call(ge)}finally{if(m)throw m.error}}}}catch(e){y={error:e}}finally{try{fe&&!fe.done&&(T=me.return)&&T.call(me)}finally{if(y)throw y.error}}},r.prototype.require=function(e,r){var t=this.lookupGlobal(e);if(!t)throw new Error("missing "+e);if(t.kind!=r)throw new Error("unexpected "+e);return t},r.prototype.requireClass=function(e){var r=this.require(e,f.CLASS_PROTOTYPE),t=this.resolver.resolveClass(r,null);if(!t)throw new Error("invalid "+e);return t},r.prototype.lookupFunction=function(e){var r=this.lookupGlobal(e);return r&&r.kind==f.FUNCTION_PROTOTYPE?this.resolver.resolveFunction(r,null):null},r.prototype.requireFunction=function(e,r){void 0===r&&(r=null);var t=this.require(e,f.FUNCTION_PROTOTYPE),n=this.resolver.resolveFunction(t,r);if(!n)throw new Error("invalid "+e);return n},r.prototype.markModuleExport=function(e){var r,t,n,i;switch(e.set(l.CommonFlags.MODULE_EXPORT),e.kind){case f.CLASS_PROTOTYPE:var s=e.instanceMembers;if(s)try{for(var o=a(s.values()),c=o.next();!c.done;c=o.next()){var u=c.value;this.markModuleExport(u)}}catch(e){r={error:e}}finally{try{c&&!c.done&&(t=o.return)&&t.call(o)}finally{if(r)throw r.error}}break;case f.PROPERTY_PROTOTYPE:var p=e.getterPrototype;p&&this.markModuleExport(p);var _=e.setterPrototype;_&&this.markModuleExport(_);break;case f.PROPERTY:case f.FUNCTION:case f.FIELD:case f.CLASS:assert(!1)}var h=e.members;if(h)try{for(var d=a(h.values()),y=d.next();!y.done;y=d.next()){u=y.value;this.markModuleExport(u)}}catch(e){n={error:e}}finally{try{y&&!y.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}},r.prototype.registerNativeType=function(e,r){var t=new O(e,this.nativeFile,this.makeNativeTypeDeclaration(e,l.CommonFlags.EXPORT),g.BUILTIN);t.setType(r),this.nativeFile.add(e,t)},r.prototype.registerWrapperClass=function(e,r){var t=this.wrapperClasses;assert(!e.classReference&&!t.has(e));var n=this.lookupGlobal(r);if(n){assert(n.kind==f.CLASS_PROTOTYPE);var i=this.resolver.resolveClass(n,null);i&&(i.wrappedType=e,t.set(e,i))}},r.prototype.registerConstantInteger=function(e,r,t){assert(r.is(4));var n=new F(e,this.nativeFile,g.NONE,this.makeNativeVariableDeclaration(e,l.CommonFlags.CONST|l.CommonFlags.EXPORT));n.setConstantIntegerValue(t,r),this.nativeFile.add(e,n)},r.prototype.registerConstantFloat=function(e,r,t){assert(r.is(8));var n=new F(e,this.nativeFile,g.NONE,this.makeNativeVariableDeclaration(e,l.CommonFlags.CONST|l.CommonFlags.EXPORT));n.setConstantFloatValue(t,r),this.nativeFile.add(e,n)},r.prototype.ensureGlobal=function(e,r){var t=this.elementsByName;if(t.has(e)){var n=t.get(e);if(n!==r){var i=j(n,r);if(!i)return I(n.kind)?this.errorRelated(c.DiagnosticCode.Duplicate_identifier_0,r.identifierNode.range,n.declaration.name.range,e):this.error(c.DiagnosticCode.Duplicate_identifier_0,r.identifierNode.range,e),r;r=i}}return t.set(e,r),r},r.prototype.lookupGlobal=function(e){var r=this.elementsByName;return r.has(e)?r.get(e):null},r.prototype.requireGlobal=function(e){var r=this.elementsByName;if(r.has(e))return r.get(e);throw new Error("missing global")},r.prototype.lookupForeignFile=function(e,r){var t=this.filesByName;return t.has(e)?t.get(e):t.has(r)?t.get(r):null},r.prototype.lookupForeign=function(e,r,t,n){for(;;){var i=this.lookupForeignFile(r,t);if(!i)return null;var a=i.lookupExport(e);if(a)return a;if(n.has(i)){var s=n.get(i);if(s.has(e)){var o=s.get(e);if(o.foreignPath){e=o.localIdentifier.text,r=o.foreignPath,t=assert(o.foreignPathAlt);continue}if(a=i.lookupInSelf(o.localIdentifier.text))return a}}break}return null},r.prototype.checkDecorators=function(e,r){var t=g.NONE;if(e)for(var n=0,i=e.length;n<i;++n){var a=e[n],s=p.DecoratorKind.fromNode(a.name),o=g.fromKind(s);o&&(o==g.BUILTIN?r&o||a.range.source.isLibrary?t|=o:this.error(c.DiagnosticCode.Decorator_0_is_not_valid_here,a.range,a.name.range.toString()):r&o?t&o?this.error(c.DiagnosticCode.Duplicate_decorator,a.range):t|=o:this.error(c.DiagnosticCode.Decorator_0_is_not_valid_here,a.range,a.name.range.toString()))}return t},r.prototype.initializeClass=function(e,r,t,n){var i=e.name.text,a=new H(i,r,e,this.checkDecorators(e.decorators,g.GLOBAL|g.SEALED|g.UNMANAGED));if(!r.add(i,a))return null;var s=e.implementsTypes;if(s){var o=s.length;if(a.hasDecorator(g.UNMANAGED))o&&this.error(c.DiagnosticCode.Unmanaged_classes_cannot_implement_interfaces,p.Range.join(e.name.range,s[o-1].range));else if(o){for(var u=0;u<o;++u)this.warning(c.DiagnosticCode.Not_implemented,s[u].range);n.push(a)}}e.extendsType&&t.push(a);for(var _=e.members,h=(u=0,_.length);u<h;++u){var d=_[u];switch(d.kind){case p.NodeKind.FIELDDECLARATION:this.initializeField(d,a);break;case p.NodeKind.METHODDECLARATION:d.isAny(l.CommonFlags.GET|l.CommonFlags.SET)?this.initializeProperty(d,a):this.initializeMethod(d,a);break;case p.NodeKind.INDEXSIGNATUREDECLARATION:break;default:assert(!1)}}return a},r.prototype.initializeField=function(e,r){var t,n=e.name.text,i=e.decorators;if(e.is(l.CommonFlags.STATIC)){if(assert(r.kind!=f.INTERFACE_PROTOTYPE),t=new F(n,r,this.checkDecorators(i,(e.is(l.CommonFlags.READONLY)?g.INLINE:g.NONE)|g.LAZY|g.UNSAFE),e),!r.add(n,t))return}else if(assert(!e.isAny(l.CommonFlags.ABSTRACT|l.CommonFlags.GET|l.CommonFlags.SET)),t=new M(n,r,e,this.checkDecorators(i,g.UNSAFE)),!r.addInstance(n,t))return},r.prototype.initializeMethod=function(e,r){var t=e.name.text,n=e.is(l.CommonFlags.STATIC),i=g.INLINE|g.UNSAFE;e.is(l.CommonFlags.GENERIC)||(i|=g.OPERATOR_BINARY|g.OPERATOR_PREFIX|g.OPERATOR_POSTFIX);var a=new P(t,r,e,this.checkDecorators(e.decorators,i));if(n){if(assert(e.name.kind!=p.NodeKind.CONSTRUCTOR),!r.add(t,a))return}else if(!r.addInstance(t,a))return;this.checkOperatorOverloads(e.decorators,a,r)},r.prototype.checkOperatorOverloads=function(e,r,t){if(e)for(var n=0,i=e.length;n<i;++n){var a=e[n];switch(a.decoratorKind){case p.DecoratorKind.OPERATOR:case p.DecoratorKind.OPERATOR_BINARY:case p.DecoratorKind.OPERATOR_PREFIX:case p.DecoratorKind.OPERATOR_POSTFIX:var s=a.arguments&&a.arguments.length||0;if(1==s){var l=a.arguments[0];if(l.kind==p.NodeKind.LITERAL&&l.literalKind==p.LiteralKind.STRING){var u=l.value,_=o.fromDecorator(a.decoratorKind,u);if(_==o.INVALID)this.error(c.DiagnosticCode._0_is_not_a_valid_operator,l.range,u);else{var h=t.overloadPrototypes;h.has(_)?this.error(c.DiagnosticCode.Duplicate_function_implementation,l.range):(r.operatorKind=_,h.set(_,r))}}else this.error(c.DiagnosticCode.String_literal_expected,l.range)}else this.error(c.DiagnosticCode.Expected_0_arguments_but_got_1,a.range,"1",s.toString(10))}}},r.prototype.ensureProperty=function(e,r){var t=e.name.text;if(e.is(l.CommonFlags.STATIC)){if(!(i=r.members)||!i.has(t)){var n=new V(t,r,e);return r.add(t,n)?n:null}if((n=i.get(t)).kind==f.PROPERTY_PROTOTYPE)return n}else{var i;if(!(i=r.instanceMembers)||!i.has(t)){n=new V(t,r,e);return r.addInstance(t,n)?n:null}if((n=i.get(t)).kind==f.PROPERTY_PROTOTYPE)return n}return this.error(c.DiagnosticCode.Duplicate_property_0,e.name.range,t),null},r.prototype.initializeProperty=function(e,r){var t=this.ensureProperty(e,r);if(t){var n=e.name.text,i=e.is(l.CommonFlags.GET);if(i){if(t.getterPrototype)return void this.error(c.DiagnosticCode.Duplicate_property_0,e.name.range,n)}else if(t.setterPrototype)return void this.error(c.DiagnosticCode.Duplicate_property_0,e.name.range,n);var a=new P((i?l.GETTER_PREFIX:l.SETTER_PREFIX)+n,t,e,this.checkDecorators(e.decorators,g.INLINE|g.UNSAFE));i?t.getterPrototype=a:t.setterPrototype=a}},r.prototype.initializeEnum=function(e,r){var t=e.name.text,n=new R(t,r,e,this.checkDecorators(e.decorators,g.GLOBAL|g.INLINE|g.LAZY));if(!r.add(t,n))return null;for(var i=e.values,a=0,s=i.length;a<s;++a)this.initializeEnumValue(i[a],n);return n},r.prototype.initializeEnumValue=function(e,r){var t=e.name.text,n=new k(t,r,e,this.checkDecorators(e.decorators,g.NONE));r.add(t,n)},r.prototype.initializeExports=function(e,r,t,n){var i=e.members;if(i)for(var a=0,s=i.length;a<s;++a)this.initializeExport(i[a],r,e.internalPath,t);else{var o=void 0;n.has(r)?o=n.get(r):n.set(r,o=[]);var c=assert(e.internalPath);o.push(new m(c,c.endsWith(l.INDEX_SUFFIX)?c.substring(0,c.length-l.INDEX_SUFFIX.length):c+l.INDEX_SUFFIX,assert(e.path)))}},r.prototype.initializeExport=function(e,r,t,n){var i=e.localName.text,a=e.exportedName.text,s=r.lookupExport(a);if(s)this.error(c.DiagnosticCode.Export_declaration_conflicts_with_exported_declaration_of_0,e.exportedName.range,a);else if(null===t)if(s=r.lookupInSelf(i))r.ensureExport(a,s);else{var o=void 0;n.has(r)?o=n.get(r):n.set(r,o=new Map),o.set(a,new T(e.localName,e.exportedName,null,null))}else{o=void 0;n.has(r)?o=n.get(r):n.set(r,o=new Map),o.set(a,new T(e.localName,e.exportedName,t,t.endsWith(l.INDEX_SUFFIX)?t.substring(0,t.length-l.INDEX_SUFFIX.length):t+l.INDEX_SUFFIX))}},r.prototype.initializeExportDefault=function(e,r,t,n){var i=e.declaration,a=null;switch(i.kind){case p.NodeKind.ENUMDECLARATION:a=this.initializeEnum(i,r);break;case p.NodeKind.FUNCTIONDECLARATION:a=this.initializeFunction(i,r);break;case p.NodeKind.CLASSDECLARATION:a=this.initializeClass(i,r,t,n);break;case p.NodeKind.INTERFACEDECLARATION:a=this.initializeInterface(i,r);break;case p.NodeKind.NAMESPACEDECLARATION:a=this.initializeNamespace(i,r,t,n);break;default:assert(!1)}if(a){var s=r.exports;if(s){if(s.has("default")){var o=s.get("default");return void this.errorRelated(c.DiagnosticCode.Duplicate_identifier_0,i.name.range,o.declaration.name.range,"default")}}else r.exports=s=new Map;s.set("default",a)}},r.prototype.initializeImports=function(e,r,t,n){var i=e.declarations;if(i)for(var a=0,s=i.length;a<s;++a)this.initializeImport(i[a],r,e.internalPath,t,n);else e.namespaceName&&t.push(new y(r,e.namespaceName,null,e.internalPath,e.internalPath+l.INDEX_SUFFIX))},r.prototype.initializeImport=function(e,r,t,n,i){var a=t.endsWith(l.INDEX_SUFFIX)?t.substring(0,t.length-l.INDEX_SUFFIX.length):t+l.INDEX_SUFFIX,s=this.lookupForeign(e.foreignName.text,t,a,i);s?r.add(e.name.text,s,!0):n.push(new y(r,e.name,e.foreignName,t,a))},r.prototype.initializeFunction=function(e,r){var t=e.name.text,n=g.UNSAFE|g.BUILTIN;e.is(l.CommonFlags.AMBIENT)?n|=g.EXTERNAL:n|=g.INLINE,e.is(l.CommonFlags.INSTANCE)||r.kind!=f.CLASS_PROTOTYPE&&(n|=g.GLOBAL);var i=new P(t,r,e,this.checkDecorators(e.decorators,n));return r.add(t,i)?i:null},r.prototype.initializeInterface=function(e,r){var t=e.name.text,n=new X(t,r,e,this.checkDecorators(e.decorators,g.GLOBAL));if(!r.add(t,n))return null;for(var i=e.members,a=0,s=i.length;a<s;++a){var o=i[a];switch(o.kind){case p.NodeKind.FIELDDECLARATION:this.initializeField(o,n);break;case p.NodeKind.METHODDECLARATION:o.isAny(l.CommonFlags.GET|l.CommonFlags.SET)?this.initializeProperty(o,n):this.initializeMethod(o,n);break;default:assert(!1)}}return n},r.prototype.initializeNamespace=function(e,r,t,n){var i=e.name.text,a=new C(i,r,e,this.checkDecorators(e.decorators,g.GLOBAL));if(!r.add(i,a))return null;for(var s=assert(r.lookupInSelf(i)),o=e.members,l=0,c=o.length;l<c;++l){var u=o[l];switch(u.kind){case p.NodeKind.CLASSDECLARATION:this.initializeClass(u,a,t,n);break;case p.NodeKind.ENUMDECLARATION:this.initializeEnum(u,a);break;case p.NodeKind.FUNCTIONDECLARATION:this.initializeFunction(u,a);break;case p.NodeKind.INTERFACEDECLARATION:this.initializeInterface(u,a);break;case p.NodeKind.NAMESPACEDECLARATION:this.initializeNamespace(u,a,t,n);break;case p.NodeKind.TYPEDECLARATION:this.initializeTypeDefinition(u,a);break;case p.NodeKind.VARIABLE:this.initializeVariables(u,a);break;default:assert(!1)}}return a!=s&&Z(a,s),s},r.prototype.initializeTypeDefinition=function(e,r){var t=e.name.text,n=new O(t,r,e,this.checkDecorators(e.decorators,g.NONE));r.add(t,n)},r.prototype.initializeVariables=function(e,r){for(var t=e.declarations,n=0,i=t.length;n<i;++n){var a=t[n],s=a.name.text,o=g.GLOBAL|g.LAZY;a.is(l.CommonFlags.DECLARE)&&(o|=g.EXTERNAL),a.is(l.CommonFlags.CONST)&&(o|=g.INLINE);var c=new F(s,r,this.checkDecorators(a.decorators,o),a);r.add(s,c)}},r}(c.DiagnosticEmitter);r.Program=E,function(e){e[e.GLOBAL=0]="GLOBAL",e[e.LOCAL=1]="LOCAL",e[e.ENUM=2]="ENUM",e[e.ENUMVALUE=3]="ENUMVALUE",e[e.FUNCTION_PROTOTYPE=4]="FUNCTION_PROTOTYPE",e[e.FUNCTION=5]="FUNCTION",e[e.FUNCTION_TARGET=6]="FUNCTION_TARGET",e[e.CLASS_PROTOTYPE=7]="CLASS_PROTOTYPE",e[e.CLASS=8]="CLASS",e[e.INTERFACE_PROTOTYPE=9]="INTERFACE_PROTOTYPE",e[e.INTERFACE=10]="INTERFACE",e[e.FIELD_PROTOTYPE=11]="FIELD_PROTOTYPE",e[e.FIELD=12]="FIELD",e[e.PROPERTY_PROTOTYPE=13]="PROPERTY_PROTOTYPE",e[e.PROPERTY=14]="PROPERTY",e[e.NAMESPACE=15]="NAMESPACE",e[e.FILE=16]="FILE",e[e.TYPEDEFINITION=17]="TYPEDEFINITION",e[e.INDEXSIGNATURE=18]="INDEXSIGNATURE"}(f=r.ElementKind||(r.ElementKind={})),function(e){e[e.NONE=0]="NONE",e[e.GLOBAL=1]="GLOBAL",e[e.OPERATOR_BINARY=2]="OPERATOR_BINARY",e[e.OPERATOR_PREFIX=4]="OPERATOR_PREFIX",e[e.OPERATOR_POSTFIX=8]="OPERATOR_POSTFIX",e[e.UNMANAGED=16]="UNMANAGED",e[e.SEALED=32]="SEALED",e[e.INLINE=64]="INLINE",e[e.EXTERNAL=128]="EXTERNAL",e[e.BUILTIN=256]="BUILTIN",e[e.LAZY=512]="LAZY",e[e.UNSAFE=1024]="UNSAFE"}(g=r.DecoratorFlags||(r.DecoratorFlags={})),function(e){e.fromKind=function(r){switch(r){case p.DecoratorKind.GLOBAL:return e.GLOBAL;case p.DecoratorKind.OPERATOR:case p.DecoratorKind.OPERATOR_BINARY:return e.OPERATOR_BINARY;case p.DecoratorKind.OPERATOR_PREFIX:return e.OPERATOR_PREFIX;case p.DecoratorKind.OPERATOR_POSTFIX:return e.OPERATOR_POSTFIX;case p.DecoratorKind.UNMANAGED:return e.UNMANAGED;case p.DecoratorKind.SEALED:return e.SEALED;case p.DecoratorKind.INLINE:return e.INLINE;case p.DecoratorKind.EXTERNAL:return e.EXTERNAL;case p.DecoratorKind.BUILTIN:return e.BUILTIN;case p.DecoratorKind.LAZY:return e.LAZY;case p.DecoratorKind.UNSAFE:return e.UNSAFE;default:return e.NONE}}}(g=r.DecoratorFlags||(r.DecoratorFlags={}));var v=function(){function e(e,r,t,n,i){this.kind=e,this.name=r,this.internalName=t,this.program=n,this.flags=l.CommonFlags.NONE,this.decoratorFlags=g.NONE,this.members=null,this.shadowType=null,this.program=n,this.name=r,this.internalName=t,i?this.parent=i:(assert(this.kind==f.FILE),this.parent=this)}return Object.defineProperty(e.prototype,"file",{get:function(){for(var e=this;;)if((e=e.parent).kind==f.FILE)return e},enumerable:!0,configurable:!0}),e.prototype.is=function(e){return(this.flags&e)==e},e.prototype.isAny=function(e){return 0!=(this.flags&e)},e.prototype.set=function(e){this.flags|=e},e.prototype.unset=function(e){this.flags&=~e},e.prototype.hasDecorator=function(e){return(this.decoratorFlags&e)==e},e.prototype.lookupInSelf=function(e){var r=this.members;return r&&r.has(e)?r.get(e):null},e.prototype.add=function(e,r){var t=r.declaration,n=this.members;if(n){if(n.has(e)){var i=n.get(e);if(i.parent!==this);else{var a=j(i,r);if(!a)return I(i.kind)?this.program.errorRelated(c.DiagnosticCode.Duplicate_identifier_0,r.identifierNode.range,i.declaration.name.range,r.identifierNode.text):this.program.error(c.DiagnosticCode.Duplicate_identifier_0,r.identifierNode.range,r.identifierNode.text),!1;r=a}}}else this.members=n=new Map;n.set(e,r);var s=this.program;return r.kind==f.FUNCTION_PROTOTYPE&&r.isBound||(s.elementsByName.set(r.internalName,r),s.elementsByDeclaration.set(t,r)),!0},e.prototype.toString=function(){return f[this.kind]+":"+this.internalName},e}();r.Element=v;var b=new Set;function I(e){return b.has(e)}r.isDeclaredElement=I;var x=function(e){function r(r,t,n,i,a,s){var o=e.call(this,r,t,n,i,a)||this;return o.declaration=s,b.add(r),o.declaration=s,o.flags=s.flags,o}return i(r,e),Object.defineProperty(r.prototype,"isDeclaredInLibrary",{get:function(){return this.declaration.range.source.isLibrary},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"identifierNode",{get:function(){return this.declaration.name},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"decoratorNodes",{get:function(){return this.declaration.decorators},enumerable:!0,configurable:!0}),r}(v);r.DeclaredElement=x;var A=new Set;r.isTypedElement=function(e){return A.has(e)};var N=function(e){function r(r,t,n,i,a,s){var o=e.call(this,r,t,n,i,a,s)||this;return o.type=u.Type.void,A.add(r),o}return i(r,e),r.prototype.setType=function(e){assert(!this.is(l.CommonFlags.RESOLVED)),this.type=e,this.set(l.CommonFlags.RESOLVED)},r}(x);r.TypedElement=N;var S=function(e){function r(r,t){var n=e.call(this,f.FILE,t.normalizedPath,t.internalPath,r,null)||this;n.source=t,n.exports=null,n.exportsStar=null,n.source=t,assert(!r.filesByName.has(n.internalName)),r.filesByName.set(n.internalName,n);var i=n.program.makeNativeFunction("start:"+n.internalName,new u.Signature(r,null,u.Type.void),n);return i.internalName=i.name,n.startFunction=i,n}return i(r,e),r.prototype.add=function(r,t,n){return void 0===n&&(n=!1),t.hasDecorator(g.GLOBAL)&&(t=this.program.ensureGlobal(r,t)),!!e.prototype.add.call(this,r,t)&&((t=assert(this.lookupInSelf(r))).is(l.CommonFlags.EXPORT)&&!n&&this.ensureExport(t.name,t),!0)},r.prototype.lookupInSelf=function(r){var t=e.prototype.lookupInSelf.call(this,r);if(t)return t;var n=this.exportsStar;if(n)for(var i=0,a=n.length;i<a;++i)if(t=n[i].lookupInSelf(r))return t;return null},r.prototype.lookup=function(e){var r=this.lookupInSelf(e);return r||this.program.lookupGlobal(e)},r.prototype.ensureExport=function(e,r){var t=this.exports;t||(this.exports=t=new Map),t.set(e,r),this.source.sourceKind==p.SourceKind.LIBRARY_ENTRY&&this.program.ensureGlobal(e,r)},r.prototype.ensureExportStar=function(e){var r=this.exportsStar;if(r){if(r.includes(e))return}else this.exportsStar=r=[];r.push(e)},r.prototype.lookupExport=function(e){var r=this.exports;if(r&&r.has(e))return r.get(e);var t=this.exportsStar;if(t)for(var n=0,i=t.length;n<i;++n){var a=t[n].lookupExport(e);if(a)return a}return null},r.prototype.asImportedNamespace=function(e,r){var t,n,i=new C(e,r,this.program.makeNativeNamespaceDeclaration(e)),o=this.exports;if(o)try{for(var l=a(o),c=l.next();!c.done;c=l.next()){var u=s(c.value,2),p=u[0],_=u[1];i.add(p,_)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return i},r}(v);r.File=S;var O=function(e){function r(r,t,n,i){void 0===i&&(i=g.NONE);var a=e.call(this,f.TYPEDEFINITION,r,J(r,t,!1),t.program,t,n)||this;return a.decoratorFlags=i,a}return i(r,e),Object.defineProperty(r.prototype,"typeParameterNodes",{get:function(){return this.declaration.typeParameters},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"typeNode",{get:function(){return this.declaration.type},enumerable:!0,configurable:!0}),r.prototype.lookup=function(e){return this.parent.lookup(e)},r}(N);r.TypeDefinition=O;var C=function(e){function r(r,t,n,i){void 0===i&&(i=g.NONE);var a=e.call(this,f.NAMESPACE,r,J(r,t,!1),t.program,t,n)||this;return a.decoratorFlags=i,a}return i(r,e),r.prototype.lookup=function(e){return this.lookupInSelf(e)||this.parent.lookup(e)},r}(x);r.Namespace=C;var R=function(e){function r(r,t,n,i){void 0===i&&(i=g.NONE);var a=e.call(this,f.ENUM,r,J(r,t,!1),t.program,t,n)||this;return a.decoratorFlags=i,a.setType(u.Type.i32),a}return i(r,e),r.prototype.lookup=function(e){return this.lookupInSelf(e)||this.parent.lookup(e)},r}(N);r.Enum=R,function(e){e[e.NONE=0]="NONE",e[e.INTEGER=1]="INTEGER",e[e.FLOAT=2]="FLOAT"}(r.ConstantValueKind||(r.ConstantValueKind={}));var L=function(e){function r(r,t,n,i){void 0===i&&(i=n.program.makeNativeVariableDeclaration(t));var a=e.call(this,r,t,J(t,n,!1),n.program,n,i)||this;return a.constantValueKind=0,a.flags=i.flags,a}return i(r,e),Object.defineProperty(r.prototype,"typeNode",{get:function(){return this.declaration.type},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"initializerNode",{get:function(){return this.declaration.initializer},enumerable:!0,configurable:!0}),r.prototype.setConstantIntegerValue=function(e,r){assert(r.is(4)),this.type=r,this.constantValueKind=1,this.constantIntegerValue=e,this.set(l.CommonFlags.CONST|l.CommonFlags.INLINED|l.CommonFlags.RESOLVED)},r.prototype.setConstantFloatValue=function(e,r){assert(r.is(8)),this.type=r,this.constantValueKind=2,this.constantFloatValue=e,this.set(l.CommonFlags.CONST|l.CommonFlags.INLINED|l.CommonFlags.RESOLVED)},r.prototype.lookup=function(e){return this.parent.lookup(e)},r}(N);r.VariableLikeElement=L;var k=function(e){function r(r,t,n,i){void 0===i&&(i=g.NONE);var a=e.call(this,f.ENUMVALUE,r,t,n)||this;return a.isImmutable=!1,a.decoratorFlags=i,a.setType(u.Type.i32),a}return i(r,e),Object.defineProperty(r.prototype,"valueNode",{get:function(){return this.declaration.value},enumerable:!0,configurable:!0}),r.prototype.lookup=function(e){return this.parent.lookup(e)},r}(L);r.EnumValue=k;var F=function(e){function r(r,t,n,i){void 0===i&&(i=t.program.makeNativeVariableDeclaration(r));var a=e.call(this,f.GLOBAL,r,t,i)||this;return a.decoratorFlags=n,a}return i(r,e),r}(L);r.Global=F;var D=function(e,r,t){void 0===t&&(t=null),this.name=e,this.type=r,this.initializer=t};r.Parameter=D;var B=function(e){function r(r,t,n,i,a){void 0===a&&(a=i.program.makeNativeVariableDeclaration(r));var s=e.call(this,f.LOCAL,r,i,a)||this;return s.index=t,s.index=t,assert(n!=u.Type.void),s.setType(n),s}return i(r,e),r}(L);r.Local=B;var P=function(e){function r(r,t,n,i){void 0===i&&(i=g.NONE);var a=e.call(this,f.FUNCTION_PROTOTYPE,r,J(r,t,n.is(l.CommonFlags.INSTANCE)),t.program,t,n)||this;return a.operatorKind=o.INVALID,a.instances=null,a.boundPrototypes=null,a.decoratorFlags=i,a}return i(r,e),Object.defineProperty(r.prototype,"typeParameterNodes",{get:function(){return this.declaration.typeParameters},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"functionTypeNode",{get:function(){return this.declaration.signature},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bodyNode",{get:function(){return this.declaration.body},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"arrowKind",{get:function(){return this.declaration.arrowKind},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isBound",{get:function(){var e=this.parent;return e.kind==f.CLASS||e.kind==f.PROPERTY_PROTOTYPE&&e.parent.kind==f.CLASS},enumerable:!0,configurable:!0}),r.prototype.toBound=function(e){assert(this.is(l.CommonFlags.INSTANCE)),assert(!this.isBound);var t=this.boundPrototypes;if(t){if(t.has(e))return t.get(e)}else this.boundPrototypes=t=new Map;var n=this.declaration;assert(n.kind==p.NodeKind.METHODDECLARATION);var i=new r(this.name,e,n,this.decoratorFlags);return i.flags=this.flags,i.operatorKind=this.operatorKind,t.set(e,i),i},r.prototype.getResolvedInstance=function(e){var r=this.instances;return r&&r.has(e)?r.get(e):null},r.prototype.setResolvedInstance=function(e,r){var t=this.instances;t?assert(!t.has(e)):this.instances=t=new Map,t.set(e,r)},r.prototype.lookup=function(e){return this.parent.lookup(e)},r}(x);r.FunctionPrototype=P;var w=function(e){function r(r,t,n,i){void 0===i&&(i=null);var a=e.call(this,f.FUNCTION,r,J(r,t.parent,t.is(l.CommonFlags.INSTANCE)),t.program,t.parent,t.declaration)||this;if(a.localsByName=new Map,a.localsByIndex=[],a.additionalLocals=[],a.debugLocations=[],a.ref=0,a.functionTableIndex=-1,a.trampoline=null,a.nextInlineId=0,a.nextAnonymousId=0,a.nextAutoreleaseId=0,a.tempI32s=null,a.tempI64s=null,a.tempF32s=null,a.tempF64s=null,a.tempV128s=null,a.nextBreakId=0,a.breakStack=null,a.breakLabel=null,a.prototype=t,a.signature=n,a.flags=t.flags|l.CommonFlags.RESOLVED,a.decoratorFlags=t.decoratorFlags,a.contextualTypeArguments=i,a.type=u.Type.u32.asFunction(n),!t.is(l.CommonFlags.AMBIENT)){var s=0;if(a.is(l.CommonFlags.INSTANCE)){var o=new B(l.CommonSymbols.this_,s++,assert(n.thisType),a);a.localsByName.set(l.CommonSymbols.this_,o),a.localsByIndex[o.index]=o}for(var c=n.parameterTypes,p=0,_=c.length;p<_;++p){var h=c[p],y=n.getParameterName(p);o=new B(y,s++,h,a);a.localsByName.set(y,o),a.localsByIndex[o.index]=o}}return a.flow=d.Flow.create(a),Q(a.program,a),a}return i(r,e),r.prototype.addLocal=function(e,r,t){void 0===r&&(r=null),void 0===t&&(t=null);var n=this.signature.parameterTypes.length+this.additionalLocals.length;this.is(l.CommonFlags.INSTANCE)&&++n;var i=null!==r?r:"var$"+n.toString(),a=new B(i,n,e,this,t||this.program.makeNativeVariableDeclaration(i));if(r){if(this.localsByName.has(r))throw new Error("duplicate local name");this.localsByName.set(r,a)}return this.localsByIndex[a.index]=a,this.additionalLocals.push(e),a},r.prototype.lookup=function(e){var r=this.localsByName;return r.has(e)?r.get(e):this.parent.lookup(e)},r.prototype.finalize=function(e,r){if(this.ref=r,assert(!this.breakStack||!this.breakStack.length),this.breakStack=null,this.breakLabel=null,this.tempI32s=this.tempI64s=this.tempF32s=this.tempF64s=null,this.program.options.sourceMap)for(var t=this.debugLocations,n=0,i=t.length;n<i;++n){var a=t[n];e.setDebugLocation(r,a.debugInfoRef,a.source.debugInfoIndex,a.line,a.column)}},r}(N);r.Function=w;var U=function(e){function r(r,t,n){void 0===n&&(n="");var i=e.call(this,f.FUNCTION_TARGET,n="sig:"+r.toSignatureString(),n,t,t.nativeFile)||this;return i.signature=r,i.flags=l.CommonFlags.RESOLVED,i.type=u.Type.u32.asFunction(r),i}return i(r,e),r.prototype.lookup=function(e){return null},r}(v);r.FunctionTarget=U;var M=function(e){function r(r,t,n,i){void 0===i&&(i=g.NONE);var a=e.call(this,f.FIELD_PROTOTYPE,r,J(r,t,assert(n.is(l.CommonFlags.INSTANCE))),t.program,t,n)||this;return a.decoratorFlags=i,a}return i(r,e),Object.defineProperty(r.prototype,"typeNode",{get:function(){return this.declaration.type},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"initializerNode",{get:function(){return this.declaration.initializer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"parameterIndex",{get:function(){return this.declaration.parameterIndex},enumerable:!0,configurable:!0}),r.prototype.lookup=function(e){return this.parent.lookup(e)},r}(x);r.FieldPrototype=M;var G=function(e){function r(r,t,n){var i=e.call(this,f.FIELD,r.name,t,r.declaration)||this;return i.memoryOffset=-1,i.prototype=r,i.flags=r.flags,i.decoratorFlags=r.decoratorFlags,assert(n!=u.Type.void),i.setType(n),Q(i.program,i),i}return i(r,e),r}(L);r.Field=G;var V=function(e){function r(r,t,n){var i=e.call(this,f.PROPERTY_PROTOTYPE,r,J(r,t,n.is(l.CommonFlags.INSTANCE)),t.program,t,n)||this;return i.getterPrototype=null,i.setterPrototype=null,i.flags&=~(l.CommonFlags.GET|l.CommonFlags.SET),i}return i(r,e),r.prototype.lookup=function(e){return this.parent.lookup(e)},r}(x);r.PropertyPrototype=V;var K=function(e){function r(r,t){var n=e.call(this,f.PROPERTY,r.name,t,r.program.makeNativeVariableDeclaration(r.name,r.is(l.CommonFlags.INSTANCE)?l.CommonFlags.INSTANCE:l.CommonFlags.NONE))||this;return n.getterInstance=null,n.setterInstance=null,n.prototype=r,n.flags=r.flags,n.decoratorFlags=r.decoratorFlags,Q(n.program,n),n}return i(r,e),r.prototype.lookup=function(e){return this.parent.lookup(e)},r}(L);r.Property=K;var z=function(e){function r(r){return e.call(this,f.INDEXSIGNATURE,r.internalName+"[]",r)||this}return i(r,e),r.prototype.getGetterInstance=function(e){return this.parent.lookupOverload(o.INDEXED_GET,e)},r.prototype.getSetterInstance=function(e){return this.parent.lookupOverload(o.INDEXED_SET,e)},r.prototype.lookup=function(e){return this.parent.lookup(e)},r}(L);r.IndexSignature=z;var Y,H=function(e){function r(r,t,n,i,a){void 0===i&&(i=g.NONE),void 0===a&&(a=!1);var s=e.call(this,a?f.INTERFACE_PROTOTYPE:f.CLASS_PROTOTYPE,r,J(r,t,n.is(l.CommonFlags.INSTANCE)),t.program,t,n)||this;return s.instanceMembers=null,s.basePrototype=null,s.constructorPrototype=null,s.overloadPrototypes=new Map,s.instances=null,s.decoratorFlags=i,s}return i(r,e),Object.defineProperty(r.prototype,"typeParameterNodes",{get:function(){return this.declaration.typeParameters},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"extendsNode",{get:function(){return this.declaration.extendsType},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"implementsNodes",{get:function(){return this.declaration.implementsTypes},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isBuiltinArray",{get:function(){var e=this.program.arrayBufferViewInstance;return null!==e&&this.extends(e.prototype)},enumerable:!0,configurable:!0}),r.prototype.extends=function(e){var r=this;do{if(r===e)return!0}while(r=r.basePrototype);return!1},r.prototype.addInstance=function(e,r){var t=r.declaration,n=this.instanceMembers;if(n){if(n.has(e)){var i=n.get(e),a=j(i,r);if(!a)return I(i.kind)?this.program.errorRelated(c.DiagnosticCode.Duplicate_identifier_0,r.identifierNode.range,i.declaration.name.range,r.identifierNode.text):this.program.error(c.DiagnosticCode.Duplicate_identifier_0,r.identifierNode.range,r.identifierNode.text),!1;r=a}}else this.instanceMembers=n=new Map;return n.set(e,r),r.is(l.CommonFlags.EXPORT)&&this.is(l.CommonFlags.MODULE_EXPORT)&&r.set(l.CommonFlags.MODULE_EXPORT),this.program.elementsByDeclaration.set(t,r),!0},r.prototype.getResolvedInstance=function(e){var r=this.instances;return r&&r.has(e)?r.get(e):null},r.prototype.setResolvedInstance=function(e,r){var t=this.instances;t?assert(!t.has(e)):this.instances=t=new Map,t.set(e,r)},r.prototype.lookup=function(e){return this.parent.lookup(e)},r}(x);r.ClassPrototype=H,function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.ACYCLIC=1]="ACYCLIC",e[e.NOT_ACYCLIC=2]="NOT_ACYCLIC"}(Y||(Y={}));var W=function(e){function r(r,t,n,i,o){var c,u;void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=!1);var p=e.call(this,o?f.INTERFACE:f.CLASS,r,J(r,t.parent,t.is(l.CommonFlags.INSTANCE)),t.program,t.parent,t.declaration)||this;p.contextualTypeArguments=null,p.currentMemoryOffset=0,p.constructorInstance=null,p.overloads=null,p.indexSignature=null,p._id=0,p._acyclic=0,p.rttiFlags=0,p.wrappedType=null;var _=p.program;if(p.prototype=t,p.flags=t.flags,p.decoratorFlags=t.decoratorFlags,p.typeArguments=n,p.setType(_.options.usizeType.asClass(p)),p.base=i,!p.hasDecorator(g.UNMANAGED)){var h=_.nextClassId++;p._id=h,_.managedClasses.set(h,p)}if(i){var d=i.contextualTypeArguments;if(d){var y=p.contextualTypeArguments;try{for(var T=a(d),m=T.next();!m.done;m=T.next()){var E=s(m.value,2),v=E[0],b=E[1];y||(p.contextualTypeArguments=y=new Map),y.set(v,b)}}catch(e){c={error:e}}finally{try{m&&!m.done&&(u=T.return)&&u.call(T)}finally{if(c)throw c.error}}}}var I=t.typeParameterNodes;if(n){var x=n.length;if(!I||x!=I.length)throw new Error("type argument count mismatch");if(x){p.contextualTypeArguments||(p.contextualTypeArguments=new Map);for(var A=0;A<x;++A)p.contextualTypeArguments.set(I[A].name.text,n[A])}}else if(I&&I.length)throw new Error("type argument count mismatch");return Q(_,p),p}return i(r,e),Object.defineProperty(r.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isBuiltinArray",{get:function(){return this.prototype.isBuiltinArray},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isArrayLike",{get:function(){if(this.isBuiltinArray)return!0;var e=this.lookupInSelf("length");return null!==e&&(e.kind==f.FIELD||e.kind==f.PROPERTY&&null!==e.getterInstance)&&(null!==this.lookupOverload(o.INDEXED_GET)||null!==this.lookupOverload(o.UNCHECKED_INDEXED_GET))},enumerable:!0,configurable:!0}),r.prototype.isAssignableTo=function(e){var r=this;do{if(r==e)return!0}while(r=r.base);return!1},r.prototype.lookupOverload=function(e,r){if(void 0===r&&(r=!1),r)switch(e){case o.INDEXED_GET:if(t=this.lookupOverload(o.UNCHECKED_INDEXED_GET))return t;break;case o.INDEXED_SET:var t;if(t=this.lookupOverload(o.UNCHECKED_INDEXED_SET))return t;break;default:assert(!1)}var n=this;do{var i=n.overloads;if(i){var a=i.get(e);if(a)return a}}while(n=n.base);return null},r.prototype.lookup=function(e){return this.parent.lookup(e)},r.prototype.offsetof=function(e){var r=assert(this.members);assert(r.has(e));var t=r.get(e);return assert(t.kind==f.FIELD),t.memoryOffset},r.prototype.writeField=function(e,r,t,n){var i=this.lookupInSelf(e);if(i&&i.kind==f.FIELD){var a=n+i.memoryOffset;switch(i.type.kind){case 0:case 5:return _.writeI8(i32(r),t,a),1;case 1:case 6:return _.writeI16(i32(r),t,a),2;case 2:case 7:return _.writeI32(i32(r),t,a),4;case 4:case 9:return assert(!this.program.options.isWasm64),_.writeI32(i32(r),t,a),4;case 11:return _.writeF32(f32(r),t,a),4;case 12:return _.writeF64(f64(r),t,a),8}}return assert(!1),0},r.prototype.extends=function(e){return this.prototype.extends(e)},r.prototype.getTypeArgumentsTo=function(e){var r=this;do{if(r.prototype===e)return r.typeArguments}while(r=r.base);return null},r.prototype.getArrayValueType=function(){for(var e=this,r=this.program,t=r.arrayBufferViewInstance;e.base!==t;)e=assert(e.base);switch(e.prototype){case r.i8ArrayPrototype:return u.Type.i8;case r.i16ArrayPrototype:return u.Type.i16;case r.i32ArrayPrototype:return u.Type.i32;case r.i64ArrayPrototype:return u.Type.i64;case r.u8ArrayPrototype:case r.u8ClampedArrayPrototype:return u.Type.u8;case r.u16ArrayPrototype:return u.Type.u16;case r.u32ArrayPrototype:return u.Type.u32;case r.u64ArrayPrototype:return u.Type.u64;case r.f32ArrayPrototype:return u.Type.f32;case r.f64ArrayPrototype:return u.Type.f64;case r.arrayPrototype:return assert(this.getTypeArgumentsTo(r.arrayPrototype))[0];default:assert(!1)}return u.Type.void},Object.defineProperty(r.prototype,"isAcyclic",{get:function(){var e=this._acyclic;if(0==e){var r=this.cyclesTo(this);this._acyclic=e=r?2:1}return 1==e},enumerable:!0,configurable:!0}),r.prototype.cyclesTo=function(e,r){var t,n,i;if(void 0===r&&(r=new Set),r.has(this))return!1;r.add(this);var s,o=this.members;if(o)try{for(var l=a(o.values()),c=l.next();!c.done;c=l.next()){var u=c.value;if(u.kind==f.FIELD){var p=u.type;if(p.is(256)&&null!==(i=p.classReference)&&(i===e||i.cyclesTo(e,r)))return!0}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}if((s=this.program.arrayPrototype)&&this.prototype.extends(s)){var _=assert(this.getTypeArgumentsTo(s));if(assert(1==_.length),null!==(i=_[0].classReference)&&(i===e||i.cyclesTo(e,r)))return!0}else if((s=this.program.setPrototype)&&this.prototype.extends(s)){_=assert(this.getTypeArgumentsTo(s));if(assert(1==_.length),null!==(i=_[0].classReference)&&(i===e||i.cyclesTo(e,r)))return!0}else if((s=this.program.mapPrototype)&&this.prototype.extends(s)){_=assert(this.getTypeArgumentsTo(s));if(assert(2==_.length),null!==(i=_[0].classReference)&&(i===e||i.cyclesTo(e,r)))return!0;if(null!==(i=_[1].classReference)&&(i===e||i.cyclesTo(e,r)))return!0}return!1},r}(N);r.Class=W;var X=function(e){function r(r,t,n,i){return e.call(this,r,t,n,i,!0)||this}return i(r,e),r}(H);r.InterfacePrototype=X;var q=function(e){function r(r,t,n,i){return void 0===n&&(n=[]),void 0===i&&(i=null),e.call(this,r,t,n,i,!0)||this}return i(r,e),r}(W);function Q(e,r){assert(!e.instancesByName.has(r.internalName)),e.instancesByName.set(r.internalName,r)}function j(e,r){assert(e.program===r.program),assert(!r.members);var t=null;switch(e.kind){case f.FUNCTION_PROTOTYPE:switch(r.kind){case f.NAMESPACE:Z(r,e),t=e;break;case f.TYPEDEFINITION:e.shadowType||(e.shadowType=r,Z(r,e),t=e)}break;case f.CLASS_PROTOTYPE:case f.ENUM:if(r.kind==f.NAMESPACE){Z(r,e),t=e;break}break;case f.NAMESPACE:switch(r.kind){case f.ENUM:case f.CLASS_PROTOTYPE:case f.FUNCTION_PROTOTYPE:Z(e,r),t=r;break;case f.NAMESPACE:Z(r,e),t=e;break;case f.TYPEDEFINITION:e.shadowType||(e.shadowType=r,Z(r,e),t=e)}break;case f.GLOBAL:r.kind==f.TYPEDEFINITION&&(e.shadowType||(e.shadowType=r,Z(r,e),t=e));break;case f.TYPEDEFINITION:switch(r.kind){case f.GLOBAL:case f.FUNCTION_PROTOTYPE:case f.NAMESPACE:r.shadowType||(r.shadowType=e,Z(e,r),t=r)}}t&&((e.is(l.CommonFlags.EXPORT)||e.hasDecorator(g.GLOBAL))!=(r.is(l.CommonFlags.EXPORT)||r.hasDecorator(g.GLOBAL))&&e.program.error(c.DiagnosticCode.Individual_declarations_in_merged_declaration_0_must_be_all_exported_or_all_local,t.identifierNode.range,t.identifierNode.text));return t}function Z(e,r){var t,n,i=e.members;if(i){var o=r.members;o||(r.members=o=new Map);try{for(var l=a(i),c=l.next();!c.done;c=l.next()){var u=s(c.value,2),p=u[0],_=u[1];o.set(p,_)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}}}function J(e,r,t,n){switch(void 0===n&&(n=!1),r.kind){case f.FILE:return n?e:r.internalName+l.PATH_DELIMITER+e;case f.FUNCTION:return n?e:(assert(!t),r.internalName+l.INNER_DELIMITER+e);default:return J(r.name,r.parent,r.is(l.CommonFlags.INSTANCE),n)+(t?l.INSTANCE_DELIMITER:l.STATIC_DELIMITER)+e}}r.Interface=q,r.mangleInternalName=J},function(e,r,t){"use strict";var n=this&&this.__values||function(e){var r="function"==typeof Symbol&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var i,a,s=t(0);!function(e){e[e.None=_BinaryenTypeNone()]="None",e[e.I32=_BinaryenTypeInt32()]="I32",e[e.I64=_BinaryenTypeInt64()]="I64",e[e.F32=_BinaryenTypeFloat32()]="F32",e[e.F64=_BinaryenTypeFloat64()]="F64",e[e.V128=_BinaryenTypeVec128()]="V128",e[e.Anyref=_BinaryenTypeAnyref()]="Anyref",e[e.Exnref=_BinaryenTypeExnref()]="Exnref",e[e.Unreachable=_BinaryenTypeUnreachable()]="Unreachable",e[e.Auto=_BinaryenTypeAuto()]="Auto"}(i=r.NativeType||(r.NativeType={})),function(e){e[e.MVP=_BinaryenFeatureMVP()]="MVP",e[e.Atomics=_BinaryenFeatureAtomics()]="Atomics",e[e.MutableGloabls=_BinaryenFeatureMutableGlobals()]="MutableGloabls",e[e.NontrappingFPToInt=_BinaryenFeatureNontrappingFPToInt()]="NontrappingFPToInt",e[e.SIMD128=_BinaryenFeatureSIMD128()]="SIMD128",e[e.BulkMemory=_BinaryenFeatureBulkMemory()]="BulkMemory",e[e.SignExt=_BinaryenFeatureSignExt()]="SignExt",e[e.ExceptionHandling=_BinaryenFeatureExceptionHandling()]="ExceptionHandling",e[e.TailCall=_BinaryenFeatureTailCall()]="TailCall",e[e.ReferenceTypes=_BinaryenFeatureReferenceTypes()]="ReferenceTypes",e[e.All=_BinaryenFeatureAll()]="All"}(r.FeatureFlags||(r.FeatureFlags={})),function(e){e[e.Invalid=_BinaryenInvalidId()]="Invalid",e[e.Block=_BinaryenBlockId()]="Block",e[e.If=_BinaryenIfId()]="If",e[e.Loop=_BinaryenLoopId()]="Loop",e[e.Break=_BinaryenBreakId()]="Break",e[e.Switch=_BinaryenSwitchId()]="Switch",e[e.Call=_BinaryenCallId()]="Call",e[e.CallIndirect=_BinaryenCallIndirectId()]="CallIndirect",e[e.LocalGet=_BinaryenLocalGetId()]="LocalGet",e[e.LocalSet=_BinaryenLocalSetId()]="LocalSet",e[e.GlobalGet=_BinaryenGlobalGetId()]="GlobalGet",e[e.GlobalSet=_BinaryenGlobalSetId()]="GlobalSet",e[e.Load=_BinaryenLoadId()]="Load",e[e.Store=_BinaryenStoreId()]="Store",e[e.Const=_BinaryenConstId()]="Const",e[e.Unary=_BinaryenUnaryId()]="Unary",e[e.Binary=_BinaryenBinaryId()]="Binary",e[e.Select=_BinaryenSelectId()]="Select",e[e.Drop=_BinaryenDropId()]="Drop",e[e.Return=_BinaryenReturnId()]="Return",e[e.Host=_BinaryenHostId()]="Host",e[e.Nop=_BinaryenNopId()]="Nop",e[e.Unreachable=_BinaryenUnreachableId()]="Unreachable",e[e.AtomicCmpxchg=_BinaryenAtomicCmpxchgId()]="AtomicCmpxchg",e[e.AtomicRMW=_BinaryenAtomicRMWId()]="AtomicRMW",e[e.AtomicWait=_BinaryenAtomicWaitId()]="AtomicWait",e[e.AtomicNotify=_BinaryenAtomicNotifyId()]="AtomicNotify",e[e.AtomicFence=_BinaryenAtomicFenceId()]="AtomicFence",e[e.SIMDExtract=_BinaryenSIMDExtractId()]="SIMDExtract",e[e.SIMDReplace=_BinaryenSIMDReplaceId()]="SIMDReplace",e[e.SIMDShuffle=_BinaryenSIMDShuffleId()]="SIMDShuffle",e[e.SIMDTernary=_BinaryenSIMDTernaryId()]="SIMDTernary",e[e.SIMDShift=_BinaryenSIMDShiftId()]="SIMDShift",e[e.SIMDLoad=_BinaryenSIMDLoadId()]="SIMDLoad",e[e.MemoryInit=_BinaryenMemoryInitId()]="MemoryInit",e[e.DataDrop=_BinaryenDataDropId()]="DataDrop",e[e.MemoryCopy=_BinaryenMemoryCopyId()]="MemoryCopy",e[e.MemoryFill=_BinaryenMemoryFillId()]="MemoryFill",e[e.Try=_BinaryenTryId()]="Try",e[e.Throw=_BinaryenThrowId()]="Throw",e[e.Rethrow=_BinaryenRethrowId()]="Rethrow",e[e.BrOnExn=_BinaryenBrOnExnId()]="BrOnExn",e[e.Push=_BinaryenPushId()]="Push",e[e.Pop=_BinaryenPopId()]="Pop"}(a=r.ExpressionId||(r.ExpressionId={})),function(e){e[e.ClzI32=_BinaryenClzInt32()]="ClzI32",e[e.CtzI32=_BinaryenCtzInt32()]="CtzI32",e[e.PopcntI32=_BinaryenPopcntInt32()]="PopcntI32",e[e.NegF32=_BinaryenNegFloat32()]="NegF32",e[e.AbsF32=_BinaryenAbsFloat32()]="AbsF32",e[e.CeilF32=_BinaryenCeilFloat32()]="CeilF32",e[e.FloorF32=_BinaryenFloorFloat32()]="FloorF32",e[e.TruncF32=_BinaryenTruncFloat32()]="TruncF32",e[e.NearestF32=_BinaryenNearestFloat32()]="NearestF32",e[e.SqrtF32=_BinaryenSqrtFloat32()]="SqrtF32",e[e.EqzI32=_BinaryenEqZInt32()]="EqzI32",e[e.ClzI64=_BinaryenClzInt64()]="ClzI64",e[e.CtzI64=_BinaryenCtzInt64()]="CtzI64",e[e.PopcntI64=_BinaryenPopcntInt64()]="PopcntI64",e[e.NegF64=_BinaryenNegFloat64()]="NegF64",e[e.AbsF64=_BinaryenAbsFloat64()]="AbsF64",e[e.CeilF64=_BinaryenCeilFloat64()]="CeilF64",e[e.FloorF64=_BinaryenFloorFloat64()]="FloorF64",e[e.TruncF64=_BinaryenTruncFloat64()]="TruncF64",e[e.NearestF64=_BinaryenNearestFloat64()]="NearestF64",e[e.SqrtF64=_BinaryenSqrtFloat64()]="SqrtF64",e[e.EqzI64=_BinaryenEqZInt64()]="EqzI64",e[e.ExtendI32=_BinaryenExtendSInt32()]="ExtendI32",e[e.ExtendU32=_BinaryenExtendUInt32()]="ExtendU32",e[e.WrapI64=_BinaryenWrapInt64()]="WrapI64",e[e.TruncF32ToI32=_BinaryenTruncSFloat32ToInt32()]="TruncF32ToI32",e[e.TruncF32ToI64=_BinaryenTruncSFloat32ToInt64()]="TruncF32ToI64",e[e.TruncF32ToU32=_BinaryenTruncUFloat32ToInt32()]="TruncF32ToU32",e[e.TruncF32ToU64=_BinaryenTruncUFloat32ToInt64()]="TruncF32ToU64",e[e.TruncF64ToI32=_BinaryenTruncSFloat64ToInt32()]="TruncF64ToI32",e[e.TruncF64ToI64=_BinaryenTruncSFloat64ToInt64()]="TruncF64ToI64",e[e.TruncF64ToU32=_BinaryenTruncUFloat64ToInt32()]="TruncF64ToU32",e[e.TruncF64ToU64=_BinaryenTruncUFloat64ToInt64()]="TruncF64ToU64",e[e.ReinterpretF32=_BinaryenReinterpretFloat32()]="ReinterpretF32",e[e.ReinterpretF64=_BinaryenReinterpretFloat64()]="ReinterpretF64",e[e.ConvertI32ToF32=_BinaryenConvertSInt32ToFloat32()]="ConvertI32ToF32",e[e.ConvertI32ToF64=_BinaryenConvertSInt32ToFloat64()]="ConvertI32ToF64",e[e.ConvertU32ToF32=_BinaryenConvertUInt32ToFloat32()]="ConvertU32ToF32",e[e.ConvertU32ToF64=_BinaryenConvertUInt32ToFloat64()]="ConvertU32ToF64",e[e.ConvertI64ToF32=_BinaryenConvertSInt64ToFloat32()]="ConvertI64ToF32",e[e.ConvertI64ToF64=_BinaryenConvertSInt64ToFloat64()]="ConvertI64ToF64",e[e.ConvertU64ToF32=_BinaryenConvertUInt64ToFloat32()]="ConvertU64ToF32",e[e.ConvertU64ToF64=_BinaryenConvertUInt64ToFloat64()]="ConvertU64ToF64",e[e.PromoteF32=_BinaryenPromoteFloat32()]="PromoteF32",e[e.DemoteF64=_BinaryenDemoteFloat64()]="DemoteF64",e[e.ReinterpretI32=_BinaryenReinterpretInt32()]="ReinterpretI32",e[e.ReinterpretI64=_BinaryenReinterpretInt64()]="ReinterpretI64",e[e.ExtendI8ToI32=_BinaryenExtendS8Int32()]="ExtendI8ToI32",e[e.ExtendI16ToI32=_BinaryenExtendS16Int32()]="ExtendI16ToI32",e[e.ExtendI8ToI64=_BinaryenExtendS8Int64()]="ExtendI8ToI64",e[e.ExtendI16ToI64=_BinaryenExtendS16Int64()]="ExtendI16ToI64",e[e.ExtendI32ToI64=_BinaryenExtendS32Int64()]="ExtendI32ToI64",e[e.TruncF32ToI32Sat=_BinaryenTruncSatSFloat32ToInt32()]="TruncF32ToI32Sat",e[e.TruncF32ToU32Sat=_BinaryenTruncSatUFloat32ToInt32()]="TruncF32ToU32Sat",e[e.TruncF64ToI32Sat=_BinaryenTruncSatSFloat64ToInt32()]="TruncF64ToI32Sat",e[e.TruncF64ToU32Sat=_BinaryenTruncSatUFloat64ToInt32()]="TruncF64ToU32Sat",e[e.TruncF32ToI64Sat=_BinaryenTruncSatSFloat32ToInt64()]="TruncF32ToI64Sat",e[e.TruncF32ToU64Sat=_BinaryenTruncSatUFloat32ToInt64()]="TruncF32ToU64Sat",e[e.TruncF64ToI64Sat=_BinaryenTruncSatSFloat64ToInt64()]="TruncF64ToI64Sat",e[e.TruncF64ToU64Sat=_BinaryenTruncSatUFloat64ToInt64()]="TruncF64ToU64Sat",e[e.SplatI8x16=_BinaryenSplatVecI8x16()]="SplatI8x16",e[e.SplatI16x8=_BinaryenSplatVecI16x8()]="SplatI16x8",e[e.SplatI32x4=_BinaryenSplatVecI32x4()]="SplatI32x4",e[e.SplatI64x2=_BinaryenSplatVecI64x2()]="SplatI64x2",e[e.SplatF32x4=_BinaryenSplatVecF32x4()]="SplatF32x4",e[e.SplatF64x2=_BinaryenSplatVecF64x2()]="SplatF64x2",e[e.NotV128=_BinaryenNotVec128()]="NotV128",e[e.NegI8x16=_BinaryenNegVecI8x16()]="NegI8x16",e[e.AnyTrueI8x16=_BinaryenAnyTrueVecI8x16()]="AnyTrueI8x16",e[e.AllTrueI8x16=_BinaryenAllTrueVecI8x16()]="AllTrueI8x16",e[e.NegI16x8=_BinaryenNegVecI16x8()]="NegI16x8",e[e.AnyTrueI16x8=_BinaryenAnyTrueVecI16x8()]="AnyTrueI16x8",e[e.AllTrueI16x8=_BinaryenAllTrueVecI16x8()]="AllTrueI16x8",e[e.NegI32x4=_BinaryenNegVecI32x4()]="NegI32x4",e[e.AnyTrueI32x4=_BinaryenAnyTrueVecI32x4()]="AnyTrueI32x4",e[e.AllTrueI32x4=_BinaryenAllTrueVecI32x4()]="AllTrueI32x4",e[e.NegI64x2=_BinaryenNegVecI64x2()]="NegI64x2",e[e.AnyTrueI64x2=_BinaryenAnyTrueVecI64x2()]="AnyTrueI64x2",e[e.AllTrueI64x2=_BinaryenAllTrueVecI64x2()]="AllTrueI64x2",e[e.AbsF32x4=_BinaryenAbsVecF32x4()]="AbsF32x4",e[e.NegF32x4=_BinaryenNegVecF32x4()]="NegF32x4",e[e.SqrtF32x4=_BinaryenSqrtVecF32x4()]="SqrtF32x4",e[e.AbsF64x2=_BinaryenAbsVecF64x2()]="AbsF64x2",e[e.NegF64x2=_BinaryenNegVecF64x2()]="NegF64x2",e[e.SqrtF64x2=_BinaryenSqrtVecF64x2()]="SqrtF64x2",e[e.TruncSatF32x4ToI32x4=_BinaryenTruncSatSVecF32x4ToVecI32x4()]="TruncSatF32x4ToI32x4",e[e.TruncSatF32x4ToU32x4=_BinaryenTruncSatUVecF32x4ToVecI32x4()]="TruncSatF32x4ToU32x4",e[e.TruncSatF64x2ToI64x2=_BinaryenTruncSatSVecF64x2ToVecI64x2()]="TruncSatF64x2ToI64x2",e[e.TruncSatF64x2ToU64x2=_BinaryenTruncSatUVecF64x2ToVecI64x2()]="TruncSatF64x2ToU64x2",e[e.ConvertI32x4ToF32x4=_BinaryenConvertSVecI32x4ToVecF32x4()]="ConvertI32x4ToF32x4",e[e.ConvertU32x4ToF32x4=_BinaryenConvertUVecI32x4ToVecF32x4()]="ConvertU32x4ToF32x4",e[e.ConvertI64x2ToF64x2=_BinaryenConvertSVecI64x2ToVecF64x2()]="ConvertI64x2ToF64x2",e[e.ConvertU64x2ToF64x2=_BinaryenConvertUVecI64x2ToVecF64x2()]="ConvertU64x2ToF64x2",e[e.WidenLowI8x16ToI16x8=_BinaryenWidenLowSVecI8x16ToVecI16x8()]="WidenLowI8x16ToI16x8",e[e.WidenLowU8x16ToU16x8=_BinaryenWidenLowUVecI8x16ToVecI16x8()]="WidenLowU8x16ToU16x8",e[e.WidenHighI8x16ToI16x8=_BinaryenWidenHighSVecI8x16ToVecI16x8()]="WidenHighI8x16ToI16x8",e[e.WidenHighU8x16ToU16x8=_BinaryenWidenHighUVecI8x16ToVecI16x8()]="WidenHighU8x16ToU16x8",e[e.WidenLowI16x8ToI32x4=_BinaryenWidenLowSVecI16x8ToVecI32x4()]="WidenLowI16x8ToI32x4",e[e.WidenLowU16x8ToU32x4=_BinaryenWidenLowUVecI16x8ToVecI32x4()]="WidenLowU16x8ToU32x4",e[e.WidenHighI16x8ToI32x4=_BinaryenWidenHighSVecI16x8ToVecI32x4()]="WidenHighI16x8ToI32x4",e[e.WidenHighU16x8ToU32x4=_BinaryenWidenHighUVecI16x8ToVecI32x4()]="WidenHighU16x8ToU32x4"}(r.UnaryOp||(r.UnaryOp={})),function(e){e[e.AddI32=_BinaryenAddInt32()]="AddI32",e[e.SubI32=_BinaryenSubInt32()]="SubI32",e[e.MulI32=_BinaryenMulInt32()]="MulI32",e[e.DivI32=_BinaryenDivSInt32()]="DivI32",e[e.DivU32=_BinaryenDivUInt32()]="DivU32",e[e.RemI32=_BinaryenRemSInt32()]="RemI32",e[e.RemU32=_BinaryenRemUInt32()]="RemU32",e[e.AndI32=_BinaryenAndInt32()]="AndI32",e[e.OrI32=_BinaryenOrInt32()]="OrI32",e[e.XorI32=_BinaryenXorInt32()]="XorI32",e[e.ShlI32=_BinaryenShlInt32()]="ShlI32",e[e.ShrU32=_BinaryenShrUInt32()]="ShrU32",e[e.ShrI32=_BinaryenShrSInt32()]="ShrI32",e[e.RotlI32=_BinaryenRotLInt32()]="RotlI32",e[e.RotrI32=_BinaryenRotRInt32()]="RotrI32",e[e.EqI32=_BinaryenEqInt32()]="EqI32",e[e.NeI32=_BinaryenNeInt32()]="NeI32",e[e.LtI32=_BinaryenLtSInt32()]="LtI32",e[e.LtU32=_BinaryenLtUInt32()]="LtU32",e[e.LeI32=_BinaryenLeSInt32()]="LeI32",e[e.LeU32=_BinaryenLeUInt32()]="LeU32",e[e.GtI32=_BinaryenGtSInt32()]="GtI32",e[e.GtU32=_BinaryenGtUInt32()]="GtU32",e[e.GeI32=_BinaryenGeSInt32()]="GeI32",e[e.GeU32=_BinaryenGeUInt32()]="GeU32",e[e.AddI64=_BinaryenAddInt64()]="AddI64",e[e.SubI64=_BinaryenSubInt64()]="SubI64",e[e.MulI64=_BinaryenMulInt64()]="MulI64",e[e.DivI64=_BinaryenDivSInt64()]="DivI64",e[e.DivU64=_BinaryenDivUInt64()]="DivU64",e[e.RemI64=_BinaryenRemSInt64()]="RemI64",e[e.RemU64=_BinaryenRemUInt64()]="RemU64",e[e.AndI64=_BinaryenAndInt64()]="AndI64",e[e.OrI64=_BinaryenOrInt64()]="OrI64",e[e.XorI64=_BinaryenXorInt64()]="XorI64",e[e.ShlI64=_BinaryenShlInt64()]="ShlI64",e[e.ShrU64=_BinaryenShrUInt64()]="ShrU64",e[e.ShrI64=_BinaryenShrSInt64()]="ShrI64",e[e.RotlI64=_BinaryenRotLInt64()]="RotlI64",e[e.RotrI64=_BinaryenRotRInt64()]="RotrI64",e[e.EqI64=_BinaryenEqInt64()]="EqI64",e[e.NeI64=_BinaryenNeInt64()]="NeI64",e[e.LtI64=_BinaryenLtSInt64()]="LtI64",e[e.LtU64=_BinaryenLtUInt64()]="LtU64",e[e.LeI64=_BinaryenLeSInt64()]="LeI64",e[e.LeU64=_BinaryenLeUInt64()]="LeU64",e[e.GtI64=_BinaryenGtSInt64()]="GtI64",e[e.GtU64=_BinaryenGtUInt64()]="GtU64",e[e.GeI64=_BinaryenGeSInt64()]="GeI64",e[e.GeU64=_BinaryenGeUInt64()]="GeU64",e[e.AddF32=_BinaryenAddFloat32()]="AddF32",e[e.SubF32=_BinaryenSubFloat32()]="SubF32",e[e.MulF32=_BinaryenMulFloat32()]="MulF32",e[e.DivF32=_BinaryenDivFloat32()]="DivF32",e[e.CopysignF32=_BinaryenCopySignFloat32()]="CopysignF32",e[e.MinF32=_BinaryenMinFloat32()]="MinF32",e[e.MaxF32=_BinaryenMaxFloat32()]="MaxF32",e[e.EqF32=_BinaryenEqFloat32()]="EqF32",e[e.NeF32=_BinaryenNeFloat32()]="NeF32",e[e.LtF32=_BinaryenLtFloat32()]="LtF32",e[e.LeF32=_BinaryenLeFloat32()]="LeF32",e[e.GtF32=_BinaryenGtFloat32()]="GtF32",e[e.GeF32=_BinaryenGeFloat32()]="GeF32",e[e.AddF64=_BinaryenAddFloat64()]="AddF64",e[e.SubF64=_BinaryenSubFloat64()]="SubF64",e[e.MulF64=_BinaryenMulFloat64()]="MulF64",e[e.DivF64=_BinaryenDivFloat64()]="DivF64",e[e.CopysignF64=_BinaryenCopySignFloat64()]="CopysignF64",e[e.MinF64=_BinaryenMinFloat64()]="MinF64",e[e.MaxF64=_BinaryenMaxFloat64()]="MaxF64",e[e.EqF64=_BinaryenEqFloat64()]="EqF64",e[e.NeF64=_BinaryenNeFloat64()]="NeF64",e[e.LtF64=_BinaryenLtFloat64()]="LtF64",e[e.LeF64=_BinaryenLeFloat64()]="LeF64",e[e.GtF64=_BinaryenGtFloat64()]="GtF64",e[e.GeF64=_BinaryenGeFloat64()]="GeF64",e[e.EqI8x16=_BinaryenEqVecI8x16()]="EqI8x16",e[e.NeI8x16=_BinaryenNeVecI8x16()]="NeI8x16",e[e.LtI8x16=_BinaryenLtSVecI8x16()]="LtI8x16",e[e.LtU8x16=_BinaryenLtUVecI8x16()]="LtU8x16",e[e.LeI8x16=_BinaryenLeSVecI8x16()]="LeI8x16",e[e.LeU8x16=_BinaryenLeUVecI8x16()]="LeU8x16",e[e.GtI8x16=_BinaryenGtSVecI8x16()]="GtI8x16",e[e.GtU8x16=_BinaryenGtUVecI8x16()]="GtU8x16",e[e.GeI8x16=_BinaryenGeSVecI8x16()]="GeI8x16",e[e.GeU8x16=_BinaryenGeUVecI8x16()]="GeU8x16",e[e.EqI16x8=_BinaryenEqVecI16x8()]="EqI16x8",e[e.NeI16x8=_BinaryenNeVecI16x8()]="NeI16x8",e[e.LtI16x8=_BinaryenLtSVecI16x8()]="LtI16x8",e[e.LtU16x8=_BinaryenLtUVecI16x8()]="LtU16x8",e[e.LeI16x8=_BinaryenLeSVecI16x8()]="LeI16x8",e[e.LeU16x8=_BinaryenLeUVecI16x8()]="LeU16x8",e[e.GtI16x8=_BinaryenGtSVecI16x8()]="GtI16x8",e[e.GtU16x8=_BinaryenGtUVecI16x8()]="GtU16x8",e[e.GeI16x8=_BinaryenGeSVecI16x8()]="GeI16x8",e[e.GeU16x8=_BinaryenGeUVecI16x8()]="GeU16x8",e[e.EqI32x4=_BinaryenEqVecI32x4()]="EqI32x4",e[e.NeI32x4=_BinaryenNeVecI32x4()]="NeI32x4",e[e.LtI32x4=_BinaryenLtSVecI32x4()]="LtI32x4",e[e.LtU32x4=_BinaryenLtUVecI32x4()]="LtU32x4",e[e.LeI32x4=_BinaryenLeSVecI32x4()]="LeI32x4",e[e.LeU32x4=_BinaryenLeUVecI32x4()]="LeU32x4",e[e.GtI32x4=_BinaryenGtSVecI32x4()]="GtI32x4",e[e.GtU32x4=_BinaryenGtUVecI32x4()]="GtU32x4",e[e.GeI32x4=_BinaryenGeSVecI32x4()]="GeI32x4",e[e.GeU32x4=_BinaryenGeUVecI32x4()]="GeU32x4",e[e.EqF32x4=_BinaryenEqVecF32x4()]="EqF32x4",e[e.NeF32x4=_BinaryenNeVecF32x4()]="NeF32x4",e[e.LtF32x4=_BinaryenLtVecF32x4()]="LtF32x4",e[e.LeF32x4=_BinaryenLeVecF32x4()]="LeF32x4",e[e.GtF32x4=_BinaryenGtVecF32x4()]="GtF32x4",e[e.GeF32x4=_BinaryenGeVecF32x4()]="GeF32x4",e[e.EqF64x2=_BinaryenEqVecF64x2()]="EqF64x2",e[e.NeF64x2=_BinaryenNeVecF64x2()]="NeF64x2",e[e.LtF64x2=_BinaryenLtVecF64x2()]="LtF64x2",e[e.LeF64x2=_BinaryenLeVecF64x2()]="LeF64x2",e[e.GtF64x2=_BinaryenGtVecF64x2()]="GtF64x2",e[e.GeF64x2=_BinaryenGeVecF64x2()]="GeF64x2",e[e.AndV128=_BinaryenAndVec128()]="AndV128",e[e.OrV128=_BinaryenOrVec128()]="OrV128",e[e.XorV128=_BinaryenXorVec128()]="XorV128",e[e.AndNotV128=_BinaryenAndNotVec128()]="AndNotV128",e[e.AddI8x16=_BinaryenAddVecI8x16()]="AddI8x16",e[e.AddSatI8x16=_BinaryenAddSatSVecI8x16()]="AddSatI8x16",e[e.AddSatU8x16=_BinaryenAddSatUVecI8x16()]="AddSatU8x16",e[e.SubI8x16=_BinaryenSubVecI8x16()]="SubI8x16",e[e.SubSatI8x16=_BinaryenSubSatSVecI8x16()]="SubSatI8x16",e[e.SubSatU8x16=_BinaryenSubSatUVecI8x16()]="SubSatU8x16",e[e.MulI8x16=_BinaryenMulVecI8x16()]="MulI8x16",e[e.AddI16x8=_BinaryenAddVecI16x8()]="AddI16x8",e[e.AddSatI16x8=_BinaryenAddSatSVecI16x8()]="AddSatI16x8",e[e.AddSatU16x8=_BinaryenAddSatUVecI16x8()]="AddSatU16x8",e[e.SubI16x8=_BinaryenSubVecI16x8()]="SubI16x8",e[e.SubSatI16x8=_BinaryenSubSatSVecI16x8()]="SubSatI16x8",e[e.SubSatU16x8=_BinaryenSubSatUVecI16x8()]="SubSatU16x8",e[e.MulI16x8=_BinaryenMulVecI16x8()]="MulI16x8",e[e.AddI32x4=_BinaryenAddVecI32x4()]="AddI32x4",e[e.SubI32x4=_BinaryenSubVecI32x4()]="SubI32x4",e[e.MulI32x4=_BinaryenMulVecI32x4()]="MulI32x4",e[e.AddI64x2=_BinaryenAddVecI64x2()]="AddI64x2",e[e.SubI64x2=_BinaryenSubVecI64x2()]="SubI64x2",e[e.AddF32x4=_BinaryenAddVecF32x4()]="AddF32x4",e[e.SubF32x4=_BinaryenSubVecF32x4()]="SubF32x4",e[e.MulF32x4=_BinaryenMulVecF32x4()]="MulF32x4",e[e.DivF32x4=_BinaryenDivVecF32x4()]="DivF32x4",e[e.MinF32x4=_BinaryenMinVecF32x4()]="MinF32x4",e[e.MaxF32x4=_BinaryenMaxVecF32x4()]="MaxF32x4",e[e.AddF64x2=_BinaryenAddVecF64x2()]="AddF64x2",e[e.SubF64x2=_BinaryenSubVecF64x2()]="SubF64x2",e[e.MulF64x2=_BinaryenMulVecF64x2()]="MulF64x2",e[e.DivF64x2=_BinaryenDivVecF64x2()]="DivF64x2",e[e.MinF64x2=_BinaryenMinVecF64x2()]="MinF64x2",e[e.MaxF64x2=_BinaryenMaxVecF64x2()]="MaxF64x2",e[e.NarrowI16x8ToI8x16=_BinaryenNarrowSVecI16x8ToVecI8x16()]="NarrowI16x8ToI8x16",e[e.NarrowU16x8ToU8x16=_BinaryenNarrowUVecI16x8ToVecI8x16()]="NarrowU16x8ToU8x16",e[e.NarrowI32x4ToI16x8=_BinaryenNarrowSVecI32x4ToVecI16x8()]="NarrowI32x4ToI16x8",e[e.NarrowU32x4ToU16x8=_BinaryenNarrowUVecI32x4ToVecI16x8()]="NarrowU32x4ToU16x8",e[e.SwizzleV8x16=_BinaryenSwizzleVec8x16()]="SwizzleV8x16"}(r.BinaryOp||(r.BinaryOp={})),function(e){e[e.MemorySize=_BinaryenMemorySize()]="MemorySize",e[e.MemoryGrow=_BinaryenMemoryGrow()]="MemoryGrow"}(r.HostOp||(r.HostOp={})),function(e){e[e.Add=_BinaryenAtomicRMWAdd()]="Add",e[e.Sub=_BinaryenAtomicRMWSub()]="Sub",e[e.And=_BinaryenAtomicRMWAnd()]="And",e[e.Or=_BinaryenAtomicRMWOr()]="Or",e[e.Xor=_BinaryenAtomicRMWXor()]="Xor",e[e.Xchg=_BinaryenAtomicRMWXchg()]="Xchg"}(r.AtomicRMWOp||(r.AtomicRMWOp={})),function(e){e[e.ExtractLaneI8x16=_BinaryenExtractLaneSVecI8x16()]="ExtractLaneI8x16",e[e.ExtractLaneU8x16=_BinaryenExtractLaneUVecI8x16()]="ExtractLaneU8x16",e[e.ExtractLaneI16x8=_BinaryenExtractLaneSVecI16x8()]="ExtractLaneI16x8",e[e.ExtractLaneU16x8=_BinaryenExtractLaneUVecI16x8()]="ExtractLaneU16x8",e[e.ExtractLaneI32x4=_BinaryenExtractLaneVecI32x4()]="ExtractLaneI32x4",e[e.ExtractLaneI64x2=_BinaryenExtractLaneVecI64x2()]="ExtractLaneI64x2",e[e.ExtractLaneF32x4=_BinaryenExtractLaneVecF32x4()]="ExtractLaneF32x4",e[e.ExtractLaneF64x2=_BinaryenExtractLaneVecF64x2()]="ExtractLaneF64x2"}(r.SIMDExtractOp||(r.SIMDExtractOp={})),function(e){e[e.ReplaceLaneI8x16=_BinaryenReplaceLaneVecI8x16()]="ReplaceLaneI8x16",e[e.ReplaceLaneI16x8=_BinaryenReplaceLaneVecI16x8()]="ReplaceLaneI16x8",e[e.ReplaceLaneI32x4=_BinaryenReplaceLaneVecI32x4()]="ReplaceLaneI32x4",e[e.ReplaceLaneI64x2=_BinaryenReplaceLaneVecI64x2()]="ReplaceLaneI64x2",e[e.ReplaceLaneF32x4=_BinaryenReplaceLaneVecF32x4()]="ReplaceLaneF32x4",e[e.ReplaceLaneF64x2=_BinaryenReplaceLaneVecF64x2()]="ReplaceLaneF64x2"}(r.SIMDReplaceOp||(r.SIMDReplaceOp={})),function(e){e[e.ShlI8x16=_BinaryenShlVecI8x16()]="ShlI8x16",e[e.ShrI8x16=_BinaryenShrSVecI8x16()]="ShrI8x16",e[e.ShrU8x16=_BinaryenShrUVecI8x16()]="ShrU8x16",e[e.ShlI16x8=_BinaryenShlVecI16x8()]="ShlI16x8",e[e.ShrI16x8=_BinaryenShrSVecI16x8()]="ShrI16x8",e[e.ShrU16x8=_BinaryenShrUVecI16x8()]="ShrU16x8",e[e.ShlI32x4=_BinaryenShlVecI32x4()]="ShlI32x4",e[e.ShrI32x4=_BinaryenShrSVecI32x4()]="ShrI32x4",e[e.ShrU32x4=_BinaryenShrUVecI32x4()]="ShrU32x4",e[e.ShlI64x2=_BinaryenShlVecI64x2()]="ShlI64x2",e[e.ShrI64x2=_BinaryenShrSVecI64x2()]="ShrI64x2",e[e.ShrU64x2=_BinaryenShrUVecI64x2()]="ShrU64x2"}(r.SIMDShiftOp||(r.SIMDShiftOp={})),function(e){e[e.Bitselect=_BinaryenBitselectVec128()]="Bitselect",e[e.QFMAF32x4=_BinaryenQFMAVecF32x4()]="QFMAF32x4",e[e.QFMSF32x4=_BinaryenQFMSVecF32x4()]="QFMSF32x4",e[e.QFMAF64x2=_BinaryenQFMAVecF64x2()]="QFMAF64x2",e[e.QFMSF64x2=_BinaryenQFMSVecF64x2()]="QFMSF64x2"}(r.SIMDTernaryOp||(r.SIMDTernaryOp={})),function(e){e[e.LoadSplatV8x16=_BinaryenLoadSplatVec8x16()]="LoadSplatV8x16",e[e.LoadSplatV16x8=_BinaryenLoadSplatVec16x8()]="LoadSplatV16x8",e[e.LoadSplatV32x4=_BinaryenLoadSplatVec32x4()]="LoadSplatV32x4",e[e.LoadSplatV64x2=_BinaryenLoadSplatVec64x2()]="LoadSplatV64x2",e[e.LoadI8ToI16x8=_BinaryenLoadExtSVec8x8ToVecI16x8()]="LoadI8ToI16x8",e[e.LoadU8ToU16x8=_BinaryenLoadExtUVec8x8ToVecI16x8()]="LoadU8ToU16x8",e[e.LoadI16ToI32x4=_BinaryenLoadExtSVec16x4ToVecI32x4()]="LoadI16ToI32x4",e[e.LoadU16ToU32x4=_BinaryenLoadExtUVec16x4ToVecI32x4()]="LoadU16ToU32x4",e[e.LoadI32ToI64x2=_BinaryenLoadExtSVec32x2ToVecI64x2()]="LoadI32ToI64x2",e[e.LoadU32ToU64x2=_BinaryenLoadExtUVec32x2ToVecI64x2()]="LoadU32ToU64x2"}(r.SIMDLoadOp||(r.SIMDLoadOp={}));var o=function(){function e(){}return e.create=function(r,t){var n=new e;return n.buffer=r,n.offset=t,n},e}();r.MemorySegment=o;var l=function(){function e(){this.hasTemporaryFunction=!1,this.cachedPrecomputeNames=0,this.cachedStrings=new Map}return e.create=function(){var r=new e;return r.ref=_BinaryenModuleCreate(),r.lit=memory.allocate(_BinaryenSizeofLiteral()),r},e.createFrom=function(r){var t=p(r);try{var n=new e;return n.ref=_BinaryenModuleRead(t,r.length),n.lit=memory.allocate(_BinaryenSizeofLiteral()),n}finally{memory.free(changetype(t))}},e.prototype.addFunctionType=function(e,r,t){var n=this.allocStringCached(e),i=_(t);try{return _BinaryenAddFunctionType(this.ref,n,r,i,t?t.length:0)}finally{memory.free(i)}},e.prototype.getFunctionTypeBySignature=function(e,r){var t=_(r);try{return _BinaryenGetFunctionTypeBySignature(this.ref,e,t,r?r.length:0)}finally{memory.free(t)}},e.prototype.removeFunctionType=function(e){var r=this.allocStringCached(e);_BinaryenRemoveFunctionType(this.ref,r)},e.prototype.i32=function(e){var r=this.lit;return _BinaryenLiteralInt32(r,e),_BinaryenConst(this.ref,r)},e.prototype.i64=function(e,r){void 0===r&&(r=0);var t=this.lit;return _BinaryenLiteralInt64(t,e,r),_BinaryenConst(this.ref,t)},e.prototype.f32=function(e){var r=this.lit;return _BinaryenLiteralFloat32(r,e),_BinaryenConst(this.ref,r)},e.prototype.f64=function(e){var r=this.lit;return _BinaryenLiteralFloat64(r,e),_BinaryenConst(this.ref,r)},e.prototype.v128=function(e){assert(16==e.length);for(var r=this.lit,t=0;t<16;++t)store(r+t,e[t]);return _BinaryenLiteralVec128(r,r),_BinaryenConst(this.ref,r)},e.prototype.unary=function(e,r){return _BinaryenUnary(this.ref,e,r)},e.prototype.binary=function(e,r,t){return _BinaryenBinary(this.ref,e,r,t)},e.prototype.host=function(e,r,t){void 0===r&&(r=null),void 0===t&&(t=null);var n=this.allocStringCached(r),i=h(t);try{return _BinaryenHost(this.ref,e,n,i,t?t.length:0)}finally{memory.free(i)}},e.prototype.local_get=function(e,r){return _BinaryenLocalGet(this.ref,e,r)},e.prototype.local_tee=function(e,r){return _BinaryenLocalTee(this.ref,e,r)},e.prototype.global_get=function(e,r){var t=this.allocStringCached(e);return _BinaryenGlobalGet(this.ref,t,r)},e.prototype.load=function(e,r,t,n,i,a){return void 0===i&&(i=0),void 0===a&&(a=e),_BinaryenLoad(this.ref,e,r?1:0,i,a,n,t)},e.prototype.store=function(e,r,t,n,a,s){if(void 0===a&&(a=0),void 0===s&&(s=e),n<i.None||n>i.V128)throw new Error("here: "+n);return _BinaryenStore(this.ref,e,a,s,r,t,n)},e.prototype.atomic_load=function(e,r,t,n){return void 0===n&&(n=0),_BinaryenAtomicLoad(this.ref,e,n,t,r)},e.prototype.atomic_store=function(e,r,t,n,i){return void 0===i&&(i=0),_BinaryenAtomicStore(this.ref,e,i,r,t,n)},e.prototype.atomic_rmw=function(e,r,t,n,i,a){return _BinaryenAtomicRMW(this.ref,e,r,t,n,i,a)},e.prototype.atomic_cmpxchg=function(e,r,t,n,i,a){return _BinaryenAtomicCmpxchg(this.ref,e,r,t,n,i,a)},e.prototype.atomic_wait=function(e,r,t,n){return _BinaryenAtomicWait(this.ref,e,r,t,n)},e.prototype.atomic_notify=function(e,r){return _BinaryenAtomicNotify(this.ref,e,r)},e.prototype.atomic_fence=function(){return _BinaryenAtomicFence(this.ref)},e.prototype.local_set=function(e,r){return _BinaryenLocalSet(this.ref,e,r)},e.prototype.global_set=function(e,r){var t=this.allocStringCached(e);return _BinaryenGlobalSet(this.ref,t,r)},e.prototype.block=function(e,r,t){void 0===t&&(t=i.None);var n=this.allocStringCached(e),a=h(r);try{return _BinaryenBlock(this.ref,n,a,r.length,t)}finally{memory.free(a)}},e.prototype.br=function(e,r,t){void 0===r&&(r=0),void 0===t&&(t=0);var n=this.allocStringCached(e);return _BinaryenBreak(this.ref,n,r,t)},e.prototype.drop=function(e){return _BinaryenDrop(this.ref,e)},e.prototype.loop=function(e,r){var t=this.allocStringCached(e);return _BinaryenLoop(this.ref,t,r)},e.prototype.if=function(e,r,t){return void 0===t&&(t=0),_BinaryenIf(this.ref,e,r,t)},e.prototype.nop=function(){return _BinaryenNop(this.ref)},e.prototype.return=function(e){return void 0===e&&(e=0),_BinaryenReturn(this.ref,e)},e.prototype.select=function(e,r,t){return _BinaryenSelect(this.ref,t,e,r)},e.prototype.switch=function(e,r,t,n){void 0===n&&(n=0);for(var i=e.length,a=new Array(i),s=0;s<i;++s)a[s]=this.allocStringCached(e[s]);var o=_(a),l=this.allocStringCached(r);try{return _BinaryenSwitch(this.ref,o,i,l,t,n)}finally{memory.free(o)}},e.prototype.call=function(e,r,t,n){void 0===n&&(n=!1);var i=this.allocStringCached(e),a=h(r);try{return n?_BinaryenReturnCall(this.ref,i,a,r&&r.length||0,t):_BinaryenCall(this.ref,i,a,r&&r.length||0,t)}finally{memory.free(a)}},e.prototype.return_call=function(e,r,t){return this.call(e,r,t,!0)},e.prototype.call_indirect=function(e,r,t,n){void 0===n&&(n=!1);var i=this.allocStringCached(t),a=h(r);try{return n?_BinaryenReturnCallIndirect(this.ref,e,a,r&&r.length||0,i):_BinaryenCallIndirect(this.ref,e,a,r&&r.length||0,i)}finally{memory.free(a)}},e.prototype.return_call_indirect=function(e,r,t){return this.call_indirect(e,r,t,!0)},e.prototype.unreachable=function(){return _BinaryenUnreachable(this.ref)},e.prototype.memory_copy=function(e,r,t){return _BinaryenMemoryCopy(this.ref,e,r,t)},e.prototype.memory_fill=function(e,r,t){return _BinaryenMemoryFill(this.ref,e,r,t)},e.prototype.try=function(e,r){return _BinaryenTry(this.ref,e,r)},e.prototype.throw=function(e,r){var t=this.allocStringCached(e),n=h(r);try{return _BinaryenThrow(this.ref,t,n,r.length)}finally{memory.free(n)}},e.prototype.rethrow=function(e){return _BinaryenRethrow(this.ref,e)},e.prototype.br_on_exn=function(e,r,t){var n=this.allocStringCached(e),i=this.allocStringCached(r);return _BinaryenBrOnExn(this.ref,n,i,t)},e.prototype.push=function(e){return _BinaryenPush(this.ref,e)},e.prototype.pop=function(e){return _BinaryenPop(this.ref,e)},e.prototype.simd_extract=function(e,r,t){return _BinaryenSIMDExtract(this.ref,e,r,t)},e.prototype.simd_replace=function(e,r,t,n){return _BinaryenSIMDReplace(this.ref,e,r,t,n)},e.prototype.simd_shuffle=function(e,r,t){assert(16==t.length);var n=p(t);try{return _BinaryenSIMDShuffle(this.ref,e,r,n)}finally{memory.free(n)}},e.prototype.simd_ternary=function(e,r,t,n){return _BinaryenSIMDTernary(this.ref,e,r,t,n)},e.prototype.simd_shift=function(e,r,t){return _BinaryenSIMDShift(this.ref,e,r,t)},e.prototype.simd_load=function(e,r,t,n){return _BinaryenSIMDLoad(this.ref,e,t,n,r)},e.prototype.addGlobal=function(e,r,t,n){var i=this.allocStringCached(e);return _BinaryenAddGlobal(this.ref,i,r,t,n)},e.prototype.removeGlobal=function(e){var r=this.allocStringCached(e);_BinaryenRemoveGlobal(this.ref,r)},e.prototype.addEvent=function(e,r,t){var n=this.allocStringCached(e);return _BinaryenAddEvent(this.ref,n,r,t)},e.prototype.addFunction=function(e,r,t,n){var i=this.allocStringCached(e),a=_(t);try{return _BinaryenAddFunction(this.ref,i,r,a,t?t.length:0,n)}finally{memory.free(a)}},e.prototype.getFunction=function(e){var r=this.allocStringCached(e);return _BinaryenGetFunction(this.ref,r)},e.prototype.removeFunction=function(e){var r=this.allocStringCached(e);_BinaryenRemoveFunction(this.ref,r)},e.prototype.addTemporaryFunction=function(e,r,t){this.hasTemporaryFunction=assert(!this.hasTemporaryFunction);var n=this.allocStringCached(""),i=_(r);try{var a=_BinaryenAddFunctionType(this.ref,n,e,i,r?r.length:0);return _BinaryenAddFunction(this.ref,n,a,0,0,t)}finally{memory.free(i)}},e.prototype.removeTemporaryFunction=function(){this.hasTemporaryFunction=!assert(this.hasTemporaryFunction);var e=this.allocStringCached("");_BinaryenRemoveFunction(this.ref,e),_BinaryenRemoveFunctionType(this.ref,e)},e.prototype.addFunctionExport=function(e,r){var t=this.allocStringCached(e),n=this.allocStringCached(r);return _BinaryenAddFunctionExport(this.ref,t,n)},e.prototype.addTableExport=function(e,r){var t=this.allocStringCached(e),n=this.allocStringCached(r);return _BinaryenAddTableExport(this.ref,t,n)},e.prototype.addMemoryExport=function(e,r){var t=this.allocStringCached(e),n=this.allocStringCached(r);return _BinaryenAddMemoryExport(this.ref,t,n)},e.prototype.addGlobalExport=function(e,r){var t=this.allocStringCached(e),n=this.allocStringCached(r);return _BinaryenAddGlobalExport(this.ref,t,n)},e.prototype.addEventExport=function(e,r){var t=this.allocStringCached(e),n=this.allocStringCached(r);return _BinaryenAddEventExport(this.ref,t,n)},e.prototype.removeExport=function(e){var r=this.allocStringCached(e);_BinaryenRemoveExport(this.ref,r)},e.prototype.addFunctionImport=function(e,r,t,n){var i=this.allocStringCached(e),a=this.allocStringCached(r),s=this.allocStringCached(t);_BinaryenAddFunctionImport(this.ref,i,a,s,n)},e.prototype.addTableImport=function(e,r,t){var n=this.allocStringCached(e),i=this.allocStringCached(r),a=this.allocStringCached(t);_BinaryenAddTableImport(this.ref,n,i,a)},e.prototype.addMemoryImport=function(e,r,t,n){void 0===n&&(n=!1);var i=this.allocStringCached(e),a=this.allocStringCached(r),s=this.allocStringCached(t);_BinaryenAddMemoryImport(this.ref,i,a,s,n)},e.prototype.addGlobalImport=function(e,r,t,n,i){void 0===i&&(i=!1);var a=this.allocStringCached(e),s=this.allocStringCached(r),o=this.allocStringCached(t);_BinaryenAddGlobalImport(this.ref,a,s,o,n,i)},e.prototype.addEventImport=function(e,r,t,n,i){var a=this.allocStringCached(e),s=this.allocStringCached(r),o=this.allocStringCached(t);_BinaryenAddEventImport(this.ref,a,s,o,n,i)},e.prototype.setMemory=function(e,r,t,n,i,a){void 0===i&&(i=null),void 0===a&&(a=!1);for(var o=this.allocStringCached(i),l=t.length,c=new Array(l),u=new Array(l),h=new Array(l),d=new Array(l),y=0;y<l;++y){var T=t[y].buffer,m=t[y].offset;c[y]=p(T),u[y]=0,h[y]=n==s.Target.WASM64?this.i64(i64_low(m),i64_high(m)):this.i32(i64_low(m)),d[y]=T.length}var f=_(c),g=p(u),E=_(h),v=_(d);try{_BinaryenSetMemory(this.ref,e,r,o,f,g,E,v,l,a)}finally{memory.free(v),memory.free(E),memory.free(g),memory.free(f);for(y=l-1;y>=0;--y)memory.free(c[y])}},e.prototype.setFunctionTable=function(e,r,t,n){for(var i=t.length,a=new Array(i),s=0;s<i;++s)a[s]=this.allocStringCached(t[s]);var o=_(a);try{_BinaryenSetFunctionTable(this.ref,e,r,o,i,n)}finally{memory.free(o)}},e.prototype.setStart=function(e){_BinaryenSetStart(this.ref,e)},e.prototype.addCustomSection=function(e,r){var t=this.allocStringCached(e),n=p(r);try{_BinaryenAddCustomSection(this.ref,t,n,r.length)}finally{memory.free(n)}},e.prototype.getOptimizeLevel=function(){return _BinaryenGetOptimizeLevel()},e.prototype.setOptimizeLevel=function(e){void 0===e&&(e=2),_BinaryenSetOptimizeLevel(e)},e.prototype.getShrinkLevel=function(){return _BinaryenGetShrinkLevel()},e.prototype.setShrinkLevel=function(e){void 0===e&&(e=1),_BinaryenSetShrinkLevel(e)},e.prototype.setDebugInfo=function(e){void 0===e&&(e=!1),_BinaryenSetDebugInfo(e)},e.prototype.getFeatures=function(){return _BinaryenModuleGetFeatures(this.ref)},e.prototype.setFeatures=function(e){_BinaryenModuleSetFeatures(this.ref,e)},e.prototype.optimize=function(e){void 0===e&&(e=0),e?_BinaryenFunctionOptimize(e,this.ref):_BinaryenModuleOptimize(this.ref)},e.prototype.runPasses=function(e,r){void 0===r&&(r=0);for(var t=e.length,n=new Array(t),i=0;i<t;++i)n[i]=d(e[i]);var a=_(n);try{r?_BinaryenFunctionRunPasses(r,this.ref,a,t):_BinaryenModuleRunPasses(this.ref,a,t)}finally{memory.free(a);for(i=t;i>=0;--i)memory.free(n[i])}},e.prototype.precomputeExpression=function(e){var r=_BinaryenGetOptimizeLevel(),t=_BinaryenGetShrinkLevel(),n=_BinaryenGetDebugInfo();_BinaryenSetOptimizeLevel(4),_BinaryenSetShrinkLevel(0),_BinaryenSetDebugInfo(!1);var i=_BinaryenExpressionGetType(e),s=this.addTemporaryFunction(i,null,e),o=this.cachedPrecomputeNames;return o||(this.cachedPrecomputeNames=o=_([this.allocStringCached("vacuum"),this.allocStringCached("precompute")])),_BinaryenFunctionRunPasses(s,this.ref,o,2),e=_BinaryenFunctionGetBody(s),_BinaryenExpressionGetId(e)==a.Return&&(e=_BinaryenReturnGetValue(e)),this.removeTemporaryFunction(),_BinaryenSetOptimizeLevel(r),_BinaryenSetShrinkLevel(t),_BinaryenSetDebugInfo(n),e},e.prototype.validate=function(){return 1==_BinaryenModuleValidate(this.ref)},e.prototype.interpret=function(){_BinaryenModuleInterpret(this.ref)},e.prototype.toBinary=function(e){var r=this.lit;assert(_BinaryenSizeofLiteral()>=12);var t=d(e),n=0,i=0;try{_BinaryenModuleAllocateAndWrite(r,this.ref,t),n=y(r);var a=y(r+4);i=y(r+8);var s=new m;return s.output=function(e,r){for(var t=new Uint8Array(r),n=0;n<r;++n)t[n]=load(e+n);return t}(n,a),s.sourceMap=T(i),s}finally{t&&memory.free(t),n&&memory.free(n),i&&memory.free(i)}},e.prototype.toText=function(){throw new Error("not implemented")},e.prototype.toAsmjs=function(){throw new Error("not implemented")},e.prototype.allocStringCached=function(e){if(null==e)return 0;var r=this.cachedStrings;if(r.has(e))return r.get(e);var t=d(e);return r.set(e,t),t},e.prototype.dispose=function(){var e,r;assert(this.ref);try{for(var t=n(this.cachedStrings.values()),i=t.next();!i.done;i=t.next()){var a=i.value;memory.free(a)}}catch(r){e={error:r}}finally{try{i&&!i.done&&(r=t.return)&&r.call(t)}finally{if(e)throw e.error}}this.cachedStrings=new Map,memory.free(this.lit),memory.free(this.cachedPrecomputeNames),this.cachedPrecomputeNames=0,_BinaryenModuleDispose(this.ref),this.ref=0},e.prototype.createRelooper=function(){return u.create(this)},e.prototype.cloneExpression=function(e,r,t){if(void 0===r&&(r=!1),void 0===t&&(t=i32.MAX_VALUE),t<0)return 0;var n,s;switch(t-=1,_BinaryenExpressionGetId(e)){case a.Const:switch(_BinaryenExpressionGetType(e)){case i.I32:return this.i32(_BinaryenConstGetValueI32(e));case i.I64:return this.i64(_BinaryenConstGetValueI64Low(e),_BinaryenConstGetValueI64High(e));case i.F32:return this.f32(_BinaryenConstGetValueF32(e));case i.F64:return this.f64(_BinaryenConstGetValueF64(e));case i.V128:return 0;default:throw new Error("concrete type expected")}case a.LocalGet:return _BinaryenLocalGet(this.ref,_BinaryenLocalGetGetIndex(e),_BinaryenExpressionGetType(e));case a.GlobalGet:var o=_BinaryenGlobalGetGetName(e);if(!o)break;return _BinaryenGlobalGet(this.ref,o,_BinaryenExpressionGetType(e));case a.Load:if(!(n=this.cloneExpression(_BinaryenLoadGetPtr(e),r,t)))break;return _BinaryenLoadIsAtomic(e)?_BinaryenAtomicLoad(this.ref,_BinaryenLoadGetBytes(e),_BinaryenLoadGetOffset(e),_BinaryenExpressionGetType(e),n):_BinaryenLoad(this.ref,_BinaryenLoadGetBytes(e),_BinaryenLoadIsSigned(e)?1:0,_BinaryenLoadGetOffset(e),_BinaryenLoadGetAlign(e),_BinaryenExpressionGetType(e),n);case a.Unary:if(!(n=this.cloneExpression(_BinaryenUnaryGetValue(e),r,t)))break;return _BinaryenUnary(this.ref,_BinaryenUnaryGetOp(e),n);case a.Binary:if(!(n=this.cloneExpression(_BinaryenBinaryGetLeft(e),r,t)))break;if(!(s=this.cloneExpression(_BinaryenBinaryGetRight(e),r,t)))break;return _BinaryenBinary(this.ref,_BinaryenBinaryGetOp(e),n,s)}return 0},e.prototype.addDebugInfoFile=function(e){var r=d(e);try{return _BinaryenModuleAddDebugInfoFileName(this.ref,r)}finally{memory.free(r)}},e.prototype.getDebugInfoFile=function(e){return T(_BinaryenModuleGetDebugInfoFileName(this.ref,e))},e.prototype.setDebugLocation=function(e,r,t,n,i){_BinaryenFunctionSetDebugLocation(e,r,t,n,i)},e.UNLIMITED_MEMORY=-1,e}();function c(e){return _BinaryenExpressionGetId(e)}r.Module=l,r.getExpressionId=c,r.getExpressionType=function(e){return _BinaryenExpressionGetType(e)},r.getConstValueI32=function(e){return _BinaryenConstGetValueI32(e)},r.getConstValueI64Low=function(e){return _BinaryenConstGetValueI64Low(e)},r.getConstValueI64High=function(e){return _BinaryenConstGetValueI64High(e)},r.getConstValueF32=function(e){return _BinaryenConstGetValueF32(e)},r.getConstValueF64=function(e){return _BinaryenConstGetValueF64(e)},r.getLocalGetIndex=function(e){return _BinaryenLocalGetGetIndex(e)},r.getLocalSetIndex=function(e){return _BinaryenLocalSetGetIndex(e)},r.getLocalSetValue=function(e){return _BinaryenLocalSetGetValue(e)},r.isLocalTee=function(e){return _BinaryenLocalSetIsTee(e)},r.getGlobalGetName=function(e){return T(_BinaryenGlobalGetGetName(e))},r.getBinaryOp=function(e){return _BinaryenBinaryGetOp(e)},r.getBinaryLeft=function(e){return _BinaryenBinaryGetLeft(e)},r.getBinaryRight=function(e){return _BinaryenBinaryGetRight(e)},r.getUnaryOp=function(e){return _BinaryenUnaryGetOp(e)},r.getUnaryValue=function(e){return _BinaryenUnaryGetValue(e)},r.getLoadBytes=function(e){return _BinaryenLoadGetBytes(e)},r.getLoadOffset=function(e){return _BinaryenLoadGetOffset(e)},r.getLoadPtr=function(e){return _BinaryenLoadGetPtr(e)},r.isLoadSigned=function(e){return _BinaryenLoadIsSigned(e)},r.getStoreBytes=function(e){return _BinaryenStoreGetBytes(e)},r.getStoreOffset=function(e){return _BinaryenStoreGetOffset(e)},r.getStorePtr=function(e){return _BinaryenStoreGetPtr(e)},r.getStoreValue=function(e){return _BinaryenStoreGetValue(e)},r.getBlockName=function(e){return T(_BinaryenBlockGetName(e))},r.getBlockChildCount=function(e){return _BinaryenBlockGetNumChildren(e)},r.getBlockChild=function(e,r){return _BinaryenBlockGetChild(e,r)},r.getIfCondition=function(e){return _BinaryenIfGetCondition(e)},r.getIfTrue=function(e){return _BinaryenIfGetIfTrue(e)},r.getIfFalse=function(e){return _BinaryenIfGetIfFalse(e)},r.getLoopName=function(e){return T(_BinaryenLoopGetName(e))},r.getLoopBody=function(e){return _BinaryenLoopGetBody(e)},r.getBreakName=function(e){return T(_BinaryenBreakGetName(e))},r.getBreakCondition=function(e){return _BinaryenBreakGetCondition(e)},r.getSelectThen=function(e){return _BinaryenSelectGetIfTrue(e)},r.getSelectElse=function(e){return _BinaryenSelectGetIfFalse(e)},r.getSelectCondition=function(e){return _BinaryenSelectGetCondition(e)},r.getDropValue=function(e){return _BinaryenDropGetValue(e)},r.getReturnValue=function(e){return _BinaryenReturnGetValue(e)},r.getCallTarget=function(e){return T(_BinaryenCallGetTarget(e))},r.getCallOperandCount=function(e){return _BinaryenCallGetNumOperands(e)},r.getCallOperand=function(e,r){return _BinaryenCallGetOperand(e,r)},r.getHostOp=function(e){return _BinaryenHostGetOp(e)},r.getHostOperandCount=function(e){return _BinaryenHostGetNumOperands(e)},r.getHostOperand=function(e,r){return _BinaryenHostGetOperand(e,r)},r.getHostName=function(e){return T(_BinaryenHostGetNameOperand(e))},r.getFunctionBody=function(e){return _BinaryenFunctionGetBody(e)},r.getFunctionName=function(e){return T(_BinaryenFunctionGetName(e))},r.getFunctionParamCount=function(e){return _BinaryenFunctionGetNumParams(e)},r.getFunctionParamType=function(e,r){return _BinaryenFunctionGetParam(e,r)},r.getFunctionResultType=function(e){return _BinaryenFunctionGetResult(e)};var u=function(){function e(){}return e.create=function(r){var t=new e;return t.module=r,t.ref=_RelooperCreate(r.ref),t},e.prototype.addBlock=function(e){return _RelooperAddBlock(this.ref,e)},e.prototype.addBranch=function(e,r,t,n){void 0===t&&(t=0),void 0===n&&(n=0),_RelooperAddBranch(e,r,t,n)},e.prototype.addBlockWithSwitch=function(e,r){return _RelooperAddBlockWithSwitch(this.ref,e,r)},e.prototype.addBranchForSwitch=function(e,r,t,n){void 0===n&&(n=0);var i=_(t);try{_RelooperAddBranchForSwitch(e,r,i,t.length,n)}finally{memory.free(i)}},e.prototype.renderAndDispose=function(e,r){return _RelooperRenderAndDispose(this.ref,e,r)},e}();function p(e){if(!e)return 0;for(var r=e.length,t=memory.allocate(r),n=t,i=0;i<r;++i)store(n++,e[i]);return t}function _(e){if(!e)return 0;for(var r=memory.allocate(e.length<<2),t=r,n=0,i=e.length;n<i;++n){var a=e[n];store(t,255&a),store(t+1,a>>8&255),store(t+2,a>>16&255),store(t+3,a>>>24),t+=4}return r}function h(e){return _(e)}function d(e){if(null==e)return 0;for(var r=memory.allocate(function(e){for(var r=0,t=0,n=e.length;t<n;++t){var i=e.charCodeAt(t);i>=55296&&i<=57343&&t+1<n&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++t)),i<=127?++r:r+=i<=2047?2:i<=65535?3:i<=2097151?4:i<=67108863?5:6}return r}(e)+1),t=r,n=0,i=e.length;n<i;++n){var a=e.charCodeAt(n);a>=55296&&a<=57343&&n+1<i&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++n)),a<=127?store(t++,a):a<=2047?(store(t++,192|a>>>6),store(t++,128|63&a)):a<=65535?(store(t++,224|a>>>12),store(t++,128|a>>>6&63),store(t++,128|63&a)):a<=2097151?(store(t++,240|a>>>18),store(t++,128|a>>>12&63),store(t++,128|a>>>6&63),store(t++,128|63&a)):a<=67108863?(store(t++,248|a>>>24),store(t++,128|a>>>18&63),store(t++,128|a>>>12&63),store(t++,128|a>>>6&63),store(t++,128|63&a)):(store(t++,252|a>>>30),store(t++,128|a>>>24&63),store(t++,128|a>>>18&63),store(t++,128|a>>>12&63),store(t++,128|a>>>6&63),store(t++,128|63&a))}return store(t,0),r}function y(e){return load(e)|load(e+1)<<8|load(e+2)<<16|load(e+3)<<24}function T(e){if(!e)return null;for(var r,t,n,i,a,s=new Array;r=load(e++);)128&r?(t=63&load(e++),192!=(224&r)?(n=63&load(e++),224==(240&r)?r=(15&r)<<12|t<<6|n:(i=63&load(e++),240==(248&r)?r=(7&r)<<18|t<<12|n<<6|i:(a=63&load(e++),r=248==(252&r)?(3&r)<<24|t<<18|n<<12|i<<6|a:(1&r)<<30|t<<24|n<<18|i<<12|a<<6|63&load(e++))),s.push(r)):s.push((31&r)<<6|t)):s.push(r);return String.fromCodePoints(s)}r.Relooper=u,r.hasSideEffects=function e(r){switch(_BinaryenExpressionGetId(r)){case a.LocalGet:case a.GlobalGet:case a.Const:case a.Nop:return!1;case a.Block:for(var t=0,n=_BinaryenBlockGetNumChildren(r);t<n;++t)if(e(_BinaryenBlockGetChild(r,t)))return!0;return!1;case a.If:return e(_BinaryenIfGetCondition(r))||e(_BinaryenIfGetIfTrue(r))||e(_BinaryenIfGetIfFalse(r));case a.Unary:return e(_BinaryenUnaryGetValue(r));case a.Binary:return e(_BinaryenBinaryGetLeft(r))||e(_BinaryenBinaryGetRight(r));case a.Drop:return e(_BinaryenDropGetValue(r));case a.Select:return e(_BinaryenSelectGetIfTrue(r))||e(_BinaryenSelectGetIfFalse(r))||e(_BinaryenSelectGetCondition(r))}return!0},r.readString=T;var m=function(){};r.BinaryModule=m,r.needsExplicitUnreachable=function e(r){if(_BinaryenExpressionGetType(r)!=i.Unreachable)return!1;switch(_BinaryenExpressionGetId(r)){case a.Unreachable:case a.Return:return!1;case a.Break:return 0!=_BinaryenBreakGetCondition(r);case a.Block:if(!_BinaryenBlockGetName(r)){var t=_BinaryenBlockGetNumChildren(r);return t>0&&e(_BinaryenBlockGetChild(r,t-1))}}return!0},r.traverse=function(e,r,t){switch(c(e)){case a.Block:for(var n=0,i=_BinaryenBlockGetNumChildren(e);n<i;++n)t(_BinaryenBlockGetChild(e,n),r);break;case a.If:t(_BinaryenIfGetCondition(e),r),t(_BinaryenIfGetIfTrue(e),r);var s=_BinaryenIfGetIfFalse(e);s&&t(s,r);break;case a.Loop:t(_BinaryenLoopGetBody(e),r);break;case a.Break:var o=_BinaryenBreakGetCondition(e);o&&t(o,r);break;case a.Switch:t(_BinaryenSwitchGetCondition(e),r);break;case a.Call:for(n=0,i=_BinaryenCallGetNumOperands(e);n<i;++n)t(_BinaryenCallGetOperand(e,n),r);break;case a.CallIndirect:for(n=0,i=_BinaryenCallIndirectGetNumOperands(e);n<i;++n)t(_BinaryenCallIndirectGetOperand(e,n),r);break;case a.LocalGet:break;case a.LocalSet:t(_BinaryenLocalSetGetValue(e),r);break;case a.GlobalGet:break;case a.GlobalSet:t(_BinaryenGlobalSetGetValue(e),r);break;case a.Load:t(_BinaryenLoadGetPtr(e),r);break;case a.Store:t(_BinaryenStoreGetPtr(e),r),t(_BinaryenStoreGetValue(e),r);break;case a.AtomicRMW:t(_BinaryenAtomicRMWGetPtr(e),r),t(_BinaryenAtomicRMWGetValue(e),r);break;case a.AtomicCmpxchg:t(_BinaryenAtomicCmpxchgGetPtr(e),r),t(_BinaryenAtomicCmpxchgGetExpected(e),r),t(_BinaryenAtomicCmpxchgGetReplacement(e),r);break;case a.AtomicWait:t(_BinaryenAtomicWaitGetPtr(e),r),t(_BinaryenAtomicWaitGetExpected(e),r),t(_BinaryenAtomicWaitGetTimeout(e),r);break;case a.AtomicNotify:t(_BinaryenAtomicNotifyGetPtr(e),r);break;case a.AtomicFence:break;case a.SIMDExtract:t(_BinaryenSIMDExtractGetVec(e),r);break;case a.SIMDReplace:t(_BinaryenSIMDReplaceGetVec(e),r),t(_BinaryenSIMDReplaceGetValue(e),r);break;case a.SIMDShuffle:t(_BinaryenSIMDShuffleGetLeft(e),r),t(_BinaryenSIMDShuffleGetRight(e),r);break;case a.SIMDTernary:t(_BinaryenSIMDTernaryGetA(e),r),t(_BinaryenSIMDTernaryGetB(e),r),t(_BinaryenSIMDTernaryGetC(e),r);break;case a.SIMDShift:t(_BinaryenSIMDShiftGetVec(e),r),t(_BinaryenSIMDShiftGetShift(e),r);break;case a.SIMDLoad:t(_BinaryenSIMDLoadGetPtr(e),r);break;case a.MemoryInit:t(_BinaryenMemoryInitGetDest(e),r),t(_BinaryenMemoryInitGetOffset(e),r),t(_BinaryenMemoryInitGetSize(e),r);break;case a.DataDrop:break;case a.MemoryCopy:t(_BinaryenMemoryCopyGetDest(e),r),t(_BinaryenMemoryCopyGetSource(e),r),t(_BinaryenMemoryCopyGetSize(e),r);break;case a.MemoryFill:t(_BinaryenMemoryFillGetDest(e),r),t(_BinaryenMemoryFillGetValue(e),r),t(_BinaryenMemoryFillGetSize(e),r);break;case a.Try:t(_BinaryenTryGetBody(e),r),t(_BinaryenTryGetCatchBody(e),r);break;case a.Throw:for(n=0,i=_BinaryenThrowGetNumOperands(e);n<i;++n)t(_BinaryenThrowGetOperand(e,n),r);break;case a.Rethrow:t(_BinaryenRethrowGetExnref(e),r);break;case a.BrOnExn:t(_BinaryenBrOnExnGetExnref(e),r);break;case a.Push:t(_BinaryenPushGetValue(e),r);break;case a.Pop:case a.Const:break;case a.Unary:t(_BinaryenUnaryGetValue(e),r);break;case a.Binary:t(_BinaryenBinaryGetLeft(e),r),t(_BinaryenBinaryGetRight(e),r);break;case a.Select:t(_BinaryenSelectGetIfTrue(e),r),t(_BinaryenSelectGetIfFalse(e),r),t(_BinaryenSelectGetCondition(e),r);break;case a.Drop:t(_BinaryenDropGetValue(e),r);break;case a.Return:t(_BinaryenReturnGetValue(e),r);break;case a.Host:for(n=0,i=_BinaryenHostGetNumOperands(e);n<i;++n)t(_BinaryenHostGetOperand(e,n),r);break;case a.Nop:case a.Unreachable:break;default:assert(!1)}return!0}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(4),i=t(5);!function(e){e[e.I8=0]="I8",e[e.I16=1]="I16",e[e.I32=2]="I32",e[e.I64=3]="I64",e[e.ISIZE=4]="ISIZE",e[e.U8=5]="U8",e[e.U16=6]="U16",e[e.U32=7]="U32",e[e.U64=8]="U64",e[e.USIZE=9]="USIZE",e[e.BOOL=10]="BOOL",e[e.F32=11]="F32",e[e.F64=12]="F64",e[e.V128=13]="V128",e[e.ANYREF=14]="ANYREF",e[e.VOID=15]="VOID"}(r.TypeKind||(r.TypeKind={})),function(e){e[e.NONE=0]="NONE",e[e.SIGNED=1]="SIGNED",e[e.UNSIGNED=2]="UNSIGNED",e[e.INTEGER=4]="INTEGER",e[e.FLOAT=8]="FLOAT",e[e.POINTER=16]="POINTER",e[e.SHORT=32]="SHORT",e[e.LONG=64]="LONG",e[e.VALUE=128]="VALUE",e[e.REFERENCE=256]="REFERENCE",e[e.NULLABLE=512]="NULLABLE",e[e.VECTOR=1024]="VECTOR"}(r.TypeFlags||(r.TypeFlags={}));var a=new Uint8Array(16),s=function(){function e(e,r,t){this.cachedNullableType=null,this.kind=e,this.flags=r,this.size=t,this.byteSize=ceil(t/8),this.classReference=null,this.signatureReference=null,this.nonNullableType=this}return Object.defineProperty(e.prototype,"intType",{get:function(){switch(this.kind){case 0:return e.i8;case 1:return e.i16;case 11:case 2:return e.i32;case 12:case 3:return e.i64;case 4:return 64==this.size?e.isize64:e.isize32;case 5:return e.u8;case 6:return e.u16;case 7:return e.u32;case 8:return e.u64;case 9:return 64==this.size?e.usize64:e.usize32;case 10:default:return e.i32}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exceptVoid",{get:function(){return 15==this.kind?e.auto:this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignLog2",{get:function(){return 31-clz(this.byteSize)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isManaged",{get:function(){var e=this.classReference;return null!==e&&!e.hasDecorator(n.DecoratorFlags.UNMANAGED)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUnmanaged",{get:function(){var e=this.classReference;return null!==e&&e.hasDecorator(n.DecoratorFlags.UNMANAGED)},enumerable:!0,configurable:!0}),e.prototype.computeSmallIntegerShift=function(e){return e.size-this.size},e.prototype.computeSmallIntegerMask=function(e){var r=this.is(2)?this.size:this.size-1;return-1>>>e.size-r},e.prototype.is=function(e){return(this.flags&e)==e},e.prototype.isAny=function(e){return 0!=(this.flags&e)},e.prototype.asClass=function(r){assert(9==this.kind&&!this.classReference);var t=new e(this.kind,-129&this.flags|256,this.size);return t.classReference=r,t},e.prototype.asFunction=function(r){assert(7==this.kind&&!this.signatureReference);var t=new e(this.kind,-129&this.flags|256,this.size);return t.signatureReference=r,t},e.prototype.asNullable=function(){return assert(this.is(256)),this.cachedNullableType||(assert(!this.is(512)),this.cachedNullableType=new e(this.kind,512|this.flags,this.size),this.cachedNullableType.nonNullableType=this,this.cachedNullableType.classReference=this.classReference,this.cachedNullableType.signatureReference=this.signatureReference),this.cachedNullableType},e.prototype.isAssignableTo=function(r,t){var n,i,a,s;if(void 0===t&&(t=!1),this.is(256)){if(r.is(256)&&(!this.is(512)||r.is(512)))if(n=this.classReference){if(i=r.classReference)return n.isAssignableTo(i)}else if(a=this.signatureReference){if(s=r.signatureReference)return a.isAssignableTo(s)}else if(14==this.kind&&14==r.kind)return!0}else if(!r.is(256))if(this.is(4))if(r.is(4)){if(!t||this==e.bool||this.is(1)==r.is(1))return this.size<=r.size}else{if(11==r.kind)return this.size<=23;if(12==r.kind)return this.size<=52}else if(this.is(8)){if(r.is(8))return this.size<=r.size}else if(this.is(1024)&&r.is(1024))return this.size==r.size;return!1},e.prototype.isStrictlyAssignableTo=function(e,r){return void 0===r&&(r=!1),this.is(256)?this.isAssignableTo(e):!e.is(256)&&(this.is(4)?e.is(4)&&e.size==this.size&&(!r||this.is(1)==e.is(1)):this.kind==e.kind)},e.prototype.isChangeableTo=function(e){if(this.is(4)&&e.is(4)){var r=this.size;return r==e.size&&(r>=32||this.is(1)==e.is(1))}return this.kind==e.kind},e.commonDenominator=function(e,r,t){return r.isAssignableTo(e,t)?e:e.isAssignableTo(r,t)?r:null},e.prototype.toString=function(){if(this.is(256)){var e=this.classReference;if(e)return this.is(512)?e.internalName+" | null":e.internalName;var r=this.signatureReference;return r?this.is(512)?"("+r.toString()+") | null":r.toString():(assert(14==this.kind),"anyref")}switch(this.kind){case 0:return"i8";case 1:return"i16";case 2:return"i32";case 3:return"i64";case 4:return"isize";case 5:return"u8";case 6:return"u16";case 7:return"u32";case 8:return"u64";case 9:return"usize";case 10:return"bool";case 11:return"f32";case 12:return"f64";case 13:return"v128";case 14:return"anyref";default:assert(!1);case 15:return"void"}},e.prototype.toNativeType=function(){switch(this.kind){default:return i.NativeType.I32;case 3:case 8:return i.NativeType.I64;case 4:case 9:return 64==this.size?i.NativeType.I64:i.NativeType.I32;case 11:return i.NativeType.F32;case 12:return i.NativeType.F64;case 13:return i.NativeType.V128;case 14:return i.NativeType.Anyref;case 15:return i.NativeType.None}},e.prototype.toNativeZero=function(e){switch(this.kind){case 14:case 15:assert(!1);default:return e.i32(0);case 4:case 9:if(64!=this.size)return e.i32(0);case 3:case 8:return e.i64(0);case 11:return e.f32(0);case 12:return e.f64(0);case 13:return e.v128(a)}},e.prototype.toNativeOne=function(e){switch(this.kind){case 13:case 14:case 15:assert(!1);default:return e.i32(1);case 4:case 9:if(64!=this.size)return e.i32(1);case 3:case 8:return e.i64(1);case 11:return e.f32(1);case 12:return e.f64(1)}},e.prototype.toNativeNegOne=function(e){switch(this.kind){case 13:case 14:case 15:assert(!1);default:return e.i32(-1);case 4:case 9:if(64!=this.size)return e.i32(-1);case 3:case 8:return e.i64(-1,-1);case 11:return e.f32(-1);case 12:return e.f64(-1)}},e.prototype.toSignatureString=function(){switch(this.kind){case 0:case 5:case 1:case 6:case 2:case 7:case 10:return"i";case 3:case 8:return"j";case 4:case 9:return 64==this.size?"j":"i";case 11:return"f";case 12:return"d";case 13:return"V";case 14:return"a";case 15:return"v";default:assert(!1)}return"i"},e.i8=new e(0,165,8),e.i16=new e(1,165,16),e.i32=new e(2,133,32),e.i64=new e(3,197,64),e.isize32=new e(4,149,32),e.isize64=new e(4,213,64),e.u8=new e(5,166,8),e.u16=new e(6,166,16),e.u32=new e(7,134,32),e.u64=new e(8,198,64),e.usize32=new e(9,150,32),e.usize64=new e(9,214,64),e.bool=new e(10,166,1),e.f32=new e(11,137,32),e.f64=new e(12,201,64),e.v128=new e(13,1152,128),e.anyref=new e(14,256,0),e.void=new e(15,0,0),e.auto=new e(e.i32.kind,e.i32.flags,e.i32.size),e}();r.Type=s,r.typesToNativeTypes=function(e){for(var r=e.length,t=new Array(r),n=0;n<r;++n)t[n]=e[n].toNativeType();return t},r.typesToString=function(e){var r=e.length;if(!r)return"";for(var t=new Array(r),n=0;n<r;++n)t[n]=e[n].toString();return t.join(",")};var o=function(){function e(e,r,t,n){void 0===r&&(r=null),void 0===t&&(t=null),void 0===n&&(n=null),this.id=0,this.cachedFunctionTarget=null,this.parameterTypes=r||[],this.parameterNames=null,this.requiredParameters=0,this.returnType=t||s.void,this.thisType=n,this.program=e,this.hasRest=!1,this.type=s.u32.asFunction(this);for(var i=e.uniqueSignatures,a=i.length,o=0;o<a;o++){var l=i[o];if(this.equals(l))return this.id=l.id,this}e.uniqueSignatures.push(this),this.id=e.nextSignatureId++}return e.prototype.asFunctionTarget=function(e){var r=this.cachedFunctionTarget;return r?assert(r.program==e):this.cachedFunctionTarget=r=new n.FunctionTarget(this,e),r},e.prototype.getParameterName=function(e){var r=this.parameterNames;return r&&r.length>e?r[e]:c(e)},e.prototype.isAssignableTo=function(e){return this.equals(e)},e.prototype.equals=function(e){var r=this.thisType,t=e.thisType;if(r){if(!t||!r.isAssignableTo(t))return!1}else if(t)return!1;if(this.hasRest!=e.hasRest)return!1;var n=this.parameterTypes,i=e.parameterTypes,a=n.length;if(a!=i.length)return!1;for(var s=0;s<a;++s){var o=n[s],l=i[s];if(!o.isAssignableTo(l))return!1}var c=this.returnType,u=e.returnType;return c==u||c.isAssignableTo(u)},e.makeSignatureString=function(e,r,t){void 0===t&&(t=null);var n=[];if(n.push(r.toSignatureString()),t&&n.push(t.toSignatureString()),e)for(var i=0,a=e.length;i<a;++i)n.push(e[i].toSignatureString());return"FUNCSIG$"+n.join("")},e.prototype.toSignatureString=function(){return e.makeSignatureString(this.parameterTypes,this.returnType,this.thisType)},e.prototype.toString=function(){var e=new Array;e.push("(");var r=0,t=this.thisType;t&&(e.push("this: "),assert(!t.signatureReference),e.push(t.toString()),r=1);var n=this.parameterTypes,i=n.length;if(i)for(var a=this.parameterNames,s=a?a.length:0,o=this.requiredParameters,l=this.hasRest?i-1:-1,u=0;u<i;++u,++r)r&&e.push(", "),u==l&&e.push("..."),u<s?e.push(a[u]):e.push(c(u)),u>=o&&u!=l?e.push("?: "):e.push(": "),e.push(n[u].toString());return e.push(") => "),e.push(this.returnType.toString()),e.join("")},e}();r.Signature=o;var l=null;function c(e){l||(l=[]);for(var r=l.length;r<=e;++r)l.push("arg$"+r.toString(10));return l[e-1]}r.getDefaultParameterName=c},function(e,r,t){"use strict";var n,i=this&&this.__extends||(n=function(e,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(e,r)},function(e,r){function t(){this.constructor=e}n(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)});Object.defineProperty(r,"__esModule",{value:!0});var a,s,o=t(2),l=t(3),c=t(1);function u(e){switch(assert(e.length),e.charCodeAt(0)){case 97:switch(e){case"abstract":return a.ABSTRACT;case"as":return a.AS;case"async":return a.ASYNC;case"await":return a.AWAIT}break;case 98:switch(e){case"break":return a.BREAK}break;case 99:switch(e){case"case":return a.CASE;case"catch":return a.CATCH;case"class":return a.CLASS;case"continue":return a.CONTINUE;case"const":return a.CONST;case"constructor":return a.CONSTRUCTOR}break;case 100:switch(e){case"debugger":return a.DEBUGGER;case"declare":return a.DECLARE;case"default":return a.DEFAULT;case"delete":return a.DELETE;case"do":return a.DO}break;case 101:switch(e){case"else":return a.ELSE;case"enum":return a.ENUM;case"export":return a.EXPORT;case"extends":return a.EXTENDS}break;case 102:switch(e){case"false":return a.FALSE;case"finally":return a.FINALLY;case"for":return a.FOR;case"from":return a.FROM;case"function":return a.FUNCTION}break;case 103:switch(e){case"get":return a.GET}break;case 105:switch(e){case"if":return a.IF;case"implements":return a.IMPLEMENTS;case"import":return a.IMPORT;case"in":return a.IN;case"instanceof":return a.INSTANCEOF;case"interface":return a.INTERFACE;case"is":return a.IS}break;case 107:switch(e){case"keyof":return a.KEYOF}break;case 108:switch(e){case"let":return a.LET}break;case 109:switch(e){case"module":return a.MODULE}break;case 110:switch(e){case"namespace":return a.NAMESPACE;case"new":return a.NEW;case"null":return a.NULL}break;case 111:switch(e){case"of":return a.OF}break;case 112:switch(e){case"package":return a.PACKAGE;case"private":return a.PRIVATE;case"protected":return a.PROTECTED;case"public":return a.PUBLIC}break;case 114:switch(e){case"readonly":return a.READONLY;case"return":return a.RETURN}break;case 115:switch(e){case"set":return a.SET;case"static":return a.STATIC;case"super":return a.SUPER;case"switch":return a.SWITCH}break;case 116:switch(e){case"this":return a.THIS;case"throw":return a.THROW;case"true":return a.TRUE;case"try":return a.TRY;case"type":return a.TYPE;case"typeof":return a.TYPEOF}break;case 118:switch(e){case"var":return a.VAR;case"void":return a.VOID}break;case 119:switch(e){case"while":return a.WHILE;case"with":return a.WITH}break;case 121:switch(e){case"yield":return a.YIELD}}return a.INVALID}function p(e){switch(e){case a.ABSTRACT:case a.AS:case a.CONSTRUCTOR:case a.DECLARE:case a.DELETE:case a.FROM:case a.FOR:case a.GET:case a.INSTANCEOF:case a.IS:case a.KEYOF:case a.MODULE:case a.NAMESPACE:case a.NULL:case a.READONLY:case a.SET:case a.TYPE:case a.VOID:return!0;default:return!1}}!function(e){e[e.ABSTRACT=0]="ABSTRACT",e[e.AS=1]="AS",e[e.ASYNC=2]="ASYNC",e[e.AWAIT=3]="AWAIT",e[e.BREAK=4]="BREAK",e[e.CASE=5]="CASE",e[e.CATCH=6]="CATCH",e[e.CLASS=7]="CLASS",e[e.CONST=8]="CONST",e[e.CONTINUE=9]="CONTINUE",e[e.CONSTRUCTOR=10]="CONSTRUCTOR",e[e.DEBUGGER=11]="DEBUGGER",e[e.DECLARE=12]="DECLARE",e[e.DEFAULT=13]="DEFAULT",e[e.DELETE=14]="DELETE",e[e.DO=15]="DO",e[e.ELSE=16]="ELSE",e[e.ENUM=17]="ENUM",e[e.EXPORT=18]="EXPORT",e[e.EXTENDS=19]="EXTENDS",e[e.FALSE=20]="FALSE",e[e.FINALLY=21]="FINALLY",e[e.FOR=22]="FOR",e[e.FROM=23]="FROM",e[e.FUNCTION=24]="FUNCTION",e[e.GET=25]="GET",e[e.IF=26]="IF",e[e.IMPLEMENTS=27]="IMPLEMENTS",e[e.IMPORT=28]="IMPORT",e[e.IN=29]="IN",e[e.INSTANCEOF=30]="INSTANCEOF",e[e.INTERFACE=31]="INTERFACE",e[e.IS=32]="IS",e[e.KEYOF=33]="KEYOF",e[e.LET=34]="LET",e[e.MODULE=35]="MODULE",e[e.NAMESPACE=36]="NAMESPACE",e[e.NEW=37]="NEW",e[e.NULL=38]="NULL",e[e.OF=39]="OF",e[e.PACKAGE=40]="PACKAGE",e[e.PRIVATE=41]="PRIVATE",e[e.PROTECTED=42]="PROTECTED",e[e.PUBLIC=43]="PUBLIC",e[e.READONLY=44]="READONLY",e[e.RETURN=45]="RETURN",e[e.SET=46]="SET",e[e.STATIC=47]="STATIC",e[e.SUPER=48]="SUPER",e[e.SWITCH=49]="SWITCH",e[e.THIS=50]="THIS",e[e.THROW=51]="THROW",e[e.TRUE=52]="TRUE",e[e.TRY=53]="TRY",e[e.TYPE=54]="TYPE",e[e.TYPEOF=55]="TYPEOF",e[e.VAR=56]="VAR",e[e.VOID=57]="VOID",e[e.WHILE=58]="WHILE",e[e.WITH=59]="WITH",e[e.YIELD=60]="YIELD",e[e.OPENBRACE=61]="OPENBRACE",e[e.CLOSEBRACE=62]="CLOSEBRACE",e[e.OPENPAREN=63]="OPENPAREN",e[e.CLOSEPAREN=64]="CLOSEPAREN",e[e.OPENBRACKET=65]="OPENBRACKET",e[e.CLOSEBRACKET=66]="CLOSEBRACKET",e[e.DOT=67]="DOT",e[e.DOT_DOT_DOT=68]="DOT_DOT_DOT",e[e.SEMICOLON=69]="SEMICOLON",e[e.COMMA=70]="COMMA",e[e.LESSTHAN=71]="LESSTHAN",e[e.GREATERTHAN=72]="GREATERTHAN",e[e.LESSTHAN_EQUALS=73]="LESSTHAN_EQUALS",e[e.GREATERTHAN_EQUALS=74]="GREATERTHAN_EQUALS",e[e.EQUALS_EQUALS=75]="EQUALS_EQUALS",e[e.EXCLAMATION_EQUALS=76]="EXCLAMATION_EQUALS",e[e.EQUALS_EQUALS_EQUALS=77]="EQUALS_EQUALS_EQUALS",e[e.EXCLAMATION_EQUALS_EQUALS=78]="EXCLAMATION_EQUALS_EQUALS",e[e.EQUALS_GREATERTHAN=79]="EQUALS_GREATERTHAN",e[e.PLUS=80]="PLUS",e[e.MINUS=81]="MINUS",e[e.ASTERISK_ASTERISK=82]="ASTERISK_ASTERISK",e[e.ASTERISK=83]="ASTERISK",e[e.SLASH=84]="SLASH",e[e.PERCENT=85]="PERCENT",e[e.PLUS_PLUS=86]="PLUS_PLUS",e[e.MINUS_MINUS=87]="MINUS_MINUS",e[e.LESSTHAN_LESSTHAN=88]="LESSTHAN_LESSTHAN",e[e.GREATERTHAN_GREATERTHAN=89]="GREATERTHAN_GREATERTHAN",e[e.GREATERTHAN_GREATERTHAN_GREATERTHAN=90]="GREATERTHAN_GREATERTHAN_GREATERTHAN",e[e.AMPERSAND=91]="AMPERSAND",e[e.BAR=92]="BAR",e[e.CARET=93]="CARET",e[e.EXCLAMATION=94]="EXCLAMATION",e[e.TILDE=95]="TILDE",e[e.AMPERSAND_AMPERSAND=96]="AMPERSAND_AMPERSAND",e[e.BAR_BAR=97]="BAR_BAR",e[e.QUESTION=98]="QUESTION",e[e.COLON=99]="COLON",e[e.EQUALS=100]="EQUALS",e[e.PLUS_EQUALS=101]="PLUS_EQUALS",e[e.MINUS_EQUALS=102]="MINUS_EQUALS",e[e.ASTERISK_EQUALS=103]="ASTERISK_EQUALS",e[e.ASTERISK_ASTERISK_EQUALS=104]="ASTERISK_ASTERISK_EQUALS",e[e.SLASH_EQUALS=105]="SLASH_EQUALS",e[e.PERCENT_EQUALS=106]="PERCENT_EQUALS",e[e.LESSTHAN_LESSTHAN_EQUALS=107]="LESSTHAN_LESSTHAN_EQUALS",e[e.GREATERTHAN_GREATERTHAN_EQUALS=108]="GREATERTHAN_GREATERTHAN_EQUALS",e[e.GREATERTHAN_GREATERTHAN_GREATERTHAN_EQUALS=109]="GREATERTHAN_GREATERTHAN_GREATERTHAN_EQUALS",e[e.AMPERSAND_EQUALS=110]="AMPERSAND_EQUALS",e[e.BAR_EQUALS=111]="BAR_EQUALS",e[e.CARET_EQUALS=112]="CARET_EQUALS",e[e.AT=113]="AT",e[e.IDENTIFIER=114]="IDENTIFIER",e[e.STRINGLITERAL=115]="STRINGLITERAL",e[e.INTEGERLITERAL=116]="INTEGERLITERAL",e[e.FLOATLITERAL=117]="FLOATLITERAL",e[e.INVALID=118]="INVALID",e[e.ENDOFFILE=119]="ENDOFFILE"}(a=r.Token||(r.Token={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.PREFER=1]="PREFER",e[e.ALWAYS=2]="ALWAYS"}(s=r.IdentifierHandling||(r.IdentifierHandling={})),r.tokenFromKeyword=u,r.tokenIsAlsoIdentifier=p,r.isIllegalVariableIdentifier=function(e){switch(assert(e.length),e.charCodeAt(0)){case 100:return"delete"==e;case 102:return"for"==e;case 105:return"instanceof"==e;case 110:return"null"==e;case 118:return"void"==e}return!1},r.operatorTokenToString=function(e){switch(e){case a.DELETE:return"delete";case a.IN:return"in";case a.INSTANCEOF:return"instanceof";case a.NEW:return"new";case a.TYPEOF:return"typeof";case a.VOID:return"void";case a.YIELD:return"yield";case a.DOT_DOT_DOT:return"...";case a.COMMA:return",";case a.LESSTHAN:return"<";case a.GREATERTHAN:return">";case a.LESSTHAN_EQUALS:return"<=";case a.GREATERTHAN_EQUALS:return">=";case a.EQUALS_EQUALS:return"==";case a.EXCLAMATION_EQUALS:return"!=";case a.EQUALS_EQUALS_EQUALS:return"===";case a.EXCLAMATION_EQUALS_EQUALS:return"!==";case a.PLUS:return"+";case a.MINUS:return"-";case a.ASTERISK_ASTERISK:return"**";case a.ASTERISK:return"*";case a.SLASH:return"/";case a.PERCENT:return"%";case a.PLUS_PLUS:return"++";case a.MINUS_MINUS:return"--";case a.LESSTHAN_LESSTHAN:return"<<";case a.GREATERTHAN_GREATERTHAN:return">>";case a.GREATERTHAN_GREATERTHAN_GREATERTHAN:return">>>";case a.AMPERSAND:return"&";case a.BAR:return"|";case a.CARET:return"^";case a.EXCLAMATION:return"!";case a.TILDE:return"~";case a.AMPERSAND_AMPERSAND:return"&&";case a.BAR_BAR:return"||";case a.EQUALS:return"=";case a.PLUS_EQUALS:return"+=";case a.MINUS_EQUALS:return"-=";case a.ASTERISK_EQUALS:return"*=";case a.ASTERISK_ASTERISK_EQUALS:return"**=";case a.SLASH_EQUALS:return"/=";case a.PERCENT_EQUALS:return"%=";case a.LESSTHAN_LESSTHAN_EQUALS:return"<<=";case a.GREATERTHAN_GREATERTHAN_EQUALS:return">>=";case a.GREATERTHAN_GREATERTHAN_GREATERTHAN_EQUALS:return">>>=";case a.AMPERSAND_EQUALS:return"&=";case a.BAR_EQUALS:return"|=";case a.CARET_EQUALS:return"^=";default:return assert(!1),""}};var _=function(){function e(e,r,t){this.debugInfoRef=0,this.source=e,this.start=r,this.end=t}return e.join=function(r,t){if(r.source!=t.source)throw new Error("source mismatch");return new e(r.source,r.start<t.start?r.start:t.start,r.end>t.end?r.end:t.end)},Object.defineProperty(e.prototype,"atStart",{get:function(){return new e(this.source,this.start,this.start)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"atEnd",{get:function(){return new e(this.source,this.end,this.end)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){for(var e=this.source.text,r=1,t=this.start;t>=0;--t)10==e.charCodeAt(t)&&r++;return r},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"column",{get:function(){for(var e=this.source.text,r=0,t=this.start-1;t>=0&&10!=e.charCodeAt(t);--t)++r;return r},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.source.text.substring(this.start,this.end)},e}();r.Range=_;var h=function(e){function r(r,t){void 0===t&&(t=null);var n=e.call(this,t)||this;n.end=0,n.pos=0,n.token=-1,n.tokenPos=0,n.nextToken=-1,n.nextTokenPos=0,n.nextTokenOnNewLine=!1,n.onComment=null,n.source=r,n.pos=0,n.end=r.text.length,n.diagnostics=t||new Array;var i=n.end,a=r.text;if(n.pos<i&&65279==a.charCodeAt(n.pos)&&++n.pos,n.pos+1<i&&35==a.charCodeAt(n.pos)&&33==a.charCodeAt(n.pos+1))for(n.pos+=2;n.pos<i&&10!=a.charCodeAt(n.pos);)++n.pos;return n}return i(r,e),r.prototype.next=function(e){return void 0===e&&(e=s.DEFAULT),this.nextToken=-1,this.token=this.unsafeNext(e)},r.prototype.unsafeNext=function(e,r){void 0===e&&(e=s.DEFAULT),void 0===r&&(r=i32.MAX_VALUE);for(var t=this.end,n=this.source.text;this.pos<t;){this.tokenPos=this.pos;var i=n.charCodeAt(this.pos);switch(i){case 13:if(!(++this.pos<t&&10==n.charCodeAt(this.pos)))break;case 10:case 9:case 11:case 12:case 32:++this.pos;break;case 33:return++this.pos,r>1&&this.pos<t&&61==n.charCodeAt(this.pos)?(++this.pos,r>2&&this.pos<t&&61==n.charCodeAt(this.pos)?(++this.pos,a.EXCLAMATION_EQUALS_EQUALS):a.EXCLAMATION_EQUALS):a.EXCLAMATION;case 34:case 39:case 96:return a.STRINGLITERAL;case 37:return++this.pos,r>1&&this.pos<t&&61==n.charCodeAt(this.pos)?(++this.pos,a.PERCENT_EQUALS):a.PERCENT;case 38:if(++this.pos,r>1&&this.pos<t){if(38==(_=n.charCodeAt(this.pos)))return++this.pos,a.AMPERSAND_AMPERSAND;if(61==_)return++this.pos,a.AMPERSAND_EQUALS}return a.AMPERSAND;case 40:return++this.pos,a.OPENPAREN;case 41:return++this.pos,a.CLOSEPAREN;case 42:if(++this.pos,r>1&&this.pos<t){if(61==(_=n.charCodeAt(this.pos)))return++this.pos,a.ASTERISK_EQUALS;if(42==_)return++this.pos,r>2&&this.pos<t&&61==n.charCodeAt(this.pos)?(++this.pos,a.ASTERISK_ASTERISK_EQUALS):a.ASTERISK_ASTERISK}return a.ASTERISK;case 43:if(++this.pos,r>1&&this.pos<t){if(43==(_=n.charCodeAt(this.pos)))return++this.pos,a.PLUS_PLUS;if(61==_)return++this.pos,a.PLUS_EQUALS}return a.PLUS;case 44:return++this.pos,a.COMMA;case 45:if(++this.pos,r>1&&this.pos<t){if(45==(_=n.charCodeAt(this.pos)))return++this.pos,a.MINUS_MINUS;if(61==_)return++this.pos,a.MINUS_EQUALS}return a.MINUS;case 46:if(++this.pos,r>1&&this.pos<t){var _=n.charCodeAt(this.pos);if(c.isDecimalDigit(_))return--this.pos,a.FLOATLITERAL;if(r>2&&this.pos+1<t&&46==_&&46==n.charCodeAt(this.pos+1))return this.pos+=2,a.DOT_DOT_DOT}return a.DOT;case 47:var h=this.pos;if(++this.pos,r>1&&this.pos<t){if(47==(_=n.charCodeAt(this.pos))){var d=l.CommentKind.LINE;for(this.pos+1<t&&47==n.charCodeAt(this.pos+1)&&(++this.pos,d=l.CommentKind.TRIPLE);++this.pos<t;)if(10==n.charCodeAt(this.pos)){++this.pos;break}this.onComment&&this.onComment(d,n.substring(h,this.pos),this.range(h,this.pos));break}if(42==_){for(var y=!1;++this.pos<t;)if(42==(i=n.charCodeAt(this.pos))&&this.pos+1<t&&47==n.charCodeAt(this.pos+1)){this.pos+=2,y=!0;break}y?this.onComment&&this.onComment(l.CommentKind.BLOCK,n.substring(h,this.pos),this.range(h,this.pos)):this.error(o.DiagnosticCode._0_expected,this.range(this.pos),"*/");break}if(61==_)return++this.pos,a.SLASH_EQUALS}return a.SLASH;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.testInteger()?a.INTEGERLITERAL:a.FLOATLITERAL;case 58:return++this.pos,a.COLON;case 59:return++this.pos,a.SEMICOLON;case 60:if(++this.pos,r>1&&this.pos<t){if(60==(_=n.charCodeAt(this.pos)))return++this.pos,r>2&&this.pos<t&&61==n.charCodeAt(this.pos)?(++this.pos,a.LESSTHAN_LESSTHAN_EQUALS):a.LESSTHAN_LESSTHAN;if(61==_)return++this.pos,a.LESSTHAN_EQUALS}return a.LESSTHAN;case 61:if(++this.pos,r>1&&this.pos<t){if(61==(_=n.charCodeAt(this.pos)))return++this.pos,r>2&&this.pos<t&&61==n.charCodeAt(this.pos)?(++this.pos,a.EQUALS_EQUALS_EQUALS):a.EQUALS_EQUALS;if(62==_)return++this.pos,a.EQUALS_GREATERTHAN}return a.EQUALS;case 62:if(++this.pos,r>1&&this.pos<t){if(62==(_=n.charCodeAt(this.pos))){if(++this.pos,r>2&&this.pos<t){if(62==(_=n.charCodeAt(this.pos)))return++this.pos,r>3&&this.pos<t&&61==n.charCodeAt(this.pos)?(++this.pos,a.GREATERTHAN_GREATERTHAN_GREATERTHAN_EQUALS):a.GREATERTHAN_GREATERTHAN_GREATERTHAN;if(61==_)return++this.pos,a.GREATERTHAN_GREATERTHAN_EQUALS}return a.GREATERTHAN_GREATERTHAN}if(61==_)return++this.pos,a.GREATERTHAN_EQUALS}return a.GREATERTHAN;case 63:return++this.pos,a.QUESTION;case 91:return++this.pos,a.OPENBRACKET;case 93:return++this.pos,a.CLOSEBRACKET;case 94:return++this.pos,r>1&&this.pos<t&&61==n.charCodeAt(this.pos)?(++this.pos,a.CARET_EQUALS):a.CARET;case 123:return++this.pos,a.OPENBRACE;case 124:if(++this.pos,r>1&&this.pos<t){if(124==(_=n.charCodeAt(this.pos)))return++this.pos,a.BAR_BAR;if(61==_)return++this.pos,a.BAR_EQUALS}return a.BAR;case 125:return++this.pos,a.CLOSEBRACE;case 126:return++this.pos,a.TILDE;case 64:return++this.pos,a.AT;default:if(c.isIdentifierStart(i)){if(c.isKeywordCharacter(i)){for(var T=this.pos;++this.pos<t&&c.isIdentifierPart(i=n.charCodeAt(this.pos));)if(!c.isKeywordCharacter(i))return this.pos=T,a.IDENTIFIER;var m=u(n.substring(T,this.pos));if(m!==a.INVALID&&e!==s.ALWAYS&&(e!==s.PREFER||!p(m)))return m;this.pos=T}return a.IDENTIFIER}if(c.isWhiteSpace(i)){++this.pos;break}return this.error(o.DiagnosticCode.Invalid_character,this.range(this.pos,this.pos+1)),++this.pos,a.INVALID}}return a.ENDOFFILE},r.prototype.peek=function(e,r,t){void 0===e&&(e=!1),void 0===r&&(r=s.DEFAULT),void 0===t&&(t=i32.MAX_VALUE);var n=this.source.text;if(this.nextToken<0){var i=this.pos,a=this.token,o=this.tokenPos;if(this.nextToken=this.unsafeNext(r,t),this.nextTokenPos=this.tokenPos,e){this.nextTokenOnNewLine=!1;for(var l=i,u=this.nextTokenPos;l<u;++l)if(c.isLineBreak(n.charCodeAt(l))){this.nextTokenOnNewLine=!0;break}}this.pos=i,this.token=a,this.tokenPos=o}return this.nextToken},r.prototype.skipIdentifier=function(e){return void 0===e&&(e=s.PREFER),this.skip(a.IDENTIFIER,e)},r.prototype.skip=function(e,r){void 0===r&&(r=s.DEFAULT);var t=this.pos,n=this.token,i=this.tokenPos,o=i32.MAX_VALUE;switch(e){case a.GREATERTHAN:o=1}return this.token=this.unsafeNext(r,o),this.token==e?(this.nextToken=-1,!0):(this.pos=t,this.token=n,this.tokenPos=i,!1)},r.prototype.mark=function(){var e;return y?(e=y,y=null):e=new d,e.pos=this.pos,e.token=this.token,e.tokenPos=this.tokenPos,e},r.prototype.discard=function(e){y=e},r.prototype.reset=function(e){this.pos=e.pos,this.token=e.token,this.tokenPos=e.tokenPos,this.nextToken=-1},r.prototype.range=function(e,r){return void 0===e&&(e=-1),void 0===r&&(r=-1),e<0?(e=this.tokenPos,r=this.pos):r<0&&(r=e),new _(this.source,e,r)},r.prototype.readIdentifier=function(){for(var e=this.source.text,r=this.pos,t=this.end;++this.pos<t&&c.isIdentifierPart(e.charCodeAt(this.pos)););return e.substring(r,this.pos)},r.prototype.readString=function(){for(var e=this.source.text,r=e.charCodeAt(this.pos++),t=this.pos,n=this.end,i="";;){if(this.pos>=n){i+=e.substring(t,this.pos),this.error(o.DiagnosticCode.Unterminated_string_literal,this.range(t-1,n));break}var a=e.charCodeAt(this.pos);if(a==r){i+=e.substring(t,this.pos++);break}if(92!=a){if(c.isLineBreak(a)&&96!=r){i+=e.substring(t,this.pos),this.error(o.DiagnosticCode.Unterminated_string_literal,this.range(t-1,this.pos));break}++this.pos}else i+=e.substring(t,this.pos),i+=this.readEscapeSequence(),t=this.pos}return i},r.prototype.readEscapeSequence=function(){var e=this.end;if(++this.pos>=e)return this.error(o.DiagnosticCode.Unexpected_end_of_text,this.range(e)),"";var r=this.source.text,t=r.charCodeAt(this.pos++);switch(t){case 48:return"\0";case 98:return"\b";case 116:return"\t";case 110:return"\n";case 118:return"\v";case 102:return"\f";case 114:return"\r";case 39:return"'";case 34:return'"';case 117:return this.pos<e&&123==r.charCodeAt(this.pos)?(++this.pos,this.readExtendedUnicodeEscape()):this.readUnicodeEscape();case 13:this.pos<e&&10==r.charCodeAt(this.pos)&&++this.pos;case 10:case 8232:case 8233:return"";default:return String.fromCharCode(t)}},r.prototype.readRegexpPattern=function(){for(var e=this.source.text,r=this.pos,t=this.end,n=!1;;){if(this.pos>=t){this.error(o.DiagnosticCode.Unterminated_regular_expression_literal,this.range(r,t));break}if(92!=e.charCodeAt(this.pos)){var i=e.charCodeAt(this.pos);if(!n&&47==i)break;if(c.isLineBreak(i)){this.error(o.DiagnosticCode.Unterminated_regular_expression_literal,this.range(r,this.pos));break}++this.pos,n=!1}else++this.pos,n=!0}return e.substring(r,this.pos)},r.prototype.readRegexpFlags=function(){for(var e=this.source.text,r=this.pos,t=this.end,n=0;this.pos<t;){var i=e.charCodeAt(this.pos);if(!c.isIdentifierPart(i))break;switch(++this.pos,i){case 103:n|=1&n?-1:1;break;case 105:n|=2&n?-1:2;break;case 109:n|=4&n?-1:4;break;default:n=-1}}return-1==n&&this.error(o.DiagnosticCode.Invalid_regular_expression_flags,this.range(r,this.pos)),e.substring(r,this.pos)},r.prototype.testInteger=function(){var e=this.end,r=this.source.text;if(this.pos+1<e&&48==r.charCodeAt(this.pos))switch(r.charCodeAt(this.pos+2)){case 120:case 88:case 98:case 66:case 111:case 79:return!0}for(var t=this.pos;t<e;){var n=r.charCodeAt(t);if(46==n||101==n||69==n)return!1;if((n<48||n>57)&&95!=n)break;t++}return!0},r.prototype.readInteger=function(){var e=this.source.text;if(this.pos+2<this.end&&48==e.charCodeAt(this.pos)){switch(e.charCodeAt(this.pos+1)){case 120:case 88:return this.pos+=2,this.readHexInteger();case 98:case 66:return this.pos+=2,this.readBinaryInteger();case 111:case 79:return this.pos+=2,this.readOctalInteger()}if(c.isOctalDigit(e.charCodeAt(this.pos+1))){var r=this.pos;++this.pos;var t=this.readOctalInteger();return this.error(o.DiagnosticCode.Octal_literals_are_not_allowed_in_strict_mode,this.range(r,this.pos)),t}}return this.readDecimalInteger()},r.prototype.readHexInteger=function(){for(var e=this.source.text,r=this.pos,t=i64_new(0),n=i64_new(4),i=r,a=this.end;this.pos<a;){var s=this.pos,l=e.charCodeAt(s);if(l>=48&&l<=57)t=i64_add(i64_shl(t,n),i64_new(l-48));else if(l>=65&&l<=70)t=i64_add(i64_shl(t,n),i64_new(10+l-65));else if(l>=97&&l<=102)t=i64_add(i64_shl(t,n),i64_new(10+l-97));else{if(95!=l)break;i==s&&this.error(i==r?o.DiagnosticCode.Numeric_separators_are_not_allowed_here:o.DiagnosticCode.Multiple_consecutive_numeric_separators_are_not_permitted,this.range(s)),i=s+1}this.pos=s+1}return this.pos==r?this.error(o.DiagnosticCode.Hexadecimal_digit_expected,this.range(r)):i==this.pos&&this.error(o.DiagnosticCode.Numeric_separators_are_not_allowed_here,this.range(i-1)),t},r.prototype.readDecimalInteger=function(){for(var e=this.source.text,r=this.pos,t=this.end,n=i64_new(0),i=i64_new(10),a=r;this.pos<t;){var s=this.pos,l=e.charCodeAt(s);if(l>=48&&l<=57)n=i64_add(i64_mul(n,i),i64_new(l-48));else{if(95!=l)break;a==s&&this.error(a==r?o.DiagnosticCode.Numeric_separators_are_not_allowed_here:o.DiagnosticCode.Multiple_consecutive_numeric_separators_are_not_permitted,this.range(s)),a=s+1}this.pos=s+1}return this.pos==r?this.error(o.DiagnosticCode.Digit_expected,this.range(r)):a==this.pos&&this.error(o.DiagnosticCode.Numeric_separators_are_not_allowed_here,this.range(a-1)),n},r.prototype.readOctalInteger=function(){for(var e=this.source.text,r=this.pos,t=i64_new(0),n=i64_new(3),i=r,a=this.end;this.pos<a;){var s=this.pos,l=e.charCodeAt(s);if(l>=48&&l<=55)t=i64_add(i64_shl(t,n),i64_new(l-48));else{if(95!=l)break;i==s&&this.error(i==r?o.DiagnosticCode.Numeric_separators_are_not_allowed_here:o.DiagnosticCode.Multiple_consecutive_numeric_separators_are_not_permitted,this.range(s)),i=s+1}++this.pos}return this.pos==r?this.error(o.DiagnosticCode.Octal_digit_expected,this.range(r)):i==this.pos&&this.error(o.DiagnosticCode.Numeric_separators_are_not_allowed_here,this.range(i-1)),t},r.prototype.readBinaryInteger=function(){for(var e=this.source.text,r=this.pos,t=i64_new(0),n=i64_new(1),i=r,a=this.end;this.pos<a;){var s=this.pos,l=e.charCodeAt(s);if(48==l)t=i64_shl(t,n);else if(49==l)t=i64_add(i64_shl(t,n),n);else{if(95!=l)break;i==s&&this.error(i==r?o.DiagnosticCode.Numeric_separators_are_not_allowed_here:o.DiagnosticCode.Multiple_consecutive_numeric_separators_are_not_permitted,this.range(s)),i=s+1}this.pos=s+1}return this.pos==r?this.error(o.DiagnosticCode.Binary_digit_expected,this.range(r)):i==this.pos&&this.error(o.DiagnosticCode.Numeric_separators_are_not_allowed_here,this.range(i-1)),t},r.prototype.readFloat=function(){return this.readDecimalFloat()},r.prototype.readDecimalFloat=function(){for(var e=this.pos,r=this.end,t=this.source.text;this.pos<r&&c.isDecimalDigit(t.charCodeAt(this.pos));)++this.pos;if(this.pos<r&&46==t.charCodeAt(this.pos))for(++this.pos;this.pos<r&&c.isDecimalDigit(t.charCodeAt(this.pos));)++this.pos;if(this.pos<r){var n=t.charCodeAt(this.pos);if(101==n||69==n)for((++this.pos<r&&45==(n=t.charCodeAt(this.pos))||43==n&&c.isDecimalDigit(t.charCodeAt(this.pos+1)))&&++this.pos;this.pos<r&&c.isDecimalDigit(t.charCodeAt(this.pos));)++this.pos}return parseFloat(t.substring(e,this.pos))},r.prototype.readHexFloat=function(){throw new Error("not implemented")},r.prototype.readUnicodeEscape=function(){for(var e=4,r=0,t=this.end,n=this.source.text;this.pos<t;){var i=n.charCodeAt(this.pos++);if(i>=48&&i<=57)r=(r<<4)+i-48;else if(i>=65&&i<=70)r=(r<<4)+i+-55;else{if(!(i>=97&&i<=102))return this.error(o.DiagnosticCode.Hexadecimal_digit_expected,this.range(this.pos-1,this.pos)),"";r=(r<<4)+i+-87}if(0==--e)break}return e?(this.error(o.DiagnosticCode.Unexpected_end_of_text,this.range(this.pos)),""):String.fromCharCode(r)},r.prototype.readExtendedUnicodeEscape=function(){var e=this.pos,r=this.readHexInteger(),t=i64_low(r),n=!1;assert(!i64_high(r)),t>1114111&&(this.error(o.DiagnosticCode.An_extended_Unicode_escape_value_must_be_between_0x0_and_0x10FFFF_inclusive,this.range(e,this.pos)),n=!0);var i=this.end,a=this.source.text;return this.pos>=i?(this.error(o.DiagnosticCode.Unexpected_end_of_text,this.range(e,i)),n=!0):125==a.charCodeAt(this.pos)?++this.pos:(this.error(o.DiagnosticCode.Unterminated_Unicode_escape_sequence,this.range(e,this.pos)),n=!0),n?"":t<65536?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>>10),56320+(t-65536&1023))},r.prototype.finish=function(){},r}(o.DiagnosticEmitter);r.Tokenizer=h;var d=function(){};r.State=d;var y=null},function(e,r){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(e){"object"==typeof window&&(t=window)}e.exports=t},function(e,r,t){"use strict";var n,i=this&&this.__extends||(n=function(e,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(e,r)},function(e,r){function t(){this.constructor=e}n(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}),a=this&&this.__values||function(e){var r="function"==typeof Symbol&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,i,a=t.call(e),s=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(t=a.return)&&t.call(a)}finally{if(i)throw i.error}}return s};Object.defineProperty(r,"__esModule",{value:!0});var o,l=t(2),c=t(4),u=t(3),p=t(6),_=t(0),h=t(1),d=t(7),y=t(13);!function(e){e[e.REPORT=0]="REPORT",e[e.SWALLOW=1]="SWALLOW"}(o=r.ReportMode||(r.ReportMode={}));var T=function(e){function r(r){var t=e.call(this,r.diagnostics)||this;return t.currentThisExpression=null,t.currentElementExpression=null,t.program=r,t}return i(r,e),r.prototype.resolveType=function(e,r,t,n){switch(void 0===t&&(t=null),void 0===n&&(n=o.REPORT),e.kind){case u.NodeKind.NAMEDTYPE:return this.resolveNamedType(e,r,t,n);case u.NodeKind.FUNCTIONTYPE:return this.resolveFunctionType(e,r,t,n);default:assert(!1)}return null},r.prototype.resolveNamedType=function(e,r,t,n){void 0===t&&(t=null),void 0===n&&(n=o.REPORT);var i=e.name,a=e.typeArguments,s=!i.next;if(s){var u=i.identifier.text;if(null!==t&&t.has(u)){var d=t.get(u);if(null!==a&&a.length&&n==o.REPORT&&this.error(l.DiagnosticCode.Type_0_is_not_generic,e.range,d.toString()),e.isNullable){if(d.is(256))return d.asNullable();n==o.REPORT&&this.error(l.DiagnosticCode.Basic_type_0_cannot_be_nullable,e.range,d.toString())}return d}}var y=this.resolveTypeName(i,r,n);if(!y)return null;if(y.shadowType)y=y.shadowType;else{if(y.kind==c.ElementKind.ENUM)return null!==a&&a.length&&n==o.REPORT&&this.error(l.DiagnosticCode.Type_0_is_not_generic,e.range,y.internalName),e.isNullable&&n==o.REPORT&&this.error(l.DiagnosticCode.Basic_type_0_cannot_be_nullable,e.range,y.name+"/i32"),p.Type.i32;if(y.kind==c.ElementKind.CLASS_PROTOTYPE){var T=this.resolveClassInclTypeArguments(y,a,r,h.makeMap(t),e,n);return T?e.isNullable?T.type.asNullable():T.type:null}}if(y.kind==c.ElementKind.TYPEDEFINITION){if(y.is(_.CommonFlags.RESOLVED)){null!==a&&a.length&&n==o.REPORT&&this.error(l.DiagnosticCode.Type_0_is_not_generic,e.range,y.internalName);var m=y.type;if(e.isNullable){if(m.is(256))return m.asNullable();n==o.REPORT&&this.error(l.DiagnosticCode.Basic_type_0_cannot_be_nullable,i.range,i.identifier.text)}return m}if(s)switch(i.identifier.symbol){case _.CommonSymbols.native:return this.resolveBuiltinNativeType(e,r,t,n);case _.CommonSymbols.indexof:return this.resolveBuiltinIndexofType(e,r,t,n);case _.CommonSymbols.valueof:return this.resolveBuiltinValueofType(e,r,t,n);case _.CommonSymbols.returnof:return this.resolveBuiltinReturnTypeType(e,r,t,n)}var f=y.typeParameterNodes;if(f){if(!this.resolveTypeArguments(f,a,r,t=h.makeMap(t),e,n))return null}else a&&a.length&&this.error(l.DiagnosticCode.Type_0_is_not_generic,e.range,i.identifier.text);if(!(d=this.resolveType(y.typeNode,y,t,n)))return null;if(e.isNullable){if(d.is(256))return d.asNullable();n==o.REPORT&&this.error(l.DiagnosticCode.Basic_type_0_cannot_be_nullable,i.range,i.identifier.text)}return d}return n==o.REPORT&&this.error(l.DiagnosticCode.Cannot_find_name_0,i.range,i.identifier.text),null},r.prototype.resolveFunctionType=function(e,r,t,n){void 0===t&&(t=null),void 0===n&&(n=o.REPORT);var i=e.explicitThisType,a=null;if(i&&!(a=this.resolveType(i,r,t,n)))return null;for(var s=e.parameters,c=s.length,_=new Array(c),h=new Array(c),d=0,y=!1,T=0;T<c;++T){var m=s[T];switch(m.parameterKind){case u.ParameterKind.DEFAULT:d=T+1;break;case u.ParameterKind.REST:assert(T==c),y=!0}var f=m.type;if(u.isTypeOmitted(f))return n==o.REPORT&&this.error(l.DiagnosticCode.Type_expected,f.range),null;var g=this.resolveType(f,r,t,n);if(!g)return null;_[T]=g,h[T]=m.name.text}var E,v=e.returnType;if(u.isTypeOmitted(v))n==o.REPORT&&this.error(l.DiagnosticCode.Type_expected,v.range),E=p.Type.void;else if(!(E=this.resolveType(v,r,t,n)))return null;var b=new p.Signature(this.program,_,E,a);return b.parameterNames=h,b.requiredParameters=d,b.hasRest=y,e.isNullable?b.type.asNullable():b.type},r.prototype.resolveBuiltinNativeType=function(e,r,t,n){void 0===t&&(t=null),void 0===n&&(n=o.REPORT);var i=e.typeArguments;if(!i||1!=i.length)return n==o.REPORT&&this.error(l.DiagnosticCode.Expected_0_type_arguments_but_got_1,e.range,"1",(i?i.length:1).toString(10)),null;var a=this.resolveType(i[0],r,t,n);if(!a)return null;switch(a.kind){case 0:case 1:case 2:return p.Type.i32;case 4:if(!this.program.options.isWasm64)return p.Type.i32;case 3:return p.Type.i64;case 5:case 6:case 7:case 10:return p.Type.u32;case 9:if(!this.program.options.isWasm64)return p.Type.u32;case 8:return p.Type.u64;case 11:return p.Type.f32;case 12:return p.Type.f64;case 13:return p.Type.v128;case 15:return p.Type.void;default:assert(!1)}return null},r.prototype.resolveBuiltinIndexofType=function(e,r,t,n){void 0===t&&(t=null),void 0===n&&(n=o.REPORT);var i=e.typeArguments;if(!i||1!=i.length)return n==o.REPORT&&this.error(l.DiagnosticCode.Expected_0_type_arguments_but_got_1,e.range,"1",(i?i.length:1).toString(10)),null;var a=this.resolveType(i[0],r,t,n);if(!a)return null;var s=a.classReference;if(!s)return n==o.REPORT&&this.error(l.DiagnosticCode.Index_signature_is_missing_in_type_0,i[0].range,a.toString()),null;var u=s.lookupOverload(c.OperatorKind.INDEXED_GET);return u?u.is(_.CommonFlags.STATIC)?(assert(2==u.signature.parameterTypes.length),u.signature.parameterTypes[1]):(assert(1==u.signature.parameterTypes.length),u.signature.parameterTypes[0]):(n==o.REPORT&&this.error(l.DiagnosticCode.Index_signature_is_missing_in_type_0,i[0].range,a.toString()),null)},r.prototype.resolveBuiltinValueofType=function(e,r,t,n){void 0===t&&(t=null),void 0===n&&(n=o.REPORT);var i=e.typeArguments;if(!i||1!=i.length)return n==o.REPORT&&this.error(l.DiagnosticCode.Expected_0_type_arguments_but_got_1,e.range,"1",(i?i.length:1).toString(10)),null;var a=this.resolveType(i[0],r,t,n);if(!a)return null;var s=a.classReference;if(!s)return n==o.REPORT&&this.error(l.DiagnosticCode.Index_signature_is_missing_in_type_0,i[0].range,a.toString()),null;var u=s.lookupOverload(c.OperatorKind.INDEXED_GET);return u?u.signature.returnType:(n==o.REPORT&&this.error(l.DiagnosticCode.Index_signature_is_missing_in_type_0,i[0].range,a.toString()),null)},r.prototype.resolveBuiltinReturnTypeType=function(e,r,t,n){void 0===t&&(t=null),void 0===n&&(n=o.REPORT);var i=e.typeArguments;if(!i||1!=i.length)return n==o.REPORT&&this.error(l.DiagnosticCode.Expected_0_type_arguments_but_got_1,e.range,"1",(i?i.length:1).toString(10)),null;var a=this.resolveType(i[0],r,t,n);if(!a)return null;var s=a.signatureReference;return s?s.returnType:(n==o.REPORT&&this.error(l.DiagnosticCode.Type_0_has_no_call_signatures,i[0].range,a.toString()),null)},r.prototype.resolveTypeName=function(e,r,t){void 0===t&&(t=o.REPORT);var n=r.lookup(e.identifier.text);if(!n)return t==o.REPORT&&this.error(l.DiagnosticCode.Cannot_find_name_0,e.range,e.identifier.text),null;for(var i=e,a=e.next;a;){if(!(n=n.lookupInSelf(a.identifier.text)))return t==o.REPORT&&this.error(l.DiagnosticCode.Property_0_does_not_exist_on_type_1,a.range,a.identifier.text,i.identifier.text),null;i=a,a=a.next}return n},r.prototype.resolveTypeArguments=function(e,r,t,n,i,a){void 0===n&&(n=h.makeMap()),void 0===i&&(i=null),void 0===a&&(a=o.REPORT);for(var s=0,c=0,p=0,_=e.length;p<_;++p)e[p].defaultType||++s,++c;var d=r?r.length:0;if(d<s||d>c)return this.error(l.DiagnosticCode.Expected_0_type_arguments_but_got_1,d?u.Range.join(r[0].range,r[d-1].range):assert(i).range,(d<s?s:c).toString(10),d.toString(10)),null;var y=new Array(c);for(p=0;p<c;++p){var T=p<d?this.resolveType(r[p],t,n,a):this.resolveType(assert(e[p].defaultType),t,n,a);if(!T)return null;n.set(e[p].name.text,T),y[p]=T}return y},r.prototype.maybeInferCall=function(e,r,t,n){if(void 0===n&&(n=o.REPORT),e.typeArguments)return r.is(_.CommonFlags.GENERIC)?this.resolveFunctionInclTypeArguments(r,e.typeArguments,t.actualFunction,h.makeMap(t.contextualTypeArguments),e,n):(n==o.REPORT&&this.error(l.DiagnosticCode.Type_0_is_not_generic,e.expression.range,r.internalName),null);if(r.is(_.CommonFlags.GENERIC)){for(var i=h.makeMap(t.contextualTypeArguments),a=assert(r.typeParameterNodes),s=a.length,c=new Set,u=0;u<s;++u){var d=a[u].name.text;i.set(d,p.Type.auto),c.add(d)}var y=r.functionTypeNode.parameters,T=y.length,m=e.arguments,f=m.length;for(u=0;u<T;++u){var g=u<f?m[u]:y[u].initializer;if(!g)return n==o.REPORT&&this.error(l.DiagnosticCode.Expected_0_arguments_but_got_1,e.range,T.toString(10),f.toString(10)),null;var E=y[u].type;if(E.hasGenericComponent(a)){var v=this.resolveExpression(g,t,p.Type.auto,o.SWALLOW);v&&this.propagateInferredGenericTypes(E,v,t,i,c)}}var b=new Array(s);for(u=0;u<s;++u){d=a[u].name.text;if(i.has(d)){var I=i.get(d);if(I!=p.Type.auto){b[u]=I;continue}}return n==o.REPORT&&this.error(l.DiagnosticCode.Type_argument_expected,e.expression.range.atEnd),null}return this.resolveFunction(r,b,h.makeMap(t.contextualTypeArguments),n)}return this.resolveFunction(r,null,h.makeMap(),n)},r.prototype.propagateInferredGenericTypes=function(e,r,t,n,i){if(e.kind==u.NodeKind.NAMEDTYPE){var a=e.typeArguments;if(null!==a&&a.length){var s=r.classReference;if(s){var o=this.resolveTypeName(e.name,t.actualFunction);if(!o||o.kind!=c.ElementKind.CLASS_PROTOTYPE)return;if(s.prototype==o){var l=s.typeArguments;if(null!==l&&l.length==a.length){for(var _=0,h=l.length;_<h;++_)this.propagateInferredGenericTypes(a[_],l[_],t,n,i);return}}}}else{var d=e.name.identifier.text;if(n.has(d)){var y=n.get(d);(y==p.Type.auto||i.has(d)&&y.isAssignableTo(r))&&n.set(d,r)}}}else if(e.kind==u.NodeKind.FUNCTIONTYPE){var T=e.parameters;if(null!==T&&T.length){var m=r.signatureReference;if(m){var f=m.parameterTypes,g=m.thisType;if(f.length==T.length&&!g==!e.explicitThisType){for(_=0,h=f.length;_<h;++_)this.propagateInferredGenericTypes(T[_].type,f[_],t,n,i);return this.propagateInferredGenericTypes(e.returnType,m.returnType,t,n,i),void(g&&this.propagateInferredGenericTypes(e.explicitThisType,g,t,n,i))}}}}},r.prototype.getTypeOfElement=function(e){var r=e.kind;if(r==c.ElementKind.GLOBAL&&!this.ensureResolvedLazyGlobal(e,o.SWALLOW))return null;if(c.isTypedElement(r)){var t=e.type;assert(t!=p.Type.void);var n=t.classReference;if(n){var i=n.wrappedType;i&&(t=i)}return t}return r==c.ElementKind.FUNCTION_TARGET?e.type:null},r.prototype.getElementOfType=function(e){if(e.is(256)){var r=e.classReference;return r||assert(e.signatureReference).asFunctionTarget(this.program)}if(e!=p.Type.void){var t=this.program.wrapperClasses;return assert(t.has(e)),t.get(e)}return null},r.prototype.lookupExpression=function(e,r,t,n){for(void 0===t&&(t=p.Type.auto),void 0===n&&(n=o.REPORT);e.kind==u.NodeKind.PARENTHESIZED;)e=e.expression;switch(e.kind){case u.NodeKind.ASSERTION:return this.lookupAssertionExpression(e,r,t,n);case u.NodeKind.BINARY:return this.lookupBinaryExpression(e,r,t,n);case u.NodeKind.CALL:return this.lookupCallExpression(e,r,t,n);case u.NodeKind.COMMA:return this.lookupCommaExpression(e,r,t,n);case u.NodeKind.ELEMENTACCESS:return this.lookupElementAccessExpression(e,r,t,n);case u.NodeKind.FUNCTION:return this.lookupFunctionExpression(e,r,t,n);case u.NodeKind.IDENTIFIER:case u.NodeKind.FALSE:case u.NodeKind.NULL:case u.NodeKind.TRUE:return this.lookupIdentifierExpression(e,r,r.actualFunction,n);case u.NodeKind.THIS:return this.lookupThisExpression(e,r,t,n);case u.NodeKind.SUPER:return this.lookupSuperExpression(e,r,t,n);case u.NodeKind.INSTANCEOF:return this.lookupInstanceOfExpression(e,r,t,n);case u.NodeKind.LITERAL:return this.lookupLiteralExpression(e,r,t,n);case u.NodeKind.NEW:return this.lookupNewExpression(e,r,t,n);case u.NodeKind.PROPERTYACCESS:return this.lookupPropertyAccessExpression(e,r,t,n);case u.NodeKind.TERNARY:return this.lookupTernaryExpression(e,r,t,n);case u.NodeKind.UNARYPOSTFIX:return this.lookupUnaryPostfixExpression(e,r,t,n);case u.NodeKind.UNARYPREFIX:return this.lookupUnaryPrefixExpression(e,r,t,n)}return n==o.REPORT&&this.error(l.DiagnosticCode.Not_implemented,e.range),null},r.prototype.resolveExpression=function(e,r,t,n){for(void 0===t&&(t=p.Type.auto),void 0===n&&(n=o.REPORT);e.kind==u.NodeKind.PARENTHESIZED;)e=e.expression;switch(e.kind){case u.NodeKind.ASSERTION:return this.resolveAssertionExpression(e,r,t,n);case u.NodeKind.BINARY:return this.resolveBinaryExpression(e,r,t,n);case u.NodeKind.CALL:return this.resolveCallExpression(e,r,t,n);case u.NodeKind.COMMA:return this.resolveCommaExpression(e,r,t,n);case u.NodeKind.ELEMENTACCESS:return this.resolveElementAccessExpression(e,r,t,n);case u.NodeKind.FUNCTION:return this.resolveFunctionExpression(e,r,t,n);case u.NodeKind.IDENTIFIER:case u.NodeKind.FALSE:case u.NodeKind.NULL:case u.NodeKind.TRUE:return this.resolveIdentifierExpression(e,r,t,r.actualFunction,n);case u.NodeKind.THIS:return this.resolveThisExpression(e,r,t,n);case u.NodeKind.SUPER:return this.resolveSuperExpression(e,r,t,n);case u.NodeKind.INSTANCEOF:return this.resolveInstanceOfExpression(e,r,t,n);case u.NodeKind.LITERAL:return this.resolveLiteralExpression(e,r,t,n);case u.NodeKind.NEW:return this.resolveNewExpression(e,r,t,n);case u.NodeKind.PROPERTYACCESS:return this.resolvePropertyAccessExpression(e,r,t,n);case u.NodeKind.TERNARY:return this.resolveTernaryExpression(e,r,t,n);case u.NodeKind.UNARYPOSTFIX:return this.resolveUnaryPostfixExpression(e,r,t,n);case u.NodeKind.UNARYPREFIX:return this.resolveUnaryPrefixExpression(e,r,t,n)}return n==o.REPORT&&this.error(l.DiagnosticCode.Not_implemented,e.range),null},r.prototype.lookupIdentifierExpression=function(e,r,t,n){switch(void 0===t&&(t=r.actualFunction),void 0===n&&(n=o.REPORT),e.kind){case u.NodeKind.TRUE:case u.NodeKind.FALSE:case u.NodeKind.NULL:var i=this.resolveIdentifierExpression(e,r,p.Type.auto,t,n);return i?this.getElementOfType(i):null}var a,s=e.text;return(a=r.lookup(s))?(this.currentThisExpression=null,this.currentElementExpression=null,a):(a=t.lookup(s))?(this.currentThisExpression=null,this.currentElementExpression=null,a):(a=this.program.lookupGlobal(s))?(this.currentThisExpression=null,this.currentElementExpression=null,a):(n==o.REPORT&&this.error(l.DiagnosticCode.Cannot_find_name_0,e.range,s),null)},r.prototype.resolveIdentifierExpression=function(e,r,t,n,i){switch(void 0===t&&(t=p.Type.auto),void 0===n&&(n=r.actualFunction),void 0===i&&(i=o.REPORT),e.kind){case u.NodeKind.TRUE:case u.NodeKind.FALSE:return p.Type.bool;case u.NodeKind.NULL:var a=t.classReference;return t.is(256)&&null!==a?a.type.asNullable():this.program.options.usizeType}var s=this.lookupIdentifierExpression(e,r,n,i);if(!s)return null;if(s.kind==c.ElementKind.FUNCTION_PROTOTYPE){var _=this.resolveFunction(s,null,h.makeMap(),i);if(!_)return null;s=_}var d=this.getTypeOfElement(s);return d||i==o.REPORT&&this.error(l.DiagnosticCode.Expression_cannot_be_represented_by_a_type,e.range),d},r.prototype.ensureResolvedLazyGlobal=function(e,r){if(void 0===r&&(r=o.REPORT),e.is(_.CommonFlags.RESOLVED))return!0;var t,n=e.typeNode;return!!(t=n?this.resolveType(n,e.parent,null,r):this.resolveExpression(assert(e.initializerNode),e.file.startFunction.flow,p.Type.auto,r))&&(e.setType(t),!0)},r.prototype.lookupPropertyAccessExpression=function(e,r,t,n){void 0===n&&(n=o.REPORT);var i=e.expression,a=this.lookupExpression(i,r,t,n);if(!a)return null;var s=e.property.text;switch(a.kind){case c.ElementKind.GLOBAL:if(!this.ensureResolvedLazyGlobal(a,n))return null;case c.ElementKind.ENUMVALUE:case c.ElementKind.LOCAL:case c.ElementKind.FIELD:var u=a.type;if(assert(u!=p.Type.void),!(b=u.classReference)){if(!(g=this.program.wrapperClasses).has(u))return n==o.REPORT&&this.error(l.DiagnosticCode.Property_0_does_not_exist_on_type_1,e.property.range,s,a.type.toString()),null;b=g.get(u)}a=b;break;case c.ElementKind.PROPERTY_PROTOTYPE:if(!(d=this.resolveFunction(assert(a.getterPrototype),null,h.makeMap(),n)))return null;if(!(b=(u=d.signature.returnType).classReference)){if(!(g=this.program.wrapperClasses).has(u))return n==o.REPORT&&this.error(l.DiagnosticCode.Property_0_does_not_exist_on_type_1,e.property.range,s,u.toString()),null;b=g.get(u)}a=b;break;case c.ElementKind.PROPERTY:var d;if(!(b=(u=(d=assert(a.getterInstance)).signature.returnType).classReference)){if(!(g=this.program.wrapperClasses).has(u))return n==o.REPORT&&this.error(l.DiagnosticCode.Property_0_does_not_exist_on_type_1,e.property.range,s,u.toString()),null;b=g.get(u)}a=b;break;case c.ElementKind.INDEXSIGNATURE:var y=assert(this.currentElementExpression),T=a.parent;assert(T.kind==c.ElementKind.CLASS);var m=T.lookupOverload(c.OperatorKind.INDEXED_GET);if(!m)return n==o.REPORT&&this.error(l.DiagnosticCode.Index_signature_is_missing_in_type_0,y.range,T.internalName),null;var f=m.signature.returnType;if(!(b=f.classReference)){var g;if(!(g=this.program.wrapperClasses).has(f))return n==o.REPORT&&this.error(l.DiagnosticCode.Property_0_does_not_exist_on_type_1,e.property.range,s,f.toString()),null;b=g.get(f)}a=b;break;case c.ElementKind.FUNCTION_PROTOTYPE:var E=a.shadowType;if(E){if(!E.is(_.CommonFlags.RESOLVED)){var v=this.resolveType(E.typeNode,E.parent,null,n);v&&E.setType(v)}var b;(b=E.type.classReference)&&(a=b.prototype);break}}switch(a.kind){case c.ElementKind.CLASS_PROTOTYPE:case c.ElementKind.CLASS:for(;;){if((I=a.members)&&I.has(s))return this.currentThisExpression=i,this.currentElementExpression=null,I.get(s);if(a.kind==c.ElementKind.CLASS_PROTOTYPE){if(!a.basePrototype)break;a=a.basePrototype}else{if(a.kind!=c.ElementKind.CLASS)break;if(!a.base)break;a=a.base}}break;default:var I;if((I=a.members)&&I.has(s))return this.currentThisExpression=i,this.currentElementExpression=null,I.get(s)}return n==o.REPORT&&this.error(l.DiagnosticCode.Property_0_does_not_exist_on_type_1,e.property.range,s,a.internalName),null},r.prototype.resolvePropertyAccessExpression=function(e,r,t,n){void 0===n&&(n=o.REPORT);var i=this.lookupPropertyAccessExpression(e,r,t,n);if(!i)return null;var a=this.getTypeOfElement(i);return a||n==o.REPORT&&this.error(l.DiagnosticCode.Expression_cannot_be_represented_by_a_type,e.range),a},r.prototype.lookupElementAccessExpression=function(e,r,t,n){void 0===n&&(n=o.REPORT);var i=e.expression,a=this.resolveExpression(i,r,t,n);if(!a)return null;if(a.is(256)){var s=a.classReference;if(s){var c=s.indexSignature;if(c)return this.currentThisExpression=i,this.currentElementExpression=e.elementExpression,c}}return n==o.REPORT&&this.error(l.DiagnosticCode.Index_signature_is_missing_in_type_0,i.range,a.toString()),null},r.prototype.resolveElementAccessExpression=function(e,r,t,n){void 0===n&&(n=o.REPORT);var i=this.lookupElementAccessExpression(e,r,t,n);if(!i)return null;var a=this.getTypeOfElement(i);return a||n==o.REPORT&&this.error(l.DiagnosticCode.Expression_cannot_be_represented_by_a_type,e.range),a},r.prototype.determineIntegerLiteralType=function(e,r){if(!r.is(256))switch(r.kind){case 0:if(i64_is_i8(e))return p.Type.i8;break;case 5:if(i64_is_u8(e))return p.Type.u8;break;case 1:if(i64_is_i16(e))return p.Type.i16;break;case 6:if(i64_is_u16(e))return p.Type.u16;break;case 2:if(i64_is_i32(e))return p.Type.i32;break;case 7:if(i64_is_u32(e))return p.Type.u32;break;case 10:if(i64_is_bool(e))return p.Type.bool;break;case 4:if(!this.program.options.isWasm64){if(i64_is_i32(e))return p.Type.isize32;break}return p.Type.isize64;case 9:if(!this.program.options.isWasm64){if(i64_is_u32(e))return p.Type.usize32;break}return p.Type.usize64;case 3:return p.Type.i64;case 8:return p.Type.u64;case 11:return p.Type.f32;case 12:return p.Type.f64}return i64_is_i32(e)?p.Type.i32:i64_is_u32(e)?p.Type.u32:p.Type.i64},r.prototype.lookupAssertionExpression=function(e,r,t,n){if(void 0===t&&(t=p.Type.auto),void 0===n&&(n=o.REPORT),e.assertionKind==u.AssertionKind.NONNULL)return this.lookupExpression(e.expression,r,t,n);var i=this.resolveType(assert(e.toType),r.actualFunction,r.contextualTypeArguments,n);if(!i)return null;var a=this.getElementOfType(i);return a||(n==o.REPORT&&this.error(l.DiagnosticCode.Type_0_is_illegal_in_this_context,e.range,i.toString()),this.currentThisExpression=null,this.currentElementExpression=null,null)},r.prototype.resolveAssertionExpression=function(e,r,t,n){if(void 0===t&&(t=p.Type.auto),void 0===n&&(n=o.REPORT),e.assertionKind==u.AssertionKind.NONNULL){var i=this.resolveExpression(e.expression,r,t,n);return i?i.nonNullableType:null}return this.resolveType(assert(e.toType),r.actualFunction,r.contextualTypeArguments,n)},r.prototype.lookupUnaryPrefixExpression=function(e,r,t,n){void 0===t&&(t=p.Type.auto),void 0===n&&(n=o.REPORT);var i=this.resolveUnaryPrefixExpression(e,r,t,n);if(!i)return null;var a=this.getElementOfType(i);return a||n==o.REPORT&&this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,d.operatorTokenToString(e.operator),i.toString()),a},r.prototype.resolveUnaryPrefixExpression=function(e,r,t,n){void 0===t&&(t=p.Type.auto),void 0===n&&(n=o.REPORT);var i=e.operand,a=e.operator;switch(a){case d.Token.MINUS:if(i.kind==u.NodeKind.LITERAL&&i.literalKind==u.LiteralKind.INTEGER)return this.determineIntegerLiteralType(i64_sub(i64_zero,i.value),t);case d.Token.PLUS:case d.Token.PLUS_PLUS:case d.Token.MINUS_MINUS:if(!(_=this.resolveExpression(i,r,t,n)))return null;if(_.is(256))if(h=_.classReference){if(y=h.lookupOverload(c.OperatorKind.fromUnaryPrefixToken(a)))return y.signature.returnType;var s=h.wrappedType;s&&(_=s)}return!_.isAny(12)||_.is(256)?(n==o.REPORT&&this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,d.operatorTokenToString(a),_.toString()),null):_;case d.Token.EXCLAMATION:if(!(_=this.resolveExpression(i,r,t,n)))return null;if(_.is(256))if(h=_.classReference)if(y=h.lookupOverload(c.OperatorKind.NOT))return y.signature.returnType;return p.Type.bool;case d.Token.TILDE:var _,h,y;if(!(_=this.resolveExpression(i,r,t,n)))return null;if(_.is(256))if(h=_.classReference)if(y=h.lookupOverload(c.OperatorKind.BITWISE_NOT))return y.signature.returnType;return _.isAny(12)&&_.is(128)?_.intType:(n==o.REPORT&&this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"~",_.toString()),null);default:assert(!1)}return null},r.prototype.lookupUnaryPostfixExpression=function(e,r,t,n){void 0===t&&(t=p.Type.auto),void 0===n&&(n=o.REPORT);var i=this.resolveUnaryPostfixExpression(e,r,t,n);if(!i)return null;var a=this.getElementOfType(i);return a||n==o.REPORT&&this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,d.operatorTokenToString(e.operator),i.toString()),a},r.prototype.resolveUnaryPostfixExpression=function(e,r,t,n){void 0===t&&(t=p.Type.auto),void 0===n&&(n=o.REPORT);var i=e.operator;switch(i){case d.Token.PLUS_PLUS:case d.Token.MINUS_MINUS:var a=this.resolveExpression(e.operand,r,t,n);if(!a)return null;if(a.is(256)){var s=a.classReference;if(s){var u=s.lookupOverload(c.OperatorKind.fromUnaryPostfixToken(i));if(u)return u.signature.returnType}}return a.isAny(12)&&a.is(128)?a:(n==o.REPORT&&this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,d.operatorTokenToString(i),a.toString()),null)}return n==o.REPORT&&this.error(l.DiagnosticCode.Not_implemented,e.range),null},r.prototype.lookupBinaryExpression=function(e,r,t,n){void 0===t&&(t=p.Type.auto),void 0===n&&(n=o.REPORT);var i=this.resolveBinaryExpression(e,r,t,n);if(!i)return null;var a=this.getElementOfType(i);return a||(n==o.REPORT&&this.error(l.DiagnosticCode.Type_0_is_illegal_in_this_context,e.range,i.toString()),null)},r.prototype.resolveBinaryExpression=function(e,r,t,n){void 0===t&&(t=p.Type.auto),void 0===n&&(n=o.REPORT);var i=e.left,a=e.right,s=e.operator;switch(s){case d.Token.EQUALS:case d.Token.PLUS_EQUALS:case d.Token.MINUS_EQUALS:case d.Token.ASTERISK_EQUALS:case d.Token.ASTERISK_ASTERISK_EQUALS:case d.Token.SLASH_EQUALS:case d.Token.PERCENT_EQUALS:case d.Token.LESSTHAN_LESSTHAN_EQUALS:case d.Token.GREATERTHAN_GREATERTHAN_EQUALS:case d.Token.GREATERTHAN_GREATERTHAN_GREATERTHAN_EQUALS:case d.Token.AMPERSAND_EQUALS:case d.Token.BAR_EQUALS:case d.Token.CARET_EQUALS:return this.resolveExpression(i,r,t,n);case d.Token.LESSTHAN:case d.Token.GREATERTHAN:case d.Token.LESSTHAN_EQUALS:case d.Token.GREATERTHAN_EQUALS:if(!(u=this.resolveExpression(i,r,t,n)))return null;if(u.is(256))if(_=u.classReference)if(h=_.lookupOverload(c.OperatorKind.fromBinaryToken(s)))return h.signature.returnType;return!u.isAny(12)||u.is(256)?(n==o.REPORT&&this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,d.operatorTokenToString(s),u.toString()),null):p.Type.bool;case d.Token.EQUALS_EQUALS:case d.Token.EXCLAMATION_EQUALS:if(!(u=this.resolveExpression(i,r,t,n)))return null;if(u.is(256))if(_=u.classReference)if(h=_.lookupOverload(c.OperatorKind.fromBinaryToken(s)))return h.signature.returnType;return p.Type.bool;case d.Token.EQUALS_EQUALS_EQUALS:case d.Token.EXCLAMATION_EQUALS_EQUALS:return p.Type.bool;case d.Token.PLUS:case d.Token.MINUS:case d.Token.ASTERISK:case d.Token.SLASH:case d.Token.PERCENT:if(!(u=this.resolveExpression(i,r,t,n)))return null;if(u.is(256))if(_=u.classReference)if(h=_.lookupOverload(c.OperatorKind.fromBinaryToken(s)))return h.signature.returnType;return(y=this.resolveExpression(a,r,u,n))?((T=p.Type.commonDenominator(u,y,!1))||n==o.REPORT&&this.error(l.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,u.toString(),y.toString()),T):null;case d.Token.ASTERISK_ASTERISK:if(!(u=this.resolveExpression(i,r,t,n)))return null;if(u.is(256))if(_=u.classReference)if(h=_.lookupOverload(c.OperatorKind.POW))return h.signature.returnType;return u==p.Type.f32?p.Type.f32:p.Type.f64;case d.Token.LESSTHAN_LESSTHAN:case d.Token.GREATERTHAN_GREATERTHAN:case d.Token.GREATERTHAN_GREATERTHAN_GREATERTHAN:if(!(u=this.resolveExpression(i,r,t,n)))return null;if(u.is(256))if(_=u.classReference)if(h=_.lookupOverload(c.OperatorKind.fromBinaryToken(s)))return h.signature.returnType;return!u.is(4)||u.is(256)?(n==o.REPORT&&this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,d.operatorTokenToString(s),u.toString()),null):u;case d.Token.AMPERSAND:case d.Token.BAR:case d.Token.CARET:var u,_,h,y,T;if(!(u=this.resolveExpression(i,r,t,n)))return null;if(u.is(256))if(_=u.classReference)if(h=_.lookupOverload(c.OperatorKind.fromBinaryToken(s)))return h.signature.returnType;return(y=this.resolveExpression(a,r,t,n))?((T=p.Type.commonDenominator(u,y,!1))&&T.is(4)&&!T.is(256)||n==o.REPORT&&this.error(l.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,d.operatorTokenToString(s),u.toString(),y.toString()),T):null;case d.Token.AMPERSAND_AMPERSAND:case d.Token.BAR_BAR:return this.resolveExpression(i,r,t,n)}return n==o.REPORT&&this.error(l.DiagnosticCode.Not_implemented,e.range),null},r.prototype.lookupThisExpression=function(e,r,t,n){if(void 0===t&&(t=p.Type.auto),void 0===n&&(n=o.REPORT),r.is(32768)){var i=r.lookupLocal(_.CommonSymbols.this_);if(i)return this.currentThisExpression=null,this.currentElementExpression=null,i}var a=r.actualFunction.parent;return a?(this.currentThisExpression=null,this.currentElementExpression=null,a):(n==o.REPORT&&this.error(l.DiagnosticCode._this_cannot_be_referenced_in_current_location,e.range),null)},r.prototype.resolveThisExpression=function(e,r,t,n){void 0===t&&(t=p.Type.auto),void 0===n&&(n=o.REPORT);var i=this.lookupThisExpression(e,r,t,n);if(!i)return null;var a=this.getTypeOfElement(i);return a||n==o.REPORT&&this.error(l.DiagnosticCode.Expression_cannot_be_represented_by_a_type,e.range),a},r.prototype.lookupSuperExpression=function(e,r,t,n){if(void 0===t&&(t=p.Type.auto),void 0===n&&(n=o.REPORT),r.is(32768)){var i=r.lookupLocal(_.CommonSymbols.super_);if(i)return this.currentThisExpression=null,this.currentElementExpression=null,i}var a=r.actualFunction.parent;return a&&a.kind==c.ElementKind.CLASS&&(a=a.base)?(this.currentThisExpression=null,this.currentElementExpression=null,a):(n==o.REPORT&&this.error(l.DiagnosticCode._super_can_only_be_referenced_in_a_derived_class,e.range),null)},r.prototype.resolveSuperExpression=function(e,r,t,n){void 0===t&&(t=p.Type.auto),void 0===n&&(n=o.REPORT);var i=this.lookupSuperExpression(e,r,t,n);if(!i)return null;var a=this.getTypeOfElement(i);return a||n==o.REPORT&&this.error(l.DiagnosticCode.Expression_cannot_be_represented_by_a_type,e.range),a},r.prototype.lookupLiteralExpression=function(e,r,t,n){switch(void 0===t&&(t=p.Type.auto),void 0===n&&(n=o.REPORT),e.literalKind){case u.LiteralKind.INTEGER:this.currentThisExpression=e,this.currentElementExpression=null;var i=this.determineIntegerLiteralType(e.value,t),a=this.program.wrapperClasses;return assert(a.has(i)),a.get(i);case u.LiteralKind.FLOAT:this.currentThisExpression=e,this.currentElementExpression=null;var s=t==p.Type.f32?p.Type.f32:p.Type.f64;a=this.program.wrapperClasses;return assert(a.has(s)),a.get(s);case u.LiteralKind.STRING:return this.currentThisExpression=e,this.currentElementExpression=null,this.program.stringInstance}return n==o.REPORT&&this.error(l.DiagnosticCode.Not_implemented,e.range),null},r.prototype.resolveLiteralExpression=function(e,r,t,n){void 0===t&&(t=p.Type.auto),void 0===n&&(n=o.REPORT);var i=this.lookupLiteralExpression(e,r,t,n);if(!i)return null;var a=this.getTypeOfElement(i);return a||n==o.REPORT&&this.error(l.DiagnosticCode.Expression_cannot_be_represented_by_a_type,e.range),a},r.prototype.lookupCallExpression=function(e,r,t,n){void 0===t&&(t=p.Type.void),void 0===n&&(n=o.REPORT);var i=this.resolveCallExpression(e,r,t,n);if(!i)return null;var a=this.getElementOfType(i);return a||n==o.REPORT&&this.error(l.DiagnosticCode.Type_0_is_illegal_in_this_context,e.range,i.toString()),a},r.prototype.resolveCallExpression=function(e,r,t,n){void 0===t&&(t=p.Type.void),void 0===n&&(n=o.REPORT);var i=e.expression,a=this.lookupExpression(i,r,t,n);if(!a)return null;switch(a.kind){case c.ElementKind.FUNCTION_PROTOTYPE:if(a.internalName==y.BuiltinSymbols.unchecked&&e.arguments.length>0)return this.resolveExpression(e.arguments[0],r,t,n);var s=this.maybeInferCall(e,a,r,n);return s?s.signature.returnType:null;case c.ElementKind.FUNCTION_TARGET:return a.signature.returnType}return n==o.REPORT&&this.error(l.DiagnosticCode.Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures,i.range,a.internalName),null},r.prototype.lookupCommaExpression=function(e,r,t,n){void 0===t&&(t=p.Type.auto),void 0===n&&(n=o.REPORT);var i=e.expressions;return this.lookupExpression(i[assert(i.length)-1],r,t,n)},r.prototype.resolveCommaExpression=function(e,r,t,n){void 0===t&&(t=p.Type.auto),void 0===n&&(n=o.REPORT);var i=e.expressions;return this.resolveExpression(i[assert(i.length)-1],r,t,n)},r.prototype.lookupInstanceOfExpression=function(e,r,t,n){void 0===t&&(t=p.Type.auto),void 0===n&&(n=o.REPORT);var i=this.program.wrapperClasses;return assert(i.has(p.Type.bool)),i.get(p.Type.bool)},r.prototype.resolveInstanceOfExpression=function(e,r,t,n){return void 0===t&&(t=p.Type.auto),void 0===n&&(n=o.REPORT),p.Type.bool},r.prototype.lookupTernaryExpression=function(e,r,t,n){void 0===n&&(n=o.REPORT);var i=this.resolveTernaryExpression(e,r,t,n);if(!i)return null;var a=this.getElementOfType(i);return a||n==o.REPORT&&this.error(l.DiagnosticCode.Type_0_is_illegal_in_this_context,e.range,i.toString()),a},r.prototype.resolveTernaryExpression=function(e,r,t,n){void 0===n&&(n=o.REPORT);var i=this.resolveExpression(e.ifThen,r,t,n);if(!i)return null;var a=this.resolveExpression(e.ifElse,r,i,n);if(!a)return null;var s=p.Type.commonDenominator(i,a,!1);return s||n==o.REPORT&&this.error(l.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,"?:",i.toString(),a.toString()),s},r.prototype.lookupNewExpression=function(e,r,t,n){void 0===n&&(n=o.REPORT);var i=this.lookupExpression(e.expression,r,t,n);return i?i.kind==c.ElementKind.CLASS_PROTOTYPE?this.resolveClassInclTypeArguments(i,e.typeArguments,r.actualFunction,h.makeMap(r.contextualTypeArguments),e,n):(n==o.REPORT&&this.error(l.DiagnosticCode.This_expression_is_not_constructable,e.range),null):null},r.prototype.resolveNewExpression=function(e,r,t,n){void 0===n&&(n=o.REPORT);var i=this.lookupNewExpression(e,r,t,n);if(!i)return null;var a=this.getTypeOfElement(i);return a||n==o.REPORT&&this.error(l.DiagnosticCode.Expression_cannot_be_represented_by_a_type,e.range),a},r.prototype.lookupFunctionExpression=function(e,r,t,n){void 0===n&&(n=o.REPORT);var i=this.resolveFunctionExpression(e,r,t,n);if(!i)return null;var a=this.getElementOfType(i);return a||n==o.REPORT&&this.error(l.DiagnosticCode.Type_0_is_illegal_in_this_context,e.range,i.toString()),a},r.prototype.resolveFunctionExpression=function(e,r,t,n){return void 0===n&&(n=o.REPORT),this.resolveFunctionType(e.declaration.signature,r.actualFunction,r.contextualTypeArguments,n)},r.prototype.resolveFunction=function(e,r,t,n){void 0===t&&(t=h.makeMap()),void 0===n&&(n=o.REPORT);var i=e.parent.kind==c.ElementKind.PROPERTY_PROTOTYPE?e.parent.parent:e.parent,a=null,s=r?p.typesToString(r):"";if(e.is(_.CommonFlags.INSTANCE)){if(assert(i.kind==c.ElementKind.CLASS),a=i,g=e.getResolvedInstance(s))return g;var d=a.typeArguments;if(d){var y=assert(a.prototype.typeParameterNodes),T=y.length;assert(T==y.length);for(var m=0;m<T;++m){var f=y[m].name.text;t.has(f)||t.set(f,d[m])}}}else{var g;if(assert(i.kind!=c.ElementKind.CLASS),g=e.getResolvedInstance(s))return g}var E,v=e.functionTypeNode,b=e.typeParameterNodes;if(r&&(E=r.length)){assert(b&&E==b.length);for(m=0;m<E;++m)t.set(b[m].name.text,r[m])}else assert(!b||0==b.length);var I=null,x=v.explicitThisType;if(x){if(!(I=this.resolveType(x,e.parent,t,n)))return null;t.set(_.CommonSymbols.this_,I)}else a&&(I=a.type,t.set(_.CommonSymbols.this_,I));var A,N=v.parameters,S=N.length,O=new Array(S),C=new Array(S),R=0;for(m=0;m<S;++m){var L=N[m];L.parameterKind==u.ParameterKind.DEFAULT&&(R=m+1);var k=L.type;if(u.isTypeOmitted(k))return n==o.REPORT&&this.error(l.DiagnosticCode.Type_expected,k.range),null;var F=this.resolveType(k,e.parent,t,n);if(!F)return null;O[m]=F,C[m]=L.name.text}if(e.is(_.CommonFlags.SET))A=p.Type.void;else if(e.is(_.CommonFlags.CONSTRUCTOR))A=assert(a).type;else{k=v.returnType;if(u.isTypeOmitted(k))return n==o.REPORT&&this.error(l.DiagnosticCode.Type_expected,k.range),null;var D=this.resolveType(k,e.parent,t,n);if(!D)return null;A=D}var B=new p.Signature(this.program,O,A,I);B.parameterNames=C,B.requiredParameters=R;var P=e.name;s.length&&(P+="<"+s+">");var w=new c.Function(P,e,B,t);return e.setResolvedInstance(s,w),w},r.prototype.resolveFunctionInclTypeArguments=function(e,r,t,n,i,a){void 0===a&&(a=o.REPORT);var s=e.parent.kind==c.ElementKind.PROPERTY_PROTOTYPE?e.parent.parent:e.parent,u=null;if(e.is(_.CommonFlags.GENERIC)){if(e.is(_.CommonFlags.INSTANCE)){assert(s.kind==c.ElementKind.CLASS);var p=s.typeArguments;if(p){var h=assert(s.prototype.typeParameterNodes),d=p.length;assert(d==h.length);for(var y=0;y<d;++y)n.set(h[y].name.text,p[y])}}if(!(u=this.resolveTypeArguments(assert(e.typeParameterNodes),r,t,n,i,a)))return null}else if(null!==r&&r.length)return a==o.REPORT&&this.error(l.DiagnosticCode.Type_0_is_not_generic,i.range,e.internalName),null;return this.resolveFunction(e,u,n,a)},r.prototype.resolveClass=function(e,r,t,n){var i,u,d,y,T,m;void 0===t&&(t=h.makeMap()),void 0===n&&(n=o.REPORT);var f=r?p.typesToString(r):"",g=e.getResolvedInstance(f);if(g)return g;if(r){var E=(I=assert(e.typeParameterNodes)).length,v=r.length;assert(v==E);for(var b=0;b<v;++b)t.set(I[b].name.text,r[b])}else{var I=e.typeParameterNodes;assert(!(I&&I.length))}var x=e.basePrototype,A=null;if(x){var N=assert(e.extendsNode);if(!(A=this.resolveClassInclTypeArguments(x,N.typeArguments,e.parent,h.makeMap(t),N,n)))return null}var S=e.name;f.length&&(S+="<"+f+">"),(g=new c.Class(S,e,r,A)).contextualTypeArguments=t,e.setResolvedInstance(f,g);var O=0;if(A){if(K=A.members){(U=g.members)||(g.members=U=new Map);try{for(var C=a(K),R=C.next();!R.done;R=C.next()){var L=s(R.value,2),k=L[0],F=L[1];U.set(k,F)}}catch(e){i={error:e}}finally{try{R&&!R.done&&(u=C.return)&&u.call(C)}finally{if(i)throw i.error}}}O=A.currentMemoryOffset}var D=e.instanceMembers;if(D)try{for(var B=a(D.values()),P=B.next();!P.done;P=B.next()){var w=P.value;switch(w.kind){case c.ElementKind.FIELD_PROTOTYPE:var U;if(U=g.members){if(U.has(w.name)){var M=U.get(w.name);this.errorRelated(l.DiagnosticCode.Duplicate_identifier_0,w.identifierNode.range,M.declaration.name.range,w.name);break}}else g.members=U=new Map;var G=w.typeNode,V=null;if(G)V=this.resolveType(G,e.parent,g.contextualTypeArguments,n);else{var K;if(A)if((K=A.members)&&K.has(w.name)){var z=K.get(w.name);z.is(_.CommonFlags.PRIVATE)||(assert(z.kind==c.ElementKind.FIELD),V=z.type)}V||n==o.REPORT&&this.error(l.DiagnosticCode.Type_expected,w.identifierNode.range.atEnd)}if(!V)break;var Y=new c.Field(w,g,V);assert(h.isPowerOf2(V.byteSize));var H=V.byteSize-1;O&H&&(O=1+(O|H)),Y.memoryOffset=O,O+=V.byteSize,g.add(w.name,Y);break;case c.ElementKind.FUNCTION_PROTOTYPE:var W=w.toBound(g);g.add(W.name,W);break;case c.ElementKind.PROPERTY_PROTOTYPE:var X=new c.Property(w,g),q=w.getterPrototype;if(q){var Q=this.resolveFunction(q.toBound(g),null,h.makeMap(g.contextualTypeArguments),n);Q&&(X.getterInstance=Q,X.setType(Q.signature.returnType))}var j=w.setterPrototype;if(j){var Z=this.resolveFunction(j.toBound(g),null,h.makeMap(g.contextualTypeArguments),n);Z&&(X.setterInstance=Z,X.is(_.CommonFlags.RESOLVED)||(assert(1==Z.signature.parameterTypes.length),X.setType(Z.signature.parameterTypes[0])))}g.add(X.name,X);break;default:assert(!1)}}}catch(e){d={error:e}}finally{try{P&&!P.done&&(y=B.return)&&y.call(B)}finally{if(d)throw d.error}}g.currentMemoryOffset=O;var J=g.lookupInSelf(_.CommonSymbols.constructor);if(J&&J.parent===g){assert(J.kind==c.ElementKind.FUNCTION_PROTOTYPE);var $=this.resolveFunction(J,null,g.contextualTypeArguments,n);$&&(g.constructorInstance=$)}try{for(var ee=a(e.overloadPrototypes),re=ee.next();!re.done;re=ee.next()){var te=s(re.value,2),ne=te[0],ie=te[1];assert(ne!=c.OperatorKind.INVALID);var ae=void 0;if(ie.is(_.CommonFlags.INSTANCE)){W=ie.toBound(g);ae=this.resolveFunction(W,null,h.makeMap(),n)}else ae=this.resolveFunction(ie,null,h.makeMap(),n);if(ae){var se=g.overloads;if(se||(g.overloads=se=new Map),ae.is(_.CommonFlags.INSTANCE))switch(ne){case c.OperatorKind.PREFIX_INC:case c.OperatorKind.PREFIX_DEC:case c.OperatorKind.POSTFIX_INC:case c.OperatorKind.POSTFIX_DEC:var oe=ae.signature.returnType;oe.isAssignableTo(g.type)||n==o.REPORT&&this.error(l.DiagnosticCode.Type_0_is_not_assignable_to_type_1,ie.functionTypeNode.returnType.range,oe.toString(),g.type.toString())}if(se.has(ne))n==o.REPORT&&this.error(l.DiagnosticCode.Duplicate_decorator,ae.declaration.range);else if(se.set(ne,ae),ne==c.OperatorKind.INDEXED_GET||ne==c.OperatorKind.INDEXED_SET){var le=g.indexSignature;le||(g.indexSignature=le=new c.IndexSignature(g)),ne==c.OperatorKind.INDEXED_GET&&le.setType(ae.signature.returnType)}}}}catch(e){T={error:e}}finally{try{re&&!re.done&&(m=ee.return)&&m.call(ee)}finally{if(T)throw T.error}}return g},r.prototype.resolveClassInclTypeArguments=function(e,r,t,n,i,a){void 0===a&&(a=o.REPORT);var s=null;if(e.is(_.CommonFlags.GENERIC)){if(!(s=this.resolveTypeArguments(assert(e.typeParameterNodes),r,t,n,i,a)))return null}else if(null!==r&&r.length)return a==o.REPORT&&this.error(l.DiagnosticCode.Type_0_is_not_generic,i.range,e.internalName),null;return this.resolveClass(e,s,n,a)},r}(l.DiagnosticEmitter);r.Resolver=T},function(e,r,t){"use strict";var n=this&&this.__values||function(e){var r="function"==typeof Symbol&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var i,a=t(6),s=t(4),o=t(5),l=t(0),c=t(2);!function(e){e[e.NONE=0]="NONE",e[e.RETURNS=1]="RETURNS",e[e.RETURNS_WRAPPED=2]="RETURNS_WRAPPED",e[e.RETURNS_NONNULL=4]="RETURNS_NONNULL",e[e.THROWS=8]="THROWS",e[e.BREAKS=16]="BREAKS",e[e.CONTINUES=32]="CONTINUES",e[e.ALLOCATES=64]="ALLOCATES",e[e.CALLS_SUPER=128]="CALLS_SUPER",e[e.TERMINATES=256]="TERMINATES",e[e.CONDITIONALLY_RETURNS=512]="CONDITIONALLY_RETURNS",e[e.CONDITIONALLY_THROWS=1024]="CONDITIONALLY_THROWS",e[e.CONDITIONALLY_TERMINATES=2048]="CONDITIONALLY_TERMINATES",e[e.CONDITIONALLY_BREAKS=4096]="CONDITIONALLY_BREAKS",e[e.CONDITIONALLY_CONTINUES=8192]="CONDITIONALLY_CONTINUES",e[e.CONDITIONALLY_ALLOCATES=16384]="CONDITIONALLY_ALLOCATES",e[e.INLINE_CONTEXT=32768]="INLINE_CONTEXT",e[e.UNCHECKED_CONTEXT=65536]="UNCHECKED_CONTEXT",e[e.ANY_CATEGORICAL=511]="ANY_CATEGORICAL",e[e.ANY_CONDITIONAL=30208]="ANY_CONDITIONAL"}(r.FlowFlags||(r.FlowFlags={})),function(e){e[e.NONE=0]="NONE",e[e.CONSTANT=1]="CONSTANT",e[e.PARAMETER=2]="PARAMETER",e[e.WRAPPED=4]="WRAPPED",e[e.NONNULL=8]="NONNULL",e[e.READFROM=16]="READFROM",e[e.WRITTENTO=32]="WRITTENTO",e[e.RETAINED=64]="RETAINED",e[e.RETURNED=128]="RETURNED",e[e.CONDITIONALLY_READFROM=256]="CONDITIONALLY_READFROM",e[e.CONDITIONALLY_WRITTENTO=512]="CONDITIONALLY_WRITTENTO",e[e.CONDITIONALLY_RETAINED=1024]="CONDITIONALLY_RETAINED",e[e.CONDITIONALLY_RETURNED=2048]="CONDITIONALLY_RETURNED",e[e.ANY_CATEGORICAL=255]="ANY_CATEGORICAL",e[e.ANY_CONDITIONAL=3904]="ANY_CONDITIONAL",e[e.ANY_WRITTENTO=544]="ANY_WRITTENTO",e[e.ANY_RETAINED=1088]="ANY_RETAINED",e[e.ANY_RETURNED=2176]="ANY_RETURNED"}(i=r.LocalFlags||(r.LocalFlags={})),function(e){e.join=function(r,t){return r&e.ANY_CATEGORICAL&t&e.ANY_CATEGORICAL|r&e.ANY_CONDITIONAL|t&e.ANY_CONDITIONAL}}(i=r.LocalFlags||(r.LocalFlags={})),function(e){e[e.NONE=0]="NONE",e[e.INITIALIZED=1]="INITIALIZED",e[e.CONDITIONALLY_INITIALIZED=2]="CONDITIONALLY_INITIALIZED",e[e.ANY_CATEGORICAL=1]="ANY_CATEGORICAL",e[e.ANY_CONDITIONAL=2]="ANY_CONDITIONAL"}(r.FieldFlags||(r.FieldFlags={})),function(e){e.join=function(r,t){return r&e.ANY_CATEGORICAL&t&e.ANY_CATEGORICAL|r&e.ANY_CONDITIONAL|t&e.ANY_CONDITIONAL}}(r.FieldFlags||(r.FieldFlags={}));var u=function(){function e(){this.scopedLocals=null,this.fieldFlags=null}return e.create=function(r){var t=new e;return t.parent=null,t.flags=0,t.parentFunction=r,t.continueLabel=null,t.breakLabel=null,t.returnType=r.signature.returnType,t.contextualTypeArguments=r.contextualTypeArguments,t.localFlags=[],t.inlineFunction=null,t.inlineReturnLabel=null,t},e.createInline=function(r,t){var n=e.create(r);return n.set(32768),n.inlineFunction=t,n.inlineReturnLabel=t.internalName+"|inlined."+(t.nextInlineId++).toString(10),n.returnType=t.signature.returnType,n.contextualTypeArguments=t.contextualTypeArguments,n},Object.defineProperty(e.prototype,"actualFunction",{get:function(){return this.inlineFunction||this.parentFunction},enumerable:!0,configurable:!0}),e.prototype.is=function(e){return(this.flags&e)==e},e.prototype.isAny=function(e){return 0!=(this.flags&e)},e.prototype.set=function(e){this.flags|=e},e.prototype.unset=function(e){this.flags&=~e},e.prototype.fork=function(){var r=new e;return r.parent=this,r.flags=this.flags,r.parentFunction=this.parentFunction,r.continueLabel=this.continueLabel,r.breakLabel=this.breakLabel,r.returnType=this.returnType,r.contextualTypeArguments=this.contextualTypeArguments,r.localFlags=this.localFlags.slice(),r.inlineFunction=this.inlineFunction,r.inlineReturnLabel=this.inlineReturnLabel,r},e.prototype.getTempLocal=function(e,r){void 0===r&&(r=null);var t,n,i=this.parentFunction;switch(e.toNativeType()){case o.NativeType.I32:t=i.tempI32s;break;case o.NativeType.I64:t=i.tempI64s;break;case o.NativeType.F32:t=i.tempF32s;break;case o.NativeType.F64:t=i.tempF64s;break;case o.NativeType.V128:t=i.tempV128s;break;default:throw new Error("concrete type expected")}if(r){if(t&&t.length)for(var a=0,s=t.length;a<s;++a)if(!r.has(t[a].index)){n=t[a];for(var c=t.length-1;a<c;)unchecked(t[a]=t[1+a++]);return t.length=c,n.type=e,n.flags=l.CommonFlags.NONE,this.unsetLocalFlag(n.index,-1),n}n=i.addLocal(e)}else t&&t.length?((n=t.pop()).type=e,n.flags=l.CommonFlags.NONE):n=i.addLocal(e);return this.unsetLocalFlag(n.index,-1),n},e.prototype.getAutoreleaseLocal=function(e,r){void 0===r&&(r=null);var t=this.getTempLocal(e,r);t.set(l.CommonFlags.SCOPED);var n=this.scopedLocals;return n||(this.scopedLocals=n=new Map),n.set("~auto"+this.parentFunction.nextAutoreleaseId++,t),this.setLocalFlag(t.index,i.RETAINED),t},e.prototype.freeTempLocal=function(e){if(!e.is(l.CommonFlags.INLINED)){assert(e.index>=0);var r,t=this.parentFunction;switch(assert(null!=e.type),e.type.toNativeType()){case o.NativeType.I32:r=t.tempI32s||(t.tempI32s=[]);break;case o.NativeType.I64:r=t.tempI64s||(t.tempI64s=[]);break;case o.NativeType.F32:r=t.tempF32s||(t.tempF32s=[]);break;case o.NativeType.F64:r=t.tempF64s||(t.tempF64s=[]);break;case o.NativeType.V128:r=t.tempV128s||(t.tempV128s=[]);break;default:throw new Error("concrete type expected")}assert(e.index>=0),r.push(e)}},e.prototype.getScopedLocal=function(e){var r=this.scopedLocals;return r&&r.has(e)?r.get(e):null},e.prototype.addScopedLocal=function(e,r,t){void 0===t&&(t=null);var n=this.getTempLocal(r,t),i=this.scopedLocals;return i?assert(!i.has(e)):this.scopedLocals=i=new Map,n.set(l.CommonFlags.SCOPED),i.set(e,n),n},e.prototype.addScopedAlias=function(e,r,t,n){if(void 0===n&&(n=null),this.scopedLocals){var i=this.scopedLocals.get(e);if(i)return n&&(i.declaration.range.source.isNative?this.parentFunction.program.error(c.DiagnosticCode.Duplicate_identifier_0,n.range,e):this.parentFunction.program.errorRelated(c.DiagnosticCode.Duplicate_identifier_0,n.range,i.declaration.name.range,e)),i}else this.scopedLocals=new Map;assert(t<this.parentFunction.localsByIndex.length);var a=new s.Local(e,t,r,this.parentFunction);return this.scopedLocals.set(e,a),a},Object.defineProperty(e.prototype,"hasScopedLocals",{get:function(){var e,r;if(this.scopedLocals)try{for(var t=n(this.scopedLocals.values()),i=t.next();!i.done;i=t.next()){if(i.value.is(l.CommonFlags.SCOPED))return!0}}catch(r){e={error:r}}finally{try{i&&!i.done&&(r=t.return)&&r.call(t)}finally{if(e)throw e.error}}return!1},enumerable:!0,configurable:!0}),e.prototype.freeScopedLocals=function(){var e,r;if(this.scopedLocals){try{for(var t=n(this.scopedLocals.values()),i=t.next();!i.done;i=t.next()){var a=i.value;a.is(l.CommonFlags.SCOPED)&&this.freeTempLocal(a)}}catch(r){e={error:r}}finally{try{i&&!i.done&&(r=t.return)&&r.call(t)}finally{if(e)throw e.error}}this.scopedLocals=null}},e.prototype.lookupLocal=function(e){var r,t=this;do{if((r=t.scopedLocals)&&r.has(e))return r.get(e)}while(t=t.parent);return this.parentFunction.localsByName.get(e)},e.prototype.lookup=function(e){var r=this.lookupLocal(e);return r||this.actualFunction.lookup(e)},e.prototype.isLocalFlag=function(e,r,t){return void 0===t&&(t=!0),e<0?t:e<this.localFlags.length&&(unchecked(this.localFlags[e])&r)==r},e.prototype.isAnyLocalFlag=function(e,r,t){return void 0===t&&(t=!0),e<0?t:e<this.localFlags.length&&0!=(unchecked(this.localFlags[e])&r)},e.prototype.setLocalFlag=function(e,r){if(!(e<0)){var t=this.localFlags,n=e<t.length?unchecked(t[e]):0;this.localFlags[e]=n|r}},e.prototype.unsetLocalFlag=function(e,r){if(!(e<0)){var t=this.localFlags,n=e<t.length?unchecked(t[e]):0;this.localFlags[e]=n&~r}},e.prototype.pushBreakLabel=function(){var e=this.parentFunction,r=e.nextBreakId++,t=e.breakStack;return t?t.push(r):e.breakStack=[r],e.breakLabel=r.toString(10)},e.prototype.popBreakLabel=function(){var e=this.parentFunction,r=assert(e.breakStack),t=assert(r.length);r.pop(),t>1?e.breakLabel=r[t-2].toString(10):(e.breakLabel=null,e.breakStack=null)},e.prototype.inherit=function(e){this.flags|=30719&e.flags,this.localFlags=e.localFlags},e.prototype.inheritConditional=function(e){this.set(30208&e.flags),e.is(1)&&this.set(512),e.is(8)&&this.set(1024),e.is(16)&&e.breakLabel==this.breakLabel&&this.set(4096),e.is(32)&&e.continueLabel==this.continueLabel&&this.set(8192),e.is(64)&&this.set(16384);for(var r=e.localFlags,t=0,n=r.length;t<n;++t){var a=r[t];this.setLocalFlag(t,a&i.ANY_CONDITIONAL),a&i.RETAINED&&this.setLocalFlag(t,i.CONDITIONALLY_RETAINED),a&i.READFROM&&this.setLocalFlag(t,i.CONDITIONALLY_READFROM),a&i.WRITTENTO&&this.setLocalFlag(t,i.CONDITIONALLY_WRITTENTO),a&i.RETURNED&&this.setLocalFlag(t,i.CONDITIONALLY_RETURNED)}},e.prototype.inheritMutual=function(e,r){this.set(e.flags&r.flags&511),this.set(30208&e.flags),this.set(30208&r.flags),this.inheritConditional(e),this.inheritConditional(r);for(var t=e.localFlags,n=t.length,a=r.localFlags,s=a.length,o=new Array(max(n,s)),l=0;l<n;++l)o[l]=i.join(unchecked(t[l]),l<s?unchecked(a[l]):0);for(l=n;l<s;++l)o[l]=i.join(0,unchecked(a[l]));this.localFlags=o},e.prototype.unifyLocalFlags=function(e){for(var r=this.localFlags.length,t=e.localFlags.length,n=0,a=min(r,t);n<a;++n)this.isLocalFlag(n,i.WRAPPED)!=e.isLocalFlag(n,i.WRAPPED)&&this.unsetLocalFlag(n,i.WRAPPED),this.isLocalFlag(n,i.NONNULL)!=e.isLocalFlag(n,i.NONNULL)&&this.unsetLocalFlag(n,i.NONNULL),assert(this.isAnyLocalFlag(n,i.ANY_RETAINED)==e.isAnyLocalFlag(n,i.ANY_RETAINED))},e.prototype.isNonnull=function(e,r){if(!r.is(512))return!0;switch(o.getExpressionId(e)){case o.ExpressionId.LocalSet:if(!o.isLocalTee(e))break;return!(t=this.parentFunction.localsByIndex[o.getLocalSetIndex(e)]).type.is(512)||this.isLocalFlag(t.index,i.NONNULL,!1);case o.ExpressionId.LocalGet:var t;return!(t=this.parentFunction.localsByIndex[o.getLocalGetIndex(e)]).type.is(512)||this.isLocalFlag(t.index,i.NONNULL,!1)}return!1},e.prototype.inheritNonnullIfTrue=function(e){switch(o.getExpressionId(e)){case o.ExpressionId.LocalSet:if(!o.isLocalTee(e))break;var r=this.parentFunction.localsByIndex[o.getLocalSetIndex(e)];this.setLocalFlag(r.index,i.NONNULL),this.inheritNonnullIfTrue(o.getLocalSetValue(e));break;case o.ExpressionId.LocalGet:r=this.parentFunction.localsByIndex[o.getLocalGetIndex(e)];this.setLocalFlag(r.index,i.NONNULL);break;case o.ExpressionId.If:var t=o.getIfFalse(e);if(!t)break;o.getExpressionId(t)==o.ExpressionId.Const&&(o.getExpressionType(t)==o.NativeType.I32&&0==o.getConstValueI32(t)||o.getExpressionType(t)==o.NativeType.I64&&0==o.getConstValueI64Low(t)&&0==o.getConstValueI64High(t))&&(this.inheritNonnullIfTrue(o.getIfCondition(e)),this.inheritNonnullIfTrue(o.getIfTrue(e)));break;case o.ExpressionId.Unary:switch(o.getUnaryOp(e)){case o.UnaryOp.EqzI32:case o.UnaryOp.EqzI64:this.inheritNonnullIfFalse(o.getUnaryValue(e))}break;case o.ExpressionId.Binary:switch(o.getBinaryOp(e)){case o.BinaryOp.EqI32:var n=o.getBinaryLeft(e),a=o.getBinaryRight(e);o.getExpressionId(n)==o.ExpressionId.Const&&0!=o.getConstValueI32(n)?this.inheritNonnullIfTrue(a):o.getExpressionId(a)==o.ExpressionId.Const&&0!=o.getConstValueI32(a)&&this.inheritNonnullIfTrue(n);break;case o.BinaryOp.EqI64:n=o.getBinaryLeft(e),a=o.getBinaryRight(e);o.getExpressionId(n)!=o.ExpressionId.Const||0==o.getConstValueI64Low(n)&&0==o.getConstValueI64High(n)?o.getExpressionId(a)==o.ExpressionId.Const&&0!=o.getConstValueI64Low(a)&&0!=o.getConstValueI64High(a)&&this.inheritNonnullIfTrue(n):this.inheritNonnullIfTrue(a);break;case o.BinaryOp.NeI32:n=o.getBinaryLeft(e),a=o.getBinaryRight(e);o.getExpressionId(n)==o.ExpressionId.Const&&0==o.getConstValueI32(n)?this.inheritNonnullIfTrue(a):o.getExpressionId(a)==o.ExpressionId.Const&&0==o.getConstValueI32(a)&&this.inheritNonnullIfTrue(n);break;case o.BinaryOp.NeI64:n=o.getBinaryLeft(e),a=o.getBinaryRight(e);o.getExpressionId(n)==o.ExpressionId.Const&&0==o.getConstValueI64Low(n)&&0==o.getConstValueI64High(n)?this.inheritNonnullIfTrue(a):o.getExpressionId(a)==o.ExpressionId.Const&&0==o.getConstValueI64Low(a)&&0==o.getConstValueI64High(a)&&this.inheritNonnullIfTrue(n)}break;case o.ExpressionId.Call:switch(o.getCallTarget(e)){case this.parentFunction.program.retainInstance.internalName:this.inheritNonnullIfTrue(o.getCallOperand(e,0))}}},e.prototype.inheritNonnullIfFalse=function(e){switch(o.getExpressionId(e)){case o.ExpressionId.Unary:switch(o.getUnaryOp(e)){case o.UnaryOp.EqzI32:case o.UnaryOp.EqzI64:this.inheritNonnullIfTrue(o.getUnaryValue(e))}break;case o.ExpressionId.If:var r=o.getIfTrue(e);if(o.getExpressionId(r)==o.ExpressionId.Const){if(!o.getIfFalse(e))break;(o.getExpressionType(r)==o.NativeType.I32&&0!=o.getConstValueI32(r)||o.getExpressionType(r)==o.NativeType.I64&&(0!=o.getConstValueI64Low(r)||0!=o.getConstValueI64High(r)))&&(this.inheritNonnullIfFalse(o.getIfCondition(e)),this.inheritNonnullIfFalse(o.getIfFalse(e)))}break;case o.ExpressionId.Binary:switch(o.getBinaryOp(e)){case o.BinaryOp.EqI32:var t=o.getBinaryLeft(e),n=o.getBinaryRight(e);o.getExpressionId(t)==o.ExpressionId.Const&&0==o.getConstValueI32(t)?this.inheritNonnullIfTrue(n):o.getExpressionId(n)==o.ExpressionId.Const&&0==o.getConstValueI32(n)&&this.inheritNonnullIfTrue(t);break;case o.BinaryOp.EqI64:t=o.getBinaryLeft(e),n=o.getBinaryRight(e);o.getExpressionId(t)==o.ExpressionId.Const&&0==o.getConstValueI64Low(t)&&0==o.getConstValueI64High(t)?this.inheritNonnullIfTrue(n):o.getExpressionId(n)==o.ExpressionId.Const&&0==o.getConstValueI64Low(n)&&0==o.getConstValueI64High(n)&&this.inheritNonnullIfTrue(t);break;case o.BinaryOp.NeI32:t=o.getBinaryLeft(e),n=o.getBinaryRight(e);o.getExpressionId(t)==o.ExpressionId.Const&&0!=o.getConstValueI32(t)?this.inheritNonnullIfTrue(n):o.getExpressionId(n)==o.ExpressionId.Const&&0!=o.getConstValueI32(n)&&this.inheritNonnullIfTrue(t);break;case o.BinaryOp.NeI64:t=o.getBinaryLeft(e),n=o.getBinaryRight(e);o.getExpressionId(t)!=o.ExpressionId.Const||0==o.getConstValueI64Low(t)&&0==o.getConstValueI64High(t)?o.getExpressionId(n)!=o.ExpressionId.Const||0==o.getConstValueI64Low(n)&&0==o.getConstValueI64High(n)||this.inheritNonnullIfTrue(t):this.inheritNonnullIfTrue(n)}}},e.prototype.canOverflow=function(e,r){if(assert(r!=a.Type.void),!r.is(36))return!1;var t;switch(o.getExpressionId(e)){case o.ExpressionId.LocalGet:var n=this.parentFunction.localsByIndex[o.getLocalGetIndex(e)];return!this.isLocalFlag(n.index,i.WRAPPED,!0)||p(n.type,r);case o.ExpressionId.LocalSet:return assert(o.isLocalTee(e)),this.canOverflow(o.getLocalSetValue(e),r);case o.ExpressionId.GlobalGet:var l=assert(this.parentFunction.program.elementsByName.get(assert(o.getGlobalGetName(e))));return assert(l.kind==s.ElementKind.GLOBAL),p(assert(l.type),r);case o.ExpressionId.Binary:switch(o.getBinaryOp(e)){case o.BinaryOp.EqI32:case o.BinaryOp.EqI64:case o.BinaryOp.EqF32:case o.BinaryOp.EqF64:case o.BinaryOp.NeI32:case o.BinaryOp.NeI64:case o.BinaryOp.NeF32:case o.BinaryOp.NeF64:case o.BinaryOp.LtI32:case o.BinaryOp.LtU32:case o.BinaryOp.LtI64:case o.BinaryOp.LtU64:case o.BinaryOp.LtF32:case o.BinaryOp.LtF64:case o.BinaryOp.LeI32:case o.BinaryOp.LeU32:case o.BinaryOp.LeI64:case o.BinaryOp.LeU64:case o.BinaryOp.LeF32:case o.BinaryOp.LeF64:case o.BinaryOp.GtI32:case o.BinaryOp.GtU32:case o.BinaryOp.GtI64:case o.BinaryOp.GtU64:case o.BinaryOp.GtF32:case o.BinaryOp.GtF64:case o.BinaryOp.GeI32:case o.BinaryOp.GeU32:case o.BinaryOp.GeI64:case o.BinaryOp.GeU64:case o.BinaryOp.GeF32:case o.BinaryOp.GeF64:return!1;case o.BinaryOp.MulI32:return!(o.getExpressionId(t=o.getBinaryLeft(e))==o.ExpressionId.Const&&(0==o.getConstValueI32(t)||1==o.getConstValueI32(t)&&!this.canOverflow(o.getBinaryRight(e),r))||o.getExpressionId(t=o.getBinaryRight(e))==o.ExpressionId.Const&&(0==o.getConstValueI32(t)||1==o.getConstValueI32(t)&&!this.canOverflow(o.getBinaryLeft(e),r)));case o.BinaryOp.AndI32:return!(o.getExpressionId(t=o.getBinaryLeft(e))==o.ExpressionId.Const&&o.getConstValueI32(t)<=r.computeSmallIntegerMask(a.Type.i32)||!this.canOverflow(t,r)||o.getExpressionId(t=o.getBinaryRight(e))==o.ExpressionId.Const&&o.getConstValueI32(t)<=r.computeSmallIntegerMask(a.Type.i32)||!this.canOverflow(t,r));case o.BinaryOp.ShlI32:var c=32-r.size;return o.getExpressionId(t=o.getBinaryRight(e))!=o.ExpressionId.Const||o.getConstValueI32(t)<c;case o.BinaryOp.ShrI32:c=32-r.size;return this.canOverflow(o.getBinaryLeft(e),r)&&(o.getExpressionId(t=o.getBinaryRight(e))!=o.ExpressionId.Const||o.getConstValueI32(t)<c);case o.BinaryOp.ShrU32:c=32-r.size;return r.is(1)?!(o.getExpressionId(t=o.getBinaryRight(e))==o.ExpressionId.Const&&o.getConstValueI32(t)>c):this.canOverflow(o.getBinaryLeft(e),r)&&!(o.getExpressionId(t=o.getBinaryRight(e))==o.ExpressionId.Const&&o.getConstValueI32(t)>=c);case o.BinaryOp.DivU32:case o.BinaryOp.RemI32:case o.BinaryOp.RemU32:return this.canOverflow(o.getBinaryLeft(e),r)||this.canOverflow(o.getBinaryRight(e),r)}break;case o.ExpressionId.Unary:switch(o.getUnaryOp(e)){case o.UnaryOp.EqzI32:case o.UnaryOp.EqzI64:return!1;case o.UnaryOp.ClzI32:case o.UnaryOp.CtzI32:case o.UnaryOp.PopcntI32:return r.size<7}break;case o.ExpressionId.Const:var u=0;switch(o.getExpressionType(e)){case o.NativeType.I32:u=o.getConstValueI32(e);break;case o.NativeType.I64:u=o.getConstValueI64Low(e);break;case o.NativeType.F32:u=i32(o.getConstValueF32(e));break;case o.NativeType.F64:u=i32(o.getConstValueF64(e));break;default:assert(!1)}switch(r.kind){case 0:return u<i8.MIN_VALUE||u>i8.MAX_VALUE;case 1:return u<i16.MIN_VALUE||u>i16.MAX_VALUE;case 5:return u<0||u>u8.MAX_VALUE;case 6:return u<0||u>u16.MAX_VALUE;case 10:return 0!=(-2&u)}break;case o.ExpressionId.Load:var _=void 0,h=o.isLoadSigned(e);switch(o.getLoadBytes(e)){case 1:_=h?a.Type.i8:a.Type.u8;break;case 2:_=h?a.Type.i16:a.Type.u16;break;default:_=h?a.Type.i32:a.Type.u32}return p(_,r);case o.ExpressionId.Block:if(!o.getBlockName(e)){var d=assert(o.getBlockChildCount(e)),y=o.getBlockChild(e,d-1);return this.canOverflow(y,r)}break;case o.ExpressionId.If:return this.canOverflow(o.getIfTrue(e),r)||this.canOverflow(assert(o.getIfFalse(e)),r);case o.ExpressionId.Select:return this.canOverflow(o.getSelectThen(e),r)||this.canOverflow(o.getSelectElse(e),r);case o.ExpressionId.Call:var T=this.parentFunction.program.instancesByName,m=assert(o.getCallTarget(e));if(T.has(m)){var f=T.get(m);assert(f.kind==s.ElementKind.FUNCTION);var g=f.signature.returnType;return!f.flow.is(2)||p(g,r)}return!1;case o.ExpressionId.Unreachable:return!1}return!0},e.prototype.toString=function(){for(var e=0,r=this.parent;r;)r=r.parent,++e;return"Flow("+this.actualFunction+")["+e.toString()+"]"},e}();function p(e,r){return!e.is(4)||e.size>r.size||e.is(1)!=r.is(1)}function _(e,r){switch(o.getExpressionId(e)){case o.ExpressionId.LocalGet:r.add(o.getLocalGetIndex(e));break;case o.ExpressionId.LocalSet:r.add(o.getLocalSetIndex(e));default:o.traverse(e,r,_)}}r.Flow=u,r.findUsedLocals=function(e,r){return void 0===r&&(r=new Set),o.traverse(e,r,_),r}},function(e,r,t){"use strict";var n,i=this&&this.__extends||(n=function(e,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(e,r)},function(e,r){function t(){this.constructor=e}n(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}),a=this&&this.__values||function(e){var r="function"==typeof Symbol&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,i,a=t.call(e),s=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(t=a.return)&&t.call(a)}finally{if(i)throw i.error}}return s};Object.defineProperty(r,"__esModule",{value:!0});var o=t(13),l=t(2),c=t(5),u=t(0),p=t(4),_=t(10),h=t(9),d=t(7),y=t(3),T=t(6),m=t(1),f=function(){function e(){this.target=u.Target.WASM32,this.noAssert=!1,this.importMemory=!1,this.sharedMemory=0,this.importTable=!1,this.sourceMap=!1,this.explicitStart=!1,this.memoryBase=0,this.globalAliases=null,this.features=2,this.noUnsafe=!1,this.optimizeLevelHint=0,this.shrinkLevelHint=0}return Object.defineProperty(e.prototype,"isWasm64",{get:function(){return this.target==u.Target.WASM64},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"usizeType",{get:function(){return this.target==u.Target.WASM64?T.Type.usize64:T.Type.usize32},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isizeType",{get:function(){return this.target==u.Target.WASM64?T.Type.isize64:T.Type.isize32},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nativeSizeType",{get:function(){return this.target==u.Target.WASM64?c.NativeType.I64:c.NativeType.I32},enumerable:!0,configurable:!0}),e.prototype.hasFeature=function(e){return 0!=(this.features&e)},e}();r.Options=f,function(e){e[e.NONE=0]="NONE",e[e.CONV_IMPLICIT=1]="CONV_IMPLICIT",e[e.CONV_EXPLICIT=2]="CONV_EXPLICIT",e[e.MUST_WRAP=4]="MUST_WRAP",e[e.WILL_DROP=8]="WILL_DROP",e[e.WILL_RETAIN=16]="WILL_RETAIN",e[e.PREFER_STATIC=32]="PREFER_STATIC"}(r.Constraints||(r.Constraints={})),function(e){e[e.NONE=0]="NONE",e[e.HEAP=1]="HEAP",e[e.RTTI=2]="RTTI",e[e.visitGlobals=4]="visitGlobals",e[e.visitMembers=8]="visitMembers"}(r.RuntimeFeatures||(r.RuntimeFeatures={}));var g,E,v=function(e){function r(r,t){void 0===t&&(t=null);var n=e.call(this,r.diagnostics)||this;n.currentInlineFunctions=[],n.currentParent=null,n.currentType=T.Type.void,n.memorySegments=[],n.stringSegments=new Map,n.functionTable=["null"],n.argcVar=0,n.argcSet=0,n.runtimeFeatures=0,n.skippedAutoreleases=new Set,n.f32ModInstance=null,n.f64ModInstance=null,n.f32PowInstance=null,n.f64PowInstance=null,n.program=r,t||(t=new f),n.options=t,n.memoryOffset=i64_new(max(t.memoryBase,8)),n.module=c.Module.create();var i=0;return n.options.hasFeature(1)&&(i|=c.FeatureFlags.SignExt),n.options.hasFeature(2)&&(i|=c.FeatureFlags.MutableGloabls),n.options.hasFeature(4)&&(i|=c.FeatureFlags.NontrappingFPToInt),n.options.hasFeature(8)&&(i|=c.FeatureFlags.BulkMemory),n.options.hasFeature(16)&&(i|=c.FeatureFlags.SIMD128),n.options.hasFeature(32)&&(i|=c.FeatureFlags.Atomics),n.options.hasFeature(64)&&(i|=c.FeatureFlags.ExceptionHandling),n.options.hasFeature(128)&&(i|=c.FeatureFlags.TailCall),n.options.hasFeature(256)&&(i|=c.FeatureFlags.ReferenceTypes),n.module.setFeatures(i),n}return i(r,e),Object.defineProperty(r.prototype,"resolver",{get:function(){return this.program.resolver},enumerable:!0,configurable:!0}),r.compile=function(e,t){return void 0===t&&(t=null),new r(e,t).compile()},r.prototype.compile=function(){var e,r,t,n,i=this.options,s=this.module,l=this.program;l.initialize(i);var u=l.makeNativeFunction("start",new T.Signature(l,[],T.Type.void));u.internalName="start";var p=new Array;this.currentFlow=u.flow,this.currentBody=p,i.isWasm64?(s.addGlobal(o.BuiltinSymbols.heap_base,c.NativeType.I64,!0,s.i64(0)),s.addGlobal(o.BuiltinSymbols.rtti_base,c.NativeType.I64,!0,s.i64(0))):(s.addGlobal(o.BuiltinSymbols.heap_base,c.NativeType.I32,!0,s.i32(0)),s.addGlobal(o.BuiltinSymbols.rtti_base,c.NativeType.I32,!0,s.i32(0)));var _=l.filesByName;try{for(var h=a(_.values()),d=h.next();!d.done;d=h.next()){(N=d.value).source.sourceKind==y.SourceKind.USER_ENTRY&&(this.compileFile(N),this.compileExports(N))}}catch(r){e={error:r}}finally{try{d&&!d.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}var m=!p.length,f=i.explicitStart;if(!m||f){var g=u.signature;!m&&f&&(s.addGlobal(o.BuiltinSymbols.started,c.NativeType.I32,!0,s.i32(0)),p.unshift(s.if(s.global_get(o.BuiltinSymbols.started,c.NativeType.I32),s.return(),s.global_set(o.BuiltinSymbols.started,s.i32(1)))));var E=s.addFunction(u.internalName,this.ensureFunctionType(g.parameterTypes,g.returnType,g.thisType),T.typesToNativeTypes(u.additionalLocals),s.block(null,p));u.finalize(s,E),f?s.addFunctionExport(u.internalName,"__start"):s.setStart(E)}4&this.runtimeFeatures&&o.compileVisitGlobals(this),8&this.runtimeFeatures&&o.compileVisitMembers(this),s.removeGlobal(o.BuiltinSymbols.rtti_base),2&this.runtimeFeatures&&o.compileRTTI(this);var v=this.memoryOffset;v=i64_align(v,i.usizeType.byteSize),this.memoryOffset=v,s.removeGlobal(o.BuiltinSymbols.heap_base),1&this.runtimeFeatures&&(i.isWasm64?s.addGlobal(o.BuiltinSymbols.heap_base,c.NativeType.I64,!1,s.i64(i64_low(v),i64_high(v))):s.addGlobal(o.BuiltinSymbols.heap_base,c.NativeType.I32,!1,s.i32(i64_low(v))));var b=i.hasFeature(32)&&i.sharedMemory>0;s.setMemory(this.options.memoryBase||this.memorySegments.length?i64_low(i64_shr_u(i64_align(v,65536),i64_new(16,0))):0,b?i.sharedMemory:c.Module.UNLIMITED_MEMORY,this.memorySegments,i.target,"memory",b),i.importMemory&&s.addMemoryImport("0","env","memory",b);var I=this.functionTable;s.setFunctionTable(I.length,4294967295,I,s.i32(0)),s.addFunction("null",this.ensureFunctionType(null,T.Type.void),null,s.block(null,[])),i.importTable&&s.addTableImport("0","env","table");try{for(var x=a(this.program.filesByName.values()),A=x.next();!A.done;A=x.next()){var N;(N=A.value).source.sourceKind==y.SourceKind.USER_ENTRY&&this.ensureModuleExports(N)}}catch(e){t={error:e}}finally{try{A&&!A.done&&(n=x.return)&&n.call(x)}finally{if(t)throw t.error}}return s},r.prototype.ensureModuleExports=function(e){var r,t,n=e.exports;if(n)try{for(var i=a(n),o=i.next();!o.done;o=i.next()){var l=s(o.value,2),c=l[0],u=l[1];this.ensureModuleExport(c,u)}}catch(e){r={error:e}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}var p=e.exportsStar;if(p)for(var _=0,h=p.length;_<h;++_)this.ensureModuleExports(p[_])},r.prototype.ensureModuleExport=function(e,r,t){var n,i,s,o,_,h,d,y;switch(void 0===t&&(t=""),r.kind){case p.ElementKind.FUNCTION_PROTOTYPE:if(E=r.instances)try{for(var T=a(E.values()),m=T.next();!m.done;m=T.next()){var f=m.value,g=e;if(f.is(u.CommonFlags.GENERIC))g+=(I=f.internalName).substring(I.lastIndexOf("<"));this.ensureModuleExport(g,f,t)}}catch(e){n={error:e}}finally{try{m&&!m.done&&(i=T.return)&&i.call(T)}finally{if(n)throw n.error}}break;case p.ElementKind.CLASS_PROTOTYPE:var E;if(E=r.instances)try{for(var v=a(E.values()),b=v.next();!b.done;b=v.next()){var I;f=b.value,g=e;if(f.is(u.CommonFlags.GENERIC))g+=(I=f.internalName).substring(I.lastIndexOf("<"));this.ensureModuleExport(g,f,t)}}catch(e){s={error:e}}finally{try{b&&!b.done&&(o=v.return)&&o.call(v)}finally{if(s)throw s.error}}break;case p.ElementKind.PROPERTY_PROTOTYPE:var x=r.getterPrototype,A=r.setterPrototype;x&&this.ensureModuleExport(u.GETTER_PREFIX+e,x,t),A&&this.ensureModuleExport(u.SETTER_PREFIX+e,A,t);break;case p.ElementKind.GLOBAL:r.is(u.CommonFlags.CONST)||r.is(u.CommonFlags.STATIC|u.CommonFlags.READONLY)||this.options.hasFeature(2)?this.module.addGlobalExport(r.internalName,t+e):this.error(l.DiagnosticCode.Cannot_export_a_mutable_global,r.identifierNode.range);break;case p.ElementKind.ENUMVALUE:r.isImmutable||this.options.hasFeature(2)?this.module.addGlobalExport(r.internalName,t+e):this.error(l.DiagnosticCode.Cannot_export_a_mutable_global,r.identifierNode.range);break;case p.ElementKind.FUNCTION:var N=(f=r).signature;N.requiredParameters<N.parameterTypes.length&&(f=this.ensureTrampoline(f),this.ensureArgcSet()),f.is(u.CommonFlags.COMPILED)&&this.module.addFunctionExport(f.internalName,t+e);break;case p.ElementKind.PROPERTY:(x=r.getterInstance)&&this.ensureModuleExport(u.GETTER_PREFIX+e,x,t),(A=r.setterInstance)&&this.ensureModuleExport(u.SETTER_PREFIX+e,A,t);break;case p.ElementKind.FIELD:this.ensureModuleFieldGetter(t+u.GETTER_PREFIX+e,r),r.is(u.CommonFlags.READONLY)||this.ensureModuleFieldSetter(t+u.SETTER_PREFIX+e,r);break;case p.ElementKind.CLASS:if(!r.type.isUnmanaged){var S=this.module,O=r.internalName;S.addGlobal(O,c.NativeType.I32,!1,S.i32(r.id)),S.addGlobalExport(O,t+e)}break;case p.ElementKind.ENUM:case p.ElementKind.NAMESPACE:case p.ElementKind.FILE:case p.ElementKind.TYPEDEFINITION:case p.ElementKind.INDEXSIGNATURE:break;default:assert(!1)}var C=r.members;if(C){var R=t+e+(r.kind==p.ElementKind.CLASS?u.INSTANCE_DELIMITER:u.STATIC_DELIMITER);if(r.kind==p.ElementKind.NAMESPACE||r.kind==p.ElementKind.FILE)try{for(var L=a(C.values()),k=L.next();!k.done;k=L.next()){(B=k.value).is(u.CommonFlags.EXPORT)&&this.ensureModuleExport(B.name,B,R)}}catch(e){_={error:e}}finally{try{k&&!k.done&&(h=L.return)&&h.call(L)}finally{if(_)throw _.error}}else try{for(var F=a(C.values()),D=F.next();!D.done;D=F.next()){var B;(B=D.value).is(u.CommonFlags.PRIVATE)||this.ensureModuleExport(B.name,B,R)}}catch(e){d={error:e}}finally{try{D&&!D.done&&(y=F.return)&&y.call(F)}finally{if(d)throw d.error}}}},r.prototype.ensureModuleFieldGetter=function(e,r){var t=r.type,n=this.module,i=this.options.usizeType,a=n.load(t.byteSize,t.is(1),n.local_get(0,i.toNativeType()),t.toNativeType(),r.memoryOffset);t.isManaged&&(a=this.makeRetain(a)),n.addFunction(e,this.ensureFunctionType(null,t,i),null,a),n.addFunctionExport(e,e)},r.prototype.ensureModuleFieldSetter=function(e,r){var t=r.type,n=this.module,i=t.toNativeType(),a=this.options.usizeType,s=a.toNativeType(),o=n.local_get(1,i);t.isManaged&&(o=this.makeRetainRelease(n.load(t.byteSize,!1,n.local_get(0,s),i,r.memoryOffset),o)),n.addFunction(e,this.ensureFunctionType([t],T.Type.void,a),null,n.store(t.byteSize,n.local_get(0,s),o,i,r.memoryOffset)),n.addFunctionExport(e,e)},r.prototype.compileElement=function(e,r){switch(void 0===r&&(r=!0),e.kind){case p.ElementKind.GLOBAL:this.compileGlobal(e);break;case p.ElementKind.ENUM:this.compileEnum(e);break;case p.ElementKind.FUNCTION_PROTOTYPE:e.is(u.CommonFlags.GENERIC)||this.compileFunctionUsingTypeArguments(e,[]);break;case p.ElementKind.CLASS_PROTOTYPE:e.is(u.CommonFlags.GENERIC)||this.compileClassUsingTypeArguments(e,[]);break;case p.ElementKind.PROPERTY_PROTOTYPE:var t=e.getterPrototype;t&&this.compileFunctionUsingTypeArguments(t,[]);var n=e.setterPrototype;n&&this.compileFunctionUsingTypeArguments(n,[]);break;case p.ElementKind.NAMESPACE:case p.ElementKind.TYPEDEFINITION:case p.ElementKind.ENUMVALUE:case p.ElementKind.INDEXSIGNATURE:break;default:assert(!1,p.ElementKind[e.kind])}r&&this.compileMembers(e)},r.prototype.compileMembers=function(e){var r,t,n=e.members;if(n)try{for(var i=a(n.values()),s=i.next();!s.done;s=i.next()){var o=s.value;this.compileElement(o)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}},r.prototype.compileExports=function(e){var r,t,n,i,s=e.exports;if(s)try{for(var o=a(s.values()),l=o.next();!l.done;l=o.next()){var c=l.value;this.compileElement(c)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(t=o.return)&&t.call(o)}finally{if(r)throw r.error}}var u=e.exportsStar;if(u)try{for(var p=a(u),_=p.next();!_.done;_=p.next()){var h=_.value;this.compileFile(h),this.compileExports(h)}}catch(e){n={error:e}}finally{try{_&&!_.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}},r.prototype.compileFileByPath=function(e,r){var t,n,i=this.program.filesByName;if(i.has(e))t=i.get(e);else{if(!i.has(n=e+u.INDEX_SUFFIX))return void this.error(l.DiagnosticCode.File_0_not_found,r.range,e);t=i.get(n)}this.compileFile(t)},r.prototype.compileFile=function(e){if(!e.is(u.CommonFlags.COMPILED)){e.set(u.CommonFlags.COMPILED);var r=e.startFunction,t=this.currentBody,n=new Array;this.currentBody=n;var i=this.currentFlow,a=r.flow;this.currentFlow=a;for(var s=e.source.statements,o=0,l=s.length;o<l;++o)this.compileTopLevelStatement(s[o],n);if(this.finishAutoreleases(a,n),this.currentFlow=i,this.currentBody=t,n.length){var p=this.module,_=r.localsByIndex,h=_.length,d=new Array(h);for(o=0;o<h;++o)d[o]=_[o].type.toNativeType();p.addFunction(r.internalName,this.ensureFunctionType(r.signature.parameterTypes,r.signature.returnType),d,n.length>1?p.block(null,n):n[0]),t.push(p.call(r.internalName,null,c.NativeType.None))}}},r.prototype.compileGlobal=function(e){if(e.is(u.CommonFlags.COMPILED))return!0;e.set(u.CommonFlags.COMPILED);var r=this.module,t=0,n=!1,i=e.typeNode,a=e.initializerNode;if(!e.is(u.CommonFlags.RESOLVED))if(i){var s=this.resolver.resolveType(i,e.parent);if(!s)return!1;if(s==T.Type.void)return this.error(l.DiagnosticCode.Type_expected,i.range),!1;e.setType(s)}else{if(!a)return this.error(l.DiagnosticCode.Type_expected,e.identifierNode.range.atEnd),!1;var _=this.currentFlow;if(e.hasDecorator(p.DecoratorFlags.LAZY)&&(this.currentFlow=e.file.startFunction.flow),t=this.compileExpression(a,T.Type.auto,20),this.skippedAutoreleases.has(t)&&(n=!0),this.currentFlow=_,this.currentType==T.Type.void)return this.error(l.DiagnosticCode.Type_0_is_not_assignable_to_type_1,a.range,this.currentType.toString(),"<auto>"),!1;e.setType(this.currentType)}if(e.is(u.CommonFlags.AMBIENT)&&e.hasDecorator(p.DecoratorFlags.BUILTIN))return e.internalName==o.BuiltinSymbols.heap_base?this.runtimeFeatures|=1:e.internalName==o.BuiltinSymbols.rtti_base&&(this.runtimeFeatures|=2),!0;var h=e.type,d=h.toNativeType(),m=e.is(u.CommonFlags.CONST)||e.is(u.CommonFlags.STATIC|u.CommonFlags.READONLY),f=e.hasDecorator(p.DecoratorFlags.INLINE);if(e.is(u.CommonFlags.AMBIENT))return m||this.options.hasFeature(2)?(e.set(u.CommonFlags.MODULE_IMPORT),b(e,e.declaration),r.addGlobalImport(e.internalName,g,E,d,!m),e.set(u.CommonFlags.COMPILED),!0):(this.error(l.DiagnosticCode.Feature_0_is_not_enabled,e.declaration.range,"mutable-globals"),!1);var v=!1;if(a){if(!t){_=this.currentFlow;e.hasDecorator(p.DecoratorFlags.LAZY)&&(this.currentFlow=e.file.startFunction.flow),t=this.compileExpression(a,h,53),this.skippedAutoreleases.has(t)&&(n=!0),this.currentFlow=_}if(c.getExpressionId(t)!=c.ExpressionId.Const&&(m?(t=r.precomputeExpression(t),c.getExpressionId(t)!=c.ExpressionId.Const&&(v=!0)):v=!0),f)if(v)this.warning(l.DiagnosticCode.Mutable_value_cannot_be_inlined,a.range);else{switch(assert(c.getExpressionId(t)==c.ExpressionId.Const),c.getExpressionType(t)){case c.NativeType.I32:e.constantValueKind=1,e.constantIntegerValue=i64_new(c.getConstValueI32(t),0);break;case c.NativeType.I64:e.constantValueKind=1,e.constantIntegerValue=i64_new(c.getConstValueI64Low(t),c.getConstValueI64High(t));break;case c.NativeType.F32:e.constantValueKind=2,e.constantFloatValue=c.getConstValueF32(t);break;case c.NativeType.F64:e.constantValueKind=2,e.constantFloatValue=c.getConstValueF64(t);break;default:return assert(!1),!1}e.set(u.CommonFlags.INLINED)}}else t=h.toNativeZero(r);var I=e.internalName;return v?(f&&this.error(l.DiagnosticCode.Decorator_0_is_not_valid_here,assert(y.findDecorator(y.DecoratorKind.INLINE,e.decoratorNodes)).range,"inline"),r.addGlobal(I,d,!0,h.toNativeZero(r)),h.isManaged&&!n&&(t=this.makeRetain(t)),this.currentBody.push(r.global_set(I,t))):f||r.addGlobal(I,d,!m,t),!0},r.prototype.compileEnum=function(e){var r,t;if(e.is(u.CommonFlags.COMPILED))return!0;e.set(u.CommonFlags.COMPILED);var n=this.module,i=this.currentParent;this.currentParent=e;var s=null,o=!1,_=e.is(u.CommonFlags.CONST)||e.hasDecorator(p.DecoratorFlags.INLINE);if(e.members)try{for(var h=a(e.members.values()),d=h.next();!d.done;d=h.next()){var y=d.value;if(y.kind==p.ElementKind.ENUMVALUE){var m=!1,f=y,g=f.valueNode;f.set(u.CommonFlags.COMPILED);var E=this.currentFlow;e.hasDecorator(p.DecoratorFlags.LAZY)&&(this.currentFlow=e.file.startFunction.flow);var v=void 0;g?(v=this.compileExpression(g,T.Type.i32,1),c.getExpressionId(v)!=c.ExpressionId.Const&&(v=n.precomputeExpression(v),c.getExpressionId(v)!=c.ExpressionId.Const&&(e.is(u.CommonFlags.CONST)&&this.error(l.DiagnosticCode.In_const_enum_declarations_member_initializer_must_be_constant_expression,g.range),m=!0))):null==s?v=n.i32(0):(o&&this.error(l.DiagnosticCode.Enum_member_must_have_initializer,y.identifierNode.range.atEnd),v=n.binary(c.BinaryOp.AddI32,n.global_get(s.internalName,c.NativeType.I32),n.i32(1)),v=n.precomputeExpression(v),c.getExpressionId(v)!=c.ExpressionId.Const&&(e.is(u.CommonFlags.CONST)&&this.error(l.DiagnosticCode.In_const_enum_declarations_member_initializer_must_be_constant_expression,y.declaration.range),m=!0)),this.currentFlow=E,m?(n.addGlobal(f.internalName,c.NativeType.I32,!0,n.i32(0)),this.currentBody.push(this.makeGlobalAssignment(f,v,!1)),o=!0):(_?(f.setConstantIntegerValue(i64_new(c.getConstValueI32(v)),T.Type.i32),f.is(u.CommonFlags.MODULE_EXPORT)&&n.addGlobal(f.internalName,c.NativeType.I32,!1,v)):n.addGlobal(f.internalName,c.NativeType.I32,!1,v),f.isImmutable=!0,o=!1),s=f}}}catch(e){r={error:e}}finally{try{d&&!d.done&&(t=h.return)&&t.call(h)}finally{if(r)throw r.error}}return this.currentParent=i,!0},r.prototype.compileFunctionUsingTypeArguments=function(e,r,t,n){if(void 0===t&&(t=m.makeMap()),void 0===n&&(n=null),e.hasDecorator(p.DecoratorFlags.BUILTIN))return null;var i=this.resolver.resolveFunctionInclTypeArguments(e,r,e.parent,t,n||e.declaration);return i&&this.compileFunction(i)?i:null},r.prototype.ensureFunctionType=function(e,r,t){void 0===t&&(t=null);var n,i=e?e.length:0,a=0;if(t?((n=new Array(1+i))[0]=t.toNativeType(),a=1):n=new Array(i),e)for(var s=0;s<i;++s,++a)n[a]=e[s].toNativeType();var o=r.toNativeType(),l=this.module,c=l.getFunctionTypeBySignature(o,n);if(!c){var u=T.Signature.makeSignatureString(e,r,t);c=l.addFunctionType(u,o,n)}return c},r.prototype.compileFunctionBody=function(e,r){void 0===r&&(r=null);var t=this.module,n=assert(e.prototype.bodyNode),i=e.signature.returnType,a=this.currentFlow;if(n.kind==y.NodeKind.BLOCK)r=this.compileStatements(n.statements,!0,r);else{assert(n.kind==y.NodeKind.EXPRESSION),assert(e.prototype.arrowKind),assert(!e.isAny(u.CommonFlags.CONSTRUCTOR|u.CommonFlags.GET|u.CommonFlags.SET|u.CommonFlags.MAIN));var s=this.compileExpression(n.expression,i,1);if(r?r.push(s):r=[s],!a.is(256)){var o=r.length;this.performAutoreleases(a,r),this.finishAutoreleases(a,r);var h=a.canOverflow(s,i),d=a.isNonnull(s,i);if(r.length>o){var m=a.getTempLocal(i);h||a.setLocalFlag(m.index,_.LocalFlags.WRAPPED),d&&a.setLocalFlag(m.index,_.LocalFlags.NONNULL),r[o-1]=t.local_set(m.index,s),r.push(t.local_get(m.index,i.toNativeType())),a.freeTempLocal(m)}h||a.set(2),d&&a.set(4),a.set(257)}}if(e.is(u.CommonFlags.CONSTRUCTOR)){var f=this.options.nativeSizeType;assert(e.is(u.CommonFlags.INSTANCE));var g=assert(e.parent);if(assert(g.kind==p.ElementKind.CLASS),!a.is(256)){var E=assert(a.lookupLocal(u.CommonSymbols.this_));a.is(64)||(r.push(t.if(t.unary(f==c.NativeType.I64?c.UnaryOp.EqzI64:c.UnaryOp.EqzI32,t.local_get(E.index,f)),t.local_set(E.index,this.makeRetain(this.makeAllocation(g))))),this.makeFieldInitialization(g,r)),this.performAutoreleases(a,r),this.finishAutoreleases(a,r),r.push(t.local_get(E.index,this.options.nativeSizeType)),a.set(261)}g.base&&!a.is(128)&&this.error(l.DiagnosticCode.Constructors_for_derived_classes_must_contain_a_super_call,e.prototype.declaration.range)}else i==T.Type.void||a.is(256)||this.error(l.DiagnosticCode.A_function_whose_declared_type_is_not_void_must_return_a_value,e.prototype.functionTypeNode.returnType.range);return r},r.prototype.compileFunction=function(e){if(e.is(u.CommonFlags.COMPILED))return!0;assert(!(e.is(u.CommonFlags.AMBIENT)&&e.hasDecorator(p.DecoratorFlags.BUILTIN)));var r=this.currentType;e.set(u.CommonFlags.COMPILED);var t,n=this.module,i=e.signature,a=e.prototype.bodyNode,s=this.ensureFunctionType(i.parameterTypes,i.returnType,i.thisType);if(a){if(e.is(u.CommonFlags.AMBIENT)&&this.error(l.DiagnosticCode.An_implementation_cannot_be_declared_in_ambient_contexts,e.identifierNode.range),e.hasDecorator(p.DecoratorFlags.EXTERNAL)){var o=e.decoratorNodes,c=assert(y.findDecorator(y.DecoratorKind.EXTERNAL,o));this.error(l.DiagnosticCode.Decorator_0_is_not_valid_here,c.range,"external")}var h=this.currentFlow,d=e.flow;this.currentFlow=d;var m=new Array,f=0;i.thisType&&++f;for(var v=i.parameterTypes,x=0,A=v.length;x<A;++x,++f){var N=v[x];N.isManaged&&(m.push(n.drop(this.makeRetain(n.local_get(f,N.toNativeType())))),d.setLocalFlag(f,_.LocalFlags.RETAINED|_.LocalFlags.PARAMETER))}this.compileFunctionBody(e,m),d.is(256)||(this.performAutoreleases(d,m),this.finishAutoreleases(d,m)),this.currentFlow=h,t=n.addFunction(e.internalName,s,T.typesToNativeTypes(e.additionalLocals),I(n,m,e.signature.returnType.toNativeType()))}else e.is(u.CommonFlags.AMBIENT)||this.error(l.DiagnosticCode.Function_implementation_is_missing_or_not_immediately_following_the_declaration,e.identifierNode.range),e.set(u.CommonFlags.MODULE_IMPORT),b(e,e.declaration),n.addFunctionImport(e.internalName,g,E,s),t=n.getFunction(e.internalName);return e.finalize(n,t),this.currentType=r,!0},r.prototype.compileClassUsingTypeArguments=function(e,r,t,n){void 0===t&&(t=m.makeMap()),void 0===n&&(n=null);var i=this.resolver.resolveClassInclTypeArguments(e,r,e.parent,t,n||e.declaration);i&&this.compileClass(i)},r.prototype.compileClass=function(e){var r,t,n,i;if(e.is(u.CommonFlags.COMPILED))return!0;e.set(u.CommonFlags.COMPILED);var s=e.prototype.members;if(s)try{for(var o=a(s.values()),l=o.next();!l.done;l=o.next()){switch((y=l.value).kind){case p.ElementKind.GLOBAL:this.compileGlobal(y);break;case p.ElementKind.FUNCTION_PROTOTYPE:y.is(u.CommonFlags.GENERIC)||this.compileFunctionUsingTypeArguments(y,[],m.makeMap(),y.identifierNode);break;case p.ElementKind.PROPERTY_PROTOTYPE:(T=y.getterPrototype)&&this.compileFunctionUsingTypeArguments(T,[],m.makeMap(),T.identifierNode),(f=y.setterPrototype)&&this.compileFunctionUsingTypeArguments(f,[],m.makeMap(),f.identifierNode);break;case p.ElementKind.PROPERTY:}}}catch(e){r={error:e}}finally{try{l&&!l.done&&(t=o.return)&&t.call(o)}finally{if(r)throw r.error}}var c=e.constructorInstance;c&&this.compileFunction(c);var _=e.members;if(_)try{for(var h=a(_.values()),d=h.next();!d.done;d=h.next()){var y;switch((y=d.value).kind){case p.ElementKind.FUNCTION_PROTOTYPE:y.is(u.CommonFlags.GENERIC)||this.compileFunctionUsingTypeArguments(y,[],m.makeMap(e.contextualTypeArguments),y.declaration.name);break;case p.ElementKind.FIELD_PROTOTYPE:y.set(u.CommonFlags.COMPILED);break;case p.ElementKind.PROPERTY:var T,f;(T=y.getterInstance)&&this.compileFunction(T),(f=y.setterInstance)&&this.compileFunction(f)}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}return!0},r.prototype.compileInterfaceDeclaration=function(e,r,t,n){void 0===t&&(t=null),void 0===n&&(n=null),this.error(l.DiagnosticCode.Not_implemented,e.range)},r.prototype.addMemorySegment=function(e,r){void 0===r&&(r=8);var t=i64_align(this.memoryOffset,r),n=c.MemorySegment.create(e,t);return this.memorySegments.push(n),this.memoryOffset=i64_add(t,i64_new(e.length,0)),n},r.prototype.ensureStaticString=function(e){var r,t=this.program,n=t.runtimeHeaderSize,i=assert(t.stringInstance),a=this.stringSegments;if(a.has(e))r=a.get(e);else{var s=e.length,o=new Uint8Array(n+(s<<1));t.writeRuntimeHeader(o,0,i,s<<1);for(var l=0;l<s;++l)m.writeI16(e.charCodeAt(l),o,n+(l<<1));r=this.addMemorySegment(o),a.set(e,r)}var c=i64_add(r.offset,i64_new(n));return this.currentType=i.type,this.options.isWasm64?this.module.i64(i64_low(c),i64_high(c)):(assert(i64_is_u32(c)),this.module.i32(i64_low(c)))},r.prototype.ensureStaticArrayBuffer=function(e,r){var t=this.program,n=r.length,i=e.byteSize,a=n*i,s=assert(t.arrayBufferInstance),o=t.runtimeHeaderSize,l=new Uint8Array(o+a);t.writeRuntimeHeader(l,0,s,a);var u=o,p=e.toNativeType();switch(p){case c.NativeType.I32:switch(i){case 1:for(var _=0;_<n;++_){var h=r[_];assert(c.getExpressionType(h)==p),assert(c.getExpressionId(h)==c.ExpressionId.Const),m.writeI8(c.getConstValueI32(h),l,u),u+=1}break;case 2:for(_=0;_<n;++_){h=r[_];assert(c.getExpressionType(h)==p),assert(c.getExpressionId(h)==c.ExpressionId.Const),m.writeI16(c.getConstValueI32(h),l,u),u+=2}break;case 4:for(_=0;_<n;++_){h=r[_];assert(c.getExpressionType(h)==p),assert(c.getExpressionId(h)==c.ExpressionId.Const),m.writeI32(c.getConstValueI32(h),l,u),u+=4}break;default:assert(!1)}break;case c.NativeType.I64:for(_=0;_<n;++_){h=r[_];assert(c.getExpressionType(h)==p),assert(c.getExpressionId(h)==c.ExpressionId.Const),m.writeI64(i64_new(c.getConstValueI64Low(h),c.getConstValueI64High(h)),l,u),u+=8}break;case c.NativeType.F32:for(_=0;_<n;++_){h=r[_];assert(c.getExpressionType(h)==p),assert(c.getExpressionId(h)==c.ExpressionId.Const),m.writeF32(c.getConstValueF32(h),l,u),u+=4}break;case c.NativeType.F64:for(_=0;_<n;++_){h=r[_];assert(c.getExpressionType(h)==p),assert(c.getExpressionId(h)==c.ExpressionId.Const),m.writeF64(c.getConstValueF64(h),l,u),u+=8}break;default:assert(!1)}return assert(u==l.length),this.addMemorySegment(l)},r.prototype.ensureStaticArrayHeader=function(e,r){var t=this.program,n=t.runtimeHeaderSize,i=assert(t.arrayPrototype),a=assert(this.resolver.resolveClass(i,[e])),s=a.currentMemoryOffset,o=r.buffer.length-n,l=i32(o/e.byteSize),c=new Uint8Array(n+s);t.writeRuntimeHeader(c,0,a,s);var u=i64_low(r.offset)+n;return assert(!t.options.isWasm64),assert(a.writeField("buffer",u,c,n)),assert(a.writeField("dataStart",u,c,n)),assert(a.writeField("byteLength",o,c,n)),assert(a.writeField("length_",l,c,n)),this.addMemorySegment(c)},r.prototype.ensureFunctionTableEntry=function(e){if(assert(e.is(u.CommonFlags.COMPILED)),e.functionTableIndex>=0)return e.functionTableIndex;var r=this.functionTable,t=r.length;return!e.is(u.CommonFlags.TRAMPOLINE)&&e.signature.requiredParameters<e.signature.parameterTypes.length&&(e=this.ensureTrampoline(e)),r.push(e.internalName),e.functionTableIndex=t,t},r.prototype.compileTopLevelStatement=function(e,r){switch(e.kind){case y.NodeKind.CLASSDECLARATION:for(var t=0,n=(a=e.members).length;t<n;++t)this.compileTopLevelStatement(a[t],r);break;case y.NodeKind.ENUMDECLARATION:(o=this.program.getElementByDeclaration(e))&&(assert(o.kind==p.ElementKind.ENUM),o.hasDecorator(p.DecoratorFlags.LAZY)||this.compileEnum(o));break;case y.NodeKind.NAMESPACEDECLARATION:if(o=this.program.getElementByDeclaration(e)){var i=this.currentParent;this.currentParent=o;var a;for(t=0,n=(a=e.members).length;t<n;++t)this.compileTopLevelStatement(a[t],r);this.currentParent=i}break;case y.NodeKind.VARIABLE:var s=e.declarations;for(t=0,n=s.length;t<n;++t){(o=this.program.getElementByDeclaration(s[t]))&&(assert(o.kind==p.ElementKind.GLOBAL),o.is(u.CommonFlags.AMBIENT)||o.hasDecorator(p.DecoratorFlags.LAZY)||this.compileGlobal(o))}break;case y.NodeKind.FIELDDECLARATION:var o;null!==(o=this.program.getElementByDeclaration(e))&&o.kind==p.ElementKind.GLOBAL&&(o.hasDecorator(p.DecoratorFlags.LAZY)||this.compileGlobal(o));break;case y.NodeKind.EXPORT:null!=e.internalPath&&this.compileFileByPath(e.internalPath,e.path);break;case y.NodeKind.EXPORTDEFAULT:this.compileTopLevelStatement(e.declaration,r);break;case y.NodeKind.IMPORT:this.compileFileByPath(e.internalPath,e.path);break;case y.NodeKind.FUNCTIONDECLARATION:case y.NodeKind.METHODDECLARATION:case y.NodeKind.INTERFACEDECLARATION:case y.NodeKind.INDEXSIGNATUREDECLARATION:case y.NodeKind.TYPEDECLARATION:break;default:var l=this.compileStatement(e);c.getExpressionId(l)!=c.ExpressionId.Nop&&r.push(l)}},r.prototype.compileStatement=function(e,r){void 0===r&&(r=!1);var t,n=this.module;switch(e.kind){case y.NodeKind.BLOCK:t=this.compileBlockStatement(e);break;case y.NodeKind.BREAK:t=this.compileBreakStatement(e);break;case y.NodeKind.CONTINUE:t=this.compileContinueStatement(e);break;case y.NodeKind.DO:t=this.compileDoStatement(e);break;case y.NodeKind.EMPTY:t=this.compileEmptyStatement(e);break;case y.NodeKind.EXPRESSION:t=this.compileExpressionStatement(e);break;case y.NodeKind.FOR:t=this.compileForStatement(e);break;case y.NodeKind.IF:t=this.compileIfStatement(e);break;case y.NodeKind.RETURN:t=this.compileReturnStatement(e,r);break;case y.NodeKind.SWITCH:t=this.compileSwitchStatement(e);break;case y.NodeKind.THROW:t=this.compileThrowStatement(e);break;case y.NodeKind.TRY:t=this.compileTryStatement(e);break;case y.NodeKind.VARIABLE:(t=this.compileVariableStatement(e))||(t=n.nop());break;case y.NodeKind.VOID:t=this.compileVoidStatement(e);break;case y.NodeKind.WHILE:t=this.compileWhileStatement(e);break;case y.NodeKind.TYPEDECLARATION:this.error(l.DiagnosticCode.Not_implemented,e.range),t=n.unreachable();break;default:assert(!1),t=n.unreachable()}return this.options.sourceMap&&this.addDebugLocation(t,e.range),t},r.prototype.compileStatements=function(e,r,t){void 0===r&&(r=!1),void 0===t&&(t=null);var n=e.length;t||((t=new Array(n)).length=0);for(var i=this.module,a=this.currentFlow,s=0;s<n;++s){var o=this.compileStatement(e[s],r&&s==n-1);switch(c.getExpressionId(o)){case c.ExpressionId.Block:if(!c.getBlockName(o)){for(var l=0,u=c.getBlockChildCount(o);l<u;++l)t.push(c.getBlockChild(o,l));break}default:t.push(o);case c.ExpressionId.Nop:}if(a.isAny(272)){c.needsExplicitUnreachable(o)&&t.push(i.unreachable());break}}return t},r.prototype.compileBlockStatement=function(e){var r=e.statements,t=this.currentFlow,n=t.fork();this.currentFlow=n;var i=this.compileStatements(r);return n.isAny(272)||this.performAutoreleases(n,i),n.freeScopedLocals(),t.inherit(n),this.currentFlow=t,I(this.module,i,c.NativeType.None)},r.prototype.compileBreakStatement=function(e){var r=this.module;if(e.label)return this.error(l.DiagnosticCode.Not_implemented,e.label.range),r.unreachable();var t=this.currentFlow,n=t.breakLabel;if(null==n)return this.error(l.DiagnosticCode.A_break_statement_can_only_be_used_within_an_enclosing_iteration_or_switch_statement,e.range),r.unreachable();var i=new Array;this.performAutoreleases(t,i);for(var a=t.parent;null!==a&&a.breakLabel==n;)this.performAutoreleases(a,i,!1),a=a.parent;return t.freeScopedLocals(),i.push(r.br(n)),t.set(16),I(r,i,c.NativeType.None)},r.prototype.compileContinueStatement=function(e){var r=this.module,t=e.label;if(t)return this.error(l.DiagnosticCode.Not_implemented,t.range),r.unreachable();var n=this.currentFlow,i=n.continueLabel;if(null==i)return this.error(l.DiagnosticCode.A_continue_statement_can_only_be_used_within_an_enclosing_iteration_statement,e.range),r.unreachable();n.set(288);var a=new Array;this.performAutoreleases(n,a);for(var s=n.parent;s&&s.continueLabel===i;)this.performAutoreleases(s,a,!1),s=s.parent;return n.freeScopedLocals(),a.push(r.br(i)),I(r,a,c.NativeType.None)},r.prototype.compileDoStatement=function(e){var r=this.module,t=this.currentFlow,n=t.pushBreakLabel(),i=t.fork(),a="break|"+n;i.breakLabel=a;var s="continue|"+n;i.continueLabel=s;var o=t.fork();this.currentFlow=o;var l=r.precomputeExpression(this.makeIsTrueish(this.compileExpression(e.condition,T.Type.i32),this.currentType));assert(!o.hasScopedLocals),i.unifyLocalFlags(o),this.currentFlow=i;var u=new Array;e.statement.kind==y.NodeKind.BLOCK?this.compileStatements(e.statement.statements,!1,u):u.push(this.compileStatement(e.statement));var p=!1;c.getExpressionId(l)==c.ExpressionId.Const&&(assert(c.getExpressionType(l)==c.NativeType.I32),c.getConstValueI32(l)||(p=!0));var _=i.is(256),h=i.isAny(8224),d=i.isAny(4112),m=!_&&!i.is(16);m&&(this.performAutoreleases(i,u),p||u.push(r.br(s,l)));var f=I(r,u,c.NativeType.None);return(m&&!p||h)&&(f=r.loop(s,f)),d&&(f=r.block(a,[f])),i.freeScopedLocals(),t.popBreakLabel(),i.unset(12336),t.inherit(i),this.currentFlow=t,f},r.prototype.compileEmptyStatement=function(e){return this.module.nop()},r.prototype.compileExpressionStatement=function(e){return this.compileExpression(e.expression,T.Type.void,1)},r.prototype.compileForStatement=function(e){var r=this.module,t=this.currentFlow,n=t.pushBreakLabel(),i=t.fork();this.currentFlow=i;var a=e.initializer,s=0;a&&(s=this.compileStatement(a));var o=0,l=!1;if(e.condition){if(o=r.precomputeExpression(this.makeIsTrueish(this.compileExpression(e.condition,T.Type.bool),this.currentType)),c.getExpressionId(o)==c.ExpressionId.Const){if(assert(c.getExpressionType(o)==c.NativeType.I32),0==c.getConstValueI32(o)){var u=new Array;return s&&u.push(s),this.performAutoreleases(i,u),i.freeScopedLocals(),t.popBreakLabel(),this.currentFlow=t,I(r,u,c.NativeType.None)}l=!0}}else o=r.i32(1),l=!0;i.inheritNonnullIfTrue(o);var p=e.incrementor,_=0;if(p){var h=i.fork();this.currentFlow=h,_=this.compileExpression(p,T.Type.void,9),assert(!h.hasScopedLocals),this.currentFlow=i,i.unifyLocalFlags(h)}var d=i.fork();this.currentFlow=d;var m=i.breakLabel="break|"+n;d.breakLabel=m,d.breakLabel=m;var f="continue|"+n;d.continueLabel=f;var g="loop|"+n,E=e.statement,v=new Array;E.kind==y.NodeKind.BLOCK?this.compileStatements(E.statements,!1,v):v.push(this.compileStatement(E));var b=d.is(256),x=d.isAny(8224),A=d.isAny(4112),N=!b&&!i.is(16);N&&this.performAutoreleases(d,v),d.freeScopedLocals(),i.inherit(d),this.currentFlow=i;var S,O=!l||A,C=new Array;if(l||C.push(r.br(m,r.unary(c.UnaryOp.EqzI32,o))),x)(v.length>1||c.getExpressionId(v[0])!=c.ExpressionId.Break)&&C.push(r.block(f,v));else for(var R=0,L=v.length;R<L;++R)C.push(v[R]);return N||x?(_&&C.push(_),this.performAutoreleases(i,C),C.push(r.br(g)),S=s?r.block(O?m:null,[s,r.loop(g,r.block(null,C))]):r.block(O?m:null,[r.loop(g,I(r,C,c.NativeType.None))])):(s&&C.unshift(s),this.performAutoreleases(i,C),S=r.block(O?m:null,C)),i.freeScopedLocals(),t.popBreakLabel(),i.unset(12336),l?t.inherit(i):t.inheritConditional(i),this.currentFlow=t,S},r.prototype.compileIfStatement=function(e){var r=this.module,t=e.ifTrue,n=e.ifFalse,i=this.currentFlow,a=r.precomputeExpression(this.makeIsTrueish(this.compileExpression(e.condition,T.Type.bool),this.currentType));if(c.getExpressionId(a)==c.ExpressionId.Const&&c.getExpressionType(a)==c.NativeType.I32)return c.getConstValueI32(a)?this.compileStatement(t):n?this.compileStatement(n):r.nop();var s=new Array,o=i.fork();if(this.currentFlow=o,o.inheritNonnullIfTrue(a),t.kind==y.NodeKind.BLOCK?this.compileStatements(t.statements,!1,s):s.push(this.compileStatement(t)),o.isAny(272)||this.performAutoreleases(o,s),o.freeScopedLocals(),this.currentFlow=i,n){var l=i.fork();this.currentFlow=l,l.inheritNonnullIfFalse(a);var u=new Array;return n.kind==y.NodeKind.BLOCK?this.compileStatements(n.statements,!1,u):u.push(this.compileStatement(n)),l.isAny(272)||this.performAutoreleases(l,u),l.freeScopedLocals(),this.currentFlow=i,i.inheritMutual(o,l),r.if(a,I(r,s,c.NativeType.None),I(r,u,c.NativeType.None))}return i.inheritConditional(o),o.is(256)&&i.inheritNonnullIfFalse(a),r.if(a,I(r,s,c.NativeType.None))},r.prototype.compileReturnStatement=function(e,r){var t=this.module,n=0,i=this.currentFlow,a=i.returnType;i.set(257);var s=e.value;if(s){if(a==T.Type.void)return this.error(l.DiagnosticCode.Type_0_is_not_assignable_to_type_1,s.range,this.currentType.toString(),a.toString()),this.currentType=T.Type.void,t.unreachable();var o=1;if(i.actualFunction.is(u.CommonFlags.MODULE_EXPORT)&&(o|=4),n=this.compileExpression(s,a,16|o),!this.skippedAutoreleases.has(n)&&a.isManaged&&c.getExpressionId(n)==c.ExpressionId.LocalGet){var p=c.getLocalGetIndex(n);i.isAnyLocalFlag(p,_.LocalFlags.ANY_RETAINED)&&(i.unsetLocalFlag(p,_.LocalFlags.ANY_RETAINED),i.setLocalFlag(p,_.LocalFlags.RETURNED),this.skippedAutoreleases.add(n))}i.canOverflow(n,a)||i.set(2),i.isNonnull(n,a)&&i.set(4)}else a!=T.Type.void&&(this.error(l.DiagnosticCode.Type_0_is_not_assignable_to_type_1,e.range,"void",a.toString()),n=t.unreachable());var h=new Array;if(this.performAutoreleases(i,h),this.finishAutoreleases(i,h),a.isManaged&&!this.skippedAutoreleases.has(n)&&(n=this.makeRetain(n)),a!=T.Type.void&&h.length){var d=i.getTempLocal(a);i.isNonnull(n,a)&&i.setLocalFlag(d.index,_.LocalFlags.NONNULL),h.unshift(t.local_set(d.index,n)),n=t.local_get(d.index,a.toNativeType()),i.freeTempLocal(d)}return i.freeScopedLocals(),r&&n&&a!=T.Type.void?h.length?(h.push(n),t.block(null,h,a.toNativeType())):n:i.is(32768)?h.length?(h.push(t.br(assert(i.inlineReturnLabel),0,n)),t.block(null,h)):t.br(assert(i.inlineReturnLabel),0,n):h.length?(h.push(t.return(n)),t.block(null,h)):t.return(n)},r.prototype.compileSwitchStatement=function(e){var r=this.module,t=e.cases,n=t.length;if(!n)return this.compileExpression(e.condition,T.Type.void,1);var i=this.currentFlow,a=i.pushBreakLabel(),s=i.getTempLocal(T.Type.u32),o=s.index,l=new Array(1+n);l[0]=r.local_set(o,this.compileExpression(e.condition,T.Type.u32,1));for(var u=1,p=-1,_=0;_<n;++_){var h=t[_].label;h?l[u++]=r.br("case"+_.toString(10)+"|"+a,r.binary(c.BinaryOp.EqI32,r.local_get(o,c.NativeType.I32),this.compileExpression(h,T.Type.u32,1))):p=_}i.freeTempLocal(s),l[u]=r.br((p>=0?"case"+p.toString(10):"break")+"|"+a);var d=r.block("case0|"+a,l,c.NativeType.None),y=511,m=0;for(_=0;_<n;++_){var f=t[_].statements,g=f.length,E=i.fork();this.currentFlow=E;var v="break|"+a;E.breakLabel=v;var b=_==n-1,I=b?v:"case"+(_+1).toString(10)+"|"+a,x=new Array(1+g);x[0]=d;for(var A=1,N=!1,S=0;S<g;++S){var O=this.compileStatement(f[S]);if(c.getExpressionId(O)!=c.ExpressionId.Nop&&(x[A++]=O),E.isAny(272)){E.is(256)&&(N=!0);break}}x.length=A,(N||b||E.isAny(4112))&&(y&=E.flags),m|=30208&E.flags,N||this.performAutoreleases(E,x),E.unset(4112),E.freeScopedLocals(),this.currentFlow=i,d=r.block(I,x,c.NativeType.None)}return i.popBreakLabel(),p>=0&&(i.flags|=-17&y),i.flags|=-4097&m,d},r.prototype.compileThrowStatement=function(e){var r=this.currentFlow;r.set(264);var t=new Array;this.finishAutoreleases(r,t);var n=e.value,i=null;if(n.kind==y.NodeKind.NEW){var a=n.arguments;a.length&&(i=a[0])}return t.push(o.compileAbort(this,i,e)),I(this.module,t,c.NativeType.None)},r.prototype.compileTryStatement=function(e){return this.error(l.DiagnosticCode.Not_implemented,e.range),this.module.unreachable()},r.prototype.compileVariableStatement=function(e){for(var r=this.module,t=e.declarations,n=t.length,i=this.currentFlow,a=new Array,s=this.resolver,o=0;o<n;++o){var h=t[o],d=h.name.text,y=null,m=0,f=!1;if(h.type){if(!(y=s.resolveType(h.type,i.actualFunction,i.contextualTypeArguments)))continue;h.initializer&&(m=this.compileExpression(h.initializer,y,17),f=this.skippedAutoreleases.has(m))}else{if(!h.initializer){this.error(l.DiagnosticCode.Type_expected,h.name.range.atEnd);continue}if(m=this.compileExpression(h.initializer,T.Type.auto,16),f=this.skippedAutoreleases.has(m),this.currentType==T.Type.void){this.error(l.DiagnosticCode.Type_0_is_not_assignable_to_type_1,h.range,this.currentType.toString(),"<auto>");continue}y=this.currentType}var g=h.is(u.CommonFlags.CONST),E=!1;if(g)if(m){if(m=r.precomputeExpression(m),c.getExpressionId(m)==c.ExpressionId.Const){var v=new p.Local(d,-1,y,i.parentFunction);switch(c.getExpressionType(m)){case c.NativeType.I32:v.setConstantIntegerValue(i64_new(c.getConstValueI32(m),0),y);break;case c.NativeType.I64:v.setConstantIntegerValue(i64_new(c.getConstValueI64Low(m),c.getConstValueI64High(m)),y);break;case c.NativeType.F32:v.setConstantFloatValue(c.getConstValueF32(m),y);break;case c.NativeType.F64:v.setConstantFloatValue(c.getConstValueF64(m),y);break;default:return assert(!1),r.unreachable()}var b=i.scopedLocals;if(b){if(b.has(d)){var x=b.get(d);return this.errorRelated(l.DiagnosticCode.Duplicate_identifier_0,h.name.range,x.declaration.name.range,d),this.module.unreachable()}}else i.scopedLocals=b=new Map;b.set(d,v),E=!0}}else this.error(l.DiagnosticCode._const_declarations_must_be_initialized,h.range);if(!E){v=void 0;if(h.isAny(u.CommonFlags.LET|u.CommonFlags.CONST)||i.is(32768)){var A=i.getScopedLocal(d);A?(A.declaration.range.source.isNative?this.error(l.DiagnosticCode.Duplicate_identifier_0,h.name.range,d):this.errorRelated(l.DiagnosticCode.Duplicate_identifier_0,h.name.range,A.declaration.name.range,d),v=A):v=i.addScopedLocal(d,y),g&&i.setLocalFlag(v.index,_.LocalFlags.CONSTANT)}else{if(x=i.lookupLocal(d)){this.errorRelated(l.DiagnosticCode.Duplicate_identifier_0,h.name.range,x.declaration.name.range,d);continue}v=i.parentFunction.addLocal(y,d,h),g&&i.setLocalFlag(v.index,_.LocalFlags.CONSTANT)}var N=y.isManaged;m?(i.isNonnull(m,y)&&i.setLocalFlag(v.index,_.LocalFlags.NONNULL),N?(i.setLocalFlag(v.index,_.LocalFlags.RETAINED),a.push(r.local_set(v.index,f?m:this.makeRetain(m)))):(a.push(r.local_set(v.index,m)),v.type.is(36)&&(i.canOverflow(m,y)?i.unsetLocalFlag(v.index,_.LocalFlags.WRAPPED):i.setLocalFlag(v.index,_.LocalFlags.WRAPPED)))):N?(a.push(r.local_set(v.index,y.toNativeZero(r))),i.setLocalFlag(v.index,_.LocalFlags.CONDITIONALLY_RETAINED)):v.type.is(36)&&i.setLocalFlag(v.index,_.LocalFlags.WRAPPED)}}return 0==a.length?0:I(r,a,c.NativeType.None)},r.prototype.compileVoidStatement=function(e){return this.compileExpression(e.expression,T.Type.void,10)},r.prototype.compileWhileStatement=function(e){var r=this.module,t=this.currentFlow,n=r.precomputeExpression(this.makeIsTrueish(this.compileExpression(e.condition,T.Type.bool),this.currentType)),i=!1;if(c.getExpressionId(n)==c.ExpressionId.Const){if(assert(c.getExpressionType(n)==c.NativeType.I32),!c.getConstValueI32(n))return r.nop();i=!0}var a=t.pushBreakLabel(),s=t.fork();this.currentFlow=s;var o="break|"+a;s.breakLabel=o;var l="continue|"+a;s.continueLabel=l,s.inheritNonnullIfTrue(n);var u=new Array;e.statement.kind==y.NodeKind.BLOCK?this.compileStatements(e.statement.statements,!1,u):u.push(this.compileStatement(e.statement));var p=!s.is(256)&&!s.is(16);p&&(this.performAutoreleases(s,u),u.push(r.br(l))),i||u.unshift(r.br(o,r.unary(c.UnaryOp.EqzI32,n)));var _=I(r,u,c.NativeType.None);return(p||s.isAny(8224))&&(_=r.loop(l,_)),i&&!s.isAny(4112)||(_=r.block(o,[_])),s.freeScopedLocals(),t.popBreakLabel(),s.unset(12336),i?t.inherit(s):t.inheritConditional(s),this.currentFlow=t,_},r.prototype.compileInlineConstant=function(e,r,t){assert(e.is(u.CommonFlags.INLINED));var n=e.type;switch(!(3&t)&&n.is(4)&&r.is(4)&&n.size<r.size?(this.currentType=r).kind:(this.currentType=n).kind){case 0:case 1:var i=n.computeSmallIntegerShift(T.Type.i32);return this.module.i32(1==e.constantValueKind?i64_low(e.constantIntegerValue)<<i>>i:0);case 5:case 6:case 10:var a=e.type.computeSmallIntegerMask(T.Type.i32);return this.module.i32(1==e.constantValueKind?i64_low(e.constantIntegerValue)&a:0);case 2:case 7:return this.module.i32(1==e.constantValueKind?i64_low(e.constantIntegerValue):0);case 4:case 9:if(!e.program.options.isWasm64)return this.module.i32(1==e.constantValueKind?i64_low(e.constantIntegerValue):0);case 3:case 8:return 1==e.constantValueKind?this.module.i64(i64_low(e.constantIntegerValue),i64_high(e.constantIntegerValue)):this.module.i64(0);case 12:if(!e.hasDecorator(p.DecoratorFlags.BUILTIN)||r!=T.Type.f32)return this.module.f64(e.constantFloatValue);this.currentType=T.Type.f32;case 11:return this.module.f32(e.constantFloatValue);default:return assert(!1),this.module.unreachable()}},r.prototype.compileExpression=function(e,r,t){for(void 0===t&&(t=0);e.kind==y.NodeKind.PARENTHESIZED;)e=e.expression;var n;switch(this.currentType=r,r==T.Type.void&&(t|=8),e.kind){case y.NodeKind.ASSERTION:n=this.compileAssertionExpression(e,r,t);break;case y.NodeKind.BINARY:n=this.compileBinaryExpression(e,r,t);break;case y.NodeKind.CALL:n=this.compileCallExpression(e,r,t);break;case y.NodeKind.COMMA:n=this.compileCommaExpression(e,r,t);break;case y.NodeKind.ELEMENTACCESS:n=this.compileElementAccessExpression(e,r,t);break;case y.NodeKind.FUNCTION:n=this.compileFunctionExpression(e,r.signatureReference,t);break;case y.NodeKind.IDENTIFIER:case y.NodeKind.FALSE:case y.NodeKind.NULL:case y.NodeKind.THIS:case y.NodeKind.SUPER:case y.NodeKind.TRUE:n=this.compileIdentifierExpression(e,r,t);break;case y.NodeKind.INSTANCEOF:n=this.compileInstanceOfExpression(e,r,t);break;case y.NodeKind.LITERAL:n=this.compileLiteralExpression(e,r,t);break;case y.NodeKind.NEW:n=this.compileNewExpression(e,r,t);break;case y.NodeKind.PROPERTYACCESS:n=this.compilePropertyAccessExpression(e,r,t);break;case y.NodeKind.TERNARY:n=this.compileTernaryExpression(e,r,t);break;case y.NodeKind.UNARYPOSTFIX:n=this.compileUnaryPostfixExpression(e,r,t);break;case y.NodeKind.UNARYPREFIX:n=this.compileUnaryPrefixExpression(e,r,t);break;default:this.error(l.DiagnosticCode.Not_implemented,e.range),n=this.module.unreachable()}var i=this.currentType,a=0!=(4&t);return i!=r&&(2&t?(n=this.convertExpression(n,i,r,!0,a,e),a=!1,this.currentType=r):1&t&&(n=this.convertExpression(n,i,r,!1,a,e),a=!1,this.currentType=r)),a&&(n=this.ensureSmallIntegerWrap(n,i)),this.options.sourceMap&&this.addDebugLocation(n,e.range),n},r.prototype.precomputeExpression=function(e,r,t){return void 0===t&&(t=0),this.module.precomputeExpression(this.compileExpression(e,r,t))},r.prototype.convertExpression=function(e,r,t,n,i,a){var s=this.module;return 15==r.kind?(assert(15!=t.kind),this.error(l.DiagnosticCode.Type_0_is_not_assignable_to_type_1,a.range,r.toString(),t.toString()),s.unreachable()):15==t.kind?s.drop(e):(this.currentFlow.isNonnull(e,r)&&(r=r.nonNullableType),r.isAssignableTo(t)||n||(r.nonNullableType==t?this.error(l.DiagnosticCode.Object_is_possibly_null,a.range):this.error(l.DiagnosticCode.Conversion_from_type_0_to_1_requires_an_explicit_cast,a.range,r.toString(),t.toString())),r.is(8)?t.is(8)?11==r.kind?12==t.kind&&(e=s.unary(c.UnaryOp.PromoteF32,e)):11==t.kind&&(e=s.unary(c.UnaryOp.DemoteF64,e)):t.is(4)?11==r.kind?t==T.Type.bool?(e=s.binary(c.BinaryOp.NeF32,e,s.f32(0)),i=!1):e=t.is(1)?t.is(64)?s.unary(c.UnaryOp.TruncF32ToI64,e):s.unary(c.UnaryOp.TruncF32ToI32,e):t.is(64)?s.unary(c.UnaryOp.TruncF32ToU64,e):s.unary(c.UnaryOp.TruncF32ToU32,e):t==T.Type.bool?(e=s.binary(c.BinaryOp.NeF64,e,s.f64(0)),i=!1):e=t.is(1)?t.is(64)?s.unary(c.UnaryOp.TruncF64ToI64,e):s.unary(c.UnaryOp.TruncF64ToI32,e):t.is(64)?s.unary(c.UnaryOp.TruncF64ToU64,e):s.unary(c.UnaryOp.TruncF64ToU32,e):(assert(0==t.flags,"void type expected"),e=s.drop(e)):r.is(4)&&t.is(8)?e=11==t.kind?r.is(64)?s.unary(r.is(1)?c.UnaryOp.ConvertI64ToF32:c.UnaryOp.ConvertU64ToF32,e):s.unary(r.is(1)?c.UnaryOp.ConvertI32ToF32:c.UnaryOp.ConvertU32ToF32,e):r.is(64)?s.unary(r.is(1)?c.UnaryOp.ConvertI64ToF64:c.UnaryOp.ConvertU64ToF64,e):s.unary(r.is(1)?c.UnaryOp.ConvertI32ToF64:c.UnaryOp.ConvertU32ToF64,e):r.is(64)?t==T.Type.bool?(e=s.binary(c.BinaryOp.NeI64,e,s.i64(0)),i=!1):t.is(64)||(e=s.unary(c.UnaryOp.WrapI64,e)):t.is(64)?(e=s.unary(r.is(1)?c.UnaryOp.ExtendI32:c.UnaryOp.ExtendU32,this.ensureSmallIntegerWrap(e,r)),i=!1):r.is(32)&&r.size<t.size&&(e=this.ensureSmallIntegerWrap(e,r),i=!1),this.currentType=t,i?this.ensureSmallIntegerWrap(e,t):e)},r.prototype.compileAssertionExpression=function(e,r,t){var n=-4&t;switch(e.assertionKind){case y.AssertionKind.PREFIX:case y.AssertionKind.AS:var i=this.currentFlow,a=this.resolver.resolveType(assert(e.toType),i.actualFunction,i.contextualTypeArguments);return a?this.compileExpression(e.expression,a,2|n):this.module.unreachable();case y.AssertionKind.NONNULL:assert(!e.toType);var s=this.compileExpression(e.expression,r.exceptVoid,n),o=this.currentType;if(this.currentFlow.isNonnull(s,o))this.info(l.DiagnosticCode.Expression_is_never_null,e.expression.range);else if(!this.options.noAssert){var c=this.module,u=(i=this.currentFlow).getTempLocal(o);i.canOverflow(s,o)||i.setLocalFlag(u.index,_.LocalFlags.WRAPPED),i.setLocalFlag(u.index,_.LocalFlags.NONNULL),s=c.if(c.local_tee(u.index,s),c.local_get(u.index,o.toNativeType()),c.unreachable()),i.freeTempLocal(u)}return this.currentType=this.currentType.nonNullableType,s;default:assert(!1)}return this.module.unreachable()},r.prototype.compileBinaryExpression=function(e,r,t){var n,i,a,s,o,h,y=this.module,m=e.left,f=e.right,g=!1,E=e.operator;switch(E){case d.Token.LESSTHAN:if(n=this.compileExpression(m,r),i=this.currentType,this.currentType.is(256)){if(A=i.classReference)if(N=A.lookupOverload(p.OperatorKind.LT)){h=this.compileBinaryOverload(N,m,n,f,e);break}return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"<",i.toString()),this.module.unreachable()}if(a=this.compileExpression(f,i),s=this.currentType,!(o=T.Type.commonDenominator(i,s,!0)))return this.error(l.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,"<",i.toString(),s.toString()),this.currentType=r,y.unreachable();switch(n=this.convertExpression(n,i,i=o,!1,!0,m),a=this.convertExpression(a,s,s=o,!1,!0,f),o.kind){case 0:case 1:case 2:h=y.binary(c.BinaryOp.LtI32,n,a);break;case 3:h=y.binary(c.BinaryOp.LtI64,n,a);break;case 4:h=y.binary(this.options.isWasm64?c.BinaryOp.LtI64:c.BinaryOp.LtI32,n,a);break;case 5:case 6:case 7:case 10:h=y.binary(c.BinaryOp.LtU32,n,a);break;case 9:h=y.binary(this.options.isWasm64?c.BinaryOp.LtU64:c.BinaryOp.LtU32,n,a);break;case 8:h=y.binary(c.BinaryOp.LtU64,n,a);break;case 11:h=y.binary(c.BinaryOp.LtF32,n,a);break;case 12:h=y.binary(c.BinaryOp.LtF64,n,a);break;default:assert(!1),h=y.unreachable()}this.currentType=T.Type.bool;break;case d.Token.GREATERTHAN:if(n=this.compileExpression(m,r),i=this.currentType,this.currentType.is(256)){if(A=i.classReference)if(N=A.lookupOverload(p.OperatorKind.GT)){h=this.compileBinaryOverload(N,m,n,f,e);break}return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,">",i.toString()),this.module.unreachable()}if(a=this.compileExpression(f,i),s=this.currentType,!(o=T.Type.commonDenominator(i,s,!0)))return this.error(l.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,">",i.toString(),s.toString()),this.currentType=r,y.unreachable();switch(n=this.convertExpression(n,i,i=o,!1,!0,m),a=this.convertExpression(a,s,s=o,!1,!0,f),o.kind){case 0:case 1:case 2:h=y.binary(c.BinaryOp.GtI32,n,a);break;case 4:h=y.binary(this.options.isWasm64?c.BinaryOp.GtI64:c.BinaryOp.GtI32,n,a);break;case 3:h=y.binary(c.BinaryOp.GtI64,n,a);break;case 5:case 6:case 7:case 10:h=y.binary(c.BinaryOp.GtU32,n,a);break;case 9:h=y.binary(this.options.isWasm64?c.BinaryOp.GtU64:c.BinaryOp.GtU32,n,a);break;case 8:h=y.binary(c.BinaryOp.GtU64,n,a);break;case 11:h=y.binary(c.BinaryOp.GtF32,n,a);break;case 12:h=y.binary(c.BinaryOp.GtF64,n,a);break;default:assert(!1),h=y.unreachable()}this.currentType=T.Type.bool;break;case d.Token.LESSTHAN_EQUALS:if(n=this.compileExpression(m,r),i=this.currentType,this.currentType.is(256)){if(A=i.classReference)if(N=A.lookupOverload(p.OperatorKind.LE)){h=this.compileBinaryOverload(N,m,n,f,e);break}return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"<=",i.toString()),this.module.unreachable()}if(a=this.compileExpression(f,i),s=this.currentType,!(o=T.Type.commonDenominator(i,s,!0)))return this.error(l.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,"<=",i.toString(),s.toString()),this.currentType=r,y.unreachable();switch(n=this.convertExpression(n,i,i=o,!1,!0,m),a=this.convertExpression(a,s,s=o,!1,!0,f),o.kind){case 0:case 1:case 2:h=y.binary(c.BinaryOp.LeI32,n,a);break;case 4:h=y.binary(this.options.isWasm64?c.BinaryOp.LeI64:c.BinaryOp.LeI32,n,a);break;case 3:h=y.binary(c.BinaryOp.LeI64,n,a);break;case 5:case 6:case 7:case 10:h=y.binary(c.BinaryOp.LeU32,n,a);break;case 9:h=y.binary(this.options.isWasm64?c.BinaryOp.LeU64:c.BinaryOp.LeU32,n,a);break;case 8:h=y.binary(c.BinaryOp.LeU64,n,a);break;case 11:h=y.binary(c.BinaryOp.LeF32,n,a);break;case 12:h=y.binary(c.BinaryOp.LeF64,n,a);break;default:assert(!1),h=y.unreachable()}this.currentType=T.Type.bool;break;case d.Token.GREATERTHAN_EQUALS:if(n=this.compileExpression(m,r),i=this.currentType,this.currentType.is(256)){if(A=i.classReference)if(N=A.lookupOverload(p.OperatorKind.GE)){h=this.compileBinaryOverload(N,m,n,f,e);break}return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,">=",i.toString()),this.module.unreachable()}if(a=this.compileExpression(f,i),s=this.currentType,!(o=T.Type.commonDenominator(i,s,!0)))return this.error(l.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,">=",i.toString(),s.toString()),this.currentType=r,y.unreachable();switch(n=this.convertExpression(n,i,i=o,!1,!0,m),a=this.convertExpression(a,s,s=o,!1,!0,f),o.kind){case 0:case 1:case 2:h=y.binary(c.BinaryOp.GeI32,n,a);break;case 4:h=y.binary(this.options.isWasm64?c.BinaryOp.GeI64:c.BinaryOp.GeI32,n,a);break;case 3:h=y.binary(c.BinaryOp.GeI64,n,a);break;case 5:case 6:case 7:case 10:h=y.binary(c.BinaryOp.GeU32,n,a);break;case 9:h=y.binary(this.options.isWasm64?c.BinaryOp.GeU64:c.BinaryOp.GeU32,n,a);break;case 8:h=y.binary(c.BinaryOp.GeU64,n,a);break;case 11:h=y.binary(c.BinaryOp.GeF32,n,a);break;case 12:h=y.binary(c.BinaryOp.GeF64,n,a);break;default:assert(!1),h=y.unreachable()}this.currentType=T.Type.bool;break;case d.Token.EQUALS_EQUALS_EQUALS:case d.Token.EQUALS_EQUALS:if(n=this.compileExpression(m,r),i=this.currentType,E==d.Token.EQUALS_EQUALS&&this.currentType.is(256))if(A=i.classReference)if(N=A.lookupOverload(p.OperatorKind.EQ)){h=this.compileBinaryOverload(N,m,n,f,e);break}if(a=this.compileExpression(f,i),s=this.currentType,!(o=T.Type.commonDenominator(i,s,!1)))return this.error(l.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,d.operatorTokenToString(e.operator),i.toString(),s.toString()),this.currentType=r,y.unreachable();switch(n=this.convertExpression(n,i,i=o,!1,!0,m),a=this.convertExpression(a,s,s=o,!1,!0,f),o.kind){case 0:case 1:case 2:case 5:case 6:case 7:case 10:h=y.binary(c.BinaryOp.EqI32,n,a);break;case 9:case 4:h=y.binary(this.options.isWasm64?c.BinaryOp.EqI64:c.BinaryOp.EqI32,n,a);break;case 3:case 8:h=y.binary(c.BinaryOp.EqI64,n,a);break;case 11:h=y.binary(c.BinaryOp.EqF32,n,a);break;case 12:h=y.binary(c.BinaryOp.EqF64,n,a);break;case 13:h=y.unary(c.UnaryOp.AllTrueI8x16,y.binary(c.BinaryOp.EqI8x16,n,a));break;case 14:this.error(l.DiagnosticCode.Not_implemented,e.range),h=y.unreachable();break;default:assert(!1),h=y.unreachable()}this.currentType=T.Type.bool;break;case d.Token.EXCLAMATION_EQUALS_EQUALS:case d.Token.EXCLAMATION_EQUALS:if(n=this.compileExpression(m,r),i=this.currentType,E==d.Token.EXCLAMATION_EQUALS&&this.currentType.is(256))if(A=i.classReference)if(N=A.lookupOverload(p.OperatorKind.NE)){h=this.compileBinaryOverload(N,m,n,f,e);break}if(a=this.compileExpression(f,i),s=this.currentType,!(o=T.Type.commonDenominator(i,s,!1)))return this.error(l.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,d.operatorTokenToString(e.operator),i.toString(),s.toString()),this.currentType=r,y.unreachable();switch(n=this.convertExpression(n,i,i=o,!1,!0,m),a=this.convertExpression(a,s,s=o,!1,!0,f),o.kind){case 0:case 1:case 2:case 5:case 6:case 7:case 10:h=y.binary(c.BinaryOp.NeI32,n,a);break;case 9:case 4:h=y.binary(this.options.isWasm64?c.BinaryOp.NeI64:c.BinaryOp.NeI32,n,a);break;case 3:case 8:h=y.binary(c.BinaryOp.NeI64,n,a);break;case 11:h=y.binary(c.BinaryOp.NeF32,n,a);break;case 12:h=y.binary(c.BinaryOp.NeF64,n,a);break;case 13:h=y.unary(c.UnaryOp.AnyTrueI8x16,y.binary(c.BinaryOp.NeI8x16,n,a));break;case 14:this.error(l.DiagnosticCode.Not_implemented,e.range),h=y.unreachable();break;default:assert(!1),h=y.unreachable()}this.currentType=T.Type.bool;break;case d.Token.EQUALS:return this.compileAssignment(m,f,r);case d.Token.PLUS_EQUALS:g=!0;case d.Token.PLUS:if(n=this.compileExpression(m,r),i=this.currentType,this.currentType.is(256)){if(A=i.classReference)if(N=A.lookupOverload(p.OperatorKind.ADD)){h=this.compileBinaryOverload(N,m,n,f,e);break}return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"+",i.toString()),this.module.unreachable()}if(g)a=this.compileExpression(f,i,1);else{if(a=this.compileExpression(f,i),s=this.currentType,!(o=T.Type.commonDenominator(i,s,!1)))return this.error(l.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,"+",i.toString(),s.toString()),this.currentType=r,y.unreachable();n=this.convertExpression(n,i,i=o,!1,!1,m),a=this.convertExpression(a,s,s=o,!1,!1,f)}switch(this.currentType.kind){case 0:case 1:case 5:case 6:case 10:case 2:case 7:h=y.binary(c.BinaryOp.AddI32,n,a);break;case 9:case 4:h=y.binary(this.options.isWasm64?c.BinaryOp.AddI64:c.BinaryOp.AddI32,n,a);break;case 3:case 8:h=y.binary(c.BinaryOp.AddI64,n,a);break;case 11:h=y.binary(c.BinaryOp.AddF32,n,a);break;case 12:h=y.binary(c.BinaryOp.AddF64,n,a);break;default:assert(!1),h=y.unreachable()}break;case d.Token.MINUS_EQUALS:g=!0;case d.Token.MINUS:if(n=this.compileExpression(m,r),i=this.currentType,this.currentType.is(256)){if(A=i.classReference)if(N=A.lookupOverload(p.OperatorKind.SUB)){h=this.compileBinaryOverload(N,m,n,f,e);break}return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"-",i.toString()),this.module.unreachable()}if(g)a=this.compileExpression(f,i,1),s=this.currentType;else{if(a=this.compileExpression(f,i),s=this.currentType,!(o=T.Type.commonDenominator(i,s,!1)))return this.error(l.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,"-",i.toString(),s.toString()),this.currentType=r,y.unreachable();n=this.convertExpression(n,i,i=o,!1,!1,m),a=this.convertExpression(a,s,s=o,!1,!1,f)}switch(this.currentType.kind){case 0:case 1:case 5:case 6:case 10:case 2:case 7:h=y.binary(c.BinaryOp.SubI32,n,a);break;case 9:case 4:h=y.binary(this.options.isWasm64?c.BinaryOp.SubI64:c.BinaryOp.SubI32,n,a);break;case 3:case 8:h=y.binary(c.BinaryOp.SubI64,n,a);break;case 11:h=y.binary(c.BinaryOp.SubF32,n,a);break;case 12:h=y.binary(c.BinaryOp.SubF64,n,a);break;default:assert(!1),h=y.unreachable()}break;case d.Token.ASTERISK_EQUALS:g=!0;case d.Token.ASTERISK:if(n=this.compileExpression(m,r),i=this.currentType,this.currentType.is(256)){if(A=i.classReference)if(N=A.lookupOverload(p.OperatorKind.MUL)){h=this.compileBinaryOverload(N,m,n,f,e);break}return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"*",i.toString()),this.module.unreachable()}if(g)n=this.ensureSmallIntegerWrap(n,i),a=this.compileExpression(f,i,1);else{if(a=this.compileExpression(f,i),s=this.currentType,!(o=T.Type.commonDenominator(i,s,!1)))return this.error(l.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,"*",i.toString(),s.toString()),this.currentType=r,y.unreachable();n=this.convertExpression(n,i,i=o,!1,!1,m),a=this.convertExpression(a,s,s=o,!1,!1,f)}switch(this.currentType.kind){case 0:case 1:case 5:case 6:case 10:case 2:case 7:h=y.binary(c.BinaryOp.MulI32,n,a);break;case 9:case 4:h=y.binary(this.options.isWasm64?c.BinaryOp.MulI64:c.BinaryOp.MulI32,n,a);break;case 3:case 8:h=y.binary(c.BinaryOp.MulI64,n,a);break;case 11:h=y.binary(c.BinaryOp.MulF32,n,a);break;case 12:h=y.binary(c.BinaryOp.MulF64,n,a);break;default:assert(!1),h=y.unreachable()}break;case d.Token.ASTERISK_ASTERISK_EQUALS:g=!0;case d.Token.ASTERISK_ASTERISK:if(n=this.compileExpression(m,r),i=this.currentType,this.currentType.is(256)){if(A=i.classReference)if(N=A.lookupOverload(p.OperatorKind.POW)){h=this.compileBinaryOverload(N,m,n,f,e);break}return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"**",i.toString()),this.module.unreachable()}var v=i,b=void 0;if(11==this.currentType.kind){if(a=this.compileExpression(f,T.Type.f32,1),s=this.currentType,!(b=this.f32PowInstance)){if(!(I=this.program.lookupGlobal(u.CommonSymbols.Mathf))){this.error(l.DiagnosticCode.Cannot_find_name_0,e.range,"Mathf"),h=y.unreachable();break}if(!(x=I.members?I.members.get(u.CommonSymbols.pow):null)){this.error(l.DiagnosticCode.Cannot_find_name_0,e.range,"Mathf.pow"),h=y.unreachable();break}assert(x.kind==p.ElementKind.FUNCTION_PROTOTYPE),this.f32PowInstance=b=this.resolver.resolveFunction(x,null)}}else if(n=this.convertExpression(n,this.currentType,T.Type.f64,!1,!1,m),i=this.currentType,a=this.compileExpression(f,T.Type.f64,1),s=this.currentType,!(b=this.f64PowInstance)){if(!(I=this.program.lookupGlobal(u.CommonSymbols.Math))){this.error(l.DiagnosticCode.Cannot_find_name_0,e.range,"Math"),h=y.unreachable();break}if(!(x=I.members?I.members.get(u.CommonSymbols.pow):null)){this.error(l.DiagnosticCode.Cannot_find_name_0,e.range,"Math.pow"),h=y.unreachable();break}assert(x.kind==p.ElementKind.FUNCTION_PROTOTYPE),this.f64PowInstance=b=this.resolver.resolveFunction(x,null)}b&&this.compileFunction(b)?(h=this.makeCallDirect(b,[n,a],e),g&&v!=this.currentType&&(h=this.convertExpression(h,this.currentType,v,!1,!1,e))):h=y.unreachable();break;case d.Token.SLASH_EQUALS:g=!0;case d.Token.SLASH:if(n=this.compileExpression(m,r),i=this.currentType,this.currentType.is(256)){if(A=i.classReference)if(N=A.lookupOverload(p.OperatorKind.DIV)){h=this.compileBinaryOverload(N,m,n,f,e);break}return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"/",i.toString()),this.module.unreachable()}if(g)n=this.ensureSmallIntegerWrap(n,i),a=this.compileExpression(f,i,1),s=this.currentType;else{if(a=this.compileExpression(f,i),s=this.currentType,!(o=T.Type.commonDenominator(i,s,!1)))return this.error(l.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,"/",i.toString(),s.toString()),this.currentType=r,y.unreachable();n=this.convertExpression(n,i,i=o,!1,!0,m),a=this.convertExpression(a,s,s=o,!1,!0,f)}switch(this.currentType.kind){case 0:case 1:case 2:h=y.binary(c.BinaryOp.DivI32,n,a);break;case 4:h=y.binary(this.options.isWasm64?c.BinaryOp.DivI64:c.BinaryOp.DivI32,n,a);break;case 3:h=y.binary(c.BinaryOp.DivI64,n,a);break;case 5:case 6:case 10:case 7:h=y.binary(c.BinaryOp.DivU32,n,a);break;case 9:h=y.binary(this.options.isWasm64?c.BinaryOp.DivU64:c.BinaryOp.DivU32,n,a);break;case 8:h=y.binary(c.BinaryOp.DivU64,n,a);break;case 11:h=y.binary(c.BinaryOp.DivF32,n,a);break;case 12:h=y.binary(c.BinaryOp.DivF64,n,a);break;default:assert(!1),h=y.unreachable()}break;case d.Token.PERCENT_EQUALS:g=!0;case d.Token.PERCENT:if(n=this.compileExpression(m,r),i=this.currentType,this.currentType.is(256)){if(A=i.classReference)if(N=A.lookupOverload(p.OperatorKind.REM)){h=this.compileBinaryOverload(N,m,n,f,e);break}return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"%",i.toString()),this.module.unreachable()}if(g)n=this.ensureSmallIntegerWrap(n,i),a=this.compileExpression(f,i,1),s=this.currentType;else{if(a=this.compileExpression(f,i),s=this.currentType,!(o=T.Type.commonDenominator(i,s,!1)))return this.error(l.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,"%",i.toString(),s.toString()),this.currentType=r,y.unreachable();n=this.convertExpression(n,i,i=o,!1,!0,m),a=this.convertExpression(a,s,s=o,!1,!0,f)}switch(this.currentType.kind){case 0:case 1:case 2:h=y.binary(c.BinaryOp.RemI32,n,a);break;case 4:h=y.binary(this.options.isWasm64?c.BinaryOp.RemI64:c.BinaryOp.RemI32,n,a);break;case 3:h=y.binary(c.BinaryOp.RemI64,n,a);break;case 5:case 6:case 10:case 7:h=y.binary(c.BinaryOp.RemU32,n,a);break;case 9:h=y.binary(this.options.isWasm64?c.BinaryOp.RemU64:c.BinaryOp.RemU32,n,a);break;case 8:h=y.binary(c.BinaryOp.RemU64,n,a);break;case 11:if(!(b=this.f32ModInstance)){if(!(I=this.program.lookupGlobal(u.CommonSymbols.Mathf))){this.error(l.DiagnosticCode.Cannot_find_name_0,e.range,"Mathf"),h=y.unreachable();break}if(!(x=I.members?I.members.get(u.CommonSymbols.mod):null)){this.error(l.DiagnosticCode.Cannot_find_name_0,e.range,"Mathf.mod"),h=y.unreachable();break}assert(x.kind==p.ElementKind.FUNCTION_PROTOTYPE),this.f32ModInstance=b=this.resolver.resolveFunction(x,null)}h=b&&this.compileFunction(b)?this.makeCallDirect(b,[n,a],e):y.unreachable();break;case 12:if(!(b=this.f64ModInstance)){var I,x;if(!(I=this.program.lookupGlobal(u.CommonSymbols.Math))){this.error(l.DiagnosticCode.Cannot_find_name_0,e.range,"Math"),h=y.unreachable();break}if(!(x=I.members?I.members.get(u.CommonSymbols.mod):null)){this.error(l.DiagnosticCode.Cannot_find_name_0,e.range,"Math.mod"),h=y.unreachable();break}assert(x.kind==p.ElementKind.FUNCTION_PROTOTYPE),this.f64ModInstance=b=this.resolver.resolveFunction(x,null)}h=b&&this.compileFunction(b)?this.makeCallDirect(b,[n,a],e):y.unreachable();break;default:assert(!1),h=y.unreachable()}break;case d.Token.LESSTHAN_LESSTHAN_EQUALS:g=!0;case d.Token.LESSTHAN_LESSTHAN:if(n=this.compileExpression(m,r.intType),i=this.currentType,this.currentType.is(256)){if(A=i.classReference)if(N=A.lookupOverload(p.OperatorKind.BITWISE_SHL)){h=this.compileBinaryOverload(N,m,n,f,e);break}return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"<<",i.toString()),this.module.unreachable()}switch(a=this.compileExpression(f,i,1),s=this.currentType,this.currentType.kind){case 0:case 1:case 5:case 6:case 10:case 2:case 7:h=y.binary(c.BinaryOp.ShlI32,n,a);break;case 3:case 8:h=y.binary(c.BinaryOp.ShlI64,n,a);break;case 9:case 4:h=y.binary(this.options.isWasm64?c.BinaryOp.ShlI64:c.BinaryOp.ShlI32,n,a);break;case 11:case 12:return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"<<",this.currentType.toString()),y.unreachable();default:assert(!1),h=y.unreachable()}break;case d.Token.GREATERTHAN_GREATERTHAN_EQUALS:g=!0;case d.Token.GREATERTHAN_GREATERTHAN:if(n=this.compileExpression(m,r.intType),i=this.currentType,this.currentType.is(256)){if(A=i.classReference)if(N=A.lookupOverload(p.OperatorKind.BITWISE_SHR)){h=this.compileBinaryOverload(N,m,n,f,e);break}return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,">>",i.toString()),this.module.unreachable()}switch(n=this.ensureSmallIntegerWrap(n,i),a=this.compileExpression(f,i,1),s=this.currentType,this.currentType.kind){case 0:case 1:case 2:h=y.binary(c.BinaryOp.ShrI32,n,a);break;case 3:h=y.binary(c.BinaryOp.ShrI64,n,a);break;case 4:h=y.binary(this.options.isWasm64?c.BinaryOp.ShrI64:c.BinaryOp.ShrI32,n,a);break;case 5:case 6:case 10:case 7:h=y.binary(c.BinaryOp.ShrU32,n,a);break;case 8:h=y.binary(c.BinaryOp.ShrU64,n,a);break;case 9:h=y.binary(this.options.isWasm64?c.BinaryOp.ShrU64:c.BinaryOp.ShrU32,n,a);break;case 11:case 12:return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,">>",this.currentType.toString()),y.unreachable();default:assert(!1),h=y.unreachable()}break;case d.Token.GREATERTHAN_GREATERTHAN_GREATERTHAN_EQUALS:g=!0;case d.Token.GREATERTHAN_GREATERTHAN_GREATERTHAN:if(n=this.compileExpression(m,r.intType),i=this.currentType,this.currentType.is(256)){if(A=i.classReference)if(N=A.lookupOverload(p.OperatorKind.BITWISE_SHR_U)){h=this.compileBinaryOverload(N,m,n,f,e);break}return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,">>>",i.toString()),this.module.unreachable()}switch(n=this.ensureSmallIntegerWrap(n,i),a=this.compileExpression(f,i,1),s=this.currentType,this.currentType.kind){case 5:case 6:case 10:h=y.binary(c.BinaryOp.ShrU32,n,a);case 0:case 1:case 2:case 7:h=y.binary(c.BinaryOp.ShrU32,n,a);break;case 3:case 8:h=y.binary(c.BinaryOp.ShrU64,n,a);break;case 9:case 4:h=y.binary(this.options.isWasm64?c.BinaryOp.ShrU64:c.BinaryOp.ShrU32,n,a);break;case 11:case 12:return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,">>>",this.currentType.toString()),y.unreachable();default:assert(!1),h=y.unreachable()}break;case d.Token.AMPERSAND_EQUALS:g=!0;case d.Token.AMPERSAND:if(n=this.compileExpression(m,r.intType),i=this.currentType,this.currentType.is(256)){if(A=i.classReference)if(N=A.lookupOverload(p.OperatorKind.BITWISE_AND)){h=this.compileBinaryOverload(N,m,n,f,e);break}return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"&",i.toString()),this.module.unreachable()}if(g)a=this.compileExpression(f,i,1),s=this.currentType;else{if(a=this.compileExpression(f,i),s=this.currentType,!(o=T.Type.commonDenominator(i,s,!1)))return this.error(l.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,"&",i.toString(),s.toString()),this.currentType=r,y.unreachable();n=this.convertExpression(n,i,i=o,!1,!1,m),a=this.convertExpression(a,s,s=o,!1,!1,f)}switch(this.currentType.kind){case 0:case 1:case 2:case 5:case 6:case 10:case 7:h=y.binary(c.BinaryOp.AndI32,n,a);break;case 3:case 8:h=y.binary(c.BinaryOp.AndI64,n,a);break;case 9:case 4:h=y.binary(this.options.isWasm64?c.BinaryOp.AndI64:c.BinaryOp.AndI32,n,a);break;case 11:case 12:return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"&",this.currentType.toString()),y.unreachable();default:assert(!1),h=y.unreachable()}break;case d.Token.BAR_EQUALS:g=!0;case d.Token.BAR:if(n=this.compileExpression(m,r.intType),i=this.currentType,this.currentType.is(256)){if(A=i.classReference)if(N=A.lookupOverload(p.OperatorKind.BITWISE_OR)){h=this.compileBinaryOverload(N,m,n,f,e);break}return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"|",i.toString()),this.module.unreachable()}if(g)a=this.compileExpression(f,i,1),s=this.currentType;else{if(a=this.compileExpression(f,i),s=this.currentType,!(o=T.Type.commonDenominator(i,s,!1)))return this.error(l.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,"|",i.toString(),s.toString()),this.currentType=r,y.unreachable();n=this.convertExpression(n,i,i=o,!1,!1,m),a=this.convertExpression(a,s,s=o,!1,!1,f)}switch(this.currentType.kind){case 0:case 1:case 5:case 6:case 10:h=y.binary(c.BinaryOp.OrI32,n,a);break;case 2:case 7:h=y.binary(c.BinaryOp.OrI32,n,a);break;case 3:case 8:h=y.binary(c.BinaryOp.OrI64,n,a);break;case 9:case 4:h=y.binary(this.options.isWasm64?c.BinaryOp.OrI64:c.BinaryOp.OrI32,n,a);break;case 11:case 12:return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"|",this.currentType.toString()),y.unreachable();default:assert(!1),h=y.unreachable()}break;case d.Token.CARET_EQUALS:g=!0;case d.Token.CARET:if(n=this.compileExpression(m,r.intType),i=this.currentType,this.currentType.is(256)){var A,N;if(A=i.classReference)if(N=A.lookupOverload(p.OperatorKind.BITWISE_XOR)){h=this.compileBinaryOverload(N,m,n,f,e);break}return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"^",i.toString()),this.module.unreachable()}if(g)a=this.compileExpression(f,i,1),s=this.currentType;else{if(a=this.compileExpression(f,i),s=this.currentType,!(o=T.Type.commonDenominator(i,s,!1)))return this.error(l.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,"^",i.toString(),s.toString()),this.currentType=r,y.unreachable();n=this.convertExpression(n,i,i=o,!1,!1,m),a=this.convertExpression(a,s,s=o,!1,!1,f)}switch(this.currentType.kind){case 0:case 1:case 5:case 6:case 10:h=y.binary(c.BinaryOp.XorI32,n,a);break;case 2:case 7:h=y.binary(c.BinaryOp.XorI32,n,a);break;case 3:case 8:h=y.binary(c.BinaryOp.XorI64,n,a);break;case 9:case 4:h=y.binary(this.options.isWasm64?c.BinaryOp.XorI64:c.BinaryOp.XorI32,n,a);break;case 11:case 12:return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"^",this.currentType.toString()),y.unreachable();default:assert(!1),h=y.unreachable()}break;case d.Token.AMPERSAND_AMPERSAND:var S=this.currentFlow,O=20&t;n=this.compileExpression(m,r.exceptVoid,O),i=this.currentType;var C=S.fork();if(this.currentFlow=C,C.inheritNonnullIfTrue(n),a=this.compileExpression(f,i,1|O),s=i,r==T.Type.bool||r==T.Type.void)a=this.performAutoreleasesWithValue(C,a,s),C.freeScopedLocals(),this.currentFlow=S,this.currentType=T.Type.bool,h=y.if(this.makeIsTrueish(n,i),this.makeIsTrueish(a,s),y.i32(0));else if(i.isManaged){var R=this.skippedAutoreleases.has(n),L=this.skippedAutoreleases.has(a),k=S.getTempLocal(i);n=y.local_tee(k.index,n);var F=!1;R!=L?R?(a=this.makeRetain(a),L=!0):F=!0:16&t||(a=this.moveAutorelease(a,C,S));var D=new Array;R&&D.unshift(this.makeRelease(y.local_get(k.index,i.toNativeType()))),a=this.performAutoreleasesWithValue(C,a,s,D),C.freeScopedLocals(),this.currentFlow=S,h=y.if(this.makeIsTrueish(n,i),a,F?this.makeRetain(y.local_get(k.index,i.toNativeType())):y.local_get(k.index,i.toNativeType())),(R||L)&&this.skippedAutoreleases.add(h),k&&S.freeTempLocal(k)}else if(a=this.performAutoreleasesWithValue(C,a,s),C.freeScopedLocals(),this.currentFlow=S,h=y.cloneExpression(n,!0,0))h=y.if(this.makeIsTrueish(n,this.currentType),a,h);else{var B=S.getTempLocal(i);S.canOverflow(n,i)||S.setLocalFlag(B.index,_.LocalFlags.WRAPPED),S.isNonnull(n,i)&&S.setLocalFlag(B.index,_.LocalFlags.NONNULL),h=y.if(this.makeIsTrueish(y.local_tee(B.index,n),i),a,y.local_get(B.index,i.toNativeType())),S.freeTempLocal(B)}this.currentType=i;break;case d.Token.BAR_BAR:S=this.currentFlow,O=20&t;n=this.compileExpression(m,r.exceptVoid,O),i=this.currentType;C=S.fork();if(this.currentFlow=C,C.inheritNonnullIfFalse(n),a=this.compileExpression(f,i,1|O),s=i,r==T.Type.bool||r==T.Type.void)a=this.performAutoreleasesWithValue(C,a,i),C.freeScopedLocals(),this.currentFlow=S,this.currentType=T.Type.bool,h=y.if(this.makeIsTrueish(n,i),y.i32(1),this.makeIsTrueish(a,s));else if(i.isManaged){R=this.skippedAutoreleases.has(n),L=this.skippedAutoreleases.has(a),k=S.getTempLocal(i);n=y.local_tee(k.index,n);var P=!1;R!=L?R?(a=this.makeRetain(a),L=!0):P=!0:16&t||(a=this.moveAutorelease(a,C,S));D=new Array;R&&D.unshift(this.makeRelease(y.local_get(k.index,i.toNativeType()))),a=this.performAutoreleasesWithValue(C,a,s,D),C.freeScopedLocals(),this.currentFlow=S,h=y.if(this.makeIsTrueish(n,i),P?this.makeRetain(y.local_get(k.index,i.toNativeType())):y.local_get(k.index,i.toNativeType()),a),(R||L)&&this.skippedAutoreleases.add(h),k&&S.freeTempLocal(k)}else if(a=this.performAutoreleasesWithValue(C,a,s),C.freeScopedLocals(),this.currentFlow=S,h=y.cloneExpression(n,!0,0))h=y.if(this.makeIsTrueish(n,i),h,a);else{k=S.getTempLocal(i);S.canOverflow(n,i)||S.setLocalFlag(k.index,_.LocalFlags.WRAPPED),S.isNonnull(n,i)&&S.setLocalFlag(k.index,_.LocalFlags.NONNULL),h=y.if(this.makeIsTrueish(y.local_tee(k.index,n),i),y.local_get(k.index,i.toNativeType()),a),S.freeTempLocal(k)}this.currentType=i;break;default:assert(!1),h=this.module.unreachable()}if(!g)return h;var w=this.resolver,U=w.lookupExpression(m,this.currentFlow);if(!U)return y.unreachable();var M=w.getTypeOfElement(U)||T.Type.void;return this.currentType.isStrictlyAssignableTo(M)?this.makeAssignment(U,h,m,w.currentThisExpression,w.currentElementExpression,r!=T.Type.void):(this.error(l.DiagnosticCode.Type_0_is_not_assignable_to_type_1,e.range,this.currentType.toString(),M.toString()),y.unreachable())},r.prototype.compileUnaryOverload=function(e,r,t,n){return this.makeCallDirect(e,[t],n,!1)},r.prototype.compileBinaryOverload=function(e,r,t,n,i){var a;if(e.is(u.CommonFlags.INSTANCE)){var s=assert(e.parent);assert(s.kind==p.ElementKind.CLASS),a=e.signature.parameterTypes[0]}else a=e.signature.parameterTypes[1];var o=this.compileExpression(n,a,1);return this.makeCallDirect(e,[t,o],i)},r.prototype.compileAssignment=function(e,r,t){var n=this.program.resolver,i=this.currentFlow,a=n.lookupExpression(e,i);if(!a)return this.module.unreachable();var s,o=n.currentThisExpression,c=n.currentElementExpression;switch(a.kind){case p.ElementKind.GLOBAL:if(!this.compileGlobal(a))return this.module.unreachable();case p.ElementKind.LOCAL:case p.ElementKind.FIELD:s=a.type,a.hasDecorator(p.DecoratorFlags.UNSAFE)&&this.checkUnsafe(e);break;case p.ElementKind.PROPERTY_PROTOTYPE:var u=a.setterPrototype;if(!u)return this.error(l.DiagnosticCode.Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property,e.range,a.internalName),this.module.unreachable();if(!(_=this.resolver.resolveFunction(u,null,m.makeMap(),h.ReportMode.REPORT)))return this.module.unreachable();assert(1==_.signature.parameterTypes.length),s=_.signature.parameterTypes[0],u.hasDecorator(p.DecoratorFlags.UNSAFE)&&this.checkUnsafe(e);break;case p.ElementKind.PROPERTY:var _;if(!(_=a.setterInstance))return this.error(l.DiagnosticCode.Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property,e.range,a.internalName),this.module.unreachable();assert(1==_.signature.parameterTypes.length),s=_.signature.parameterTypes[0],_.hasDecorator(p.DecoratorFlags.UNSAFE)&&this.checkUnsafe(e);break;case p.ElementKind.INDEXSIGNATURE:var d=a.parent;assert(d.kind==p.ElementKind.CLASS);var y=i.is(65536),f=d.lookupOverload(p.OperatorKind.INDEXED_SET,y);if(!f)return d.lookupOverload(p.OperatorKind.INDEXED_GET,y)?this.error(l.DiagnosticCode.Index_signature_in_type_0_only_permits_reading,e.range,d.internalName):this.error(l.DiagnosticCode.Index_signature_is_missing_in_type_0,e.range,d.internalName),this.module.unreachable();assert(2==f.signature.parameterTypes.length),s=f.signature.parameterTypes[1],f.hasDecorator(p.DecoratorFlags.UNSAFE)&&this.checkUnsafe(e);break;default:return this.error(l.DiagnosticCode.Not_implemented,e.range),this.module.unreachable()}return assert(s!=T.Type.void),this.makeAssignment(a,this.compileExpression(r,s,17),e,o,c,t!=T.Type.void)},r.prototype.makeAssignment=function(e,r,t,n,i,a){var s=this.module,o=this.currentFlow;switch(e.kind){case p.ElementKind.LOCAL:return o.isLocalFlag(e.index,_.LocalFlags.CONSTANT,!0)?(this.error(l.DiagnosticCode.Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property,t.range,e.internalName),this.currentType=a?e.type:T.Type.void,s.unreachable()):this.makeLocalAssignment(e,r,a);case p.ElementKind.GLOBAL:return this.compileGlobal(e)?e.isAny(u.CommonFlags.CONST|u.CommonFlags.READONLY)?(this.error(l.DiagnosticCode.Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property,t.range,e.internalName),this.currentType=a?e.type:T.Type.void,s.unreachable()):this.makeGlobalAssignment(e,r,a):s.unreachable();case p.ElementKind.FIELD:var c=e.initializerNode;return!e.is(u.CommonFlags.READONLY)||o.actualFunction.is(u.CommonFlags.CONSTRUCTOR)||c?this.makeFieldAssignment(e,r,this.compileExpression(assert(n),this.options.usizeType),a):(this.error(l.DiagnosticCode.Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property,t.range,e.internalName),s.unreachable());case p.ElementKind.PROPERTY_PROTOTYPE:this.skippedAutoreleases.has(r)&&(r=this.makeAutorelease(r,o));var d=e.setterPrototype;if(!d)return this.error(l.DiagnosticCode.Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property,t.range,e.internalName),s.unreachable();if(!(g=this.resolver.resolveFunction(d,null,m.makeMap(),h.ReportMode.REPORT)))return s.unreachable();if(!a)return this.makeCallDirect(g,[r],t);var y=assert(e.getterPrototype);if(!(v=this.resolver.resolveFunction(y,null,m.makeMap(),h.ReportMode.REPORT)))return s.unreachable();var f=(F=v.signature.returnType).toNativeType();return s.block(null,[this.makeCallDirect(g,[r],t),this.makeCallDirect(v,null,t)],f);case p.ElementKind.PROPERTY:var g;if(this.skippedAutoreleases.has(r)&&(r=this.makeAutorelease(r,o)),!(g=e.setterInstance))return this.error(l.DiagnosticCode.Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property,t.range,e.internalName),s.unreachable();if(!a){var E=this.compileExpression(assert(n),this.options.usizeType);return this.makeCallDirect(g,[E,r],t)}f=(F=(v=assert(e.getterInstance)).signature.returnType).toNativeType();var v,b=this.compileExpression(assert(n),this.options.usizeType),I=o.getTempLocal(F),x=s.block(null,[this.makeCallDirect(g,[s.local_tee(I.index,b),r],t),this.makeCallDirect(v,[s.local_get(I.index,f)],t)],f);return o.freeTempLocal(I),x;case p.ElementKind.INDEXSIGNATURE:this.skippedAutoreleases.has(r)&&(r=this.makeAutorelease(r,o));var A=o.is(65536),N=e.parent;assert(N.kind==p.ElementKind.CLASS);var S=N.lookupOverload(p.OperatorKind.INDEXED_GET,A);if(!S)return this.error(l.DiagnosticCode.Index_signature_is_missing_in_type_0,t.range,N.internalName),s.unreachable();var O=N.lookupOverload(p.OperatorKind.INDEXED_SET,A);if(!O)return this.error(l.DiagnosticCode.Index_signature_in_type_0_only_permits_reading,t.range,N.internalName),this.currentType=a?S.signature.returnType:T.Type.void,s.unreachable();var C=N.type,R=(b=this.compileExpression(assert(n),this.options.usizeType),this.compileExpression(assert(i),T.Type.i32,1));if(a){var L=o.getTempLocal(C),k=o.getTempLocal(this.currentType),F=S.signature.returnType;o.freeTempLocal(L);x=s.block(null,[this.makeCallDirect(O,[s.local_tee(L.index,b),s.local_tee(k.index,R),r],t),this.makeCallDirect(S,[s.local_get(L.index,L.type.toNativeType()),s.local_get(k.index,k.type.toNativeType())],t)],F.toNativeType());return o.freeTempLocal(k),o.freeTempLocal(L),x}return this.makeCallDirect(O,[b,R,r],t)}return this.error(l.DiagnosticCode.Not_implemented,t.range),s.unreachable()},r.prototype.makeLocalAssignment=function(e,r,t){var n=e.type;assert(n!=T.Type.void);var i=this.currentFlow,a=e.index;if(n.is(512)&&(i.isNonnull(r,n)?i.setLocalFlag(a,_.LocalFlags.NONNULL):i.unsetLocalFlag(a,_.LocalFlags.NONNULL)),i.setLocalFlag(a,_.LocalFlags.WRITTENTO),n.isManaged){var s=this.module,o=n.toNativeType();return i.isAnyLocalFlag(a,_.LocalFlags.ANY_RETAINED)?this.skippedAutoreleases.has(r)?(r=this.makeSkippedRelease(s.local_get(a,o),r),t?(this.currentType=n,s.local_tee(a,r)):(this.currentType=T.Type.void,s.local_set(a,r))):(r=this.makeRetainRelease(s.local_get(a,o),r),t?(this.currentType=n,s.local_tee(a,r)):(this.currentType=T.Type.void,s.local_set(a,r))):(i.unsetLocalFlag(a,_.LocalFlags.CONDITIONALLY_RETAINED),i.setLocalFlag(a,_.LocalFlags.RETAINED),this.skippedAutoreleases.has(r)||(r=this.makeRetain(r)),t?(this.currentType=n,s.local_tee(a,r)):(this.currentType=T.Type.void,s.local_set(a,r)))}return n.is(36)&&(i.canOverflow(r,n)?i.unsetLocalFlag(a,_.LocalFlags.WRAPPED):i.setLocalFlag(a,_.LocalFlags.WRAPPED)),t?(this.currentType=n,this.module.local_tee(a,r)):(this.currentType=T.Type.void,this.module.local_set(a,r))},r.prototype.makeGlobalAssignment=function(e,r,t){var n=this.module,i=e.type;assert(i!=T.Type.void);var a=i.toNativeType();return i.isManaged?this.skippedAutoreleases.has(r)?t?(this.currentType=i,n.block(null,[n.global_set(e.internalName,this.makeSkippedRelease(n.global_get(e.internalName,a),r)),n.global_get(e.internalName,a)],a)):(this.currentType=T.Type.void,n.global_set(e.internalName,this.makeSkippedRelease(n.global_get(e.internalName,a),r))):t?(this.currentType=i,n.block(null,[n.global_set(e.internalName,this.makeRetainRelease(n.global_get(e.internalName,a),r)),n.global_get(e.internalName,a)],a)):(this.currentType=T.Type.void,n.global_set(e.internalName,this.makeRetainRelease(n.global_get(e.internalName,a),r))):(r=this.ensureSmallIntegerWrap(r,i),t?(this.currentType=i,n.block(null,[n.global_set(e.internalName,r),n.global_get(e.internalName,a)],a)):(this.currentType=T.Type.void,n.global_set(e.internalName,r)))},r.prototype.makeFieldAssignment=function(e,r,t,n){var i=this.module,a=this.currentFlow,s=e.type,o=s.toNativeType();assert(e.parent.kind==p.ElementKind.CLASS);var l=e.parent.type,c=l.toNativeType();if(s.isManaged&&l.isManaged){var u=a.getTempLocal(l);if(this.skippedAutoreleases.has(r)){if(n){var h=a.getTempLocal(s);a.canOverflow(r,s)||a.setLocalFlag(h.index,_.LocalFlags.WRAPPED),a.isNonnull(r,s)&&a.setLocalFlag(h.index,_.LocalFlags.NONNULL);var d=i.block(null,[i.store(s.byteSize,i.local_tee(u.index,t),this.makeSkippedRelease(i.load(s.byteSize,s.is(1),i.local_get(u.index,c),o,e.memoryOffset),i.local_tee(h.index,r)),o,e.memoryOffset),i.local_get(h.index,o)],o);return a.freeTempLocal(h),a.freeTempLocal(u),this.currentType=s,d}return a.freeTempLocal(u),this.currentType=T.Type.void,i.store(s.byteSize,i.local_tee(u.index,t),this.makeSkippedRelease(i.load(s.byteSize,s.is(1),i.local_get(u.index,c),o,e.memoryOffset),r),o,e.memoryOffset)}if(n){h=a.getTempLocal(s);a.canOverflow(r,s)||a.setLocalFlag(h.index,_.LocalFlags.WRAPPED),a.isNonnull(r,s)&&a.setLocalFlag(h.index,_.LocalFlags.NONNULL);d=i.block(null,[i.store(s.byteSize,i.local_tee(u.index,t),this.makeRetainRelease(i.load(s.byteSize,s.is(1),i.local_get(u.index,c),o,e.memoryOffset),i.local_tee(h.index,r)),o,e.memoryOffset),i.local_get(h.index,o)],o);return a.freeTempLocal(h),a.freeTempLocal(u),this.currentType=s,d}return a.freeTempLocal(u),this.currentType=T.Type.void,i.store(s.byteSize,i.local_tee(u.index,t),this.makeRetainRelease(i.load(s.byteSize,s.is(1),i.local_get(u.index,c),o,e.memoryOffset),r),o,e.memoryOffset)}if(n){h=a.getTempLocal(s);a.canOverflow(r,s)||a.setLocalFlag(h.index,_.LocalFlags.WRAPPED),a.isNonnull(r,s)&&a.setLocalFlag(h.index,_.LocalFlags.NONNULL);d=i.block(null,[i.store(s.byteSize,t,i.local_tee(h.index,r),o,e.memoryOffset),i.local_get(h.index,o)],o);return a.freeTempLocal(h),this.currentType=s,d}return this.currentType=T.Type.void,i.store(s.byteSize,t,r,o,e.memoryOffset)},r.prototype.compileCallExpression=function(e,r,t){var n=this.module,i=this.currentFlow;if(e.expression.kind==y.NodeKind.SUPER){var a=this.currentFlow,s=a.actualFunction;if(!s.is(u.CommonFlags.CONSTRUCTOR))return this.error(l.DiagnosticCode.Super_calls_are_not_permitted_outside_constructors_or_in_nested_functions_inside_constructors,e.range),n.unreachable();var o=assert(s.parent);assert(o.kind==p.ElementKind.CLASS);var _=assert(o.base),h=assert(a.lookupLocal(u.CommonSymbols.this_)),d=this.options.nativeSizeType,m=this.compileCallDirect(this.ensureConstructor(_,e),e.arguments,e,n.if(n.local_get(h.index,d),n.local_get(h.index,d),this.makeRetain(this.makeAllocation(o))),16);assert(this.skippedAutoreleases.has(m));var f=[n.local_set(h.index,m)];return this.makeFieldInitialization(o,f),a.isAny(16448)?(this.error(l.DiagnosticCode._super_must_be_called_before_accessing_this_in_the_constructor_of_a_derived_class,e.range),n.unreachable()):(a.set(192),this.currentType=T.Type.void,n.block(null,f))}var g,E,v=this.resolver.lookupExpression(e.expression,i);if(!v)return n.unreachable();switch(v.kind){case p.ElementKind.FUNCTION_PROTOTYPE:var b=v;if(b.hasDecorator(p.DecoratorFlags.BUILTIN))return this.compileCallExpressionBuiltin(b,e,r);var I=this.resolver.currentThisExpression,x=this.resolver.maybeInferCall(e,b,i);return x?this.compileCallDirect(x,e.arguments,e,x.is(u.CommonFlags.INSTANCE)?this.compileExpression(assert(I),this.options.usizeType):0,t):this.module.unreachable();case p.ElementKind.LOCAL:if(g=v.type.signatureReference){E=v.is(u.CommonFlags.INLINED)?n.i32(i64_low(v.constantIntegerValue)):n.local_get(v.index,c.NativeType.I32);break}return this.error(l.DiagnosticCode.Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures,e.range,v.type.toString()),n.unreachable();case p.ElementKind.GLOBAL:if(g=v.type.signatureReference){E=n.global_get(v.internalName,v.type.toNativeType());break}return this.error(l.DiagnosticCode.Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures,e.range,v.type.toString()),n.unreachable();case p.ElementKind.FIELD:if(g=(O=v.type).signatureReference){I=assert(this.resolver.currentThisExpression);var A=this.compileExpression(I,this.options.usizeType);E=n.load(4,!1,A,c.NativeType.I32,v.memoryOffset);break}return this.error(l.DiagnosticCode.Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures,e.range,O.toString()),n.unreachable();case p.ElementKind.FUNCTION_TARGET:g=v.signature,E=this.compileExpression(e.expression,v.type,1);break;case p.ElementKind.PROPERTY_PROTOTYPE:var N=assert(v.getterPrototype);if(!(S=this.resolver.resolveFunction(N,null)))return n.unreachable();if(E=this.compileCallDirect(S,[],e.expression),!(g=this.currentType.signatureReference))return this.error(l.DiagnosticCode.Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures,e.range,this.currentType.toString()),n.unreachable();break;case p.ElementKind.PROPERTY:var S=assert(v.getterInstance);if(E=this.compileCallDirect(S,[],e.expression,this.compileExpression(assert(this.resolver.currentThisExpression),this.options.usizeType)),!(g=this.currentType.signatureReference))return this.error(l.DiagnosticCode.Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures,e.range,this.currentType.toString()),n.unreachable();break;default:var O;return(O=this.resolver.getTypeOfElement(v))?this.error(l.DiagnosticCode.Type_0_has_no_call_signatures,e.range,O.toString()):this.error(l.DiagnosticCode.Expression_cannot_be_represented_by_a_type,e.range),n.unreachable()}return this.compileCallIndirect(g,E,e.arguments,e,0,r==T.Type.void)},r.prototype.compileCallExpressionBuiltin=function(e,r,t){e.hasDecorator(p.DecoratorFlags.UNSAFE)&&this.checkUnsafe(r);var n=null,i=e.typeParameterNodes,a=r.typeArguments;return r.typeArguments&&(e.is(u.CommonFlags.GENERIC)||this.error(l.DiagnosticCode.Type_0_is_not_generic,r.range,e.internalName),n=this.resolver.resolveTypeArguments(assert(i),a,this.currentFlow.actualFunction.parent,m.makeMap(this.currentFlow.contextualTypeArguments),r)),o.compileCall(this,e,n,r.arguments,t,r)},r.prototype.checkCallSignature=function(e,r,t,n){if(t!=(null!=e.thisType))return this.error(l.DiagnosticCode.The_this_types_of_each_signature_are_incompatible,n.range),!1;var i=e.hasRest;if(i)return this.error(l.DiagnosticCode.Not_implemented,n.range),!1;var a=e.requiredParameters,s=e.parameterTypes.length;return r<a?(this.error(a<s?l.DiagnosticCode.Expected_at_least_0_arguments_but_got_1:l.DiagnosticCode.Expected_0_arguments_but_got_1,n.range,a.toString(),r.toString()),!1):!(r>s&&!i)||(this.error(l.DiagnosticCode.Expected_0_arguments_but_got_1,n.range,s.toString(),r.toString()),!1)},r.prototype.checkUnsafe=function(e){this.options.noUnsafe&&!e.range.source.isLibrary&&this.error(l.DiagnosticCode.Operation_is_unsafe,e.range)},r.prototype.compileCallDirect=function(e,r,t,n,i){void 0===n&&(n=0),void 0===i&&(i=0);var a=r.length,s=e.signature;if(!this.checkCallSignature(s,a,0!=n,t))return this.currentType=s.returnType,this.module.unreachable();if(e.hasDecorator(p.DecoratorFlags.UNSAFE)&&this.checkUnsafe(t),e.hasDecorator(p.DecoratorFlags.INLINE)){if(assert(!e.is(u.CommonFlags.TRAMPOLINE)),!this.currentInlineFunctions.includes(e)){this.currentInlineFunctions.push(e);var o=s.parameterTypes;assert(a<=o.length);for(var c=new Array(a),_=0;_<a;++_)c[_]=this.compileExpression(r[_],o[_],17);var h=this.makeCallInline(e,c,n,0!=(8&i));return this.currentType.isManaged&&(16&i?this.skippedAutoreleases.add(h):h=this.makeAutorelease(h,this.currentFlow)),this.currentInlineFunctions.pop(),h}this.warning(l.DiagnosticCode.Function_0_cannot_be_inlined_into_itself,t.range,e.internalName)}var d=n?a+1:a,y=new Array(d),T=0;n&&(y[0]=n,T=1);var m=s.parameterTypes;for(_=0;_<a;++_,++T)y[T]=this.compileExpression(r[_],m[_],1);if(assert(T==d),s.returnType.isManaged){if(8&i)return this.makeCallDirect(e,y,t,!0);if(16&i){h=this.makeCallDirect(e,y,t,!1,!0);return this.skippedAutoreleases.add(h),h}return this.makeCallDirect(e,y,t,!1,!1)}return this.makeCallDirect(e,y,t,0!=(8&i))},r.prototype.makeCallInline=function(e,r,t,n){void 0===t&&(t=0),void 0===n&&(n=!1);for(var i=this.module,a=r?r.length:0,s=e.signature,o=s.parameterTypes,l=o.length,c=this.currentFlow,h=_.Flow.createInline(c.parentFunction,e),d=[],y=new Set,m=a-1;m>=0;--m){var f=r[m],g=o[m],E=h.addScopedLocal(s.getParameterName(m),g,y);_.findUsedLocals(f,y),c.canOverflow(f,g)||h.setLocalFlag(E.index,_.LocalFlags.WRAPPED),h.isNonnull(f,g)&&h.setLocalFlag(E.index,_.LocalFlags.NONNULL),g.isManaged&&(this.skippedAutoreleases.has(f)||(f=this.makeRetain(f)),h.setLocalFlag(E.index,_.LocalFlags.RETAINED)),d.unshift(i.local_set(E.index,f))}if(t){var v=assert(e.parent);assert(v.kind==p.ElementKind.CLASS);var b=assert(e.signature.thisType),I=h.addScopedLocal(u.CommonSymbols.this_,b,y);d.unshift(i.local_set(I.index,t));var x=v.base;x&&h.addScopedAlias(u.CommonSymbols.super_,x.type,I.index)}else assert(!e.signature.thisType);this.currentFlow=h;for(m=a;m<l;++m){var A=o[m],N=this.compileExpression(assert(e.prototype.functionTypeNode.parameters[m].initializer),A,17);E=h.addScopedLocal(s.getParameterName(m),A);h.canOverflow(N,A)||h.setLocalFlag(E.index,_.LocalFlags.WRAPPED),h.isNonnull(N,A)&&h.setLocalFlag(E.index,_.LocalFlags.NONNULL),A.isManaged&&(h.setLocalFlag(E.index,_.LocalFlags.RETAINED),this.skippedAutoreleases.has(N)||(N=this.makeRetain(N))),d.push(i.local_set(E.index,N))}this.compileFunctionBody(e,d),h.is(256)||(this.performAutoreleases(h,d),this.finishAutoreleases(h,d)),h.freeScopedLocals();var S=h.returnType;this.currentFlow=c;var O=i.block(h.inlineReturnLabel,d,S.toNativeType());return this.currentType=S,S.isManaged&&n&&(O=this.makeRelease(O),this.currentType=T.Type.void),O},r.prototype.ensureTrampoline=function(e){var r=e.trampoline;if(r)return r;var t=e.signature,n=e.internalName,i=t.parameterTypes,a=e.prototype.functionTypeNode.parameters,s=t.returnType,_=t.thisType,h=e.is(u.CommonFlags.INSTANCE),d=t.requiredParameters,y=d,m=i.length,f=m;h&&(++y,++f);var g=assert(f-y),E=new Array(y),v=0,b=this.module;h&&(E[0]=b.local_get(0,this.options.nativeSizeType),v=1);for(var I=0;I<d;++I,++v)E[v]=b.local_get(v,i[I].toNativeType());assert(v==y);var x=new T.Signature(this.program,i,s,_);x.requiredParameters=m,x.parameterNames=t.parameterNames,(r=new p.Function(e.name+"|trampoline",e.prototype,x,e.contextualTypeArguments)).set(e.flags|u.CommonFlags.TRAMPOLINE|u.CommonFlags.COMPILED),e.trampoline=r;var A=this.currentFlow,N=r.flow;this.currentFlow=N;var S=g+1,O=new Array(S),C="of"+g.toString(10);for(I=0;I<S;++I){var R=I.toString(10)+C;O[I]=R}var L=b.block(O[0],[b.block("outOfRange",[b.switch(O,"outOfRange",d?b.binary(c.BinaryOp.SubI32,b.global_get(o.BuiltinSymbols.argc,c.NativeType.I32),b.i32(d)):b.global_get(o.BuiltinSymbols.argc,c.NativeType.I32))]),b.unreachable()]);for(I=0;I<g;++I,++v){var k=i[d+I],F=a[d+I],D=F.initializer,B=void 0;D?B=b.local_set(v,this.compileExpression(D,k,1)):(this.error(l.DiagnosticCode.Optional_parameter_must_have_an_initializer,F.range),B=b.unreachable()),L=b.block(O[I+1],[L,B]),E[v]=b.local_get(v,k.toNativeType())}assert(v==f);var P=[L],w=b.call(n,E,s.toNativeType());s!=T.Type.void?this.performAutoreleasesWithValue(N,w,s,P):(P.push(w),this.performAutoreleases(N,P)),N.freeScopedLocals(),this.currentFlow=A;var U=b.addFunction(r.internalName,this.ensureFunctionType(x.parameterTypes,s,_),T.typesToNativeTypes(r.additionalLocals),b.block(null,P,s.toNativeType()));return r.finalize(b,U),r},r.prototype.ensureArgcVar=function(){if(!this.argcVar){var e=this.module;this.argcVar=e.addGlobal(o.BuiltinSymbols.argc,c.NativeType.I32,!0,e.i32(0))}return o.BuiltinSymbols.argc},r.prototype.ensureArgcSet=function(){if(!this.argcSet){var e=this.module;this.argcSet=e.addFunction(o.BuiltinSymbols.setargc,this.ensureFunctionType([T.Type.u32],T.Type.void),null,e.global_set(this.ensureArgcVar(),e.local_get(0,c.NativeType.I32))),e.addFunctionExport(o.BuiltinSymbols.setargc,"__setargc")}return o.BuiltinSymbols.setargc},r.prototype.makeRetain=function(e){var r=this.program.retainInstance;return this.compileFunction(r),this.module.call(r.internalName,[e],this.options.nativeSizeType)},r.prototype.makeRetainRelease=function(e,r){var t=this.module,n=this.currentFlow,i=this.options.usizeType,a=this.options.nativeSizeType,s=n.getTempLocal(i,_.findUsedLocals(e)),o=n.getTempLocal(i),l=t.block(null,[t.if(t.binary(a==c.NativeType.I64?c.BinaryOp.NeI64:c.BinaryOp.NeI32,t.local_tee(s.index,r),t.local_tee(o.index,e)),t.block(null,[t.drop(this.makeRetain(t.local_get(s.index,a))),this.makeRelease(t.local_get(o.index,a))])),t.local_get(s.index,a)],a);return n.freeTempLocal(o),n.freeTempLocal(s),l},r.prototype.makeSkippedRelease=function(e,r){var t=this.module,n=this.currentFlow,i=this.options.usizeType,a=this.options.nativeSizeType,s=n.getTempLocal(i,_.findUsedLocals(e)),o=t.block(null,[t.local_set(s.index,r),this.makeRelease(e),t.local_get(s.index,a)],a);return n.freeTempLocal(s),o},r.prototype.makeRelease=function(e){var r=this.program.releaseInstance;return this.compileFunction(r),this.module.call(r.internalName,[e],c.NativeType.None)},r.prototype.makeAutorelease=function(e,r){return void 0===r&&(r=this.currentFlow),this.module.local_tee(r.getAutoreleaseLocal(this.options.usizeType).index,e)},r.prototype.undoAutorelease=function(e,r){switch(c.getExpressionId(e)){case c.ExpressionId.LocalSet:if(c.isLocalTee(e)){var t=c.getLocalSetIndex(e);if(r.isAnyLocalFlag(t,_.LocalFlags.ANY_RETAINED))return r.unsetLocalFlag(t,_.LocalFlags.ANY_RETAINED),t}break;case c.ExpressionId.Block:if(null===c.getBlockName(e)){var n=c.getBlockChildCount(e);if(n)return this.undoAutorelease(c.getBlockChild(e,n-1),r)}}return-1},r.prototype.moveAutorelease=function(e,r,t){return~this.undoAutorelease(e,r)?this.makeAutorelease(e,t):this.makeAutorelease(this.makeRetain(e),t)},r.prototype.performAutoreleases=function(e,r,t){var n,i;void 0===t&&(t=!0);var s=e.scopedLocals;if(s){var o=this.module;try{for(var l=a(s.values()),c=l.next();!c.done;c=l.next()){var p=c.value;if(p.is(u.CommonFlags.SCOPED)){var h=p.index;e.isAnyLocalFlag(h,_.LocalFlags.ANY_RETAINED)&&(t&&e.unsetLocalFlag(h,_.LocalFlags.ANY_RETAINED),r.push(this.makeRelease(o.local_get(h,p.type.toNativeType()))))}}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}}},r.prototype.performAutoreleasesWithValue=function(e,r,t,n,i){void 0===n&&(n=null),void 0===i&&(i=!0),n||(n=new Array),n.push(this.module.nop());var a=n.length;if(this.performAutoreleases(e,n,i),n.length>a){var s=t.toNativeType(),o=e.getTempLocal(t);e.canOverflow(r,t)||e.setLocalFlag(o.index,_.LocalFlags.WRAPPED),e.isNonnull(r,t)&&e.setLocalFlag(o.index,_.LocalFlags.NONNULL);var l=this.module;n[a-1]=l.local_set(o.index,r),n.push(l.local_get(o.index,s));var c=l.block(null,n,s);return e.freeTempLocal(o),c}return n.length>1?(n[a-1]=r,this.module.block(null,n,t.toNativeType())):r},r.prototype.finishAutoreleases=function(e,r){var t,n,i=this.module;if(e.is(32768)){for(var s=void 0;s=e.parent;)e=s;this.performAutoreleases(e,r,!1)}else try{for(var o=a(e.parentFunction.localsByIndex),l=o.next();!l.done;l=o.next()){var c=l.value,u=c.index;e.isAnyLocalFlag(u,_.LocalFlags.ANY_RETAINED)&&(e.unsetLocalFlag(u,_.LocalFlags.ANY_RETAINED),r.push(this.makeRelease(i.local_get(u,c.type.toNativeType()))))}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},r.prototype.makeCallDirect=function(e,r,t,n,i){if(void 0===n&&(n=!1),void 0===i&&(i=!1),e.hasDecorator(p.DecoratorFlags.INLINE)){if(assert(!e.is(u.CommonFlags.TRAMPOLINE)),!this.currentInlineFunctions.includes(e)){var a;if(this.currentInlineFunctions.push(e),e.is(u.CommonFlags.INSTANCE)){var s=assert(r);assert(s.length),a=this.makeCallInline(e,s.slice(1),s[0],n)}else a=this.makeCallInline(e,r,0,n);return this.currentType.isManaged&&(i?this.skippedAutoreleases.add(a):a=this.makeAutorelease(a,this.currentFlow)),this.currentInlineFunctions.pop(),a}this.warning(l.DiagnosticCode.Function_0_cannot_be_inlined_into_itself,t.range,e.internalName)}var o=r?r.length:0,c=o,_=e.signature.requiredParameters,h=e.signature.parameterTypes.length,d=h;e.is(u.CommonFlags.INSTANCE)&&(++_,++d,--c),assert(o>=_);var m=this.module;if(!this.compileFunction(e))return m.unreachable();var f=e.signature.returnType,g=e.is(u.CommonFlags.MODULE_IMPORT);if(o<d){r||((r=new Array(d)).length=0);var E=e.signature.parameterTypes,v=e.prototype.functionTypeNode.parameters;assert(v.length==E.length);for(var b=!0,I=c;I<h;++I){var x=v[I].initializer;if(x){if(y.nodeIsConstantValue(x.kind)){r.push(this.compileExpression(v[I].initializer,E[I],1));continue}var A=this.resolver.lookupExpression(x,e.flow,E[I]);if(A&&A.kind==p.ElementKind.GLOBAL){var N=A;if(this.compileGlobal(N)){N.is(u.CommonFlags.INLINED)?r.push(this.compileInlineConstant(N,E[I],1)):r.push(this.convertExpression(m.global_get(N.internalName,N.type.toNativeType()),N.type,E[I],!1,!1,x));continue}}}r.push(E[I].toNativeZero(m)),b=!1}if(!b&&!g){var S=e;if(e=this.ensureTrampoline(e),!this.compileFunction(e))return m.unreachable();e.flow.flags=S.flow.flags;var O=f.toNativeType(),C=m.call(e.internalName,r,O);return this.currentType=f,f.isManaged&&(n?(C=this.makeRelease(C),this.currentType=T.Type.void):i?this.skippedAutoreleases.add(C):C=this.makeAutorelease(C)),m.block(null,[m.global_set(this.ensureArgcVar(),m.i32(c)),C],this.currentType.toNativeType())}}var R=m.call(e.internalName,r,f.toNativeType());return this.currentType=f,f.isManaged&&(n?(R=this.makeRelease(R),this.currentType=T.Type.void):i||(R=this.makeAutorelease(R))),R},r.prototype.compileCallIndirect=function(e,r,t,n,i,a){void 0===i&&(i=0),void 0===a&&(a=!1);var s=t.length;if(!this.checkCallSignature(e,s,0!=i,n))return this.module.unreachable();var o=i?s+1:s,l=new Array(o),c=0;i&&(l[0]=i,c=1);for(var u=e.parameterTypes,p=0;p<s;++p,++c)l[c]=this.compileExpression(t[p],u[p],1);return assert(c==o),this.makeCallIndirect(e,r,l,a)},r.prototype.makeCallIndirect=function(e,r,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var i=t?t.length:0,a=i,s=e.requiredParameters,o=e.parameterTypes.length,l=o;e.thisType&&(++s,++l,--a),assert(i>=s),this.ensureFunctionType(e.parameterTypes,e.returnType,e.thisType);var c=this.module;if(i<l){t||((t=new Array(l)).length=0);for(var u=e.parameterTypes,p=a;p<o;++p)t.push(u[p].toNativeZero(c))}var _=e.returnType,h=c.call_indirect(r,t,e.toSignatureString());return this.currentType=_,_.isManaged&&(n?(h=this.makeRelease(h),this.currentType=T.Type.void):h=this.makeAutorelease(h)),c.block(null,[c.global_set(this.ensureArgcVar(),c.i32(a)),h],this.currentType.toNativeType())},r.prototype.compileCommaExpression=function(e,r,t){for(var n=e.expressions,i=n.length,a=new Array(i--),s=0;s<i;++s)a[s]=this.compileExpression(n[s],T.Type.void,9);return a[i]=this.compileExpression(n[i],r,t),this.module.block(null,a,this.currentType.toNativeType())},r.prototype.compileElementAccessExpression=function(e,r,t){var n=this.module,i=e.expression,a=this.resolver.resolveExpression(i,this.currentFlow);if(a){if(a.is(256)){var s=a.classReference;if(s){var o=s.lookupOverload(p.OperatorKind.INDEXED_GET,this.currentFlow.is(65536));if(o){var c=this.compileExpression(i,s.type,1);return this.compileCallDirect(o,[e.elementExpression],e,c,t)}}}this.error(l.DiagnosticCode.Index_signature_is_missing_in_type_0,e.expression.range,a.toString())}return n.unreachable()},r.prototype.compileFunctionExpression=function(e,r,t){var n=e.declaration.clone();assert(!n.typeParameters);var i,a=this.currentFlow,s=a.actualFunction,o=new p.FunctionPrototype(n.name.text.length?n.name.text:"anonymous|"+(s.nextAnonymousId++).toString(10),s,n,p.DecoratorFlags.NONE),c=m.makeMap(a.contextualTypeArguments);if(r){var u=o.functionTypeNode,_=u.parameters,h=_.length,d=r.parameterTypes,f=d.length;if(h>f)return this.error(l.DiagnosticCode.Expected_0_arguments_but_got_1,e.range,f.toString(),h.toString()),this.module.unreachable();for(var g=new Array(h),E=0;E<h;++E){var v=_[E];if(g[E]=v.name.text,!y.isTypeOmitted(v.type)){if(!(A=this.resolver.resolveType(v.type,s.parent,c)))return this.module.unreachable();if(!d[E].isStrictlyAssignableTo(A))return this.error(l.DiagnosticCode.Type_0_is_not_assignable_to_type_1,v.range,d[E].toString(),A.toString()),this.module.unreachable()}}var b=r.returnType;if(!y.isTypeOmitted(u.returnType)){if(!(A=this.resolver.resolveType(u.returnType,s.parent,c)))return this.module.unreachable();if(b==T.Type.void?A!=T.Type.void:!A.isStrictlyAssignableTo(b))return this.error(l.DiagnosticCode.Type_0_is_not_assignable_to_type_1,u.returnType.range,A.toString(),b.toString()),this.module.unreachable()}var I=r.thisType,x=u.explicitThisType;if(x){if(!I)return this.error(l.DiagnosticCode._this_cannot_be_referenced_in_current_location,x.range),this.module.unreachable();var A;if(!(A=this.resolver.resolveType(x,s.parent,c)))return this.module.unreachable();if(!I.isStrictlyAssignableTo(A))return this.error(l.DiagnosticCode.Type_0_is_not_assignable_to_type_1,x.range,I.toString(),A.toString()),this.module.unreachable()}var N=new T.Signature(this.program,d,b,I);if(N.requiredParameters=f,N.parameterNames=g,i=new p.Function(o.name,o,N,c),!this.compileFunction(i))return this.module.unreachable();this.currentType=r.type}else{if(!(i=this.compileFunctionUsingTypeArguments(o,[],c)))return this.module.unreachable();this.currentType=i.signature.type}var S=this.ensureFunctionTableEntry(i);return S<0?this.module.unreachable():this.module.i32(S)},r.prototype.maybeCompileEnclosingSource=function(e){var r=e.range.source.internalPath,t=this.program.filesByName;assert(t.has(r)),t.get(r).is(u.CommonFlags.COMPILED)||this.compileFileByPath(r,e)},r.prototype.compileIdentifierExpression=function(e,r,t){var n=this.module,i=this.currentFlow,a=i.actualFunction;switch(e.kind){case y.NodeKind.NULL:var s=this.options;if(r.is(256)){var o=r.classReference;if(o)return this.currentType=o.type.asNullable(),s.isWasm64?n.i64(0):n.i32(0);var h=r.signatureReference;if(h)return this.currentType=h.type.asNullable(),n.i32(0)}return this.currentType=s.usizeType,s.isWasm64?n.i64(0):n.i32(0);case y.NodeKind.TRUE:return this.currentType=T.Type.bool,n.i32(1);case y.NodeKind.FALSE:return this.currentType=T.Type.bool,n.i32(0);case y.NodeKind.THIS:if(a.is(u.CommonFlags.INSTANCE)){var d=assert(i.lookupLocal(u.CommonSymbols.this_)),f=assert(a.parent);assert(f.kind==p.ElementKind.CLASS);var g=this.options.nativeSizeType;if(a.is(u.CommonFlags.CONSTRUCTOR)&&!i.is(64)){i.set(64);var E=[n.if(n.unary(g==c.NativeType.I64?c.UnaryOp.EqzI64:c.UnaryOp.EqzI32,n.local_get(d.index,g)),n.local_set(d.index,this.makeRetain(this.makeAllocation(f))))];return this.makeFieldInitialization(f,E),E.push(n.local_get(d.index,g)),this.currentType=d.type,n.block(null,E,g)}var v=assert(a.signature.thisType);return this.currentType=v,n.local_get(d.index,v.toNativeType())}return this.error(l.DiagnosticCode._this_cannot_be_referenced_in_current_location,e.range),this.currentType=this.options.usizeType,n.unreachable();case y.NodeKind.SUPER:var b=this.currentFlow,I=b.actualFunction;if(I.is(u.CommonFlags.CONSTRUCTOR)&&(b.is(128)||this.error(l.DiagnosticCode._super_must_be_called_before_accessing_a_property_of_super_in_the_constructor_of_a_derived_class,e.range)),b.is(32768)){var x=b.lookupLocal(u.CommonSymbols.this_);if(x){var A=assert(x.type.classReference).base;if(A)return this.currentType=A.type,n.local_get(x.index,A.type.toNativeType())}}if(I.is(u.CommonFlags.INSTANCE)){f=assert(I.parent);assert(f.kind==p.ElementKind.CLASS);var N=f.base;if(N){var S=N.type;return this.currentType=S,n.local_get(0,S.toNativeType())}}return this.error(l.DiagnosticCode._super_can_only_be_referenced_in_a_derived_class,e.range),this.currentType=this.options.usizeType,n.unreachable()}this.maybeCompileEnclosingSource(e);var O=this.resolver.lookupIdentifierExpression(e,i,this.currentParent||a);if(!O)return n.unreachable();switch(O.kind){case p.ElementKind.LOCAL:var C=O.type;if(assert(C!=T.Type.void),O.is(u.CommonFlags.INLINED))return this.compileInlineConstant(O,r,t);var R=O.index;return assert(R>=0),C.is(512)&&i.isLocalFlag(R,_.LocalFlags.NONNULL,!1)&&(C=C.nonNullableType),this.currentType=C,this.module.local_get(R,C.toNativeType());case p.ElementKind.GLOBAL:if(!this.compileGlobal(O))return this.module.unreachable();C=O.type;return assert(C!=T.Type.void),O.is(u.CommonFlags.INLINED)?this.compileInlineConstant(O,r,t):(this.currentType=C,this.module.global_get(O.internalName,C.toNativeType()));case p.ElementKind.ENUMVALUE:return O.is(u.CommonFlags.COMPILED)?(this.currentType=T.Type.i32,O.is(u.CommonFlags.INLINED)?(assert(1==O.constantValueKind),this.module.i32(i64_low(O.constantIntegerValue))):this.module.global_get(O.internalName,c.NativeType.I32)):(this.error(l.DiagnosticCode.A_member_initializer_in_a_enum_declaration_cannot_reference_members_declared_after_it_including_members_defined_in_other_enums,e.range),this.currentType=T.Type.i32,this.module.unreachable());case p.ElementKind.FUNCTION_PROTOTYPE:var L=this.resolver.resolveFunction(O,null,m.makeMap(i.contextualTypeArguments));if(!L||!this.compileFunction(L))return n.unreachable();var k=this.ensureFunctionTableEntry(L);return this.currentType=L.signature.type,this.module.i32(k)}return this.error(l.DiagnosticCode.Not_implemented,e.range),this.module.unreachable()},r.prototype.compileInstanceOfExpression=function(e,r,t){var n=this.module,i=this.compileExpression(e.expression,this.options.usizeType),a=this.currentType,s=this.resolver.resolveType(e.isType,this.currentFlow.actualFunction);if(this.currentType=T.Type.bool,!s)return n.unreachable();if(!s.is(256))return n.block(null,[n.drop(i),n.i32(a==s?1:0)],c.NativeType.I32);if(!a.is(256))return n.block(null,[n.drop(i),n.i32(0)],c.NativeType.I32);var o=a.toNativeType();if(a.is(512)&&!s.is(512)){if(a.nonNullableType.isAssignableTo(s))return n.binary(o==c.NativeType.I64?c.BinaryOp.NeI64:c.BinaryOp.NeI32,i,a.toNativeZero(n));if(s.isAssignableTo(a)){var u=this.program;if(!a.isUnmanaged&&!s.isUnmanaged){var p=(d=this.currentFlow).getTempLocal(a),_=assert(u.instanceofInstance);this.compileFunction(_);var h=n.if(n.unary(o==c.NativeType.I64?c.UnaryOp.EqzI64:c.UnaryOp.EqzI32,n.local_tee(p.index,i)),n.i32(0),this.makeCallDirect(_,[n.local_get(p.index,o),n.i32(s.classReference.id)],e));return d.freeTempLocal(p),h}this.error(l.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,"instanceof",a.toString(),s.toString())}}else{if(a.isAssignableTo(s))return n.block(null,[this.convertExpression(i,a,T.Type.void,!1,!1,e.expression),n.i32(1)],c.NativeType.I32);if(s.isAssignableTo(a)){u=this.program;if(!a.isUnmanaged&&!s.isUnmanaged){var d;p=(d=this.currentFlow).getTempLocal(a),_=assert(u.instanceofInstance);this.compileFunction(_);h=n.if(n.unary(o==c.NativeType.I64?c.UnaryOp.EqzI64:c.UnaryOp.EqzI32,n.local_tee(p.index,i)),n.i32(0),this.makeCallDirect(_,[n.local_get(p.index,o),n.i32(s.classReference.id)],e));return d.freeTempLocal(p),h}this.error(l.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,e.range,"instanceof",a.toString(),s.toString())}}return n.block(null,[n.drop(i),n.i32(0)],c.NativeType.I32)},r.prototype.compileLiteralExpression=function(e,r,t,n){void 0===n&&(n=!1);var i=this.module;switch(e.literalKind){case y.LiteralKind.ARRAY:assert(!n);var a=r.classReference;return a&&a.prototype==this.program.arrayPrototype?this.compileArrayLiteral(assert(a.typeArguments)[0],e.elementExpressions,t,e):(this.error(l.DiagnosticCode.The_type_argument_for_type_parameter_0_cannot_be_inferred_from_the_usage_Consider_specifying_the_type_arguments_explicitly,e.range,"T"),i.unreachable());case y.LiteralKind.FLOAT:var s=e.value;return n&&(s=-s),r==T.Type.f32?i.f32(s):(this.currentType=T.Type.f64,i.f64(s));case y.LiteralKind.INTEGER:var o=e.value;n&&(o=i64_sub(i64_new(0),o));var c=this.resolver.determineIntegerLiteralType(o,r);switch(this.currentType=c,c.kind){case 4:if(!this.options.isWasm64)return i.i32(i64_low(o));case 3:return i.i64(i64_low(o),i64_high(o));case 9:if(!this.options.isWasm64)return i.i32(i64_low(o));case 8:return i.i64(i64_low(o),i64_high(o));case 11:return i.f32(i64_to_f32(o));case 12:return i.f64(i64_to_f64(o));default:return i.i32(i64_low(o))}case y.LiteralKind.STRING:return assert(!n),this.compileStringLiteral(e);case y.LiteralKind.OBJECT:return assert(!n),this.compileObjectLiteral(e,r)}return this.error(l.DiagnosticCode.Not_implemented,e.range),this.currentType=r,i.unreachable()},r.prototype.compileStringLiteral=function(e){return this.ensureStaticString(e.value)},r.prototype.compileArrayLiteral=function(e,r,t,n){for(var i=this.module,a=this.program,s=assert(a.arrayPrototype),o=assert(this.resolver.resolveClass(s,[e])),u=assert(a.arrayBufferInstance),_=o.type,h=this.currentFlow,d=h.getTempLocal(_),y=h.getTempLocal(u.type),T=r.length,m=new Array(T),f=!0,g=e.toNativeType(),E=0;E<T;++E){var v=r[E],b=v?i.precomputeExpression(this.compileExpression(v,e,1)):e.toNativeZero(i);c.getExpressionId(b)==c.ExpressionId.Const?assert(c.getExpressionType(b)==g):f=!1,m[E]=b}if(f){h.freeTempLocal(d),h.freeTempLocal(y);var I=a.runtimeHeaderSize,x=this.ensureStaticArrayBuffer(e,m),A=i64_add(x.offset,i64_new(I));if(32&t){var N=this.ensureStaticArrayHeader(e,x),S=i64_add(N.offset,i64_new(I));return this.currentType=_,a.options.isWasm64?this.module.i64(i64_low(S),i64_high(S)):this.module.i32(i64_low(S))}b=this.makeCallDirect(a.allocArrayInstance,[i.i32(T),a.options.isWasm64?i.i64(e.alignLog2):i.i32(e.alignLog2),i.i32(o.id),a.options.isWasm64?i.i64(i64_low(A),i64_high(A)):i.i32(i64_low(A))],n);return this.currentType=_,this.makeAutorelease(this.makeRetain(b))}if(!o.lookupOverload(p.OperatorKind.INDEXED_SET,!0))return h.freeTempLocal(d),h.freeTempLocal(y),this.error(l.DiagnosticCode.Index_signature_in_type_0_only_permits_reading,n.range,o.internalName),this.currentType=_,i.unreachable();var O=_.toNativeType(),C=new Array;C.push(i.local_set(d.index,this.makeCallDirect(a.allocArrayInstance,[i.i32(T),a.options.isWasm64?i.i64(e.alignLog2):i.i32(e.alignLog2),i.i32(o.id),a.options.isWasm64?i.i64(0):i.i32(0)],n)));var R=assert(o.lookupInSelf("dataStart"));assert(R.kind==p.ElementKind.FIELD),C.push(i.local_set(y.index,i.load(_.byteSize,!1,i.local_get(d.index,O),O,R.memoryOffset)));for(var L=e.isManaged,k=(E=0,e.alignLog2);E<T;++E){var F=m[E];L&&(F=this.makeRetain(F)),C.push(i.store(e.byteSize,i.local_get(y.index,O),F,g,E<<k))}return C.push(i.local_get(d.index,O)),h.freeTempLocal(d),h.freeTempLocal(y),this.currentType=_,i.block(null,C,O)},r.prototype.compileObjectLiteral=function(e,r){var t=this.module,n=r.classReference;if(!n||n.is(u.CommonFlags.ABSTRACT))return this.error(l.DiagnosticCode.Type_0_is_not_assignable_to_type_1,e.range,"<object>",r.toString()),t.unreachable();var i=n.constructorInstance;if(i){if(i.signature.requiredParameters)return this.error(l.DiagnosticCode.Constructor_of_class_0_must_not_require_any_arguments,e.range,n.toString()),t.unreachable();if(i.is(u.CommonFlags.PRIVATE))return this.error(l.DiagnosticCode.Constructor_of_class_0_is_private_and_only_accessible_within_the_class_declaration,e.range,n.toString()),t.unreachable();if(i.is(u.CommonFlags.PROTECTED))return this.error(l.DiagnosticCode.Constructor_of_class_0_is_protected_and_only_accessible_within_the_class_declaration,e.range,n.toString()),t.unreachable();i.hasDecorator(p.DecoratorFlags.UNSAFE)&&this.checkUnsafe(e)}var a=e.names,s=a.length,o=e.values,c=n.members,_=!1,h=new Array(s+2),d=this.currentFlow.getAutoreleaseLocal(this.options.usizeType);assert(s==o.length);for(var y=0,T=s;y<T;++y){var m=c?c.get(a[y].text):null;if(m&&m.kind==p.ElementKind.FIELD){var f=m.type;h[y+1]=this.module.store(f.byteSize,this.module.local_get(d.index,this.options.nativeSizeType),this.compileExpression(o[y],m.type,1),f.toNativeType(),m.memoryOffset)}else this.error(l.DiagnosticCode.Property_0_does_not_exist_on_type_1,a[y].range,a[y].text,n.toString()),_=!0}return this.currentType=n.type.nonNullableType,_?t.unreachable():(h[0]=t.local_set(d.index,this.makeRetain(this.makeAllocation(n))),h[h.length-1]=t.local_get(d.index,this.options.nativeSizeType),this.currentType=n.type,t.block(null,h,this.options.nativeSizeType))},r.prototype.compileNewExpression=function(e,r,t){var n=this.module,i=this.currentFlow,a=this.resolver.lookupExpression(e.expression,i);if(!a)return n.unreachable();if(a.kind!=p.ElementKind.CLASS_PROTOTYPE)return this.error(l.DiagnosticCode.This_expression_is_not_constructable,e.expression.range),this.module.unreachable();var s,o=a,c=null,_=e.typeArguments;return(c=!_&&null!==(s=r.classReference)&&s.is(u.CommonFlags.GENERIC)?this.resolver.resolveClass(o,s.typeArguments,m.makeMap(i.contextualTypeArguments)):this.resolver.resolveClassInclTypeArguments(o,_,i.actualFunction.parent,m.makeMap(i.contextualTypeArguments),e))?(r==T.Type.void&&(t|=8),this.compileInstantiate(c,e.arguments,t,e)):n.unreachable()},r.prototype.ensureConstructor=function(e,r){var t=e.constructorInstance;if(t)return t.hasDecorator(p.DecoratorFlags.INLINE)||this.compileFunction(t),t;var n=e.base;if(n){var i=this.ensureConstructor(n,r);t=new p.Function(u.CommonSymbols.constructor,new p.FunctionPrototype(u.CommonSymbols.constructor,e,i.declaration.clone()),i.signature,null)}else t=new p.Function(u.CommonSymbols.constructor,new p.FunctionPrototype(u.CommonSymbols.constructor,e,this.program.makeNativeFunctionDeclaration(u.CommonSymbols.constructor,u.CommonFlags.INSTANCE|u.CommonFlags.CONSTRUCTOR)),new T.Signature(this.program,null,e.type,e.type),null);t.internalName=e.internalName+u.INSTANCE_DELIMITER+"constructor",t.set(u.CommonFlags.COMPILED),t.prototype.setResolvedInstance("",t),e.constructorInstance=t;var a=this.currentFlow,s=t.flow;this.currentFlow=s;var o=t.signature,l=this.module,_=this.options.nativeSizeType,h=new Array,d=this.makeAllocation(e);if(e.type.isManaged&&(d=this.makeRetain(d)),h.push(l.if(l.unary(_==c.NativeType.I64?c.UnaryOp.EqzI64:c.UnaryOp.EqzI32,l.local_get(0,_)),l.local_set(0,d))),n){var y=o.parameterTypes,m=y.length,f=new Array(1+m);f[0]=l.local_get(0,_);for(var g=0;g<m;++g)f[g+1]=l.local_get(g+1,y[g].toNativeType());h.push(l.local_set(0,this.makeCallDirect(assert(n.constructorInstance),f,r,!1,!0)))}this.makeFieldInitialization(e,h);var E=this.performAutoreleasesWithValue(s,l.local_get(0,_),e.type,h);s.freeScopedLocals(),this.currentFlow=a;var v=this.ensureFunctionType(o.parameterTypes,o.returnType,o.thisType),b=t.localsByIndex,I=new Array,x=1+o.parameterTypes.length,A=b.length;if(A>x)for(g=x;g<A;++g)I.push(b[g].type.toNativeType());var N=l.addFunction(t.internalName,v,I,E);return t.finalize(l,N),t},r.prototype.compileInstantiate=function(e,r,t,n){var i=this.ensureConstructor(e,n);i.hasDecorator(p.DecoratorFlags.UNSAFE)&&this.checkUnsafe(n);var a=this.compileCallDirect(i,r,n,this.options.usizeType.toNativeZero(this.module),t);return c.getExpressionType(a)!=c.NativeType.None&&(this.currentType=e.type),a},r.prototype.compilePropertyAccessExpression=function(e,r,t){var n=this.module,i=this.currentFlow;this.maybeCompileEnclosingSource(e);var a=this.resolver.lookupExpression(e,i,r);if(!a)return n.unreachable();switch(a.hasDecorator(p.DecoratorFlags.UNSAFE)&&this.checkUnsafe(e),a.kind){case p.ElementKind.GLOBAL:if(!this.compileGlobal(a))return n.unreachable();var s=a.type;return assert(s!=T.Type.void),a.is(u.CommonFlags.INLINED)?this.compileInlineConstant(a,r,t):(this.currentType=s,n.global_get(a.internalName,s.toNativeType()));case p.ElementKind.ENUMVALUE:var o=assert(a.parent);return assert(o.kind==p.ElementKind.ENUM),this.compileEnum(o)?(this.currentType=T.Type.i32,a.is(u.CommonFlags.INLINED)?(assert(1==a.constantValueKind),this.compileInlineConstant(a,r,t)):(assert(a.type==T.Type.i32),n.global_get(a.internalName,c.NativeType.I32))):(this.currentType=T.Type.i32,this.module.unreachable());case p.ElementKind.FIELD:assert(a.memoryOffset>=0);var _=this.compileExpression(assert(this.resolver.currentThisExpression),this.options.usizeType);return this.currentType=a.type,n.load(a.type.byteSize,a.type.is(5),_,a.type.toNativeType(),a.memoryOffset);case p.ElementKind.PROPERTY_PROTOTYPE:var h=a.getterPrototype;if(h){var d=this.resolver.resolveFunction(h,null);if(d)return this.compileCallDirect(d,[],e,0)}return n.unreachable();case p.ElementKind.PROPERTY:var y=assert(a.getterInstance);return this.compileCallDirect(y,[],e,this.compileExpression(assert(this.resolver.currentThisExpression),this.options.usizeType));case p.ElementKind.FUNCTION_PROTOTYPE:var f=a;if(f.is(u.CommonFlags.STATIC)){var g=this.compileFunctionUsingTypeArguments(f,[],m.makeMap(),e);return null==g?n.unreachable():(this.currentType=g.type,n.i32(this.ensureFunctionTableEntry(g)))}return this.error(l.DiagnosticCode.Cannot_access_method_0_without_calling_it_as_it_requires_this_to_be_set,e.range,f.name),n.unreachable()}return this.error(l.DiagnosticCode.Not_implemented,e.range),n.unreachable()},r.prototype.compileTernaryExpression=function(e,r,t){var n=e.ifThen,i=e.ifElse,a=this.currentFlow,s=this.module.precomputeExpression(this.makeIsTrueish(this.compileExpression(e.condition,T.Type.bool),this.currentType));if(c.getExpressionId(s)==c.ExpressionId.Const&&c.getExpressionType(s)==c.NativeType.I32)return c.getConstValueI32(s)?this.compileExpression(n,r):this.compileExpression(i,r);var o=16&t,u=a.fork();this.currentFlow=u;var p=this.compileExpression(n,r,o),_=this.currentType,h=this.skippedAutoreleases.has(p),d=a.fork();this.currentFlow=d;var y=this.compileExpression(i,r,o),m=this.currentType,f=this.skippedAutoreleases.has(y),g=T.Type.commonDenominator(_,m,!1);if(!g)return this.error(l.DiagnosticCode.Type_0_is_not_assignable_to_type_1,i.range,m.toString(),_.toString()),this.currentType=r,this.module.unreachable();p=this.convertExpression(p,_,g,!1,!1,n),y=this.convertExpression(y,m,g,!1,!1,i),this.currentType=g,h!=f?h?(y=this.makeRetain(y),f=!0):(p=this.makeRetain(p),h=!0):!h&&g.isManaged&&(p=this.moveAutorelease(p,u,a),y=this.moveAutorelease(y,d,a)),p=this.performAutoreleasesWithValue(u,p,g),u.freeScopedLocals(),y=this.performAutoreleasesWithValue(d,y,g),d.freeScopedLocals(),this.currentFlow=a,a.inheritMutual(u,d);var E=this.module.if(s,p,y);return assert(h==f),h&&this.skippedAutoreleases.add(E),E},r.prototype.compileUnaryPostfixExpression=function(e,r,t){var n=this.module,i=this.currentFlow,a=this.compileExpression(e.operand,r.exceptVoid,0);if(c.getExpressionId(a)==c.ExpressionId.Unreachable)return a;var s,o=null;switch(r!=T.Type.void&&(o=i.getTempLocal(this.currentType),a=n.local_tee(o.index,a)),e.operator){case d.Token.PLUS_PLUS:if(this.currentType.is(256)){if(y=this.currentType.classReference)if(m=y.lookupOverload(p.OperatorKind.POSTFIX_INC)){var _=m.is(u.CommonFlags.INSTANCE);if(null===o||_||(a=c.getLocalSetValue(a),i.freeTempLocal(o),o=null),s=this.compileUnaryOverload(m,e.operand,a,e),_)break;return s}return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"++",this.currentType.toString()),o&&i.freeTempLocal(o),n.unreachable()}switch(this.currentType.kind){case 0:case 1:case 2:case 5:case 6:case 7:case 10:s=n.binary(c.BinaryOp.AddI32,a,n.i32(1));break;case 9:case 4:var h=this.options;s=n.binary(h.isWasm64?c.BinaryOp.AddI64:c.BinaryOp.AddI32,a,this.currentType.toNativeOne(n));break;case 3:case 8:s=n.binary(c.BinaryOp.AddI64,a,n.i64(1));break;case 11:s=n.binary(c.BinaryOp.AddF32,a,n.f32(1));break;case 12:s=n.binary(c.BinaryOp.AddF64,a,n.f64(1));break;default:return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"++",this.currentType.toString()),n.unreachable()}break;case d.Token.MINUS_MINUS:if(this.currentType.is(256)){var y,m;if(y=this.currentType.classReference)if(m=y.lookupOverload(p.OperatorKind.POSTFIX_DEC)){_=m.is(u.CommonFlags.INSTANCE);if(null===o||_||(a=c.getLocalSetValue(a),i.freeTempLocal(o),o=null),s=this.compileUnaryOverload(m,e.operand,a,e),m.is(u.CommonFlags.INSTANCE))break;return s}return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"--",this.currentType.toString()),o&&i.freeTempLocal(o),n.unreachable()}switch(this.currentType.kind){case 0:case 1:case 2:case 5:case 6:case 7:case 10:s=n.binary(c.BinaryOp.SubI32,a,n.i32(1));break;case 9:case 4:h=this.options;s=n.binary(h.isWasm64?c.BinaryOp.SubI64:c.BinaryOp.SubI32,a,this.currentType.toNativeOne(n));break;case 3:case 8:s=n.binary(c.BinaryOp.SubI64,a,n.i64(1));break;case 11:s=n.binary(c.BinaryOp.SubF32,a,n.f32(1));break;case 12:s=n.binary(c.BinaryOp.SubF64,a,n.f64(1));break;default:return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"--",this.currentType.toString()),n.unreachable()}break;default:return assert(!1),n.unreachable()}var f=this.resolver,g=f.lookupExpression(e.operand,i);if(!g)return o&&i.freeTempLocal(o),n.unreachable();if(!o)return this.makeAssignment(g,s,e.operand,f.currentThisExpression,f.currentElementExpression,!1);var E=this.makeAssignment(g,s,e.operand,f.currentThisExpression,f.currentElementExpression,!1);this.currentType=o.type,i.freeTempLocal(o);var v=o.type.toNativeType();return n.block(null,[E,n.local_get(o.index,v)],v)},r.prototype.compileUnaryPrefixExpression=function(e,r,t){var n,i=this.module,a=!1;switch(e.operator){case d.Token.PLUS:if(n=this.compileExpression(e.operand,r.exceptVoid,0),this.currentType.is(256)){if(s=this.currentType.classReference)if(o=s.lookupOverload(p.OperatorKind.PLUS))return this.compileUnaryOverload(o,e.operand,n,e);return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"+",this.currentType.toString()),i.unreachable()}break;case d.Token.MINUS:if(e.operand.kind==y.NodeKind.LITERAL&&(e.operand.literalKind==y.LiteralKind.INTEGER||e.operand.literalKind==y.LiteralKind.FLOAT)){n=this.compileLiteralExpression(e.operand,r,0,!0),this.options.sourceMap&&this.addDebugLocation(n,e.range);break}if(n=this.compileExpression(e.operand,r.exceptVoid,0),this.currentType.is(256)){if(s=this.currentType.classReference)if(o=s.lookupOverload(p.OperatorKind.MINUS))return this.compileUnaryOverload(o,e.operand,n,e);return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"-",this.currentType.toString()),i.unreachable()}switch(this.currentType.kind){case 0:case 1:case 2:case 5:case 6:case 7:case 10:n=i.binary(c.BinaryOp.SubI32,i.i32(0),n);break;case 9:case 4:n=i.binary(this.options.isWasm64?c.BinaryOp.SubI64:c.BinaryOp.SubI32,this.currentType.toNativeZero(i),n);break;case 3:case 8:n=i.binary(c.BinaryOp.SubI64,i.i64(0),n);break;case 11:n=i.unary(c.UnaryOp.NegF32,n);break;case 12:n=i.unary(c.UnaryOp.NegF64,n);break;default:this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"-",this.currentType.toString()),n=i.unreachable()}break;case d.Token.PLUS_PLUS:if(a=!0,n=this.compileExpression(e.operand,r.exceptVoid,0),this.currentType.is(256)){if(s=this.currentType.classReference)if(o=s.lookupOverload(p.OperatorKind.PREFIX_INC)){if(n=this.compileUnaryOverload(o,e.operand,n,e),o.is(u.CommonFlags.INSTANCE))break;return n}return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"++",this.currentType.toString()),i.unreachable()}switch(this.currentType.kind){case 0:case 1:case 2:case 5:case 6:case 7:case 10:n=i.binary(c.BinaryOp.AddI32,n,this.module.i32(1));break;case 9:case 4:n=i.binary(this.options.isWasm64?c.BinaryOp.AddI64:c.BinaryOp.AddI32,n,this.currentType.toNativeOne(i));break;case 3:case 8:n=i.binary(c.BinaryOp.AddI64,n,i.i64(1));break;case 11:n=i.binary(c.BinaryOp.AddF32,n,i.f32(1));break;case 12:n=i.binary(c.BinaryOp.AddF64,n,i.f64(1));break;default:this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"++",this.currentType.toString()),n=i.unreachable()}break;case d.Token.MINUS_MINUS:if(a=!0,n=this.compileExpression(e.operand,r.exceptVoid,0),this.currentType.is(256)){if(s=this.currentType.classReference)if(o=s.lookupOverload(p.OperatorKind.PREFIX_DEC)){if(n=this.compileUnaryOverload(o,e.operand,n,e),o.is(u.CommonFlags.INSTANCE))break;return n}return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"--",this.currentType.toString()),i.unreachable()}switch(this.currentType.kind){case 0:case 1:case 2:case 5:case 6:case 7:case 10:n=i.binary(c.BinaryOp.SubI32,n,i.i32(1));break;case 9:case 4:n=i.binary(this.options.isWasm64?c.BinaryOp.SubI64:c.BinaryOp.SubI32,n,this.currentType.toNativeOne(i));break;case 3:case 8:n=i.binary(c.BinaryOp.SubI64,n,i.i64(1));break;case 11:n=i.binary(c.BinaryOp.SubF32,n,i.f32(1));break;case 12:n=i.binary(c.BinaryOp.SubF64,n,i.f64(1));break;default:this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"--",this.currentType.toString()),n=i.unreachable()}break;case d.Token.EXCLAMATION:if(n=this.compileExpression(e.operand,r.exceptVoid,0),this.currentType.is(256))if(s=this.currentType.classReference)if(o=s.lookupOverload(p.OperatorKind.NOT))return this.compileUnaryOverload(o,e.operand,n,e);n=i.unary(c.UnaryOp.EqzI32,this.makeIsTrueish(n,this.currentType)),this.currentType=T.Type.bool;break;case d.Token.TILDE:if(n=this.compileExpression(e.operand,r==T.Type.void?T.Type.i32:r.is(8)?T.Type.i64:r,0),this.currentType.is(256)){var s,o;if(s=this.currentType.classReference)if(o=s.lookupOverload(p.OperatorKind.BITWISE_NOT))return this.compileUnaryOverload(o,e.operand,n,e);return this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"~",this.currentType.toString()),i.unreachable()}switch(n=this.convertExpression(n,this.currentType,this.currentType.intType,!1,!1,e.operand),this.currentType.kind){case 0:case 1:case 2:case 5:case 6:case 7:case 10:n=i.binary(c.BinaryOp.XorI32,n,i.i32(-1));break;case 9:case 4:n=i.binary(this.options.isWasm64?c.BinaryOp.XorI64:c.BinaryOp.XorI32,n,this.currentType.toNativeNegOne(i));break;case 3:case 8:n=i.binary(c.BinaryOp.XorI64,n,i.i64(-1,-1));break;default:this.error(l.DiagnosticCode.The_0_operator_cannot_be_applied_to_type_1,e.range,"~",this.currentType.toString()),n=i.unreachable()}break;case d.Token.TYPEOF:return this.compileTypeof(e,r,t);default:return assert(!1),i.unreachable()}if(!a)return n;var _=this.resolver,h=_.lookupExpression(e.operand,this.currentFlow);return h?this.makeAssignment(h,n,e.operand,_.currentThisExpression,_.currentElementExpression,r!=T.Type.void):i.unreachable()},r.prototype.compileTypeof=function(e,r,t){var n,i=e.operand,a=0,s=this.program.stringInstance;if(i.kind==y.NodeKind.NULL)n="object";else{var o=this.resolver.lookupExpression(i,this.currentFlow,T.Type.auto,h.ReportMode.SWALLOW);if(o)switch(o.kind){case p.ElementKind.CLASS_PROTOTYPE:case p.ElementKind.NAMESPACE:case p.ElementKind.ENUM:n="object";break;case p.ElementKind.FUNCTION_PROTOTYPE:n="function";break;default:a=this.compileExpression(i,T.Type.auto);var l=this.currentType;if(a=this.convertExpression(a,l,T.Type.void,!0,!1,i),l.is(256))if(l.signatureReference)n="function";else{var c=l.classReference;n=c?c.prototype===s.prototype?"string":"object":"anyref"}else n=l==T.Type.bool?"boolean":l.isAny(12)?"number":"undefined"}else{switch(i.kind){case y.NodeKind.PROPERTYACCESS:case y.NodeKind.ELEMENTACCESS:if(i.kind,y.NodeKind.PROPERTYACCESS,i=i.expression,!this.resolver.resolveExpression(i,this.currentFlow,T.Type.auto,h.ReportMode.REPORT))return this.currentType=s.type,this.module.unreachable();a=this.compileExpression(i,T.Type.auto);break;case y.NodeKind.IDENTIFIER:break;default:a=this.compileExpression(i,T.Type.auto)}n="undefined"}}return this.currentType=s.type,a?this.module.block(null,[a,this.ensureStaticString(n)],this.options.nativeSizeType):this.ensureStaticString(n)},r.prototype.ensureSmallIntegerWrap=function(e,r){var t=this.module,n=this.currentFlow;switch(r.kind){case 0:n.canOverflow(e,r)&&(e=this.options.hasFeature(1)?t.unary(c.UnaryOp.ExtendI8ToI32,e):t.binary(c.BinaryOp.ShrI32,t.binary(c.BinaryOp.ShlI32,e,t.i32(24)),t.i32(24)));break;case 1:n.canOverflow(e,r)&&(e=this.options.hasFeature(1)?t.unary(c.UnaryOp.ExtendI16ToI32,e):t.binary(c.BinaryOp.ShrI32,t.binary(c.BinaryOp.ShlI32,e,t.i32(16)),t.i32(16)));break;case 5:n.canOverflow(e,r)&&(e=t.binary(c.BinaryOp.AndI32,e,t.i32(255)));break;case 6:n.canOverflow(e,r)&&(e=t.binary(c.BinaryOp.AndI32,e,t.i32(65535)));break;case 10:n.canOverflow(e,r)&&(e=t.binary(c.BinaryOp.NeI32,e,t.i32(0)))}return e},r.prototype.addDebugLocation=function(e,r){var t=this.currentFlow.parentFunction,n=r.source;n.debugInfoIndex<0&&(n.debugInfoIndex=this.module.addDebugInfoFile(n.normalizedPath)),r.debugInfoRef=e,t.debugLocations.push(r)},r.prototype.makeIsTrueish=function(e,r){var t=this.module;switch(r.kind){case 0:case 1:case 5:case 6:e=this.ensureSmallIntegerWrap(e,r);case 10:case 2:case 7:return e;case 3:case 8:return t.binary(c.BinaryOp.NeI64,e,t.i64(0));case 9:this.skippedAutoreleases.has(e)&&(e=this.makeAutorelease(e));case 4:return 64==r.size?t.binary(c.BinaryOp.NeI64,e,t.i64(0)):e;case 11:var n=(a=this.currentFlow).getTempLocal(T.Type.f32),i=t.binary(c.BinaryOp.AndI32,t.binary(c.BinaryOp.NeF32,t.local_tee(n.index,e),t.f32(0)),t.binary(c.BinaryOp.EqF32,t.local_get(n.index,c.NativeType.F32),t.local_get(n.index,c.NativeType.F32)));return a.freeTempLocal(n),i;case 12:var a;n=(a=this.currentFlow).getTempLocal(T.Type.f64),i=t.binary(c.BinaryOp.AndI32,t.binary(c.BinaryOp.NeF64,t.local_tee(n.index,e),t.f64(0)),t.binary(c.BinaryOp.EqF64,t.local_get(n.index,c.NativeType.F64),t.local_get(n.index,c.NativeType.F64)));return a.freeTempLocal(n),i;default:return assert(!1),t.i32(0)}},r.prototype.makeAllocation=function(e){var r=this.program;assert(e.program==r);var t=this.module,n=this.options;this.currentType=e.type;var i=r.allocInstance;return this.compileFunction(i),t.call(i.internalName,[n.isWasm64?t.i64(e.currentMemoryOffset):t.i32(e.currentMemoryOffset),t.i32(e.hasDecorator(p.DecoratorFlags.UNMANAGED)?0:e.id)],n.nativeSizeType)},r.prototype.makeFieldInitialization=function(e,r){var t,n;void 0===r&&(r=[]);var i=e.members;if(!i)return[];var s=this.module,o=this.currentFlow,l=o.is(32768),c=l?assert(o.lookupLocal(u.CommonSymbols.this_)).index:0,_=this.options.nativeSizeType;try{for(var h=a(i.values()),d=h.next();!d.done;d=h.next()){var y=d.value;if(y.kind==p.ElementKind.FIELD&&y.parent==e){var T=y;assert(!T.isAny(u.CommonFlags.CONST));var m=T.type,f=m.toNativeType(),g=T.prototype,E=g.initializerNode,v=g.parameterIndex,b=void 0;E?(b=this.compileExpression(E,m,17),m.isManaged&&!this.skippedAutoreleases.has(b)&&(b=this.makeRetain(b))):v>=0?(b=s.local_get(l?assert(o.lookupLocal(T.name)).index:1+v,f),m.isManaged&&(b=this.makeRetain(b))):b=m.toNativeZero(s),r.push(s.store(m.byteSize,s.local_get(c,_),b,f,T.memoryOffset))}}}catch(e){t={error:e}}finally{try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(t)throw t.error}}return r},r.prototype.makeInstanceOfClass=function(e,r){var t=this.module,n=this.currentFlow,i=n.getTempLocal(T.Type.i32),a=t.load(4,!1,t.binary(c.BinaryOp.SubI32,e,t.i32(this.program.runtimeHeaderSize)),c.NativeType.I32),s="instanceof_"+r.name+"|"+n.pushBreakLabel(),o=[];return o.push(t.drop(t.br(s,t.binary(c.BinaryOp.EqI32,t.local_tee(i.index,a),t.i32(r.id)),t.i32(1)))),o.push(t.i32(0)),n.freeTempLocal(i),n.popBreakLabel(),t.block(s,o,c.NativeType.I32)},r}(l.DiagnosticEmitter);function b(e,r){if(g=r.range.source.simplePath,E=p.mangleInternalName(e.name,e.parent,e.is(u.CommonFlags.INSTANCE),!0),e.hasDecorator(p.DecoratorFlags.EXTERNAL)){var t=e.program,n=assert(y.findDecorator(y.DecoratorKind.EXTERNAL,r.decorators)),i=n.arguments;if(i&&i.length){var a=i[0];a.kind==y.NodeKind.LITERAL&&a.literalKind==y.LiteralKind.STRING?(E=a.value,i.length>=2&&((a=i[1]).kind==y.NodeKind.LITERAL&&a.literalKind==y.LiteralKind.STRING?(g=E,E=a.value,i.length>2&&t.error(l.DiagnosticCode.Expected_0_arguments_but_got_1,n.range,"2",i.length.toString())):t.error(l.DiagnosticCode.String_literal_expected,a.range))):t.error(l.DiagnosticCode.String_literal_expected,a.range)}else t.error(l.DiagnosticCode.Expected_at_least_0_arguments_but_got_1,n.range,"1","0")}}function I(e,r,t){var n=r.length;if(0==n)return e.nop();if(1==n){var i=r[0];if(c.getExpressionType(i)==t)return i;if(c.getExpressionId(i)==c.ExpressionId.Block){for(var a=c.getBlockChildCount(i),s=new Array(a),o=0;o<a;++o)s[o]=c.getBlockChild(i,o);return e.block(c.getBlockName(i),s,t)}}return e.block(null,r,t==c.NativeType.Auto?c.getExpressionType(r[n-1]):t)}r.Compiler=v,r.flatten=I},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e){e[e.Not_implemented=100]="Not_implemented",e[e.Operation_is_unsafe=101]="Operation_is_unsafe",e[e.User_defined_0=102]="User_defined_0",e[e.Feature_0_is_not_enabled=103]="Feature_0_is_not_enabled",e[e.Conversion_from_type_0_to_1_requires_an_explicit_cast=200]="Conversion_from_type_0_to_1_requires_an_explicit_cast",e[e.Conversion_from_type_0_to_1_will_require_an_explicit_cast_when_switching_between_32_64_bit=201]="Conversion_from_type_0_to_1_will_require_an_explicit_cast_when_switching_between_32_64_bit",e[e.Type_0_cannot_be_changed_to_type_1=202]="Type_0_cannot_be_changed_to_type_1",e[e.Operation_0_cannot_be_applied_to_type_1=203]="Operation_0_cannot_be_applied_to_type_1",e[e.Basic_type_0_cannot_be_nullable=204]="Basic_type_0_cannot_be_nullable",e[e.Cannot_export_a_mutable_global=205]="Cannot_export_a_mutable_global",e[e.Mutable_value_cannot_be_inlined=206]="Mutable_value_cannot_be_inlined",e[e.Unmanaged_classes_cannot_extend_managed_classes_and_vice_versa=207]="Unmanaged_classes_cannot_extend_managed_classes_and_vice_versa",e[e.Unmanaged_classes_cannot_implement_interfaces=208]="Unmanaged_classes_cannot_implement_interfaces",e[e.Invalid_regular_expression_flags=209]="Invalid_regular_expression_flags",e[e.Expression_is_never_null=210]="Expression_is_never_null",e[e.Class_0_is_sealed_and_cannot_be_extended=211]="Class_0_is_sealed_and_cannot_be_extended",e[e.Decorator_0_is_not_valid_here=212]="Decorator_0_is_not_valid_here",e[e.Duplicate_decorator=213]="Duplicate_decorator",e[e.Type_0_is_illegal_in_this_context=214]="Type_0_is_illegal_in_this_context",e[e.Optional_parameter_must_have_an_initializer=215]="Optional_parameter_must_have_an_initializer",e[e.Constructor_of_class_0_must_not_require_any_arguments=216]="Constructor_of_class_0_must_not_require_any_arguments",e[e.Function_0_cannot_be_inlined_into_itself=217]="Function_0_cannot_be_inlined_into_itself",e[e.Cannot_access_method_0_without_calling_it_as_it_requires_this_to_be_set=218]="Cannot_access_method_0_without_calling_it_as_it_requires_this_to_be_set",e[e.Optional_properties_are_not_supported=219]="Optional_properties_are_not_supported",e[e.Expression_must_be_a_compile_time_constant=220]="Expression_must_be_a_compile_time_constant",e[e.Type_0_is_not_a_function_index_or_function_reference=221]="Type_0_is_not_a_function_index_or_function_reference",e[e._0_must_be_a_value_between_1_and_2_inclusive=222]="_0_must_be_a_value_between_1_and_2_inclusive",e[e._0_must_be_a_power_of_two=223]="_0_must_be_a_power_of_two",e[e._0_is_not_a_valid_operator=224]="_0_is_not_a_valid_operator",e[e.Expression_cannot_be_represented_by_a_type=225]="Expression_cannot_be_represented_by_a_type",e[e.Unterminated_string_literal=1002]="Unterminated_string_literal",e[e.Identifier_expected=1003]="Identifier_expected",e[e._0_expected=1005]="_0_expected",e[e.A_file_cannot_have_a_reference_to_itself=1006]="A_file_cannot_have_a_reference_to_itself",e[e.Trailing_comma_not_allowed=1009]="Trailing_comma_not_allowed",e[e.Unexpected_token=1012]="Unexpected_token",e[e.A_rest_parameter_must_be_last_in_a_parameter_list=1014]="A_rest_parameter_must_be_last_in_a_parameter_list",e[e.Parameter_cannot_have_question_mark_and_initializer=1015]="Parameter_cannot_have_question_mark_and_initializer",e[e.A_required_parameter_cannot_follow_an_optional_parameter=1016]="A_required_parameter_cannot_follow_an_optional_parameter",e[e.Statements_are_not_allowed_in_ambient_contexts=1036]="Statements_are_not_allowed_in_ambient_contexts",e[e.Initializers_are_not_allowed_in_ambient_contexts=1039]="Initializers_are_not_allowed_in_ambient_contexts",e[e._0_modifier_cannot_be_used_here=1042]="_0_modifier_cannot_be_used_here",e[e.A_rest_parameter_cannot_be_optional=1047]="A_rest_parameter_cannot_be_optional",e[e.A_rest_parameter_cannot_have_an_initializer=1048]="A_rest_parameter_cannot_have_an_initializer",e[e.A_set_accessor_must_have_exactly_one_parameter=1049]="A_set_accessor_must_have_exactly_one_parameter",e[e.A_set_accessor_parameter_cannot_have_an_initializer=1052]="A_set_accessor_parameter_cannot_have_an_initializer",e[e.A_get_accessor_cannot_have_parameters=1054]="A_get_accessor_cannot_have_parameters",e[e.Enum_member_must_have_initializer=1061]="Enum_member_must_have_initializer",e[e.Type_parameters_cannot_appear_on_a_constructor_declaration=1092]="Type_parameters_cannot_appear_on_a_constructor_declaration",e[e.Type_annotation_cannot_appear_on_a_constructor_declaration=1093]="Type_annotation_cannot_appear_on_a_constructor_declaration",e[e.An_accessor_cannot_have_type_parameters=1094]="An_accessor_cannot_have_type_parameters",e[e.A_set_accessor_cannot_have_a_return_type_annotation=1095]="A_set_accessor_cannot_have_a_return_type_annotation",e[e.Type_parameter_list_cannot_be_empty=1098]="Type_parameter_list_cannot_be_empty",e[e.A_continue_statement_can_only_be_used_within_an_enclosing_iteration_statement=1104]="A_continue_statement_can_only_be_used_within_an_enclosing_iteration_statement",e[e.A_break_statement_can_only_be_used_within_an_enclosing_iteration_or_switch_statement=1105]="A_break_statement_can_only_be_used_within_an_enclosing_iteration_or_switch_statement",e[e.A_return_statement_can_only_be_used_within_a_function_body=1108]="A_return_statement_can_only_be_used_within_a_function_body",e[e.Expression_expected=1109]="Expression_expected",e[e.Type_expected=1110]="Type_expected",e[e.A_default_clause_cannot_appear_more_than_once_in_a_switch_statement=1113]="A_default_clause_cannot_appear_more_than_once_in_a_switch_statement",e[e.Duplicate_label_0=1114]="Duplicate_label_0",e[e.An_export_assignment_cannot_have_modifiers=1120]="An_export_assignment_cannot_have_modifiers",e[e.Octal_literals_are_not_allowed_in_strict_mode=1121]="Octal_literals_are_not_allowed_in_strict_mode",e[e.Digit_expected=1124]="Digit_expected",e[e.Hexadecimal_digit_expected=1125]="Hexadecimal_digit_expected",e[e.Unexpected_end_of_text=1126]="Unexpected_end_of_text",e[e.Invalid_character=1127]="Invalid_character",e[e._case_or_default_expected=1130]="_case_or_default_expected",e[e._super_must_be_followed_by_an_argument_list_or_member_access=1034]="_super_must_be_followed_by_an_argument_list_or_member_access",e[e.A_declare_modifier_cannot_be_used_in_an_already_ambient_context=1038]="A_declare_modifier_cannot_be_used_in_an_already_ambient_context",e[e.Type_argument_expected=1140]="Type_argument_expected",e[e.String_literal_expected=1141]="String_literal_expected",e[e.Line_break_not_permitted_here=1142]="Line_break_not_permitted_here",e[e.Declaration_expected=1146]="Declaration_expected",e[e._const_declarations_must_be_initialized=1155]="_const_declarations_must_be_initialized",e[e.Unterminated_regular_expression_literal=1161]="Unterminated_regular_expression_literal",e[e.Interface_declaration_cannot_have_implements_clause=1176]="Interface_declaration_cannot_have_implements_clause",e[e.Binary_digit_expected=1177]="Binary_digit_expected",e[e.Octal_digit_expected=1178]="Octal_digit_expected",e[e.An_implementation_cannot_be_declared_in_ambient_contexts=1183]="An_implementation_cannot_be_declared_in_ambient_contexts",e[e.An_extended_Unicode_escape_value_must_be_between_0x0_and_0x10FFFF_inclusive=1198]="An_extended_Unicode_escape_value_must_be_between_0x0_and_0x10FFFF_inclusive",e[e.Unterminated_Unicode_escape_sequence=1199]="Unterminated_Unicode_escape_sequence",e[e.Decorators_are_not_valid_here=1206]="Decorators_are_not_valid_here",e[e._abstract_modifier_can_only_appear_on_a_class_method_or_property_declaration=1242]="_abstract_modifier_can_only_appear_on_a_class_method_or_property_declaration",e[e.Method_0_cannot_have_an_implementation_because_it_is_marked_abstract=1245]="Method_0_cannot_have_an_implementation_because_it_is_marked_abstract",e[e.A_definite_assignment_assertion_is_not_permitted_in_this_context=1255]="A_definite_assignment_assertion_is_not_permitted_in_this_context",e[e.A_class_may_only_extend_another_class=1311]="A_class_may_only_extend_another_class",e[e.A_parameter_property_cannot_be_declared_using_a_rest_parameter=1317]="A_parameter_property_cannot_be_declared_using_a_rest_parameter",e[e.Duplicate_identifier_0=2300]="Duplicate_identifier_0",e[e.Cannot_find_name_0=2304]="Cannot_find_name_0",e[e.Module_0_has_no_exported_member_1=2305]="Module_0_has_no_exported_member_1",e[e.Generic_type_0_requires_1_type_argument_s=2314]="Generic_type_0_requires_1_type_argument_s",e[e.Type_0_is_not_generic=2315]="Type_0_is_not_generic",e[e.Type_0_is_not_assignable_to_type_1=2322]="Type_0_is_not_assignable_to_type_1",e[e.Index_signature_is_missing_in_type_0=2329]="Index_signature_is_missing_in_type_0",e[e._this_cannot_be_referenced_in_current_location=2332]="_this_cannot_be_referenced_in_current_location",e[e._super_can_only_be_referenced_in_a_derived_class=2335]="_super_can_only_be_referenced_in_a_derived_class",e[e.Super_calls_are_not_permitted_outside_constructors_or_in_nested_functions_inside_constructors=2337]="Super_calls_are_not_permitted_outside_constructors_or_in_nested_functions_inside_constructors",e[e.Property_0_does_not_exist_on_type_1=2339]="Property_0_does_not_exist_on_type_1",e[e.Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures=2349]="Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures",e[e.This_expression_is_not_constructable=2351]="This_expression_is_not_constructable",e[e.A_function_whose_declared_type_is_not_void_must_return_a_value=2355]="A_function_whose_declared_type_is_not_void_must_return_a_value",e[e.The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_or_a_property_access=2357]="The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_or_a_property_access",e[e.The_left_hand_side_of_an_assignment_expression_must_be_a_variable_or_a_property_access=2364]="The_left_hand_side_of_an_assignment_expression_must_be_a_variable_or_a_property_access",e[e.Operator_0_cannot_be_applied_to_types_1_and_2=2365]="Operator_0_cannot_be_applied_to_types_1_and_2",e[e.A_super_call_must_be_the_first_statement_in_the_constructor=2376]="A_super_call_must_be_the_first_statement_in_the_constructor",e[e.Constructors_for_derived_classes_must_contain_a_super_call=2377]="Constructors_for_derived_classes_must_contain_a_super_call",e[e._get_and_set_accessor_must_have_the_same_type=2380]="_get_and_set_accessor_must_have_the_same_type",e[e.Constructor_implementation_is_missing=2390]="Constructor_implementation_is_missing",e[e.Function_implementation_is_missing_or_not_immediately_following_the_declaration=2391]="Function_implementation_is_missing_or_not_immediately_following_the_declaration",e[e.Multiple_constructor_implementations_are_not_allowed=2392]="Multiple_constructor_implementations_are_not_allowed",e[e.Duplicate_function_implementation=2393]="Duplicate_function_implementation",e[e.Individual_declarations_in_merged_declaration_0_must_be_all_exported_or_all_local=2395]="Individual_declarations_in_merged_declaration_0_must_be_all_exported_or_all_local",e[e.A_namespace_declaration_cannot_be_located_prior_to_a_class_or_function_with_which_it_is_merged=2434]="A_namespace_declaration_cannot_be_located_prior_to_a_class_or_function_with_which_it_is_merged",e[e.The_type_argument_for_type_parameter_0_cannot_be_inferred_from_the_usage_Consider_specifying_the_type_arguments_explicitly=2453]="The_type_argument_for_type_parameter_0_cannot_be_inferred_from_the_usage_Consider_specifying_the_type_arguments_explicitly",e[e.Type_0_has_no_property_1=2460]="Type_0_has_no_property_1",e[e.The_0_operator_cannot_be_applied_to_type_1=2469]="The_0_operator_cannot_be_applied_to_type_1",e[e.In_const_enum_declarations_member_initializer_must_be_constant_expression=2474]="In_const_enum_declarations_member_initializer_must_be_constant_expression",e[e.Export_declaration_conflicts_with_exported_declaration_of_0=2484]="Export_declaration_conflicts_with_exported_declaration_of_0",e[e.Object_is_possibly_null=2531]="Object_is_possibly_null",e[e.Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property=2540]="Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property",e[e.The_target_of_an_assignment_must_be_a_variable_or_a_property_access=2541]="The_target_of_an_assignment_must_be_a_variable_or_a_property_access",e[e.Index_signature_in_type_0_only_permits_reading=2542]="Index_signature_in_type_0_only_permits_reading",e[e.Expected_0_arguments_but_got_1=2554]="Expected_0_arguments_but_got_1",e[e.Expected_at_least_0_arguments_but_got_1=2555]="Expected_at_least_0_arguments_but_got_1",e[e.Expected_0_type_arguments_but_got_1=2558]="Expected_0_type_arguments_but_got_1",e[e.A_member_initializer_in_a_enum_declaration_cannot_reference_members_declared_after_it_including_members_defined_in_other_enums=2651]="A_member_initializer_in_a_enum_declaration_cannot_reference_members_declared_after_it_including_members_defined_in_other_enums",e[e.Constructor_of_class_0_is_private_and_only_accessible_within_the_class_declaration=2673]="Constructor_of_class_0_is_private_and_only_accessible_within_the_class_declaration",e[e.Constructor_of_class_0_is_protected_and_only_accessible_within_the_class_declaration=2674]="Constructor_of_class_0_is_protected_and_only_accessible_within_the_class_declaration",e[e.The_this_types_of_each_signature_are_incompatible=2685]="The_this_types_of_each_signature_are_incompatible",e[e.Namespace_0_has_no_exported_member_1=2694]="Namespace_0_has_no_exported_member_1",e[e.Required_type_parameters_may_not_follow_optional_type_parameters=2706]="Required_type_parameters_may_not_follow_optional_type_parameters",e[e.Duplicate_property_0=2718]="Duplicate_property_0",e[e.Type_0_has_no_call_signatures=2757]="Type_0_has_no_call_signatures",e[e.File_0_not_found=6054]="File_0_not_found",e[e.Numeric_separators_are_not_allowed_here=6188]="Numeric_separators_are_not_allowed_here",e[e.Multiple_consecutive_numeric_separators_are_not_permitted=6189]="Multiple_consecutive_numeric_separators_are_not_permitted",e[e._super_must_be_called_before_accessing_this_in_the_constructor_of_a_derived_class=17009]="_super_must_be_called_before_accessing_this_in_the_constructor_of_a_derived_class",e[e._super_must_be_called_before_accessing_a_property_of_super_in_the_constructor_of_a_derived_class=17011]="_super_must_be_called_before_accessing_a_property_of_super_in_the_constructor_of_a_derived_class"}(r.DiagnosticCode||(r.DiagnosticCode={})),r.diagnosticCodeToString=function(e){switch(e){case 100:return"Not implemented.";case 101:return"Operation is unsafe.";case 102:return"User-defined: {0}";case 103:return"Feature '{0}' is not enabled.";case 200:return"Conversion from type '{0}' to '{1}' requires an explicit cast.";case 201:return"Conversion from type '{0}' to '{1}' will require an explicit cast when switching between 32/64-bit.";case 202:return"Type '{0}' cannot be changed to type '{1}'.";case 203:return"Operation '{0}' cannot be applied to type '{1}'.";case 204:return"Basic type '{0}' cannot be nullable.";case 205:return"Cannot export a mutable global.";case 206:return"Mutable value cannot be inlined.";case 207:return"Unmanaged classes cannot extend managed classes and vice-versa.";case 208:return"Unmanaged classes cannot implement interfaces.";case 209:return"Invalid regular expression flags.";case 210:return"Expression is never 'null'.";case 211:return"Class '{0}' is sealed and cannot be extended.";case 212:return"Decorator '{0}' is not valid here.";case 213:return"Duplicate decorator.";case 214:return"Type '{0}' is illegal in this context.";case 215:return"Optional parameter must have an initializer.";case 216:return"Constructor of class '{0}' must not require any arguments.";case 217:return"Function '{0}' cannot be inlined into itself.";case 218:return"Cannot access method '{0}' without calling it as it requires 'this' to be set.";case 219:return"Optional properties are not supported.";case 220:return"Expression must be a compile-time constant.";case 221:return"Type '{0}' is not a function index or function reference.";case 222:return"'{0}' must be a value between '{1}' and '{2}' inclusive.";case 223:return"'{0}' must be a power of two.";case 224:return"'{0}' is not a valid operator.";case 225:return"Expression cannot be represented by a type.";case 1002:return"Unterminated string literal.";case 1003:return"Identifier expected.";case 1005:return"'{0}' expected.";case 1006:return"A file cannot have a reference to itself.";case 1009:return"Trailing comma not allowed.";case 1012:return"Unexpected token.";case 1014:return"A rest parameter must be last in a parameter list.";case 1015:return"Parameter cannot have question mark and initializer.";case 1016:return"A required parameter cannot follow an optional parameter.";case 1036:return"Statements are not allowed in ambient contexts.";case 1039:return"Initializers are not allowed in ambient contexts.";case 1042:return"'{0}' modifier cannot be used here.";case 1047:return"A rest parameter cannot be optional.";case 1048:return"A rest parameter cannot have an initializer.";case 1049:return"A 'set' accessor must have exactly one parameter.";case 1052:return"A 'set' accessor parameter cannot have an initializer.";case 1054:return"A 'get' accessor cannot have parameters.";case 1061:return"Enum member must have initializer.";case 1092:return"Type parameters cannot appear on a constructor declaration.";case 1093:return"Type annotation cannot appear on a constructor declaration.";case 1094:return"An accessor cannot have type parameters.";case 1095:return"A 'set' accessor cannot have a return type annotation.";case 1098:return"Type parameter list cannot be empty.";case 1104:return"A 'continue' statement can only be used within an enclosing iteration statement.";case 1105:return"A 'break' statement can only be used within an enclosing iteration or switch statement.";case 1108:return"A 'return' statement can only be used within a function body.";case 1109:return"Expression expected.";case 1110:return"Type expected.";case 1113:return"A 'default' clause cannot appear more than once in a 'switch' statement.";case 1114:return"Duplicate label '{0}'.";case 1120:return"An export assignment cannot have modifiers.";case 1121:return"Octal literals are not allowed in strict mode.";case 1124:return"Digit expected.";case 1125:return"Hexadecimal digit expected.";case 1126:return"Unexpected end of text.";case 1127:return"Invalid character.";case 1130:return"'case' or 'default' expected.";case 1034:return"'super' must be followed by an argument list or member access.";case 1038:return"A 'declare' modifier cannot be used in an already ambient context.";case 1140:return"Type argument expected.";case 1141:return"String literal expected.";case 1142:return"Line break not permitted here.";case 1146:return"Declaration expected.";case 1155:return"'const' declarations must be initialized.";case 1161:return"Unterminated regular expression literal.";case 1176:return"Interface declaration cannot have 'implements' clause.";case 1177:return"Binary digit expected.";case 1178:return"Octal digit expected.";case 1183:return"An implementation cannot be declared in ambient contexts.";case 1198:return"An extended Unicode escape value must be between 0x0 and 0x10FFFF inclusive.";case 1199:return"Unterminated Unicode escape sequence.";case 1206:return"Decorators are not valid here.";case 1242:return"'abstract' modifier can only appear on a class, method, or property declaration.";case 1245:return"Method '{0}' cannot have an implementation because it is marked abstract.";case 1255:return"A definite assignment assertion '!' is not permitted in this context.";case 1311:return"A class may only extend another class.";case 1317:return"A parameter property cannot be declared using a rest parameter.";case 2300:return"Duplicate identifier '{0}'.";case 2304:return"Cannot find name '{0}'.";case 2305:return"Module '{0}' has no exported member '{1}'.";case 2314:return"Generic type '{0}' requires {1} type argument(s).";case 2315:return"Type '{0}' is not generic.";case 2322:return"Type '{0}' is not assignable to type '{1}'.";case 2329:return"Index signature is missing in type '{0}'.";case 2332:return"'this' cannot be referenced in current location.";case 2335:return"'super' can only be referenced in a derived class.";case 2337:return"Super calls are not permitted outside constructors or in nested functions inside constructors.";case 2339:return"Property '{0}' does not exist on type '{1}'.";case 2349:return"Cannot invoke an expression whose type lacks a call signature. Type '{0}' has no compatible call signatures.";case 2351:return"This expression is not constructable.";case 2355:return"A function whose declared type is not 'void' must return a value.";case 2357:return"The operand of an increment or decrement operator must be a variable or a property access.";case 2364:return"The left-hand side of an assignment expression must be a variable or a property access.";case 2365:return"Operator '{0}' cannot be applied to types '{1}' and '{2}'.";case 2376:return"A 'super' call must be the first statement in the constructor.";case 2377:return"Constructors for derived classes must contain a 'super' call.";case 2380:return"'get' and 'set' accessor must have the same type.";case 2390:return"Constructor implementation is missing.";case 2391:return"Function implementation is missing or not immediately following the declaration.";case 2392:return"Multiple constructor implementations are not allowed.";case 2393:return"Duplicate function implementation.";case 2395:return"Individual declarations in merged declaration '{0}' must be all exported or all local.";case 2434:return"A namespace declaration cannot be located prior to a class or function with which it is merged.";case 2453:return"The type argument for type parameter '{0}' cannot be inferred from the usage. Consider specifying the type arguments explicitly.";case 2460:return"Type '{0}' has no property '{1}'.";case 2469:return"The '{0}' operator cannot be applied to type '{1}'.";case 2474:return"In 'const' enum declarations member initializer must be constant expression.";case 2484:return"Export declaration conflicts with exported declaration of '{0}'.";case 2531:return"Object is possibly 'null'.";case 2540:return"Cannot assign to '{0}' because it is a constant or a read-only property.";case 2541:return"The target of an assignment must be a variable or a property access.";case 2542:return"Index signature in type '{0}' only permits reading.";case 2554:return"Expected {0} arguments, but got {1}.";case 2555:return"Expected at least {0} arguments, but got {1}.";case 2558:return"Expected {0} type arguments, but got {1}.";case 2651:return"A member initializer in a enum declaration cannot reference members declared after it, including members defined in other enums.";case 2673:return"Constructor of class '{0}' is private and only accessible within the class declaration.";case 2674:return"Constructor of class '{0}' is protected and only accessible within the class declaration.";case 2685:return"The 'this' types of each signature are incompatible.";case 2694:return"Namespace '{0}' has no exported member '{1}'.";case 2706:return"Required type parameters may not follow optional type parameters.";case 2718:return"Duplicate property '{0}'.";case 2757:return"Type '{0}' has no call signatures.";case 6054:return"File '{0}' not found.";case 6188:return"Numeric separators are not allowed here.";case 6189:return"Multiple consecutive numeric separators are not permitted.";case 17009:return"'super' must be called before accessing 'this' in the constructor of a derived class.";case 17011:return"'super' must be called before accessing a property of 'super' in the constructor of a derived class.";default:return""}}},function(e,r,t){"use strict";var n=this&&this.__values||function(e){var r="function"==typeof Symbol&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,i,a=t.call(e),s=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(t=a.return)&&t.call(a)}finally{if(i)throw i.error}}return s};Object.defineProperty(r,"__esModule",{value:!0});var a,s=t(11),o=t(2),l=t(3),c=t(6),u=t(5),p=t(4),_=t(10),h=t(9),d=t(0),y=t(1);function T(e,r,t,n,i,s,d){void 0===d&&(d=!1);var T=e.module;switch(r.internalName){case a.isInteger:var g=E(e,t,n,s);return e.currentType=c.Type.bool,g?g.is(4)&&!g.is(256)?T.i32(1):T.i32(0):T.unreachable();case a.isFloat:g=E(e,t,n,s);return e.currentType=c.Type.bool,g?g.is(8)?T.i32(1):T.i32(0):T.unreachable();case a.isBoolean:g=E(e,t,n,s);return e.currentType=c.Type.bool,g?g==c.Type.bool?T.i32(1):T.i32(0):T.unreachable();case a.isSigned:g=E(e,t,n,s);return e.currentType=c.Type.bool,g?g.is(1)?T.i32(1):T.i32(0):T.unreachable();case a.isReference:g=E(e,t,n,s);return e.currentType=c.Type.bool,g?g.is(256)?T.i32(1):T.i32(0):T.unreachable();case a.isString:g=E(e,t,n,s);if(e.currentType=c.Type.bool,!g)return T.unreachable();if(g.is(256))if(Ue=g.classReference){var O=e.program.stringInstance;if(O&&Ue.isAssignableTo(O))return T.i32(1)}return T.i32(0);case a.isArray:g=E(e,t,n,s);if(e.currentType=c.Type.bool,!g)return T.unreachable();if(g.is(256))if(Ue=g.classReference)return T.i32(Ue.prototype.extends(e.program.arrayPrototype)?1:0);return T.i32(0);case a.isArrayLike:g=E(e,t,n,s);if(e.currentType=c.Type.bool,!g)return T.unreachable();if(g.is(256))if(Ue=g.classReference)return T.i32(Ue.isArrayLike?1:0);return T.i32(0);case a.isFunction:g=E(e,t,n,s);return e.currentType=c.Type.bool,g?T.i32(g.signatureReference?1:0):T.unreachable();case a.isNullable:g=E(e,t,n,s);return e.currentType=c.Type.bool,g?T.i32(g.is(512)?1:0):T.unreachable();case a.isDefined:if(e.currentType=c.Type.bool,A(t,s,r)|N(n,1,s,e))return T.unreachable();var C=e.resolver.lookupExpression(n[0],e.currentFlow,c.Type.auto,h.ReportMode.SWALLOW);return T.i32(C?1:0);case a.isConstant:if(e.currentType=c.Type.bool,A(t,s,r)|N(n,1,s,e))return T.unreachable();var R=e.compileExpression(n[0],c.Type.auto);return e.currentType=c.Type.bool,T.i32(u.getExpressionId(R)==u.ExpressionId.Const?1:0);case a.isManaged:g=E(e,t,n,s);return e.currentType=c.Type.bool,g?T.i32(g.isManaged?1:0):T.unreachable();case a.isVoid:g=E(e,t,n,s);return e.currentType=c.Type.bool,g?T.i32(15==g.kind?1:0):T.unreachable();case a.lengthof:g=E(e,t,n,s);return e.currentType=c.Type.i32,g?(we=g.signatureReference)?T.i32(we.parameterTypes.length):(e.error(o.DiagnosticCode.Type_0_has_no_call_signatures,s.range,g.toString()),T.unreachable()):T.unreachable();case a.sizeof:return e.currentType=e.options.usizeType,I(t,s,e)|N(n,0,s,e)?T.unreachable():(L=(g=t[0]).byteSize)?e.options.isWasm64?i.is(4)&&i.size<=32?(e.currentType=c.Type.u32,T.i32(L)):T.i64(L,0):i.is(4)&&64==i.size?(e.currentType=c.Type.u64,T.i64(L,0)):T.i32(L):(e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"sizeof",g.toString()),T.unreachable());case a.alignof:if(e.currentType=e.options.usizeType,I(t,s,e)|N(n,0,s,e))return T.unreachable();var L=(g=t[0]).byteSize;if(!y.isPowerOf2(L))return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"alignof",g.toString()),T.unreachable();var k=ctz(L);return e.options.isWasm64?i.is(4)&&i.size<=32?(e.currentType=c.Type.u32,T.i32(k)):T.i64(k,0):i.is(4)&&64==i.size?(e.currentType=c.Type.u64,T.i64(k,0)):T.i32(k);case a.offsetof:if(e.currentType=e.options.usizeType,I(t,s,e)|S(n,0,1,s,e))return T.unreachable();var F=(g=t[0]).classReference;if(!g.is(256)||null===F)return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"offsetof",g.toString()),e.options.isWasm64?i.is(4)&&i.size<=32&&(e.currentType=c.Type.u32):i.is(4)&&64==i.size&&(e.currentType=c.Type.u64),T.unreachable();var D=void 0;if(n.length){if(n[0].kind!=l.NodeKind.LITERAL||n[0].literalKind!=l.LiteralKind.STRING)return e.error(o.DiagnosticCode.String_literal_expected,n[0].range),T.unreachable();var B=n[0].value,P=F.members?F.members.get(B):null;if(!P||P.kind!=p.ElementKind.FIELD)return e.error(o.DiagnosticCode.Type_0_has_no_property_1,n[0].range,F.internalName,B),T.unreachable();D=P.memoryOffset}else D=F.currentMemoryOffset;return e.options.isWasm64?i.is(4)&&i.size<=32?(e.currentType=c.Type.u32,T.i32(D)):T.i64(D):i.is(4)&&64==i.size?(e.currentType=c.Type.u64,T.i64(D)):T.i32(D);case a.nameof:var w=E(e,t,n,s);if(!w)return e.currentType=e.program.stringInstance.type,T.unreachable();var U=void 0;if(w.is(256))if(Ue=w.classReference)U=Ue.name;else U=(we=w.signatureReference)?"Function":"Anyref";else switch(w.kind){case 10:U="bool";break;case 0:U="i8";break;case 5:U="u8";break;case 1:U="i16";break;case 6:U="u16";break;case 2:U="i32";break;case 7:U="u32";break;case 11:U="f32";break;case 3:U="i64";break;case 8:U="u64";break;case 12:U="f64";break;case 4:U="isize";break;case 9:U="usize";break;case 13:U="v128";break;case 14:U="anyref";break;default:assert(!1);case 15:U="void"}return e.ensureStaticString(U);case a.clz:if(x(t,s,e,!0)|N(n,1,s,e))return T.unreachable();var M=t?e.compileExpression(n[0],t[0],5):e.compileExpression(n[0],c.Type.i32,4);if(!(g=e.currentType).is(256))switch(g.kind){case 10:case 0:case 5:case 1:case 6:case 2:case 7:return T.unary(u.UnaryOp.ClzI32,M);case 9:case 4:return T.unary(e.options.isWasm64?u.UnaryOp.ClzI64:u.UnaryOp.ClzI32,M);case 3:case 8:return T.unary(u.UnaryOp.ClzI64,M)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"clz",g.toString()),T.unreachable();case a.ctz:if(x(t,s,e,!0)|N(n,1,s,e))return T.unreachable();M=t?e.compileExpression(n[0],t[0],5):e.compileExpression(n[0],c.Type.i32,4);if(!(g=e.currentType).is(256))switch(g.kind){case 10:case 0:case 5:case 1:case 6:case 2:case 7:return T.unary(u.UnaryOp.CtzI32,M);case 9:case 4:return T.unary(e.options.isWasm64?u.UnaryOp.CtzI64:u.UnaryOp.CtzI32,M);case 3:case 8:return T.unary(u.UnaryOp.CtzI64,M)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"ctz",g.toString()),T.unreachable();case a.popcnt:if(x(t,s,e,!0)|N(n,1,s,e))return T.unreachable();M=t?e.compileExpression(n[0],t[0],5):e.compileExpression(n[0],c.Type.i32,4);if(!(g=e.currentType).is(256))switch(e.currentType.kind){case 10:case 0:case 5:case 1:case 6:case 2:case 7:return T.unary(u.UnaryOp.PopcntI32,M);case 3:case 8:return T.unary(u.UnaryOp.PopcntI64,M);case 4:case 9:return T.unary(e.options.isWasm64?u.UnaryOp.PopcntI64:u.UnaryOp.PopcntI32,M)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"popcnt",g.toString()),T.unreachable();case a.rotl:if(x(t,s,e,!0)|N(n,2,s,e))return T.unreachable();M=t?e.compileExpression(n[0],t[0],5):e.compileExpression(n[0],c.Type.i32,4);if(!(g=e.currentType).is(256)){var G=e.compileExpression(n[1],g,1);switch(g.kind){case 0:case 1:case 5:case 6:case 10:return e.ensureSmallIntegerWrap(T.binary(u.BinaryOp.RotlI32,M,G),g);case 2:case 7:return T.binary(u.BinaryOp.RotlI32,M,G);case 9:case 4:return T.binary(e.options.isWasm64?u.BinaryOp.RotlI64:u.BinaryOp.RotlI32,M,G);case 3:case 8:return T.binary(u.BinaryOp.RotlI64,M,G)}}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"rotl",g.toString()),T.unreachable();case a.rotr:if(x(t,s,e,!0)|N(n,2,s,e))return T.unreachable();M=t?e.compileExpression(n[0],t[0],5):e.compileExpression(n[0],c.Type.i32,4);if(!(g=e.currentType).is(256)){G=e.compileExpression(n[1],g,1);switch(g.kind){case 0:case 1:case 5:case 6:case 10:return e.ensureSmallIntegerWrap(T.binary(u.BinaryOp.RotrI32,M,G),g);case 2:case 7:return T.binary(u.BinaryOp.RotrI32,M,G);case 9:case 4:return T.binary(e.options.isWasm64?u.BinaryOp.RotrI64:u.BinaryOp.RotrI32,M,G);case 3:case 8:return T.binary(u.BinaryOp.RotrI64,M,G)}}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"rotr",g.toString()),T.unreachable();case a.abs:if(x(t,s,e,!0)|N(n,1,s,e))return T.unreachable();M=t?e.compileExpression(n[0],t[0],5):e.compileExpression(n[0],c.Type.auto,4);if(!(g=e.currentType).is(256))switch(g.kind){case 0:case 1:case 2:var V=(H=e.currentFlow).getTempLocal(c.Type.i32),K=H.getTempLocal(c.Type.i32),z=T.binary(u.BinaryOp.XorI32,T.binary(u.BinaryOp.AddI32,T.local_tee(K.index,T.binary(u.BinaryOp.ShrI32,T.local_tee(V.index,M),T.i32(31))),T.local_get(V.index,u.NativeType.I32)),T.local_get(K.index,u.NativeType.I32));return H.freeTempLocal(K),H.freeTempLocal(V),z;case 4:var Y=e.options,H=e.currentFlow,W=Y.isWasm64;V=H.getTempLocal(Y.usizeType),K=H.getTempLocal(Y.usizeType),z=T.binary(W?u.BinaryOp.XorI64:u.BinaryOp.XorI32,T.binary(W?u.BinaryOp.AddI64:u.BinaryOp.AddI32,T.local_tee(K.index,T.binary(W?u.BinaryOp.ShrI64:u.BinaryOp.ShrI32,T.local_tee(V.index,M),W?T.i64(63):T.i32(31))),T.local_get(V.index,Y.nativeSizeType)),T.local_get(K.index,Y.nativeSizeType));return H.freeTempLocal(K),H.freeTempLocal(V),z;case 3:V=(H=e.currentFlow).getTempLocal(c.Type.i64),K=H.getTempLocal(c.Type.i64),z=T.binary(u.BinaryOp.XorI64,T.binary(u.BinaryOp.AddI64,T.local_tee(K.index,T.binary(u.BinaryOp.ShrI64,T.local_tee(V.index,M),T.i64(63))),T.local_get(V.index,u.NativeType.I64)),T.local_get(K.index,u.NativeType.I64));return H.freeTempLocal(K),H.freeTempLocal(V),z;case 9:case 5:case 6:case 7:case 8:case 10:return M;case 11:return T.unary(u.UnaryOp.AbsF32,M);case 12:return T.unary(u.UnaryOp.AbsF64,M)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"abs",g.toString()),T.unreachable();case a.max:if(x(t,s,e,!0)|N(n,2,s,e))return T.unreachable();var X=n[0];M=t?e.compileExpression(X,t[0],5):e.compileExpression(n[0],c.Type.auto,4);if(!(g=e.currentType).is(256)){G=void 0;!t&&l.isNumericLiteral(X)?(G=e.compileExpression(n[1],g,4),e.currentType!=g&&(M=e.compileExpression(X,g=e.currentType,5))):G=e.compileExpression(n[1],g,5);var q=-1;switch(g.kind){case 0:case 1:case 2:q=u.BinaryOp.GtI32;break;case 5:case 6:case 7:case 10:q=u.BinaryOp.GtU32;break;case 3:q=u.BinaryOp.GtI64;break;case 8:q=u.BinaryOp.GtU64;break;case 4:q=e.options.isWasm64?u.BinaryOp.GtI64:u.BinaryOp.GtI32;break;case 9:q=e.options.isWasm64?u.BinaryOp.GtU64:u.BinaryOp.GtU32;break;case 11:return T.binary(u.BinaryOp.MaxF32,M,G);case 12:return T.binary(u.BinaryOp.MaxF64,M,G)}if(-1!=q){H=e.currentFlow;var Q=g.toNativeType();V=H.getTempLocal(g);H.setLocalFlag(V.index,_.LocalFlags.WRAPPED);K=H.getTempLocal(g);H.setLocalFlag(K.index,_.LocalFlags.WRAPPED);z=T.select(T.local_tee(V.index,M),T.local_tee(K.index,G),T.binary(q,T.local_get(V.index,Q),T.local_get(K.index,Q)));return H.freeTempLocal(K),H.freeTempLocal(V),z}}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"max",g.toString()),T.unreachable();case a.min:if(x(t,s,e,!0)|N(n,2,s,e))return T.unreachable();X=n[0],M=t?e.compileExpression(X,t[0],5):e.compileExpression(n[0],c.Type.auto,4);if(!(g=e.currentType).is(256)){G=void 0;!t&&l.isNumericLiteral(X)?(G=e.compileExpression(n[1],g,4),e.currentType!=g&&(M=e.compileExpression(X,g=e.currentType,5))):G=e.compileExpression(n[1],g,5);q=-1;switch(g.kind){case 0:case 1:case 2:q=u.BinaryOp.LtI32;break;case 5:case 6:case 7:case 10:q=u.BinaryOp.LtU32;break;case 3:q=u.BinaryOp.LtI64;break;case 8:q=u.BinaryOp.LtU64;break;case 4:q=e.options.isWasm64?u.BinaryOp.LtI64:u.BinaryOp.LtI32;break;case 9:q=e.options.isWasm64?u.BinaryOp.LtU64:u.BinaryOp.LtU32;break;case 11:return T.binary(u.BinaryOp.MinF32,M,G);case 12:return T.binary(u.BinaryOp.MinF64,M,G)}if(-1!=q){H=e.currentFlow,Q=g.toNativeType(),V=H.getTempLocal(g);H.setLocalFlag(V.index,_.LocalFlags.WRAPPED);K=H.getTempLocal(g);H.setLocalFlag(K.index,_.LocalFlags.WRAPPED);z=T.select(T.local_tee(V.index,M),T.local_tee(K.index,G),T.binary(q,T.local_get(V.index,Q),T.local_get(K.index,Q)));return H.freeTempLocal(K),H.freeTempLocal(V),z}}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"min",g.toString()),T.unreachable();case a.ceil:if(x(t,s,e,!0)|N(n,1,s,e))return T.unreachable();M=t?e.compileExpression(n[0],t[0],1):e.compileExpression(n[0],c.Type.auto,0);if(!(g=e.currentType).is(256))switch(g.kind){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return M;case 11:return T.unary(u.UnaryOp.CeilF32,M);case 12:return T.unary(u.UnaryOp.CeilF64,M)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"ceil",g.toString()),T.unreachable();case a.floor:if(x(t,s,e,!0)|N(n,1,s,e))return T.unreachable();M=t?e.compileExpression(n[0],t[0],1):e.compileExpression(n[0],c.Type.auto,0);if(!(g=e.currentType).is(256))switch(g.kind){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return M;case 11:return T.unary(u.UnaryOp.FloorF32,M);case 12:return T.unary(u.UnaryOp.FloorF64,M)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"floor",g.toString()),T.unreachable();case a.copysign:if(x(t,s,e,!0)|N(n,2,s,e))return T.unreachable();M=t?e.compileExpression(n[0],t[0],1):e.compileExpression(n[0],c.Type.f64,0);if(!(g=e.currentType).is(256)){G=e.compileExpression(n[1],g,1);switch(g.kind){case 11:return T.binary(u.BinaryOp.CopysignF32,M,G);case 12:return T.binary(u.BinaryOp.CopysignF64,M,G)}}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"copysign",g.toString()),T.unreachable();case a.nearest:if(x(t,s,e,!0)|N(n,1,s,e))return T.unreachable();M=t?e.compileExpression(n[0],t[0],1):e.compileExpression(n[0],c.Type.auto,0);if(!(g=e.currentType).is(256))switch(g.kind){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return M;case 11:return T.unary(u.UnaryOp.NearestF32,M);case 12:return T.unary(u.UnaryOp.NearestF64,M)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"nearest",g.toString()),T.unreachable();case a.reinterpret:if(I(t,s,e,!0)|N(n,1,s,e))return T.unreachable();if(!(g=t[0]).is(256))switch(g.kind){case 2:case 7:M=e.compileExpression(n[0],c.Type.f32,1);return e.currentType=g,T.unary(u.UnaryOp.ReinterpretF32,M);case 3:case 8:M=e.compileExpression(n[0],c.Type.f64,1);return e.currentType=g,T.unary(u.UnaryOp.ReinterpretF64,M);case 4:case 9:M=e.compileExpression(n[0],e.options.isWasm64?c.Type.f64:c.Type.f32,1);return e.currentType=g,T.unary(e.options.isWasm64?u.UnaryOp.ReinterpretF64:u.UnaryOp.ReinterpretF32,M);case 11:M=e.compileExpression(n[0],c.Type.i32,1);return e.currentType=c.Type.f32,T.unary(u.UnaryOp.ReinterpretI32,M);case 12:M=e.compileExpression(n[0],c.Type.i64,1);return e.currentType=c.Type.f64,T.unary(u.UnaryOp.ReinterpretI64,M)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"reinterpret",g.toString()),T.unreachable();case a.sqrt:if(x(t,s,e,!0)|N(n,1,s,e))return T.unreachable();M=t?e.compileExpression(n[0],t[0],1):e.compileExpression(n[0],c.Type.f64,0);if(!(g=e.currentType).is(256))switch(g.kind){case 11:return T.unary(u.UnaryOp.SqrtF32,M);case 12:return T.unary(u.UnaryOp.SqrtF64,M)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"sqrt",g.toString()),T.unreachable();case a.trunc:if(x(t,s,e,!0)|N(n,1,s,e))return T.unreachable();M=t?e.compileExpression(n[0],t[0],1):e.compileExpression(n[0],c.Type.auto,0);if(!(g=e.currentType).is(256))switch(g.kind){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return M;case 11:return T.unary(u.UnaryOp.TruncF32,M);case 12:return T.unary(u.UnaryOp.TruncF64,M)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"trunc",g.toString()),T.unreachable();case a.load:if(I(t,s,e,!0)|S(n,1,3,s,e))return T.unreachable();g=t[0];var j=i!=c.Type.auto&&g.is(4)&&i.is(4)&&i.size>g.size?i:g;M=e.compileExpression(n[0],e.options.usizeType,1);if((Pe=(pe=n.length)>=2?v(n[1],e):0)<0)return e.currentType=j,T.unreachable();var Z=void 0,J=g.byteSize;if(3==pe){if((Z=v(n[2],e))<0)return e.currentType=j,T.unreachable();if(Z>J)return e.error(o.DiagnosticCode._0_must_be_a_value_between_1_and_2_inclusive,n[2].range,"Alignment","0",J.toString()),e.currentType=j,T.unreachable();if(!y.isPowerOf2(Z))return e.error(o.DiagnosticCode._0_must_be_a_power_of_two,n[2].range,"Alignment"),e.currentType=j,T.unreachable()}else Z=J;return e.currentType=j,T.load(g.byteSize,g.is(5),M,j.toNativeType(),Pe,Z);case a.store:if(e.currentType=c.Type.void,I(t,s,e)|S(n,2,4,s,e))return T.unreachable();g=t[0],M=e.compileExpression(n[0],e.options.usizeType,1),G=d?e.compileExpression(n[1],i,1):e.compileExpression(n[1],g,g.is(4)?0:1);var $=e.currentType;if(g.is(4)&&(!$.is(4)||$.size<g.size)&&(G=e.convertExpression(G,$,g,!1,!1,n[1]),$=g),(Pe=n.length>=3?v(n[2],e):0)<0)return e.currentType=c.Type.void,T.unreachable();Z=void 0,J=g.byteSize;if(4==n.length){if((Z=v(n[3],e))<0)return e.currentType=c.Type.void,T.unreachable();if(Z>J)return e.error(o.DiagnosticCode._0_must_be_a_value_between_1_and_2_inclusive,n[3].range,"Alignment","0",J.toString()),e.currentType=c.Type.void,T.unreachable();if(!y.isPowerOf2(Z))return e.error(o.DiagnosticCode._0_must_be_a_power_of_two,n[3].range,"Alignment"),e.currentType=c.Type.void,T.unreachable()}else Z=J;return e.currentType=c.Type.void,T.store(g.byteSize,M,G,$.toNativeType(),Pe,Z);case a.atomic_load:if(b(32,s,e)|I(t,s,e,!0)|S(n,1,2,s,e))return T.unreachable();j=(g=t[0]).is(4)&&i.is(4)&&i.size>g.size?i:g;if(!g.is(4))return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"atomic.load",g.toString()),e.currentType=j,T.unreachable();M=e.compileExpression(n[0],e.options.usizeType,1);return(Pe=2==n.length?v(n[1],e):0)<0?(e.currentType=j,T.unreachable()):(e.currentType=j,T.atomic_load(g.byteSize,M,j.toNativeType(),Pe));case a.atomic_store:if(b(32,s,e)|I(t,s,e)|S(n,2,3,s,e))return T.unreachable();if(!(g=t[0]).is(4))return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"atomic.store",g.toString()),e.currentType=c.Type.void,T.unreachable();M=e.compileExpression(n[0],e.options.usizeType,1),G=d?e.compileExpression(n[1],i,1):e.compileExpression(n[1],g,g.is(4)?0:1),$=e.currentType;return g.is(4)&&(!$.is(4)||$.size<g.size)&&(G=e.convertExpression(G,$,g,!1,!1,n[1]),$=g),(Pe=3==n.length?v(n[2],e):0)<0?(e.currentType=c.Type.void,T.unreachable()):(e.currentType=c.Type.void,T.atomic_store(g.byteSize,M,G,$.toNativeType(),Pe));case a.atomic_add:case a.atomic_sub:case a.atomic_and:case a.atomic_or:case a.atomic_xor:case a.atomic_xchg:if(b(32,s,e)|I(t,s,e,!0)|S(n,2,3,s,e))return T.unreachable();if(!(g=t[0]).is(4)||g.size<8){var ee=void 0;switch(r.internalName){default:assert(!1);case a.atomic_add:ee="atomic.add";break;case a.atomic_sub:ee="atomic.sub";break;case a.atomic_and:ee="atomic.and";break;case a.atomic_or:ee="atomic.or";break;case a.atomic_xor:ee="atomic.xor";break;case a.atomic_xchg:ee="atomic.xchg"}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,ee,g.toString()),T.unreachable()}M=e.compileExpression(n[0],e.options.usizeType,1),G=d?e.compileExpression(n[1],i,1):e.compileExpression(n[1],g,g.is(4)?0:1),$=e.currentType;if(g.is(4)&&(!$.is(4)||$.size<g.size)&&(G=e.convertExpression(G,$,g,!1,!1,n[1]),$=g),(Pe=3==n.length?v(n[2],e):0)<0)return e.currentType=$,T.unreachable();q=void 0;switch(r.internalName){default:assert(!1);case a.atomic_add:q=u.AtomicRMWOp.Add;break;case a.atomic_sub:q=u.AtomicRMWOp.Sub;break;case a.atomic_and:q=u.AtomicRMWOp.And;break;case a.atomic_or:q=u.AtomicRMWOp.Or;break;case a.atomic_xor:q=u.AtomicRMWOp.Xor;break;case a.atomic_xchg:q=u.AtomicRMWOp.Xchg}return e.currentType=$,T.atomic_rmw(q,g.byteSize,Pe,M,G,$.toNativeType());case a.atomic_cmpxchg:if(b(32,s,e)|I(t,s,e,!0)|S(n,3,4,s,e))return T.unreachable();if(!(g=t[0]).is(4)||g.size<8)return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"atomic.cmpxchg",g.toString()),T.unreachable();M=e.compileExpression(n[0],e.options.usizeType,1),G=d?e.compileExpression(n[1],i,1):e.compileExpression(n[1],g,g.is(4)?0:1),$=e.currentType;var re=e.compileExpression(n[2],$,1);return g.is(4)&&(!$.is(4)||$.size<g.size)&&(G=e.convertExpression(G,$,g,!1,!1,n[1]),re=e.convertExpression(re,$,g,!1,!1,n[2]),$=g),(Pe=4==n.length?v(n[3],e):0)<0?(e.currentType=$,T.unreachable()):(e.currentType=$,T.atomic_cmpxchg(g.byteSize,Pe,M,G,re,$.toNativeType()));case a.atomic_wait:if(b(32,s,e)|I(t,s,e)|N(n,3,s,e))return e.currentType=c.Type.i32,T.unreachable();g=t[0],M=e.compileExpression(n[0],e.options.usizeType,1),G=e.compileExpression(n[1],g,1),re=e.compileExpression(n[2],c.Type.i64,1);switch(e.currentType=c.Type.i32,g.kind){case 2:case 3:case 4:case 7:case 8:case 9:return T.atomic_wait(M,G,re,g.toNativeType())}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"atomic.wait",g.toString()),T.unreachable();case a.atomic_notify:if(b(32,s,e)|A(t,s,r)|N(n,2,s,e))return e.currentType=c.Type.i32,T.unreachable();M=e.compileExpression(n[0],e.options.usizeType,1),G=e.compileExpression(n[1],c.Type.i32,1);return e.currentType=c.Type.i32,T.atomic_notify(M,G);case a.atomic_fence:return e.currentType=c.Type.void,b(32,s,e)|A(t,s,r)|N(n,0,s,e)?T.unreachable():T.atomic_fence();case a.select:if(x(t,s,e,!0)|N(n,3,s,e))return T.unreachable();M=t?e.compileExpression(n[0],t[0],1):e.compileExpression(n[0],c.Type.auto);if(!(g=e.currentType).isAny(384))return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"select",g.toString()),T.unreachable();G=e.compileExpression(n[1],g,1),re=e.makeIsTrueish(e.compileExpression(n[2],c.Type.bool),e.currentType);return e.currentType=g,T.select(M,G,re);case a.unreachable:return t&&e.error(o.DiagnosticCode.Type_0_is_not_generic,s.typeArgumentsRange,r.internalName),N(n,0,s,e),T.unreachable();case a.memory_size:return e.currentType=c.Type.i32,A(t,s,r)|N(n,0,s,e)?T.unreachable():T.host(u.HostOp.MemorySize);case a.memory_grow:return e.currentType=c.Type.i32,A(t,s,r)|N(n,1,s,e)?T.unreachable():T.host(u.HostOp.MemoryGrow,null,[e.compileExpression(n[0],c.Type.i32,1)]);case a.memory_copy:if(e.currentType=c.Type.void,A(t,s,r)|N(n,3,s,e))return T.unreachable();if(!e.options.hasFeature(8)){var te=e.resolver.resolveFunction(r,null);return e.currentType=c.Type.void,te?e.compileCallDirect(te,n,s):T.unreachable()}var ne=e.options.usizeType;M=e.compileExpression(n[0],ne,1),G=e.compileExpression(n[1],ne,1),re=e.compileExpression(n[2],ne,1);return e.currentType=c.Type.void,T.memory_copy(M,G,re);case a.memory_fill:if(e.currentType=c.Type.void,A(t,s,r)|N(n,3,s,e))return T.unreachable();if(!e.options.hasFeature(8)){te=e.resolver.resolveFunction(r,null);return e.currentType=c.Type.void,te?e.compileCallDirect(te,n,s):T.unreachable()}ne=e.options.usizeType,M=e.compileExpression(n[0],ne,1),G=e.compileExpression(n[1],c.Type.u8,1),re=e.compileExpression(n[2],ne,1);return e.currentType=c.Type.void,T.memory_fill(M,G,re);case a.changetype:if(I(t,s,e,!0)|N(n,1,s,e))return T.unreachable();var ie=t[0],ae=(M=e.compileExpression(n[0],c.Type.auto),e.currentType);return e.currentType=ie,ae.isChangeableTo(ie)?M:(e.error(o.DiagnosticCode.Type_0_cannot_be_changed_to_type_1,s.range,ae.toString(),ie.toString()),T.unreachable());case a.assert:if(x(t,s,e)|S(n,1,2,s,e))return t&&(assert(t.length),e.currentType=t[0].nonNullableType),T.unreachable();M=t?e.compileExpression(n[0],t[0],5):e.compileExpression(n[0],c.Type.bool,4),g=e.currentType;if(e.currentType=g.nonNullableType,u.getExpressionId(M=T.precomputeExpression(M))==u.ExpressionId.Const)switch(u.getExpressionType(M)){case u.NativeType.I32:if(0!=u.getConstValueI32(M))return i==c.Type.void?(e.currentType=c.Type.void,T.nop()):M;break;case u.NativeType.I64:if(0!=u.getConstValueI64Low(M)||0!=u.getConstValueI64High(M))return i==c.Type.void?(e.currentType=c.Type.void,T.nop()):M;break;case u.NativeType.F32:if(0!=u.getConstValueF32(M))return i==c.Type.void?(e.currentType=c.Type.void,T.nop()):M;break;case u.NativeType.F64:if(0!=u.getConstValueF64(M))return i==c.Type.void?(e.currentType=c.Type.void,T.nop()):M}if(e.options.noAssert)return i==c.Type.void?(e.currentType=c.Type.void,T.nop()):M;var se=f(e,2==n.length?n[1]:null,s);if(e.currentType=g.nonNullableType,i==c.Type.void)switch(e.currentType=c.Type.void,g.kind){case 0:case 1:case 2:case 5:case 6:case 7:case 10:return T.if(T.unary(u.UnaryOp.EqzI32,M),se);case 3:case 8:return T.if(T.unary(u.UnaryOp.EqzI64,M),se);case 4:case 9:return T.if(T.unary(e.options.isWasm64?u.UnaryOp.EqzI64:u.UnaryOp.EqzI32,M),se);case 11:return T.if(T.binary(u.BinaryOp.EqF32,M,T.f32(0)),se);case 12:return T.if(T.binary(u.BinaryOp.EqF64,M,T.f64(0)),se)}else{e.currentType=g.nonNullableType;H=e.currentFlow;switch(e.currentType.kind){case 0:case 1:case 2:case 5:case 6:case 7:case 10:var oe=H.getTempLocal(g);H.setLocalFlag(oe.index,_.LocalFlags.WRAPPED);z=T.if(T.local_tee(oe.index,M),T.local_get(oe.index,u.NativeType.I32),se);return H.freeTempLocal(oe),z;case 3:case 8:oe=H.getTempLocal(c.Type.i64),z=T.if(T.unary(u.UnaryOp.EqzI64,T.local_tee(oe.index,M)),se,T.local_get(oe.index,u.NativeType.I64));return H.freeTempLocal(oe),z;case 4:case 9:oe=H.getTempLocal(e.options.usizeType),z=T.if(T.unary(e.options.isWasm64?u.UnaryOp.EqzI64:u.UnaryOp.EqzI32,T.local_tee(oe.index,M)),se,T.local_get(oe.index,e.options.nativeSizeType));return H.freeTempLocal(oe),z;case 11:oe=H.getTempLocal(c.Type.f32),z=T.if(T.binary(u.BinaryOp.EqF32,T.local_tee(oe.index,M),T.f32(0)),se,T.local_get(oe.index,u.NativeType.F32));return H.freeTempLocal(oe),z;case 12:oe=H.getTempLocal(c.Type.f64),z=T.if(T.binary(u.BinaryOp.EqF64,T.local_tee(oe.index,M),T.f64(0)),se,T.local_get(oe.index,u.NativeType.F64));return H.freeTempLocal(oe),z}}return e.error(o.DiagnosticCode.Not_implemented,s.typeArgumentsRange),se;case a.unchecked:if(A(t,s,r)|N(n,1,s,e))return T.unreachable();var le=(H=e.currentFlow).is(65536);H.set(65536);var R=e.compileExpression(n[0],i);return le||H.unset(65536),R;case a.call_direct:case a.call_indirect:if(x(t,s,e,!0)|S(n,1,i32.MAX_VALUE,s,e))return T.unreachable();var ce=t?t[0]:i,ue=(M=e.compileExpression(n[0],c.Type.u32),e.currentType);if(!(ue==c.Type.u32||7==ue.kind&&ue.signatureReference))return e.error(o.DiagnosticCode.Type_0_is_not_a_function_index_or_function_reference,n[0].range,ue.toString()),T.unreachable();for(var pe=n.length-1,_e=new Array(pe),he=ce.toNativeType(),de=new Array(pe),ye=new Array(pe),Te=0;Te<pe;++Te){_e[Te]=e.compileExpression(n[1+Te],c.Type.i32);var me=e.currentType;de[Te]=me,ye[Te]=me.toNativeType()}var fe=c.Signature.makeSignatureString(de,ce),ge=T.getFunctionTypeBySignature(he,ye);if(ge||(ge=T.addFunctionType(fe,he,ye)),e.currentType=ce,r.internalName==a.call_direct){if(u.getExpressionId(M=T.precomputeExpression(M))==u.ExpressionId.Const){assert(u.getExpressionType(M)==u.NativeType.I32);var Ee=u.getConstValueI32(M),ve=e.functionTable;if(Ee>=0&&Ee<ve.length)return T.call(ve[Ee],_e,he)}return e.error(o.DiagnosticCode.Expression_must_be_a_compile_time_constant,n[0].range),T.unreachable()}return T.call_indirect(M,_e,fe);case a.instantiate:if(I(t,s,e,!0))return T.unreachable();var be=t[0],Ie=be.classReference;return be.is(256)&&null!==Ie?(e.currentType=Ie.type,e.compileInstantiate(Ie,n,0,s)):(e.error(o.DiagnosticCode.This_expression_is_not_constructable,s.expression.range),T.unreachable());case a.ERROR:return A(t,s,r),e.error(o.DiagnosticCode.User_defined_0,s.range,(n.length?n[0]:s).range.toString()),T.unreachable();case a.WARNING:return A(t,s,r),e.warning(o.DiagnosticCode.User_defined_0,s.range,(n.length?n[0]:s).range.toString()),T.nop();case a.INFO:return A(t,s,r),e.info(o.DiagnosticCode.User_defined_0,s.range,(n.length?n[0]:s).range.toString()),T.nop();case a.i8:return A(t,s,r)|N(n,1,s,e)?(e.currentType=c.Type.i8,T.unreachable()):e.compileExpression(n[0],c.Type.i8,2);case a.i16:return A(t,s,r)|N(n,1,s,e)?(e.currentType=c.Type.i16,T.unreachable()):e.compileExpression(n[0],c.Type.i16,2);case a.i32:return A(t,s,r)|N(n,1,s,e)?(e.currentType=c.Type.i32,T.unreachable()):e.compileExpression(n[0],c.Type.i32,2);case a.i64:return A(t,s,r)|N(n,1,s,e)?(e.currentType=c.Type.i64,T.unreachable()):e.compileExpression(n[0],c.Type.i64,2);case a.isize:var xe=e.options.isizeType;return A(t,s,r)|N(n,1,s,e)?(e.currentType=xe,T.unreachable()):e.compileExpression(n[0],xe,2);case a.u8:return A(t,s,r)|N(n,1,s,e)?(e.currentType=c.Type.u8,T.unreachable()):e.compileExpression(n[0],c.Type.u8,2);case a.u16:return A(t,s,r)|N(n,1,s,e)?(e.currentType=c.Type.u16,T.unreachable()):e.compileExpression(n[0],c.Type.u16,2);case a.u32:return A(t,s,r)|N(n,1,s,e)?(e.currentType=c.Type.u32,T.unreachable()):e.compileExpression(n[0],c.Type.u32,2);case a.u64:return A(t,s,r)|N(n,1,s,e)?(e.currentType=c.Type.u64,T.unreachable()):e.compileExpression(n[0],c.Type.u64,2);case a.usize:ne=e.options.usizeType;return A(t,s,r)|N(n,1,s,e)?(e.currentType=ne,T.unreachable()):e.compileExpression(n[0],ne,2);case a.bool:return A(t,s,r)|N(n,1,s,e)?(e.currentType=c.Type.bool,T.unreachable()):e.compileExpression(n[0],c.Type.bool,2);case a.f32:return A(t,s,r)|N(n,1,s,e)?(e.currentType=c.Type.f32,T.unreachable()):e.compileExpression(n[0],c.Type.f32,2);case a.f64:return A(t,s,r)|N(n,1,s,e)?(e.currentType=c.Type.f64,T.unreachable()):e.compileExpression(n[0],c.Type.f64,2);case a.v128:case a.i8x16:if(b(16,s,e)|A(t,s,r)|N(n,16,s,e))return e.currentType=c.Type.v128,T.unreachable();var Ae=new Uint8Array(16);for(Te=0;Te<16;++Te){if(U=n[Te]){R=e.precomputeExpression(U,c.Type.i8,1);if(u.getExpressionId(R)!=u.ExpressionId.Const)return e.error(o.DiagnosticCode.Expression_must_be_a_compile_time_constant,U.range),e.currentType=c.Type.v128,T.unreachable();assert(u.getExpressionType(R)==u.NativeType.I32),y.writeI8(u.getConstValueI32(R),Ae,Te)}}return e.currentType=c.Type.v128,T.v128(Ae);case a.i16x8:if(b(16,s,e)|A(t,s,r)|N(n,8,s,e))return e.currentType=c.Type.v128,T.unreachable();for(Ae=new Uint8Array(16),Te=0;Te<8;++Te){if(U=n[Te]){R=e.precomputeExpression(U,c.Type.i16,1);if(u.getExpressionId(R)!=u.ExpressionId.Const)return e.error(o.DiagnosticCode.Expression_must_be_a_compile_time_constant,U.range),e.currentType=c.Type.v128,T.unreachable();assert(u.getExpressionType(R)==u.NativeType.I32),y.writeI16(u.getConstValueI32(R),Ae,Te<<1)}}return e.currentType=c.Type.v128,T.v128(Ae);case a.i32x4:if(b(16,s,e)|A(t,s,r)|N(n,4,s,e))return e.currentType=c.Type.v128,T.unreachable();for(Ae=new Uint8Array(16),Te=0;Te<4;++Te){if(U=n[Te]){R=e.precomputeExpression(U,c.Type.i32,1);if(u.getExpressionId(R)!=u.ExpressionId.Const)return e.error(o.DiagnosticCode.Expression_must_be_a_compile_time_constant,U.range),e.currentType=c.Type.v128,T.unreachable();assert(u.getExpressionType(R)==u.NativeType.I32),y.writeI32(u.getConstValueI32(R),Ae,Te<<2)}}return e.currentType=c.Type.v128,T.v128(Ae);case a.i64x2:if(b(16,s,e)|A(t,s,r)|N(n,2,s,e))return e.currentType=c.Type.v128,T.unreachable();for(Ae=new Uint8Array(16),Te=0;Te<2;++Te){if(U=n[Te]){R=e.precomputeExpression(U,c.Type.i64,1);if(u.getExpressionId(R)!=u.ExpressionId.Const)return e.error(o.DiagnosticCode.Expression_must_be_a_compile_time_constant,U.range),e.currentType=c.Type.v128,T.unreachable();assert(u.getExpressionType(R)==u.NativeType.I64);var Ne=Te<<3;y.writeI32(u.getConstValueI64Low(R),Ae,Ne),y.writeI32(u.getConstValueI64High(R),Ae,Ne+4)}}return e.currentType=c.Type.v128,T.v128(Ae);case a.f32x4:if(b(16,s,e)|A(t,s,r)|N(n,4,s,e))return e.currentType=c.Type.v128,T.unreachable();for(Ae=new Uint8Array(16),Te=0;Te<4;++Te){if(U=n[Te]){R=e.precomputeExpression(U,c.Type.f32,1);if(u.getExpressionId(R)!=u.ExpressionId.Const)return e.error(o.DiagnosticCode.Expression_must_be_a_compile_time_constant,U.range),e.currentType=c.Type.v128,T.unreachable();assert(u.getExpressionType(R)==u.NativeType.F32),y.writeF32(u.getConstValueF32(R),Ae,Te<<2)}}return e.currentType=c.Type.v128,T.v128(Ae);case a.f64x2:if(b(16,s,e)|A(t,s,r)|N(n,2,s,e))return e.currentType=c.Type.v128,T.unreachable();for(Ae=new Uint8Array(16),Te=0;Te<2;++Te){if(U=n[Te]){R=e.precomputeExpression(U,c.Type.f64,1);if(u.getExpressionId(R)!=u.ExpressionId.Const)return e.error(o.DiagnosticCode.Expression_must_be_a_compile_time_constant,U.range),e.currentType=c.Type.v128,T.unreachable();assert(u.getExpressionType(R)==u.NativeType.F64),y.writeF64(u.getConstValueF64(R),Ae,Te<<3)}}return e.currentType=c.Type.v128,T.v128(Ae);case a.v128_splat:if(b(16,s,e)|I(t,s,e)|N(n,1,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],g,1);if(e.currentType=c.Type.v128,!g.is(256))switch(g.kind){case 0:case 5:return T.unary(u.UnaryOp.SplatI8x16,M);case 1:case 6:return T.unary(u.UnaryOp.SplatI16x8,M);case 2:case 7:return T.unary(u.UnaryOp.SplatI32x4,M);case 3:case 8:return T.unary(u.UnaryOp.SplatI64x2,M);case 4:case 9:return T.unary(e.options.isWasm64?u.UnaryOp.SplatI64x2:u.UnaryOp.SplatI32x4,M);case 11:return T.unary(u.UnaryOp.SplatF32x4,M);case 12:return T.unary(u.UnaryOp.SplatF64x2,M)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.splat",g.toString()),T.unreachable();case a.v128_extract_lane:if(b(16,s,e)|I(t,s,e,!0)|N(n,2,s,e))return T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1),G=e.precomputeExpression(n[1],c.Type.u8,1);e.currentType=g;var Se=0;if(u.getExpressionId(G)==u.ExpressionId.Const?(assert(u.getExpressionType(G)==u.NativeType.I32),Se=u.getConstValueI32(G)):e.error(o.DiagnosticCode.Expression_must_be_a_compile_time_constant,n[1].range),!g.is(256)){var Oe=16/assert(g.byteSize)-1;switch((Se<0||Se>Oe)&&(e.error(o.DiagnosticCode._0_must_be_a_value_between_1_and_2_inclusive,n[1].range,"Lane index","0",Oe.toString()),Se=0),g.kind){case 0:return T.simd_extract(u.SIMDExtractOp.ExtractLaneI8x16,M,Se);case 5:return T.simd_extract(u.SIMDExtractOp.ExtractLaneU8x16,M,Se);case 1:return T.simd_extract(u.SIMDExtractOp.ExtractLaneI16x8,M,Se);case 6:return T.simd_extract(u.SIMDExtractOp.ExtractLaneU16x8,M,Se);case 2:case 7:return T.simd_extract(u.SIMDExtractOp.ExtractLaneI32x4,M,Se);case 3:case 8:return T.simd_extract(u.SIMDExtractOp.ExtractLaneI64x2,M,Se);case 4:case 9:return T.simd_extract(e.options.isWasm64?u.SIMDExtractOp.ExtractLaneI64x2:u.SIMDExtractOp.ExtractLaneI32x4,M,Se);case 11:return T.simd_extract(u.SIMDExtractOp.ExtractLaneF32x4,M,Se);case 12:return T.simd_extract(u.SIMDExtractOp.ExtractLaneF64x2,M,Se)}}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.extract_lane",g.toString()),T.unreachable();case a.v128_replace_lane:if(b(16,s,e)|I(t,s,e)|N(n,3,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1),G=e.precomputeExpression(n[1],c.Type.u8,1),re=e.compileExpression(n[2],g,1);e.currentType=c.Type.v128;Se=0;if(u.getExpressionId(G)==u.ExpressionId.Const?(assert(u.getExpressionType(G)==u.NativeType.I32),Se=u.getConstValueI32(G)):e.error(o.DiagnosticCode.Expression_must_be_a_compile_time_constant,n[1].range),!g.is(256)){Oe=16/assert(g.byteSize)-1;switch((Se<0||Se>Oe)&&(e.error(o.DiagnosticCode._0_must_be_a_value_between_1_and_2_inclusive,n[1].range,"Lane index","0",Oe.toString()),Se=0),g.kind){case 0:case 5:return T.simd_replace(u.SIMDReplaceOp.ReplaceLaneI8x16,M,Se,re);case 1:case 6:return T.simd_replace(u.SIMDReplaceOp.ReplaceLaneI16x8,M,Se,re);case 2:case 7:return T.simd_replace(u.SIMDReplaceOp.ReplaceLaneI32x4,M,Se,re);case 3:case 8:return T.simd_replace(u.SIMDReplaceOp.ReplaceLaneI64x2,M,Se,re);case 4:case 9:return T.simd_replace(e.options.isWasm64?u.SIMDReplaceOp.ReplaceLaneI64x2:u.SIMDReplaceOp.ReplaceLaneI32x4,M,Se,re);case 11:return T.simd_replace(u.SIMDReplaceOp.ReplaceLaneF32x4,M,Se,re);case 12:return T.simd_replace(u.SIMDReplaceOp.ReplaceLaneF64x2,M,Se,re)}}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.replace_lane",g.toString()),T.unreachable();case a.v128_shuffle:if(b(16,s,e)|I(t,s,e))return e.currentType=c.Type.v128,T.unreachable();if(!(g=t[0]).is(256)){var Ce=g.byteSize,Re=16/Ce;if(assert(isInteger(Re)&&y.isPowerOf2(Re)),N(n,2+Re,s,e))return e.currentType=c.Type.v128,T.unreachable();M=e.compileExpression(n[0],c.Type.v128,1),G=e.compileExpression(n[1],c.Type.v128,1);switch(g.kind){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 11:case 12:var Le=new Uint8Array(16);for(Oe=(Re<<1)-1,Te=0;Te<Re;++Te){var ke=n[2+Te],Fe=e.precomputeExpression(ke,c.Type.u8,1);if(u.getExpressionId(Fe)!=u.ExpressionId.Const)return e.error(o.DiagnosticCode.Expression_must_be_a_compile_time_constant,ke.range),e.currentType=c.Type.v128,T.unreachable();if(assert(u.getExpressionType(Fe)==u.NativeType.I32),(Se=u.getConstValueI32(Fe))<0||Se>Oe)return e.error(o.DiagnosticCode._0_must_be_a_value_between_1_and_2_inclusive,ke.range,"Lane index","0",Oe.toString()),e.currentType=c.Type.v128,T.unreachable();switch(Ce){case 1:y.writeI8(Se,Le,Te);break;case 2:var De=Te<<1,Be=Se<<1;y.writeI8(Be,Le,De),y.writeI8(Be+1,Le,De+1);break;case 4:De=Te<<2,Be=Se<<2;y.writeI8(Be,Le,De),y.writeI8(Be+1,Le,De+1),y.writeI8(Be+2,Le,De+2),y.writeI8(Be+3,Le,De+3);break;case 8:De=Te<<3,Be=Se<<3;y.writeI8(Be,Le,De),y.writeI8(Be+1,Le,De+1),y.writeI8(Be+2,Le,De+2),y.writeI8(Be+3,Le,De+3),y.writeI8(Be+4,Le,De+4),y.writeI8(Be+5,Le,De+5),y.writeI8(Be+6,Le,De+6),y.writeI8(Be+7,Le,De+7);break;default:assert(!1)}}return e.currentType=c.Type.v128,T.simd_shuffle(M,G,Le)}}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.shuffle",g.toString()),e.currentType=c.Type.v128,T.unreachable();case a.v128_swizzle:if(b(16,s,e)|A(t,s,r)|N(n,2,s,e))return e.currentType=c.Type.v128,T.unreachable();M=e.compileExpression(n[0],c.Type.v128,1),G=e.compileExpression(n[1],c.Type.v128,1);return T.binary(u.BinaryOp.SwizzleV8x16,M,G);case a.v128_load_splat:if(b(16,s,e)|I(t,s,e,!0)|S(n,1,3,s,e))return T.unreachable();g=t[0],M=e.compileExpression(n[0],e.options.usizeType,1);if((Pe=(pe=n.length)>=2?v(n[1],e):0)<0)return e.currentType=c.Type.v128,T.unreachable();Z=void 0,J=g.byteSize;if(3==pe){if((Z=v(n[2],e))<0)return e.currentType=c.Type.v128,T.unreachable()}else Z=J;if(e.currentType=c.Type.v128,!g.is(256)){if(Z>J)return e.error(o.DiagnosticCode._0_must_be_a_value_between_1_and_2_inclusive,n[2].range,"Alignment","0",J.toString()),T.unreachable();if(!y.isPowerOf2(Z))return e.error(o.DiagnosticCode._0_must_be_a_power_of_two,n[2].range,"Alignment"),T.unreachable();switch(g.kind){case 0:case 5:return T.simd_load(u.SIMDLoadOp.LoadSplatV8x16,M,Pe,Z);case 1:case 6:return T.simd_load(u.SIMDLoadOp.LoadSplatV16x8,M,Pe,Z);case 2:case 7:case 11:return T.simd_load(u.SIMDLoadOp.LoadSplatV32x4,M,Pe,Z);case 4:case 9:if(!e.options.isWasm64)return T.simd_load(u.SIMDLoadOp.LoadSplatV32x4,M,Pe,Z);case 3:case 8:case 12:return T.simd_load(u.SIMDLoadOp.LoadSplatV64x2,M,Pe,Z)}}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.load_splat",g.toString()),T.unreachable();case a.v128_load_ext:if(b(16,s,e)|I(t,s,e,!0)|S(n,1,3,s,e))return T.unreachable();var Pe;g=t[0],M=e.compileExpression(n[0],e.options.usizeType,1);if((Pe=(pe=n.length)>=2?v(n[1],e):0)<0)return e.currentType=c.Type.v128,T.unreachable();Z=void 0,J=g.byteSize;if(3==pe){if((Z=v(n[2],e))<0)return e.currentType=c.Type.v128,T.unreachable()}else Z=J;if(e.currentType=c.Type.v128,!g.is(256)){if(Z>J)return e.error(o.DiagnosticCode._0_must_be_a_value_between_1_and_2_inclusive,n[2].range,"Alignment","0",J.toString()),T.unreachable();if(!y.isPowerOf2(Z))return e.error(o.DiagnosticCode._0_must_be_a_power_of_two,n[2].range,"Alignment"),T.unreachable();switch(g.kind){case 0:return T.simd_load(u.SIMDLoadOp.LoadI8ToI16x8,M,Pe,Z);case 5:return T.simd_load(u.SIMDLoadOp.LoadU8ToU16x8,M,Pe,Z);case 1:return T.simd_load(u.SIMDLoadOp.LoadI16ToI32x4,M,Pe,Z);case 6:return T.simd_load(u.SIMDLoadOp.LoadU16ToU32x4,M,Pe,Z);case 4:if(e.options.isWasm64)break;case 2:return T.simd_load(u.SIMDLoadOp.LoadI32ToI64x2,M,Pe,Z);case 9:if(e.options.isWasm64)break;case 7:return T.simd_load(u.SIMDLoadOp.LoadU32ToU64x2,M,Pe,Z)}}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.load_ext",g.toString()),T.unreachable();case a.v128_add:if(b(16,s,e)|I(t,s,e)|N(n,2,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1),G=e.compileExpression(n[1],c.Type.v128,1);if(!g.is(256))switch(g.kind){case 0:case 5:return T.binary(u.BinaryOp.AddI8x16,M,G);case 1:case 6:return T.binary(u.BinaryOp.AddI16x8,M,G);case 2:case 7:return T.binary(u.BinaryOp.AddI32x4,M,G);case 3:case 8:return T.binary(u.BinaryOp.AddI64x2,M,G);case 4:case 9:return T.binary(e.options.isWasm64?u.BinaryOp.AddI64x2:u.BinaryOp.AddI32x4,M,G);case 11:return T.binary(u.BinaryOp.AddF32x4,M,G);case 12:return T.binary(u.BinaryOp.AddF64x2,M,G)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.add",g.toString()),T.unreachable();case a.v128_sub:if(b(16,s,e)|I(t,s,e)|N(n,2,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1),G=e.compileExpression(n[1],c.Type.v128,1);if(!g.is(256))switch(g.kind){case 0:case 5:return T.binary(u.BinaryOp.SubI8x16,M,G);case 1:case 6:return T.binary(u.BinaryOp.SubI16x8,M,G);case 2:case 7:return T.binary(u.BinaryOp.SubI32x4,M,G);case 3:case 8:return T.binary(u.BinaryOp.SubI64x2,M,G);case 4:case 9:return T.binary(e.options.isWasm64?u.BinaryOp.SubI64x2:u.BinaryOp.SubI32x4,M,G);case 11:return T.binary(u.BinaryOp.SubF32x4,M,G);case 12:return T.binary(u.BinaryOp.SubF64x2,M,G)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.sub",g.toString()),T.unreachable();case a.v128_mul:if(b(16,s,e)|I(t,s,e)|N(n,2,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1),G=e.compileExpression(n[1],c.Type.v128,1);if(!g.is(256))switch(g.kind){case 0:case 5:return T.binary(u.BinaryOp.MulI8x16,M,G);case 1:case 6:return T.binary(u.BinaryOp.MulI16x8,M,G);case 2:case 7:return T.binary(u.BinaryOp.MulI32x4,M,G);case 4:case 9:if(!e.options.isWasm64)return T.binary(u.BinaryOp.MulI32x4,M,G);break;case 11:return T.binary(u.BinaryOp.MulF32x4,M,G);case 12:return T.binary(u.BinaryOp.MulF64x2,M,G)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.mul",g.toString()),T.unreachable();case a.v128_div:if(b(16,s,e)|I(t,s,e)|N(n,2,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1),G=e.compileExpression(n[1],c.Type.v128,1);if(!g.is(256))switch(g.kind){case 11:return T.binary(u.BinaryOp.DivF32x4,M,G);case 12:return T.binary(u.BinaryOp.DivF64x2,M,G)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.div",g.toString()),T.unreachable();case a.v128_add_saturate:if(b(16,s,e)|I(t,s,e)|N(n,2,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1),G=e.compileExpression(n[1],c.Type.v128,1);if(!g.is(256))switch(g.kind){case 0:return T.binary(u.BinaryOp.AddSatI8x16,M,G);case 5:return T.binary(u.BinaryOp.AddSatU8x16,M,G);case 1:return T.binary(u.BinaryOp.AddSatI16x8,M,G);case 6:return T.binary(u.BinaryOp.AddSatU16x8,M,G)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.add_saturate",g.toString()),T.unreachable();case a.v128_sub_saturate:if(b(16,s,e)|I(t,s,e)|N(n,2,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1),G=e.compileExpression(n[1],c.Type.v128,1);if(!g.is(256))switch(g.kind){case 0:return T.binary(u.BinaryOp.SubSatI8x16,M,G);case 5:return T.binary(u.BinaryOp.SubSatU8x16,M,G);case 1:return T.binary(u.BinaryOp.SubSatI16x8,M,G);case 6:return T.binary(u.BinaryOp.SubSatU16x8,M,G)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.sub_saturate",g.toString()),T.unreachable();case a.v128_min:if(b(16,s,e)|I(t,s,e)|N(n,2,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1),G=e.compileExpression(n[1],c.Type.v128,1);if(!g.is(256))switch(g.kind){case 11:return T.binary(u.BinaryOp.MinF32x4,M,G);case 12:return T.binary(u.BinaryOp.MinF64x2,M,G)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.min",g.toString()),T.unreachable();case a.v128_max:if(b(16,s,e)|I(t,s,e)|N(n,2,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1),G=e.compileExpression(n[1],c.Type.v128,1);if(!g.is(256))switch(g.kind){case 11:return T.binary(u.BinaryOp.MaxF32x4,M,G);case 12:return T.binary(u.BinaryOp.MaxF64x2,M,G)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.max",g.toString()),T.unreachable();case a.v128_eq:if(b(16,s,e)|I(t,s,e)|N(n,2,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1),G=e.compileExpression(n[1],c.Type.v128,1);if(!g.is(256))switch(g.kind){case 0:case 5:return T.binary(u.BinaryOp.EqI8x16,M,G);case 1:case 6:return T.binary(u.BinaryOp.EqI16x8,M,G);case 2:case 7:return T.binary(u.BinaryOp.EqI32x4,M,G);case 4:case 9:if(!e.options.isWasm64)return T.binary(u.BinaryOp.EqI32x4,M,G);break;case 11:return T.binary(u.BinaryOp.EqF32x4,M,G);case 12:return T.binary(u.BinaryOp.EqF64x2,M,G)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.eq",g.toString()),T.unreachable();case a.v128_ne:if(b(16,s,e)|I(t,s,e)|N(n,2,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1),G=e.compileExpression(n[1],c.Type.v128,1);if(!g.is(256))switch(g.kind){case 0:case 5:return T.binary(u.BinaryOp.NeI8x16,M,G);case 1:case 6:return T.binary(u.BinaryOp.NeI16x8,M,G);case 2:case 7:return T.binary(u.BinaryOp.NeI32x4,M,G);case 4:case 9:if(!e.options.isWasm64)return T.binary(u.BinaryOp.NeI32x4,M,G);break;case 11:return T.binary(u.BinaryOp.NeF32x4,M,G);case 12:return T.binary(u.BinaryOp.NeF64x2,M,G)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.ne",g.toString()),T.unreachable();case a.v128_lt:if(b(16,s,e)|I(t,s,e)|N(n,2,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1),G=e.compileExpression(n[1],c.Type.v128,1);if(!g.is(256))switch(g.kind){case 0:return T.binary(u.BinaryOp.LtI8x16,M,G);case 5:return T.binary(u.BinaryOp.LtU8x16,M,G);case 1:return T.binary(u.BinaryOp.LtI16x8,M,G);case 6:return T.binary(u.BinaryOp.LtU16x8,M,G);case 2:return T.binary(u.BinaryOp.LtI32x4,M,G);case 7:return T.binary(u.BinaryOp.LtU32x4,M,G);case 4:if(!e.options.isWasm64)return T.binary(u.BinaryOp.LtI32x4,M,G);break;case 9:if(!e.options.isWasm64)return T.binary(u.BinaryOp.LtU32x4,M,G);break;case 11:return T.binary(u.BinaryOp.LtF32x4,M,G);case 12:return T.binary(u.BinaryOp.LtF64x2,M,G)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.lt",g.toString()),T.unreachable();case a.v128_le:if(b(16,s,e)|I(t,s,e)|N(n,2,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1),G=e.compileExpression(n[1],c.Type.v128,1);if(!g.is(256))switch(g.kind){case 0:return T.binary(u.BinaryOp.LeI8x16,M,G);case 5:return T.binary(u.BinaryOp.LeU8x16,M,G);case 1:return T.binary(u.BinaryOp.LeI16x8,M,G);case 6:return T.binary(u.BinaryOp.LeU16x8,M,G);case 2:return T.binary(u.BinaryOp.LeI32x4,M,G);case 7:return T.binary(u.BinaryOp.LeU32x4,M,G);case 4:if(!e.options.isWasm64)return T.binary(u.BinaryOp.LeI32x4,M,G);break;case 9:if(!e.options.isWasm64)return T.binary(u.BinaryOp.LeU32x4,M,G);break;case 11:return T.binary(u.BinaryOp.LeF32x4,M,G);case 12:return T.binary(u.BinaryOp.LeF64x2,M,G)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.le",g.toString()),T.unreachable();case a.v128_gt:if(b(16,s,e)|I(t,s,e)|N(n,2,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1),G=e.compileExpression(n[1],c.Type.v128,1);if(!g.is(256))switch(g.kind){case 0:return T.binary(u.BinaryOp.GtI8x16,M,G);case 5:return T.binary(u.BinaryOp.GtU8x16,M,G);case 1:return T.binary(u.BinaryOp.GtI16x8,M,G);case 6:return T.binary(u.BinaryOp.GtU16x8,M,G);case 2:return T.binary(u.BinaryOp.GtI32x4,M,G);case 7:return T.binary(u.BinaryOp.GtU32x4,M,G);case 4:if(!e.options.isWasm64)return T.binary(u.BinaryOp.GtI32x4,M,G);break;case 9:if(!e.options.isWasm64)return T.binary(u.BinaryOp.GtU32x4,M,G);break;case 11:return T.binary(u.BinaryOp.GtF32x4,M,G);case 12:return T.binary(u.BinaryOp.GtF64x2,M,G)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.gt",g.toString()),T.unreachable();case a.v128_ge:if(b(16,s,e)|I(t,s,e)|N(n,2,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1),G=e.compileExpression(n[1],c.Type.v128,1);if(!g.is(256))switch(g.kind){case 0:return T.binary(u.BinaryOp.GeI8x16,M,G);case 5:return T.binary(u.BinaryOp.GeU8x16,M,G);case 1:return T.binary(u.BinaryOp.GeI16x8,M,G);case 6:return T.binary(u.BinaryOp.GeU16x8,M,G);case 2:return T.binary(u.BinaryOp.GeI32x4,M,G);case 7:return T.binary(u.BinaryOp.GeU32x4,M,G);case 4:if(!e.options.isWasm64)return T.binary(u.BinaryOp.GeI32x4,M,G);break;case 9:if(!e.options.isWasm64)return T.binary(u.BinaryOp.GeU32x4,M,G);break;case 11:return T.binary(u.BinaryOp.GeF32x4,M,G);case 12:return T.binary(u.BinaryOp.GeF64x2,M,G)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.ge",g.toString()),T.unreachable();case a.v128_narrow:if(b(16,s,e)|I(t,s,e)|N(n,2,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1),G=e.compileExpression(n[1],c.Type.v128,1);if(!g.is(256))switch(g.kind){case 1:return T.binary(u.BinaryOp.NarrowI16x8ToI8x16,M,G);case 6:return T.binary(u.BinaryOp.NarrowU16x8ToU8x16,M,G);case 2:return T.binary(u.BinaryOp.NarrowI32x4ToI16x8,M,G);case 7:return T.binary(u.BinaryOp.NarrowU32x4ToU16x8,M,G)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.narrow",g.toString()),T.unreachable();case a.v128_neg:if(b(16,s,e)|I(t,s,e)|N(n,1,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1);if(!g.is(256))switch(g.kind){case 0:case 5:return T.unary(u.UnaryOp.NegI8x16,M);case 1:case 6:return T.unary(u.UnaryOp.NegI16x8,M);case 2:case 7:return T.unary(u.UnaryOp.NegI32x4,M);case 3:case 8:return T.unary(u.UnaryOp.NegI64x2,M);case 4:case 9:return T.unary(e.options.isWasm64?u.UnaryOp.NegI64x2:u.UnaryOp.NegI32x4,M);case 11:return T.unary(u.UnaryOp.NegF32x4,M);case 12:return T.unary(u.UnaryOp.NegF64x2,M)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.neg",g.toString()),T.unreachable();case a.v128_abs:if(b(16,s,e)|I(t,s,e)|N(n,1,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1);if(!g.is(256))switch(g.kind){case 11:return T.unary(u.UnaryOp.AbsF32x4,M);case 12:return T.unary(u.UnaryOp.AbsF64x2,M)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.abs",g.toString()),T.unreachable();case a.v128_sqrt:if(b(16,s,e)|I(t,s,e)|N(n,1,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1);if(!g.is(256))switch(g.kind){case 11:return T.unary(u.UnaryOp.SqrtF32x4,M);case 12:return T.unary(u.UnaryOp.SqrtF64x2,M)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.sqrt",g.toString()),T.unreachable();case a.v128_convert:if(b(16,s,e)|I(t,s,e)|N(n,1,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1);if(!g.is(256))switch(g.kind){case 2:return T.unary(u.UnaryOp.ConvertI32x4ToF32x4,M);case 7:return T.unary(u.UnaryOp.ConvertU32x4ToF32x4,M);case 3:return T.unary(u.UnaryOp.ConvertI64x2ToF64x2,M);case 8:return T.unary(u.UnaryOp.ConvertU64x2ToF64x2,M)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.convert",g.toString()),T.unreachable();case a.v128_trunc_sat:if(b(16,s,e)|I(t,s,e)|N(n,1,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1);if(!g.is(256))switch(g.kind){case 2:return T.unary(u.UnaryOp.TruncSatF32x4ToI32x4,M);case 7:return T.unary(u.UnaryOp.TruncSatF32x4ToU32x4,M);case 3:return T.unary(u.UnaryOp.TruncSatF64x2ToI64x2,M);case 8:return T.unary(u.UnaryOp.TruncSatF64x2ToU64x2,M)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.trunc_sat",g.toString()),T.unreachable();case a.v128_widen_low:if(b(16,s,e)|I(t,s,e)|N(n,1,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1);if(!g.is(256))switch(g.kind){case 0:return T.unary(u.UnaryOp.WidenLowI8x16ToI16x8,M);case 5:return T.unary(u.UnaryOp.WidenLowU8x16ToU16x8,M);case 1:return T.unary(u.UnaryOp.WidenLowI16x8ToI32x4,M);case 6:return T.unary(u.UnaryOp.WidenLowU16x8ToU32x4,M)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.widen_low",g.toString()),T.unreachable();case a.v128_widen_high:if(b(16,s,e)|I(t,s,e)|N(n,1,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1);if(!g.is(256))switch(g.kind){case 0:return T.unary(u.UnaryOp.WidenHighI8x16ToI16x8,M);case 5:return T.unary(u.UnaryOp.WidenHighU8x16ToU16x8,M);case 1:return T.unary(u.UnaryOp.WidenHighI16x8ToI32x4,M);case 6:return T.unary(u.UnaryOp.WidenHighU16x8ToU32x4,M)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.widen_high",g.toString()),T.unreachable();case a.v128_shl:if(b(16,s,e)|I(t,s,e)|N(n,2,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1),G=e.compileExpression(n[1],c.Type.i32,1);if(e.currentType=c.Type.v128,!g.is(256))switch(g.kind){case 0:case 5:return T.simd_shift(u.SIMDShiftOp.ShlI8x16,M,G);case 1:case 6:return T.simd_shift(u.SIMDShiftOp.ShlI16x8,M,G);case 2:case 7:return T.simd_shift(u.SIMDShiftOp.ShlI32x4,M,G);case 3:case 8:return T.simd_shift(u.SIMDShiftOp.ShlI64x2,M,G);case 4:case 9:return T.simd_shift(e.options.isWasm64?u.SIMDShiftOp.ShlI64x2:u.SIMDShiftOp.ShlI32x4,M,G)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.shl",g.toString()),T.unreachable();case a.v128_shr:if(b(16,s,e)|I(t,s,e)|N(n,2,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1),G=e.compileExpression(n[1],c.Type.i32,1);if(e.currentType=c.Type.v128,!g.is(256))switch(g.kind){case 0:return T.simd_shift(u.SIMDShiftOp.ShrI8x16,M,G);case 5:return T.simd_shift(u.SIMDShiftOp.ShrU8x16,M,G);case 1:return T.simd_shift(u.SIMDShiftOp.ShrI16x8,M,G);case 6:return T.simd_shift(u.SIMDShiftOp.ShrU16x8,M,G);case 2:return T.simd_shift(u.SIMDShiftOp.ShrI32x4,M,G);case 7:return T.simd_shift(u.SIMDShiftOp.ShrU32x4,M,G);case 3:return T.simd_shift(u.SIMDShiftOp.ShrI64x2,M,G);case 8:return T.simd_shift(u.SIMDShiftOp.ShrU64x2,M,G);case 4:return T.simd_shift(e.options.isWasm64?u.SIMDShiftOp.ShrI64x2:u.SIMDShiftOp.ShrI32x4,M,G);case 9:return T.simd_shift(e.options.isWasm64?u.SIMDShiftOp.ShrU64x2:u.SIMDShiftOp.ShrU32x4,M,G)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.shr",g.toString()),T.unreachable();case a.v128_and:if(b(16,s,e)|A(t,s,r)|N(n,2,s,e))return e.currentType=c.Type.v128,T.unreachable();M=e.compileExpression(n[0],c.Type.v128,1),G=e.compileExpression(n[1],c.Type.v128,1);return T.binary(u.BinaryOp.AndV128,M,G);case a.v128_or:if(b(16,s,e)|A(t,s,r)|N(n,2,s,e))return e.currentType=c.Type.v128,T.unreachable();M=e.compileExpression(n[0],c.Type.v128,1),G=e.compileExpression(n[1],c.Type.v128,1);return T.binary(u.BinaryOp.OrV128,M,G);case a.v128_xor:if(b(16,s,e)|A(t,s,r)|N(n,2,s,e))return e.currentType=c.Type.v128,T.unreachable();M=e.compileExpression(n[0],c.Type.v128,1),G=e.compileExpression(n[1],c.Type.v128,1);return T.binary(u.BinaryOp.XorV128,M,G);case a.v128_andnot:if(b(16,s,e)|A(t,s,r)|N(n,2,s,e))return e.currentType=c.Type.v128,T.unreachable();M=e.compileExpression(n[0],c.Type.v128,1),G=e.compileExpression(n[1],c.Type.v128,1);return T.binary(u.BinaryOp.AndNotV128,M,G);case a.v128_not:if(b(16,s,e)|A(t,s,r)|N(n,1,s,e))return e.currentType=c.Type.v128,T.unreachable();M=e.compileExpression(n[0],c.Type.v128,1);return T.unary(u.UnaryOp.NotV128,M);case a.v128_bitselect:if(b(16,s,e)|A(t,s,r)|N(n,3,s,e))return e.currentType=c.Type.v128,T.unreachable();M=e.compileExpression(n[0],c.Type.v128,1),G=e.compileExpression(n[1],c.Type.v128,1),re=e.compileExpression(n[2],c.Type.v128,1);return T.simd_ternary(u.SIMDTernaryOp.Bitselect,M,G,re);case a.v128_any_true:if(b(16,s,e)|I(t,s,e)|N(n,1,s,e))return e.currentType=c.Type.bool,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1);if(e.currentType=c.Type.bool,!g.is(256))switch(g.kind){case 0:case 5:return T.unary(u.UnaryOp.AnyTrueI8x16,M);case 1:case 6:return T.unary(u.UnaryOp.AnyTrueI16x8,M);case 2:case 7:return T.unary(u.UnaryOp.AnyTrueI32x4,M);case 3:case 8:return T.unary(u.UnaryOp.AnyTrueI64x2,M);case 4:case 9:return T.unary(e.options.isWasm64?u.UnaryOp.AnyTrueI64x2:u.UnaryOp.AnyTrueI32x4,M)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.any_true",g.toString()),T.unreachable();case a.v128_all_true:if(b(16,s,e)|I(t,s,e)|N(n,1,s,e))return e.currentType=c.Type.bool,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1);if(e.currentType=c.Type.bool,!g.is(256))switch(g.kind){case 0:case 5:return T.unary(u.UnaryOp.AllTrueI8x16,M);case 1:case 6:return T.unary(u.UnaryOp.AllTrueI16x8,M);case 2:case 7:return T.unary(u.UnaryOp.AllTrueI32x4,M);case 3:case 8:return T.unary(u.UnaryOp.AllTrueI64x2,M);case 4:case 9:return T.unary(e.options.isWasm64?u.UnaryOp.AllTrueI64x2:u.UnaryOp.AllTrueI32x4,M)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.all_true",g.toString()),T.unreachable();case a.v128_qfma:if(b(16,s,e)|I(t,s,e)|N(n,3,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1),G=e.compileExpression(n[1],c.Type.v128,1),re=e.compileExpression(n[2],c.Type.v128,1);if(!g.is(256))switch(g.kind){case 11:return T.simd_ternary(u.SIMDTernaryOp.QFMAF32x4,M,G,re);case 12:return T.simd_ternary(u.SIMDTernaryOp.QFMAF64x2,M,G,re)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.qfma",g.toString()),T.unreachable();case a.v128_qfms:if(b(16,s,e)|I(t,s,e)|N(n,3,s,e))return e.currentType=c.Type.v128,T.unreachable();g=t[0],M=e.compileExpression(n[0],c.Type.v128,1),G=e.compileExpression(n[1],c.Type.v128,1),re=e.compileExpression(n[2],c.Type.v128,1);if(!g.is(256))switch(g.kind){case 11:return T.simd_ternary(u.SIMDTernaryOp.QFMSF32x4,M,G,re);case 12:return T.simd_ternary(u.SIMDTernaryOp.QFMSF64x2,M,G,re)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"v128.qfms",g.toString()),T.unreachable();case a.idof:g=E(e,t,n,s);if(e.currentType=c.Type.u32,!g)return T.unreachable();if(g.is(256)){var we,Ue;if(we=g.signatureReference)return T.i32(we.id);if(null!==(Ue=g.classReference)&&!Ue.hasDecorator(p.DecoratorFlags.UNMANAGED))return T.i32(Ue.id)}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"idof",g.toString()),T.unreachable();case a.visit_globals:if(A(t,s,r)|N(n,1,s,e))return e.currentType=c.Type.void,T.unreachable();M=e.compileExpression(n[0],c.Type.u32,1);return e.runtimeFeatures|=4,e.currentType=c.Type.void,T.call(a.visit_globals,[M],u.NativeType.None);case a.visit_members:if(A(t,s,r)|N(n,2,s,e))return e.currentType=c.Type.void,T.unreachable();M=e.compileExpression(n[0],e.options.usizeType,1),G=e.compileExpression(n[1],c.Type.u32,1);return e.runtimeFeatures|=8,e.currentType=c.Type.void,T.call(a.visit_members,[M,G],u.NativeType.None);case a.isNaN:if(x(t,s,e)|N(n,1,s,e))return e.currentType=c.Type.bool,T.unreachable();M=t?e.compileExpression(n[0],t[0],1):e.compileExpression(n[0],c.Type.auto),g=e.currentType;if(e.currentType=c.Type.bool,!g.is(256))switch(g.kind){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:return u.hasSideEffects(M)?T.block(null,[T.drop(M),T.i32(0)],u.NativeType.I32):T.i32(0);case 11:if(u.getExpressionId(M)==u.ExpressionId.LocalGet)return T.binary(u.BinaryOp.NeF32,M,T.local_get(u.getLocalGetIndex(M),u.NativeType.F32));oe=(H=e.currentFlow).getTempLocal(c.Type.f32),z=T.binary(u.BinaryOp.NeF32,T.local_tee(oe.index,M),T.local_get(oe.index,u.NativeType.F32));return H.freeTempLocal(oe),z;case 12:if(u.getExpressionId(M)==u.ExpressionId.LocalGet)return T.binary(u.BinaryOp.NeF64,M,T.local_get(u.getLocalGetIndex(M),u.NativeType.F64));oe=(H=e.currentFlow).getTempLocal(c.Type.f64),z=T.binary(u.BinaryOp.NeF64,T.local_tee(oe.index,M),T.local_get(oe.index,u.NativeType.F64));return H.freeTempLocal(oe),z}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"isNaN",g.toString()),T.unreachable();case a.isFinite:if(x(t,s,e)|N(n,1,s,e))return e.currentType=c.Type.bool,T.unreachable();M=t?e.compileExpression(n[0],t[0],1):e.compileExpression(n[0],c.Type.auto),g=e.currentType;if(e.currentType=c.Type.bool,!g.is(256))switch(g.kind){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:return u.hasSideEffects(M)?T.block(null,[T.drop(M),T.i32(1)],u.NativeType.I32):T.i32(1);case 11:if(u.getExpressionId(M)==u.ExpressionId.LocalGet)return T.binary(u.BinaryOp.EqF32,T.binary(u.BinaryOp.SubF32,M,T.local_get(u.getLocalGetIndex(M),u.NativeType.F32)),T.f32(0));oe=(H=e.currentFlow).getTempLocal(c.Type.f32),z=T.binary(u.BinaryOp.EqF32,T.binary(u.BinaryOp.SubF32,T.local_tee(oe.index,M),T.local_get(oe.index,u.NativeType.F32)),T.f32(0));return H.freeTempLocal(oe),z;case 12:if(u.getExpressionId(M)==u.ExpressionId.LocalGet)return T.binary(u.BinaryOp.EqF64,T.binary(u.BinaryOp.SubF64,M,T.local_get(u.getLocalGetIndex(M),u.NativeType.F64)),T.f64(0));oe=(H=e.currentFlow).getTempLocal(c.Type.f64),z=T.binary(u.BinaryOp.EqF64,T.binary(u.BinaryOp.SubF64,T.local_tee(oe.index,M),T.local_get(oe.index,u.NativeType.F64)),T.f64(0));return H.freeTempLocal(oe),z}return e.error(o.DiagnosticCode.Operation_0_cannot_be_applied_to_type_1,s.typeArgumentsRange,"isFinite",g.toString()),T.unreachable()}return(R=function(e,r,t,n){switch(r.internalName){case a.i32_clz:return m(a.clz,e,c.Type.i32,t,c.Type.i32,n);case a.i64_clz:return m(a.clz,e,c.Type.i64,t,c.Type.i64,n);case a.i32_ctz:return m(a.ctz,e,c.Type.i32,t,c.Type.i32,n);case a.i64_ctz:return m(a.ctz,e,c.Type.i64,t,c.Type.i64,n);case a.i32_popcnt:return m(a.popcnt,e,c.Type.i32,t,c.Type.i32,n);case a.i64_popcnt:return m(a.popcnt,e,c.Type.i64,t,c.Type.i64,n);case a.i32_rotl:return m(a.rotl,e,c.Type.i32,t,c.Type.i32,n);case a.i64_rotl:return m(a.rotl,e,c.Type.i64,t,c.Type.i64,n);case a.i32_rotr:return m(a.rotr,e,c.Type.i32,t,c.Type.i32,n);case a.i64_rotr:return m(a.rotr,e,c.Type.i64,t,c.Type.i64,n);case a.f32_abs:return m(a.abs,e,c.Type.f32,t,c.Type.f32,n);case a.f64_abs:return m(a.abs,e,c.Type.f64,t,c.Type.f64,n);case a.f32_max:return m(a.max,e,c.Type.f32,t,c.Type.f32,n);case a.f64_max:return m(a.max,e,c.Type.f64,t,c.Type.f64,n);case a.f32_min:return m(a.min,e,c.Type.f32,t,c.Type.f32,n);case a.f64_min:return m(a.min,e,c.Type.f64,t,c.Type.f64,n);case a.f32_ceil:return m(a.ceil,e,c.Type.f32,t,c.Type.f32,n);case a.f64_ceil:return m(a.ceil,e,c.Type.f64,t,c.Type.f64,n);case a.f32_floor:return m(a.floor,e,c.Type.f32,t,c.Type.f32,n);case a.f64_floor:return m(a.floor,e,c.Type.f64,t,c.Type.f64,n);case a.f32_copysign:return m(a.copysign,e,c.Type.f32,t,c.Type.f32,n);case a.f64_copysign:return m(a.copysign,e,c.Type.f64,t,c.Type.f64,n);case a.f32_nearest:return m(a.nearest,e,c.Type.f32,t,c.Type.f32,n);case a.f64_nearest:return m(a.nearest,e,c.Type.f64,t,c.Type.f64,n);case a.i32_reinterpret_f32:return m(a.reinterpret,e,c.Type.i32,t,c.Type.f32,n);case a.i64_reinterpret_f64:return m(a.reinterpret,e,c.Type.i64,t,c.Type.f64,n);case a.f32_reinterpret_i32:return m(a.reinterpret,e,c.Type.f32,t,c.Type.i32,n);case a.f64_reinterpret_i64:return m(a.reinterpret,e,c.Type.f64,t,c.Type.i64,n);case a.f32_sqrt:return m(a.sqrt,e,c.Type.f32,t,c.Type.f32,n);case a.f64_sqrt:return m(a.sqrt,e,c.Type.f64,t,c.Type.f64,n);case a.f32_trunc:return m(a.trunc,e,c.Type.f32,t,c.Type.f32,n);case a.f64_trunc:return m(a.trunc,e,c.Type.f64,t,c.Type.f64,n);case a.i32_load8_s:return m(a.load,e,c.Type.i8,t,c.Type.i32,n);case a.i32_load8_u:return m(a.load,e,c.Type.u8,t,c.Type.i32,n);case a.i32_load16_s:return m(a.load,e,c.Type.i16,t,c.Type.i32,n);case a.i32_load16_u:return m(a.load,e,c.Type.u16,t,c.Type.i32,n);case a.i32_load:return m(a.load,e,c.Type.i32,t,c.Type.i32,n);case a.i64_load8_s:return m(a.load,e,c.Type.i8,t,c.Type.i64,n);case a.i64_load8_u:return m(a.load,e,c.Type.u8,t,c.Type.i64,n);case a.i64_load16_s:return m(a.load,e,c.Type.i16,t,c.Type.i64,n);case a.i64_load16_u:return m(a.load,e,c.Type.u16,t,c.Type.i64,n);case a.i64_load32_s:return m(a.load,e,c.Type.i32,t,c.Type.i64,n);case a.i64_load32_u:return m(a.load,e,c.Type.u32,t,c.Type.i64,n);case a.i64_load:return m(a.load,e,c.Type.i64,t,c.Type.i64,n);case a.f32_load:return m(a.load,e,c.Type.f32,t,c.Type.f32,n);case a.f64_load:return m(a.load,e,c.Type.f64,t,c.Type.f64,n);case a.i32_store8:return m(a.store,e,c.Type.i8,t,c.Type.i32,n);case a.i32_store16:return m(a.store,e,c.Type.i16,t,c.Type.i32,n);case a.i32_store:return m(a.store,e,c.Type.i32,t,c.Type.i32,n);case a.i64_store8:return m(a.store,e,c.Type.i8,t,c.Type.i64,n);case a.i64_store16:return m(a.store,e,c.Type.i16,t,c.Type.i64,n);case a.i64_store32:return m(a.store,e,c.Type.i32,t,c.Type.i64,n);case a.i64_store:return m(a.store,e,c.Type.i64,t,c.Type.i64,n);case a.f32_store:return m(a.store,e,c.Type.f32,t,c.Type.f32,n);case a.f64_store:return m(a.store,e,c.Type.f64,t,c.Type.f64,n);case a.i32_atomic_load8_u:return m(a.atomic_load,e,c.Type.u8,t,c.Type.i32,n);case a.i32_atomic_load16_u:return m(a.atomic_load,e,c.Type.u16,t,c.Type.i32,n);case a.i32_atomic_load:return m(a.atomic_load,e,c.Type.i32,t,c.Type.i32,n);case a.i64_atomic_load8_u:return m(a.atomic_load,e,c.Type.u8,t,c.Type.i64,n);case a.i64_atomic_load16_u:return m(a.atomic_load,e,c.Type.u16,t,c.Type.i64,n);case a.i64_atomic_load32_u:return m(a.atomic_load,e,c.Type.u32,t,c.Type.i64,n);case a.i64_atomic_load:return m(a.atomic_load,e,c.Type.i64,t,c.Type.i64,n);case a.i32_atomic_store8:return m(a.atomic_store,e,c.Type.u8,t,c.Type.i32,n);case a.i32_atomic_store16:return m(a.atomic_store,e,c.Type.u16,t,c.Type.i32,n);case a.i32_atomic_store:return m(a.atomic_store,e,c.Type.i32,t,c.Type.i32,n);case a.i64_atomic_store8:return m(a.atomic_store,e,c.Type.u8,t,c.Type.i64,n);case a.i64_atomic_store16:return m(a.atomic_store,e,c.Type.u16,t,c.Type.i64,n);case a.i64_atomic_store32:return m(a.atomic_store,e,c.Type.u32,t,c.Type.i64,n);case a.i64_atomic_store:return m(a.atomic_store,e,c.Type.i64,t,c.Type.i64,n);case a.i32_atomic_rmw8_add_u:return m(a.atomic_add,e,c.Type.u8,t,c.Type.i32,n);case a.i32_atomic_rmw16_add_u:return m(a.atomic_add,e,c.Type.u16,t,c.Type.i32,n);case a.i32_atomic_rmw_add:return m(a.atomic_add,e,c.Type.i32,t,c.Type.i32,n);case a.i64_atomic_rmw8_add_u:return m(a.atomic_add,e,c.Type.u8,t,c.Type.i64,n);case a.i64_atomic_rmw16_add_u:return m(a.atomic_add,e,c.Type.u16,t,c.Type.i64,n);case a.i64_atomic_rmw32_add_u:return m(a.atomic_add,e,c.Type.u32,t,c.Type.i64,n);case a.i64_atomic_rmw_add:return m(a.atomic_add,e,c.Type.i64,t,c.Type.i64,n);case a.i32_atomic_rmw8_sub_u:return m(a.atomic_sub,e,c.Type.u8,t,c.Type.i32,n);case a.i32_atomic_rmw16_sub_u:return m(a.atomic_sub,e,c.Type.u16,t,c.Type.i32,n);case a.i32_atomic_rmw_sub:return m(a.atomic_sub,e,c.Type.i32,t,c.Type.i32,n);case a.i64_atomic_rmw8_sub_u:return m(a.atomic_sub,e,c.Type.u8,t,c.Type.i64,n);case a.i64_atomic_rmw16_sub_u:return m(a.atomic_sub,e,c.Type.u16,t,c.Type.i64,n);case a.i64_atomic_rmw32_sub_u:return m(a.atomic_sub,e,c.Type.u32,t,c.Type.i64,n);case a.i64_atomic_rmw_sub:return m(a.atomic_sub,e,c.Type.i64,t,c.Type.i64,n);case a.i32_atomic_rmw8_and_u:return m(a.atomic_and,e,c.Type.u8,t,c.Type.i32,n);case a.i32_atomic_rmw16_and_u:return m(a.atomic_and,e,c.Type.u16,t,c.Type.i32,n);case a.i32_atomic_rmw_and:return m(a.atomic_and,e,c.Type.i32,t,c.Type.i32,n);case a.i64_atomic_rmw8_and_u:return m(a.atomic_and,e,c.Type.u8,t,c.Type.i64,n);case a.i64_atomic_rmw16_and_u:return m(a.atomic_and,e,c.Type.u16,t,c.Type.i64,n);case a.i64_atomic_rmw32_and_u:return m(a.atomic_and,e,c.Type.u32,t,c.Type.i64,n);case a.i64_atomic_rmw_and:return m(a.atomic_and,e,c.Type.i64,t,c.Type.i64,n);case a.i32_atomic_rmw8_or_u:return m(a.atomic_or,e,c.Type.u8,t,c.Type.i32,n);case a.i32_atomic_rmw16_or_u:return m(a.atomic_or,e,c.Type.u16,t,c.Type.i32,n);case a.i32_atomic_rmw_or:return m(a.atomic_or,e,c.Type.i32,t,c.Type.i32,n);case a.i64_atomic_rmw8_or_u:return m(a.atomic_or,e,c.Type.u8,t,c.Type.i64,n);case a.i64_atomic_rmw16_or_u:return m(a.atomic_or,e,c.Type.u16,t,c.Type.i64,n);case a.i64_atomic_rmw32_or_u:return m(a.atomic_or,e,c.Type.u32,t,c.Type.i64,n);case a.i64_atomic_rmw_or:return m(a.atomic_or,e,c.Type.i64,t,c.Type.i64,n);case a.i32_atomic_rmw8_xor_u:return m(a.atomic_xor,e,c.Type.u8,t,c.Type.i32,n);case a.i32_atomic_rmw16_xor_u:return m(a.atomic_xor,e,c.Type.u16,t,c.Type.i32,n);case a.i32_atomic_rmw_xor:return m(a.atomic_xor,e,c.Type.i32,t,c.Type.i32,n);case a.i64_atomic_rmw8_xor_u:return m(a.atomic_xor,e,c.Type.u8,t,c.Type.i64,n);case a.i64_atomic_rmw16_xor_u:return m(a.atomic_xor,e,c.Type.u16,t,c.Type.i64,n);case a.i64_atomic_rmw32_xor_u:return m(a.atomic_xor,e,c.Type.u32,t,c.Type.i64,n);case a.i64_atomic_rmw_xor:return m(a.atomic_xor,e,c.Type.i64,t,c.Type.i64,n);case a.i32_atomic_rmw8_xchg_u:return m(a.atomic_xchg,e,c.Type.u8,t,c.Type.i32,n);case a.i32_atomic_rmw16_xchg_u:return m(a.atomic_xchg,e,c.Type.u16,t,c.Type.i32,n);case a.i32_atomic_rmw_xchg:return m(a.atomic_xchg,e,c.Type.i32,t,c.Type.i32,n);case a.i64_atomic_rmw8_xchg_u:return m(a.atomic_xchg,e,c.Type.u8,t,c.Type.i64,n);case a.i64_atomic_rmw16_xchg_u:return m(a.atomic_xchg,e,c.Type.u16,t,c.Type.i64,n);case a.i64_atomic_rmw32_xchg_u:return m(a.atomic_xchg,e,c.Type.u32,t,c.Type.i64,n);case a.i64_atomic_rmw_xchg:return m(a.atomic_xchg,e,c.Type.i64,t,c.Type.i64,n);case a.i32_atomic_rmw8_cmpxchg_u:return m(a.atomic_cmpxchg,e,c.Type.u8,t,c.Type.i32,n);case a.i32_atomic_rmw16_cmpxchg_u:return m(a.atomic_cmpxchg,e,c.Type.u16,t,c.Type.i32,n);case a.i32_atomic_rmw_cmpxchg:return m(a.atomic_cmpxchg,e,c.Type.i32,t,c.Type.i32,n);case a.i64_atomic_rmw8_cmpxchg_u:return m(a.atomic_cmpxchg,e,c.Type.u8,t,c.Type.i64,n);case a.i64_atomic_rmw16_cmpxchg_u:return m(a.atomic_cmpxchg,e,c.Type.u16,t,c.Type.i64,n);case a.i64_atomic_rmw32_cmpxchg_u:return m(a.atomic_cmpxchg,e,c.Type.u32,t,c.Type.i64,n);case a.i64_atomic_rmw_cmpxchg:return m(a.atomic_cmpxchg,e,c.Type.i64,t,c.Type.i64,n);case a.i32_wait:return m(a.atomic_wait,e,c.Type.i32,t,c.Type.i32,n);case a.i64_wait:return m(a.atomic_wait,e,c.Type.i64,t,c.Type.i32,n);case a.v128_load:return m(a.load,e,c.Type.v128,t,c.Type.v128,n);case a.v128_store:return m(a.store,e,c.Type.v128,t,c.Type.v128,n);case a.i8x16_splat:return m(a.v128_splat,e,c.Type.i8,t,c.Type.v128,n);case a.i8x16_extract_lane_s:return m(a.v128_extract_lane,e,c.Type.i8,t,c.Type.i8,n);case a.i8x16_extract_lane_u:return m(a.v128_extract_lane,e,c.Type.u8,t,c.Type.u8,n);case a.i8x16_replace_lane:return m(a.v128_replace_lane,e,c.Type.i8,t,c.Type.v128,n);case a.i8x16_add:return m(a.v128_add,e,c.Type.i8,t,c.Type.v128,n);case a.i8x16_sub:return m(a.v128_sub,e,c.Type.i8,t,c.Type.v128,n);case a.i8x16_mul:return m(a.v128_mul,e,c.Type.i8,t,c.Type.v128,n);case a.i8x16_neg:return m(a.v128_neg,e,c.Type.i8,t,c.Type.v128,n);case a.i8x16_add_saturate_s:return m(a.v128_add_saturate,e,c.Type.i8,t,c.Type.v128,n);case a.i8x16_add_saturate_u:return m(a.v128_add_saturate,e,c.Type.u8,t,c.Type.v128,n);case a.i8x16_sub_saturate_s:return m(a.v128_sub_saturate,e,c.Type.i8,t,c.Type.v128,n);case a.i8x16_sub_saturate_u:return m(a.v128_sub_saturate,e,c.Type.u8,t,c.Type.v128,n);case a.i8x16_shl:return m(a.v128_shl,e,c.Type.i8,t,c.Type.v128,n);case a.i8x16_shr_s:return m(a.v128_shr,e,c.Type.i8,t,c.Type.v128,n);case a.i8x16_shr_u:return m(a.v128_shr,e,c.Type.u8,t,c.Type.v128,n);case a.i8x16_any_true:return m(a.v128_any_true,e,c.Type.i8,t,c.Type.i32,n);case a.i8x16_all_true:return m(a.v128_all_true,e,c.Type.i8,t,c.Type.i32,n);case a.i8x16_eq:return m(a.v128_eq,e,c.Type.i8,t,c.Type.v128,n);case a.i8x16_ne:return m(a.v128_ne,e,c.Type.i8,t,c.Type.v128,n);case a.i8x16_lt_s:return m(a.v128_lt,e,c.Type.i8,t,c.Type.v128,n);case a.i8x16_lt_u:return m(a.v128_lt,e,c.Type.u8,t,c.Type.v128,n);case a.i8x16_le_s:return m(a.v128_le,e,c.Type.i8,t,c.Type.v128,n);case a.i8x16_le_u:return m(a.v128_le,e,c.Type.u8,t,c.Type.v128,n);case a.i8x16_gt_s:return m(a.v128_gt,e,c.Type.i8,t,c.Type.v128,n);case a.i8x16_gt_u:return m(a.v128_gt,e,c.Type.u8,t,c.Type.v128,n);case a.i8x16_ge_s:return m(a.v128_ge,e,c.Type.i8,t,c.Type.v128,n);case a.i8x16_ge_u:return m(a.v128_ge,e,c.Type.u8,t,c.Type.v128,n);case a.i8x16_narrow_i16x8_s:return m(a.v128_narrow,e,c.Type.i16,t,c.Type.v128,n);case a.i8x16_narrow_i16x8_u:return m(a.v128_narrow,e,c.Type.u16,t,c.Type.v128,n);case a.i16x8_splat:return m(a.v128_splat,e,c.Type.i16,t,c.Type.v128,n);case a.i16x8_extract_lane_s:return m(a.v128_extract_lane,e,c.Type.i16,t,c.Type.i16,n);case a.i16x8_extract_lane_u:return m(a.v128_extract_lane,e,c.Type.u16,t,c.Type.u16,n);case a.i16x8_replace_lane:return m(a.v128_replace_lane,e,c.Type.i16,t,c.Type.v128,n);case a.i16x8_add:return m(a.v128_add,e,c.Type.i16,t,c.Type.v128,n);case a.i16x8_sub:return m(a.v128_sub,e,c.Type.i16,t,c.Type.v128,n);case a.i16x8_mul:return m(a.v128_mul,e,c.Type.i16,t,c.Type.v128,n);case a.i16x8_neg:return m(a.v128_neg,e,c.Type.i16,t,c.Type.v128,n);case a.i16x8_add_saturate_s:return m(a.v128_add_saturate,e,c.Type.i16,t,c.Type.v128,n);case a.i16x8_add_saturate_u:return m(a.v128_add_saturate,e,c.Type.u16,t,c.Type.v128,n);case a.i16x8_sub_saturate_s:return m(a.v128_sub_saturate,e,c.Type.i16,t,c.Type.v128,n);case a.i16x8_sub_saturate_u:return m(a.v128_sub_saturate,e,c.Type.u16,t,c.Type.v128,n);case a.i16x8_shl:return m(a.v128_shl,e,c.Type.i16,t,c.Type.v128,n);case a.i16x8_shr_s:return m(a.v128_shr,e,c.Type.i16,t,c.Type.v128,n);case a.i16x8_shr_u:return m(a.v128_shr,e,c.Type.u16,t,c.Type.v128,n);case a.i16x8_any_true:return m(a.v128_any_true,e,c.Type.i16,t,c.Type.i32,n);case a.i16x8_all_true:return m(a.v128_all_true,e,c.Type.i16,t,c.Type.i32,n);case a.i16x8_eq:return m(a.v128_eq,e,c.Type.i16,t,c.Type.v128,n);case a.i16x8_ne:return m(a.v128_ne,e,c.Type.i16,t,c.Type.v128,n);case a.i16x8_lt_s:return m(a.v128_lt,e,c.Type.i16,t,c.Type.v128,n);case a.i16x8_lt_u:return m(a.v128_lt,e,c.Type.u16,t,c.Type.v128,n);case a.i16x8_le_s:return m(a.v128_le,e,c.Type.i16,t,c.Type.v128,n);case a.i16x8_le_u:return m(a.v128_le,e,c.Type.u16,t,c.Type.v128,n);case a.i16x8_gt_s:return m(a.v128_gt,e,c.Type.i16,t,c.Type.v128,n);case a.i16x8_gt_u:return m(a.v128_gt,e,c.Type.u16,t,c.Type.v128,n);case a.i16x8_ge_s:return m(a.v128_ge,e,c.Type.i16,t,c.Type.v128,n);case a.i16x8_ge_u:return m(a.v128_ge,e,c.Type.u16,t,c.Type.v128,n);case a.i16x8_narrow_i32x4_s:return m(a.v128_narrow,e,c.Type.i32,t,c.Type.v128,n);case a.i16x8_narrow_i32x4_u:return m(a.v128_narrow,e,c.Type.u32,t,c.Type.v128,n);case a.i16x8_widen_low_i8x16_s:return m(a.v128_widen_low,e,c.Type.i8,t,c.Type.v128,n);case a.i16x8_widen_low_i8x16_u:return m(a.v128_widen_low,e,c.Type.u8,t,c.Type.v128,n);case a.i16x8_widen_high_i8x16_s:return m(a.v128_widen_high,e,c.Type.i8,t,c.Type.v128,n);case a.i16x8_widen_high_i8x16_u:return m(a.v128_widen_high,e,c.Type.u8,t,c.Type.v128,n);case a.i16x8_load8x8_s:return m(a.v128_load_ext,e,c.Type.i8,t,c.Type.v128,n);case a.i16x8_load8x8_u:return m(a.v128_load_ext,e,c.Type.u8,t,c.Type.v128,n);case a.i32x4_splat:return m(a.v128_splat,e,c.Type.i32,t,c.Type.v128,n);case a.i32x4_extract_lane:return m(a.v128_extract_lane,e,c.Type.i32,t,c.Type.i32,n);case a.i32x4_replace_lane:return m(a.v128_replace_lane,e,c.Type.i32,t,c.Type.v128,n);case a.i32x4_add:return m(a.v128_add,e,c.Type.i32,t,c.Type.v128,n);case a.i32x4_sub:return m(a.v128_sub,e,c.Type.i32,t,c.Type.v128,n);case a.i32x4_mul:return m(a.v128_mul,e,c.Type.i32,t,c.Type.v128,n);case a.i32x4_neg:return m(a.v128_neg,e,c.Type.i32,t,c.Type.v128,n);case a.i32x4_shl:return m(a.v128_shl,e,c.Type.i32,t,c.Type.v128,n);case a.i32x4_shr_s:return m(a.v128_shr,e,c.Type.i32,t,c.Type.v128,n);case a.i32x4_shr_u:return m(a.v128_shr,e,c.Type.u32,t,c.Type.v128,n);case a.i32x4_any_true:return m(a.v128_any_true,e,c.Type.i32,t,c.Type.i32,n);case a.i32x4_all_true:return m(a.v128_all_true,e,c.Type.i32,t,c.Type.i32,n);case a.i32x4_eq:return m(a.v128_eq,e,c.Type.i32,t,c.Type.v128,n);case a.i32x4_ne:return m(a.v128_ne,e,c.Type.i32,t,c.Type.v128,n);case a.i32x4_lt_s:return m(a.v128_lt,e,c.Type.i32,t,c.Type.v128,n);case a.i32x4_lt_u:return m(a.v128_lt,e,c.Type.u32,t,c.Type.v128,n);case a.i32x4_le_s:return m(a.v128_le,e,c.Type.i32,t,c.Type.v128,n);case a.i32x4_le_u:return m(a.v128_le,e,c.Type.u32,t,c.Type.v128,n);case a.i32x4_gt_s:return m(a.v128_gt,e,c.Type.i32,t,c.Type.v128,n);case a.i32x4_gt_u:return m(a.v128_gt,e,c.Type.u32,t,c.Type.v128,n);case a.i32x4_ge_s:return m(a.v128_ge,e,c.Type.i32,t,c.Type.v128,n);case a.i32x4_ge_u:return m(a.v128_ge,e,c.Type.u32,t,c.Type.v128,n);case a.i32x4_trunc_sat_f32x4_s:return m(a.v128_trunc_sat,e,c.Type.i32,t,c.Type.v128,n);case a.i32x4_trunc_sat_f32x4_u:return m(a.v128_trunc_sat,e,c.Type.u32,t,c.Type.v128,n);case a.i32x4_widen_low_i16x8_s:return m(a.v128_widen_low,e,c.Type.i16,t,c.Type.v128,n);case a.i32x4_widen_low_i16x8_u:return m(a.v128_widen_low,e,c.Type.u16,t,c.Type.v128,n);case a.i32x4_widen_high_i16x8_s:return m(a.v128_widen_high,e,c.Type.i16,t,c.Type.v128,n);case a.i32x4_widen_high_i16x8_u:return m(a.v128_widen_high,e,c.Type.u16,t,c.Type.v128,n);case a.i32x4_load16x4_s:return m(a.v128_load_ext,e,c.Type.i16,t,c.Type.v128,n);case a.i32x4_load16x4_u:return m(a.v128_load_ext,e,c.Type.u16,t,c.Type.v128,n);case a.i64x2_splat:return m(a.v128_splat,e,c.Type.i64,t,c.Type.v128,n);case a.i64x2_extract_lane:return m(a.v128_extract_lane,e,c.Type.i64,t,c.Type.i64,n);case a.i64x2_replace_lane:return m(a.v128_replace_lane,e,c.Type.i64,t,c.Type.v128,n);case a.i64x2_add:return m(a.v128_add,e,c.Type.i64,t,c.Type.v128,n);case a.i64x2_sub:return m(a.v128_sub,e,c.Type.i64,t,c.Type.v128,n);case a.i64x2_neg:return m(a.v128_neg,e,c.Type.i64,t,c.Type.v128,n);case a.i64x2_shl:return m(a.v128_shl,e,c.Type.i64,t,c.Type.v128,n);case a.i64x2_shr_s:return m(a.v128_shr,e,c.Type.i64,t,c.Type.v128,n);case a.i64x2_shr_u:return m(a.v128_shr,e,c.Type.u64,t,c.Type.v128,n);case a.i64x2_any_true:return m(a.v128_any_true,e,c.Type.i64,t,c.Type.i32,n);case a.i64x2_all_true:return m(a.v128_all_true,e,c.Type.i64,t,c.Type.i32,n);case a.i64x2_trunc_sat_f64x2_s:return m(a.v128_trunc_sat,e,c.Type.i64,t,c.Type.v128,n);case a.i64x2_trunc_sat_f64x2_u:return m(a.v128_trunc_sat,e,c.Type.u64,t,c.Type.v128,n);case a.i64x2_load32x2_s:return m(a.v128_load_ext,e,c.Type.i32,t,c.Type.v128,n);case a.i64x2_load32x2_u:return m(a.v128_load_ext,e,c.Type.u32,t,c.Type.v128,n);case a.f32x4_splat:return m(a.v128_splat,e,c.Type.f32,t,c.Type.v128,n);case a.f32x4_extract_lane:return m(a.v128_extract_lane,e,c.Type.f32,t,c.Type.f32,n);case a.f32x4_replace_lane:return m(a.v128_replace_lane,e,c.Type.f32,t,c.Type.v128,n);case a.f32x4_add:return m(a.v128_add,e,c.Type.f32,t,c.Type.v128,n);case a.f32x4_sub:return m(a.v128_sub,e,c.Type.f32,t,c.Type.v128,n);case a.f32x4_mul:return m(a.v128_mul,e,c.Type.f32,t,c.Type.v128,n);case a.f32x4_div:return m(a.v128_div,e,c.Type.f32,t,c.Type.v128,n);case a.f32x4_neg:return m(a.v128_neg,e,c.Type.f32,t,c.Type.v128,n);case a.f32x4_min:return m(a.v128_min,e,c.Type.f32,t,c.Type.v128,n);case a.f32x4_max:return m(a.v128_max,e,c.Type.f32,t,c.Type.v128,n);case a.f32x4_abs:return m(a.v128_abs,e,c.Type.f32,t,c.Type.v128,n);case a.f32x4_sqrt:return m(a.v128_sqrt,e,c.Type.f32,t,c.Type.v128,n);case a.f32x4_eq:return m(a.v128_eq,e,c.Type.f32,t,c.Type.v128,n);case a.f32x4_ne:return m(a.v128_ne,e,c.Type.f32,t,c.Type.v128,n);case a.f32x4_lt:return m(a.v128_lt,e,c.Type.f32,t,c.Type.v128,n);case a.f32x4_le:return m(a.v128_le,e,c.Type.f32,t,c.Type.v128,n);case a.f32x4_gt:return m(a.v128_gt,e,c.Type.f32,t,c.Type.v128,n);case a.f32x4_ge:return m(a.v128_ge,e,c.Type.f32,t,c.Type.v128,n);case a.f32x4_convert_i32x4_s:return m(a.v128_convert,e,c.Type.i32,t,c.Type.v128,n);case a.f32x4_convert_i32x4_u:return m(a.v128_convert,e,c.Type.u32,t,c.Type.v128,n);case a.f32x4_qfma:return m(a.v128_qfma,e,c.Type.f32,t,c.Type.v128,n);case a.f32x4_qfms:return m(a.v128_qfms,e,c.Type.f32,t,c.Type.v128,n);case a.f64x2_splat:return m(a.v128_splat,e,c.Type.f64,t,c.Type.v128,n);case a.f64x2_extract_lane:return m(a.v128_extract_lane,e,c.Type.f64,t,c.Type.f64,n);case a.f64x2_replace_lane:return m(a.v128_replace_lane,e,c.Type.f64,t,c.Type.v128,n);case a.f64x2_add:return m(a.v128_add,e,c.Type.f64,t,c.Type.v128,n);case a.f64x2_sub:return m(a.v128_sub,e,c.Type.f64,t,c.Type.v128,n);case a.f64x2_mul:return m(a.v128_mul,e,c.Type.f64,t,c.Type.v128,n);case a.f64x2_div:return m(a.v128_div,e,c.Type.f64,t,c.Type.v128,n);case a.f64x2_neg:return m(a.v128_neg,e,c.Type.f64,t,c.Type.v128,n);case a.f64x2_min:return m(a.v128_min,e,c.Type.f64,t,c.Type.v128,n);case a.f64x2_max:return m(a.v128_max,e,c.Type.f64,t,c.Type.v128,n);case a.f64x2_abs:return m(a.v128_abs,e,c.Type.f64,t,c.Type.v128,n);case a.f64x2_sqrt:return m(a.v128_sqrt,e,c.Type.f64,t,c.Type.v128,n);case a.f64x2_eq:return m(a.v128_eq,e,c.Type.f64,t,c.Type.v128,n);case a.f64x2_ne:return m(a.v128_ne,e,c.Type.f64,t,c.Type.v128,n);case a.f64x2_lt:return m(a.v128_lt,e,c.Type.f64,t,c.Type.v128,n);case a.f64x2_le:return m(a.v128_le,e,c.Type.f64,t,c.Type.v128,n);case a.f64x2_gt:return m(a.v128_gt,e,c.Type.f64,t,c.Type.v128,n);case a.f64x2_ge:return m(a.v128_ge,e,c.Type.f64,t,c.Type.v128,n);case a.f64x2_convert_i64x2_s:return m(a.v128_convert,e,c.Type.i64,t,c.Type.v128,n);case a.f64x2_convert_i64x2_u:return m(a.v128_convert,e,c.Type.u64,t,c.Type.v128,n);case a.f64x2_qfma:return m(a.v128_qfma,e,c.Type.f64,t,c.Type.v128,n);case a.f64x2_qfms:return m(a.v128_qfms,e,c.Type.f64,t,c.Type.v128,n);case a.v8x16_shuffle:return m(a.v128_shuffle,e,c.Type.i8,t,c.Type.v128,n);case a.v8x16_swizzle:return m(a.v128_swizzle,e,null,t,c.Type.v128,n);case a.v8x16_load_splat:return m(a.v128_load_splat,e,c.Type.u8,t,c.Type.v128,n);case a.v16x8_load_splat:return m(a.v128_load_splat,e,c.Type.u16,t,c.Type.v128,n);case a.v32x4_load_splat:return m(a.v128_load_splat,e,c.Type.u32,t,c.Type.v128,n);case a.v64x2_load_splat:return m(a.v128_load_splat,e,c.Type.u64,t,c.Type.v128,n)}return 0}(e,r,n,s))?(t&&e.error(o.DiagnosticCode.Type_0_is_not_generic,s.typeArgumentsRange,r.internalName),R):(e.error(o.DiagnosticCode.Not_implemented,s.expression.range),T.unreachable())}function m(e,r,t,n,i,a){assert(r.program.elementsByName.has(e));var s=r.program.elementsByName.get(e);return assert(s.kind==p.ElementKind.FUNCTION_PROTOTYPE),T(r,s,t?[t]:null,n,i,a,!0)}function f(e,r,t){var n=e.program,i=e.module,a=e.program.stringInstance;if(!a)return i.unreachable();var s,o=n.abortInstance;if(!o||!e.compileFunction(o))return i.unreachable();s=null!==r?e.compileExpression(r,a.type,17):a.type.toNativeZero(i);var l=e.ensureStaticString(t.range.source.normalizedPath);return e.currentType=c.Type.void,i.block(null,[i.call(o.internalName,[s,l,i.i32(t.range.line),i.i32(t.range.column)],u.NativeType.None),i.unreachable()])}function g(e){var r=32*(1<<e.alignLog2);return e.is(1)&&(r|=1024),e.is(8)&&(r|=2048),e.is(512)&&(r|=4096),e.isManaged&&(r|=8192),r/32}function E(e,r,t,n){if(0==t.length)return r&&1==r.length?r[0]:(e.error(o.DiagnosticCode.Expected_0_type_arguments_but_got_1,n.typeArgumentsRange,"1",r?r.length.toString(10):"0"),null);if(1==t.length){if(null!==r&&r.length){if(r.length>1)return e.error(o.DiagnosticCode.Expected_0_type_arguments_but_got_1,n.typeArgumentsRange,"1",r.length.toString(10)),null;e.compileExpression(t[0],r[0],1)}else e.compileExpression(t[0],c.Type.auto);return e.currentType}return r&&r.length>1&&e.error(o.DiagnosticCode.Expected_0_type_arguments_but_got_1,n.typeArgumentsRange,"1",r.length.toString(10)),e.error(o.DiagnosticCode.Expected_0_arguments_but_got_1,n.argumentsRange,"1",t.length.toString(10)),null}function v(e,r){var t,n;return r.options.isWasm64?(t=r.precomputeExpression(e,c.Type.usize64,1),(u.getExpressionId(t)!=u.ExpressionId.Const||u.getExpressionType(t)!=u.NativeType.I64||0!=u.getConstValueI64High(t)||(n=u.getConstValueI64Low(t))<0)&&(r.error(o.DiagnosticCode.Expression_must_be_a_compile_time_constant,e.range),n=-1)):(t=r.precomputeExpression(e,c.Type.usize32,1),(u.getExpressionId(t)!=u.ExpressionId.Const||u.getExpressionType(t)!=u.NativeType.I32||(n=u.getConstValueI32(t))<0)&&(r.error(o.DiagnosticCode.Expression_must_be_a_compile_time_constant,e.range),n=-1)),n}function b(e,r,t){return t.options.hasFeature(e)?0:(t.error(o.DiagnosticCode.Feature_0_is_not_enabled,r.range,d.featureToString(e)),1)}function I(e,r,t,n){if(void 0===n&&(n=!1),e){var i=e.length;if(1==i)return 0;assert(i),n&&(t.currentType=e[0]),t.error(o.DiagnosticCode.Expected_0_type_arguments_but_got_1,r.typeArgumentsRange,"1",i.toString())}else t.error(o.DiagnosticCode.Expected_0_type_arguments_but_got_1,r.range,"1","0");return 1}function x(e,r,t,n){if(void 0===n&&(n=!1),e){var i=e.length;return 1==i?0:(assert(i),n&&(t.currentType=e[0]),t.error(o.DiagnosticCode.Expected_0_type_arguments_but_got_1,r.typeArgumentsRange,"1",i.toString()),1)}return 0}function A(e,r,t){return e?(t.program.error(o.DiagnosticCode.Type_0_is_not_generic,r.typeArgumentsRange,t.internalName),1):0}function N(e,r,t,n){return e.length!=r?(n.error(o.DiagnosticCode.Expected_0_arguments_but_got_1,t.range,r.toString(),e.length.toString()),1):0}function S(e,r,t,n,i){var a=e.length;return a<r?(i.error(o.DiagnosticCode.Expected_at_least_0_arguments_but_got_1,n.range,r.toString(),a.toString()),1):a>t?(i.error(o.DiagnosticCode.Expected_0_arguments_but_got_1,n.range,t.toString(),a.toString()),1):0}!function(e){e.isInteger="~lib/builtins/isInteger",e.isFloat="~lib/builtins/isFloat",e.isBoolean="~lib/builtins/isBoolean",e.isSigned="~lib/builtins/isSigned",e.isReference="~lib/builtins/isReference",e.isString="~lib/builtins/isString",e.isArray="~lib/builtins/isArray",e.isArrayLike="~lib/builtins/isArrayLike",e.isFunction="~lib/builtins/isFunction",e.isNullable="~lib/builtins/isNullable",e.isDefined="~lib/builtins/isDefined",e.isConstant="~lib/builtins/isConstant",e.isManaged="~lib/builtins/isManaged",e.isVoid="~lib/builtins/isVoid",e.clz="~lib/builtins/clz",e.ctz="~lib/builtins/ctz",e.popcnt="~lib/builtins/popcnt",e.rotl="~lib/builtins/rotl",e.rotr="~lib/builtins/rotr",e.abs="~lib/builtins/abs",e.max="~lib/builtins/max",e.min="~lib/builtins/min",e.ceil="~lib/builtins/ceil",e.floor="~lib/builtins/floor",e.copysign="~lib/builtins/copysign",e.nearest="~lib/builtins/nearest",e.reinterpret="~lib/builtins/reinterpret",e.sqrt="~lib/builtins/sqrt",e.trunc="~lib/builtins/trunc",e.load="~lib/builtins/load",e.store="~lib/builtins/store",e.atomic_load="~lib/builtins/atomic.load",e.atomic_store="~lib/builtins/atomic.store",e.atomic_add="~lib/builtins/atomic.add",e.atomic_sub="~lib/builtins/atomic.sub",e.atomic_and="~lib/builtins/atomic.and",e.atomic_or="~lib/builtins/atomic.or",e.atomic_xor="~lib/builtins/atomic.xor",e.atomic_xchg="~lib/builtins/atomic.xchg",e.atomic_cmpxchg="~lib/builtins/atomic.cmpxchg",e.atomic_wait="~lib/builtins/atomic.wait",e.atomic_notify="~lib/builtins/atomic.notify",e.atomic_fence="~lib/builtins/atomic.fence",e.sizeof="~lib/builtins/sizeof",e.alignof="~lib/builtins/alignof",e.offsetof="~lib/builtins/offsetof",e.nameof="~lib/builtins/nameof",e.lengthof="~lib/builtins/lengthof",e.select="~lib/builtins/select",e.unreachable="~lib/builtins/unreachable",e.changetype="~lib/builtins/changetype",e.assert="~lib/builtins/assert",e.unchecked="~lib/builtins/unchecked",e.call_direct="~lib/builtins/call_direct",e.call_indirect="~lib/builtins/call_indirect",e.instantiate="~lib/builtins/instantiate",e.idof="~lib/builtins/idof",e.i8="~lib/builtins/i8",e.i16="~lib/builtins/i16",e.i32="~lib/builtins/i32",e.i64="~lib/builtins/i64",e.isize="~lib/builtins/isize",e.u8="~lib/builtins/u8",e.u16="~lib/builtins/u16",e.u32="~lib/builtins/u32",e.u64="~lib/builtins/u64",e.usize="~lib/builtins/usize",e.bool="~lib/builtins/bool",e.f32="~lib/builtins/f32",e.f64="~lib/builtins/f64",e.v128="~lib/builtins/v128",e.void_="~lib/builtins/void",e.i32_clz="~lib/builtins/i32.clz",e.i64_clz="~lib/builtins/i64.clz",e.i32_ctz="~lib/builtins/i32.ctz",e.i64_ctz="~lib/builtins/i64.ctz",e.i32_popcnt="~lib/builtins/i32.popcnt",e.i64_popcnt="~lib/builtins/i64.popcnt",e.i32_rotl="~lib/builtins/i32.rotl",e.i64_rotl="~lib/builtins/i64.rotl",e.i32_rotr="~lib/builtins/i32.rotr",e.i64_rotr="~lib/builtins/i64.rotr",e.f32_abs="~lib/builtins/f32.abs",e.f64_abs="~lib/builtins/f64.abs",e.f32_max="~lib/builtins/f32.max",e.f64_max="~lib/builtins/f64.max",e.f32_min="~lib/builtins/f32.min",e.f64_min="~lib/builtins/f64.min",e.f32_ceil="~lib/builtins/f32.ceil",e.f64_ceil="~lib/builtins/f64.ceil",e.f32_floor="~lib/builtins/f32.floor",e.f64_floor="~lib/builtins/f64.floor",e.f32_copysign="~lib/builtins/f32.copysign",e.f64_copysign="~lib/builtins/f64.copysign",e.f32_nearest="~lib/builtins/f32.nearest",e.f64_nearest="~lib/builtins/f64.nearest",e.i32_reinterpret_f32="~lib/builtins/i32.reinterpret_f32",e.i64_reinterpret_f64="~lib/builtins/i64.reinterpret_f64",e.f32_reinterpret_i32="~lib/builtins/f32.reinterpret_i32",e.f64_reinterpret_i64="~lib/builtins/f64.reinterpret_i64",e.f32_sqrt="~lib/builtins/f32.sqrt",e.f64_sqrt="~lib/builtins/f64.sqrt",e.f32_trunc="~lib/builtins/f32.trunc",e.f64_trunc="~lib/builtins/f64.trunc",e.i32_load8_s="~lib/builtins/i32.load8_s",e.i32_load8_u="~lib/builtins/i32.load8_u",e.i32_load16_s="~lib/builtins/i32.load16_s",e.i32_load16_u="~lib/builtins/i32.load16_u",e.i32_load="~lib/builtins/i32.load",e.i64_load8_s="~lib/builtins/i64.load8_s",e.i64_load8_u="~lib/builtins/i64.load8_u",e.i64_load16_s="~lib/builtins/i64.load16_s",e.i64_load16_u="~lib/builtins/i64.load16_u",e.i64_load32_s="~lib/builtins/i64.load32_s",e.i64_load32_u="~lib/builtins/i64.load32_u",e.i64_load="~lib/builtins/i64.load",e.f32_load="~lib/builtins/f32.load",e.f64_load="~lib/builtins/f64.load",e.i32_store8="~lib/builtins/i32.store8",e.i32_store16="~lib/builtins/i32.store16",e.i32_store="~lib/builtins/i32.store",e.i64_store8="~lib/builtins/i64.store8",e.i64_store16="~lib/builtins/i64.store16",e.i64_store32="~lib/builtins/i64.store32",e.i64_store="~lib/builtins/i64.store",e.f32_store="~lib/builtins/f32.store",e.f64_store="~lib/builtins/f64.store",e.i32_atomic_load8_u="~lib/builtins/i32.atomic.load8_u",e.i32_atomic_load16_u="~lib/builtins/i32.atomic.load16_u",e.i32_atomic_load="~lib/builtins/i32.atomic.load",e.i64_atomic_load8_u="~lib/builtins/i64.atomic.load8_u",e.i64_atomic_load16_u="~lib/builtins/i64.atomic.load16_u",e.i64_atomic_load32_u="~lib/builtins/i64.atomic.load32_u",e.i64_atomic_load="~lib/builtins/i64.atomic.load",e.i32_atomic_store8="~lib/builtins/i32.atomic.store8",e.i32_atomic_store16="~lib/builtins/i32.atomic.store16",e.i32_atomic_store="~lib/builtins/i32.atomic.store",e.i64_atomic_store8="~lib/builtins/i64.atomic.store8",e.i64_atomic_store16="~lib/builtins/i64.atomic.store16",e.i64_atomic_store32="~lib/builtins/i64.atomic.store32",e.i64_atomic_store="~lib/builtins/i64.atomic.store",e.i32_atomic_rmw8_add_u="~lib/builtins/i32.atomic.rmw8.add_u",e.i32_atomic_rmw16_add_u="~lib/builtins/i32.atomic.rmw16.add_u",e.i32_atomic_rmw_add="~lib/builtins/i32.atomic.rmw.add",e.i64_atomic_rmw8_add_u="~lib/builtins/i64.atomic.rmw8.add_u",e.i64_atomic_rmw16_add_u="~lib/builtins/i64.atomic.rmw16.add_u",e.i64_atomic_rmw32_add_u="~lib/builtins/i64.atomic.rmw32.add_u",e.i64_atomic_rmw_add="~lib/builtins/i64.atomic.rmw.add",e.i32_atomic_rmw8_sub_u="~lib/builtins/i32.atomic.rmw8.sub_u",e.i32_atomic_rmw16_sub_u="~lib/builtins/i32.atomic.rmw16.sub_u",e.i32_atomic_rmw_sub="~lib/builtins/i32.atomic.rmw.sub",e.i64_atomic_rmw8_sub_u="~lib/builtins/i64.atomic.rmw8.sub_u",e.i64_atomic_rmw16_sub_u="~lib/builtins/i64.atomic.rmw16.sub_u",e.i64_atomic_rmw32_sub_u="~lib/builtins/i64.atomic.rmw32.sub_u",e.i64_atomic_rmw_sub="~lib/builtins/i64.atomic.rmw.sub",e.i32_atomic_rmw8_and_u="~lib/builtins/i32.atomic.rmw8.and_u",e.i32_atomic_rmw16_and_u="~lib/builtins/i32.atomic.rmw16.and_u",e.i32_atomic_rmw_and="~lib/builtins/i32.atomic.rmw.and",e.i64_atomic_rmw8_and_u="~lib/builtins/i64.atomic.rmw8.and_u",e.i64_atomic_rmw16_and_u="~lib/builtins/i64.atomic.rmw16.and_u",e.i64_atomic_rmw32_and_u="~lib/builtins/i64.atomic.rmw32.and_u",e.i64_atomic_rmw_and="~lib/builtins/i64.atomic.rmw.and",e.i32_atomic_rmw8_or_u="~lib/builtins/i32.atomic.rmw8.or_u",e.i32_atomic_rmw16_or_u="~lib/builtins/i32.atomic.rmw16.or_u",e.i32_atomic_rmw_or="~lib/builtins/i32.atomic.rmw.or",e.i64_atomic_rmw8_or_u="~lib/builtins/i64.atomic.rmw8.or_u",e.i64_atomic_rmw16_or_u="~lib/builtins/i64.atomic.rmw16.or_u",e.i64_atomic_rmw32_or_u="~lib/builtins/i64.atomic.rmw32.or_u",e.i64_atomic_rmw_or="~lib/builtins/i64.atomic.rmw.or",e.i32_atomic_rmw8_xor_u="~lib/builtins/i32.atomic.rmw8.xor_u",e.i32_atomic_rmw16_xor_u="~lib/builtins/i32.atomic.rmw16.xor_u",e.i32_atomic_rmw_xor="~lib/builtins/i32.atomic.rmw.xor",e.i64_atomic_rmw8_xor_u="~lib/builtins/i64.atomic.rmw8.xor_u",e.i64_atomic_rmw16_xor_u="~lib/builtins/i64.atomic.rmw16.xor_u",e.i64_atomic_rmw32_xor_u="~lib/builtins/i64.atomic.rmw32.xor_u",e.i64_atomic_rmw_xor="~lib/builtins/i64.atomic.rmw.xor",e.i32_atomic_rmw8_xchg_u="~lib/builtins/i32.atomic.rmw8.xchg_u",e.i32_atomic_rmw16_xchg_u="~lib/builtins/i32.atomic.rmw16.xchg_u",e.i32_atomic_rmw_xchg="~lib/builtins/i32.atomic.rmw.xchg",e.i64_atomic_rmw8_xchg_u="~lib/builtins/i64.atomic.rmw8.xchg_u",e.i64_atomic_rmw16_xchg_u="~lib/builtins/i64.atomic.rmw16.xchg_u",e.i64_atomic_rmw32_xchg_u="~lib/builtins/i64.atomic.rmw32.xchg_u",e.i64_atomic_rmw_xchg="~lib/builtins/i64.atomic.rmw.xchg",e.i32_atomic_rmw8_cmpxchg_u="~lib/builtins/i32.atomic.rmw8.cmpxchg_u",e.i32_atomic_rmw16_cmpxchg_u="~lib/builtins/i32.atomic.rmw16.cmpxchg_u",e.i32_atomic_rmw_cmpxchg="~lib/builtins/i32.atomic.rmw.cmpxchg",e.i64_atomic_rmw8_cmpxchg_u="~lib/builtins/i64.atomic.rmw8.cmpxchg_u",e.i64_atomic_rmw16_cmpxchg_u="~lib/builtins/i64.atomic.rmw16.cmpxchg_u",e.i64_atomic_rmw32_cmpxchg_u="~lib/builtins/i64.atomic.rmw32.cmpxchg_u",e.i64_atomic_rmw_cmpxchg="~lib/builtins/i64.atomic.rmw.cmpxchg",e.i32_wait="~lib/builtins/i32.wait",e.i64_wait="~lib/builtins/i64.wait",e.v128_splat="~lib/builtins/v128.splat",e.v128_extract_lane="~lib/builtins/v128.extract_lane",e.v128_replace_lane="~lib/builtins/v128.replace_lane",e.v128_shuffle="~lib/builtins/v128.shuffle",e.v128_swizzle="~lib/builtins/v128.swizzle",e.v128_load_splat="~lib/builtins/v128.load_splat",e.v128_load_ext="~lib/builtins/v128.load_ext",e.v128_load="~lib/builtins/v128.load",e.v128_store="~lib/builtins/v128.store",e.v128_add="~lib/builtins/v128.add",e.v128_sub="~lib/builtins/v128.sub",e.v128_mul="~lib/builtins/v128.mul",e.v128_div="~lib/builtins/v128.div",e.v128_neg="~lib/builtins/v128.neg",e.v128_add_saturate="~lib/builtins/v128.add_saturate",e.v128_sub_saturate="~lib/builtins/v128.sub_saturate",e.v128_shl="~lib/builtins/v128.shl",e.v128_shr="~lib/builtins/v128.shr",e.v128_and="~lib/builtins/v128.and",e.v128_or="~lib/builtins/v128.or",e.v128_xor="~lib/builtins/v128.xor",e.v128_andnot="~lib/builtins/v128.andnot",e.v128_not="~lib/builtins/v128.not",e.v128_bitselect="~lib/builtins/v128.bitselect",e.v128_any_true="~lib/builtins/v128.any_true",e.v128_all_true="~lib/builtins/v128.all_true",e.v128_min="~lib/builtins/v128.min",e.v128_max="~lib/builtins/v128.max",e.v128_abs="~lib/builtins/v128.abs",e.v128_sqrt="~lib/builtins/v128.sqrt",e.v128_eq="~lib/builtins/v128.eq",e.v128_ne="~lib/builtins/v128.ne",e.v128_lt="~lib/builtins/v128.lt",e.v128_le="~lib/builtins/v128.le",e.v128_gt="~lib/builtins/v128.gt",e.v128_ge="~lib/builtins/v128.ge",e.v128_convert="~lib/builtins/v128.convert",e.v128_trunc_sat="~lib/builtins/v128.trunc_sat",e.v128_narrow="~lib/builtins/v128.narrow",e.v128_widen_low="~lib/builtins/v128.widen_low",e.v128_widen_high="~lib/builtins/v128.widen_high",e.v128_qfma="~lib/builtins/v128.qfma",e.v128_qfms="~lib/builtins/v128.qfms",e.i8x16="~lib/builtins/i8x16",e.i16x8="~lib/builtins/i16x8",e.i32x4="~lib/builtins/i32x4",e.i64x2="~lib/builtins/i64x2",e.f32x4="~lib/builtins/f32x4",e.f64x2="~lib/builtins/f64x2",e.i8x16_splat="~lib/builtins/i8x16.splat",e.i8x16_extract_lane_s="~lib/builtins/i8x16.extract_lane_s",e.i8x16_extract_lane_u="~lib/builtins/i8x16.extract_lane_u",e.i8x16_replace_lane="~lib/builtins/i8x16.replace_lane",e.i8x16_add="~lib/builtins/i8x16.add",e.i8x16_sub="~lib/builtins/i8x16.sub",e.i8x16_mul="~lib/builtins/i8x16.mul",e.i8x16_neg="~lib/builtins/i8x16.neg",e.i8x16_add_saturate_s="~lib/builtins/i8x16.add_saturate_s",e.i8x16_add_saturate_u="~lib/builtins/i8x16.add_saturate_u",e.i8x16_sub_saturate_s="~lib/builtins/i8x16.sub_saturate_s",e.i8x16_sub_saturate_u="~lib/builtins/i8x16.sub_saturate_u",e.i8x16_shl="~lib/builtins/i8x16.shl",e.i8x16_shr_s="~lib/builtins/i8x16.shr_s",e.i8x16_shr_u="~lib/builtins/i8x16.shr_u",e.i8x16_any_true="~lib/builtins/i8x16.any_true",e.i8x16_all_true="~lib/builtins/i8x16.all_true",e.i8x16_eq="~lib/builtins/i8x16.eq",e.i8x16_ne="~lib/builtins/i8x16.ne",e.i8x16_lt_s="~lib/builtins/i8x16.lt_s",e.i8x16_lt_u="~lib/builtins/i8x16.lt_u",e.i8x16_le_s="~lib/builtins/i8x16.le_s",e.i8x16_le_u="~lib/builtins/i8x16.le_u",e.i8x16_gt_s="~lib/builtins/i8x16.gt_s",e.i8x16_gt_u="~lib/builtins/i8x16.gt_u",e.i8x16_ge_s="~lib/builtins/i8x16.ge_s",e.i8x16_ge_u="~lib/builtins/i8x16.ge_u",e.i8x16_narrow_i16x8_s="~lib/builtins/i8x16.narrow_i16x8_s",e.i8x16_narrow_i16x8_u="~lib/builtins/i8x16.narrow_i16x8_u",e.i16x8_splat="~lib/builtins/i16x8.splat",e.i16x8_extract_lane_s="~lib/builtins/i16x8.extract_lane_s",e.i16x8_extract_lane_u="~lib/builtins/i16x8.extract_lane_u",e.i16x8_replace_lane="~lib/builtins/i16x8.replace_lane",e.i16x8_add="~lib/builtins/i16x8.add",e.i16x8_sub="~lib/builtins/i16x8.sub",e.i16x8_mul="~lib/builtins/i16x8.mul",e.i16x8_neg="~lib/builtins/i16x8.neg",e.i16x8_add_saturate_s="~lib/builtins/i16x8.add_saturate_s",e.i16x8_add_saturate_u="~lib/builtins/i16x8.add_saturate_u",e.i16x8_sub_saturate_s="~lib/builtins/i16x8.sub_saturate_s",e.i16x8_sub_saturate_u="~lib/builtins/i16x8.sub_saturate_u",e.i16x8_shl="~lib/builtins/i16x8.shl",e.i16x8_shr_s="~lib/builtins/i16x8.shr_s",e.i16x8_shr_u="~lib/builtins/i16x8.shr_u",e.i16x8_any_true="~lib/builtins/i16x8.any_true",e.i16x8_all_true="~lib/builtins/i16x8.all_true",e.i16x8_eq="~lib/builtins/i16x8.eq",e.i16x8_ne="~lib/builtins/i16x8.ne",e.i16x8_lt_s="~lib/builtins/i16x8.lt_s",e.i16x8_lt_u="~lib/builtins/i16x8.lt_u",e.i16x8_le_s="~lib/builtins/i16x8.le_s",e.i16x8_le_u="~lib/builtins/i16x8.le_u",e.i16x8_gt_s="~lib/builtins/i16x8.gt_s",e.i16x8_gt_u="~lib/builtins/i16x8.gt_u",e.i16x8_ge_s="~lib/builtins/i16x8.ge_s",e.i16x8_ge_u="~lib/builtins/i16x8.ge_u",e.i16x8_narrow_i32x4_s="~lib/builtins/i16x8.narrow_i32x4_s",e.i16x8_narrow_i32x4_u="~lib/builtins/i16x8.narrow_i32x4_u",e.i16x8_widen_low_i8x16_s="~lib/builtins/i16x8.widen_low_i8x16_s",e.i16x8_widen_low_i8x16_u="~lib/builtins/i16x8.widen_low_i8x16_u",e.i16x8_widen_high_i8x16_s="~lib/builtins/i16x8.widen_high_i8x16_s",e.i16x8_widen_high_i8x16_u="~lib/builtins/i16x8.widen_high_i8x16_u",e.i16x8_load8x8_s="~lib/builtins/i16x8.load8x8_s",e.i16x8_load8x8_u="~lib/builtins/i16x8.load8x8_u",e.i32x4_splat="~lib/builtins/i32x4.splat",e.i32x4_extract_lane="~lib/builtins/i32x4.extract_lane",e.i32x4_replace_lane="~lib/builtins/i32x4.replace_lane",e.i32x4_add="~lib/builtins/i32x4.add",e.i32x4_sub="~lib/builtins/i32x4.sub",e.i32x4_mul="~lib/builtins/i32x4.mul",e.i32x4_neg="~lib/builtins/i32x4.neg",e.i32x4_shl="~lib/builtins/i32x4.shl",e.i32x4_shr_s="~lib/builtins/i32x4.shr_s",e.i32x4_shr_u="~lib/builtins/i32x4.shr_u",e.i32x4_any_true="~lib/builtins/i32x4.any_true",e.i32x4_all_true="~lib/builtins/i32x4.all_true",e.i32x4_eq="~lib/builtins/i32x4.eq",e.i32x4_ne="~lib/builtins/i32x4.ne",e.i32x4_lt_s="~lib/builtins/i32x4.lt_s",e.i32x4_lt_u="~lib/builtins/i32x4.lt_u",e.i32x4_le_s="~lib/builtins/i32x4.le_s",e.i32x4_le_u="~lib/builtins/i32x4.le_u",e.i32x4_gt_s="~lib/builtins/i32x4.gt_s",e.i32x4_gt_u="~lib/builtins/i32x4.gt_u",e.i32x4_ge_s="~lib/builtins/i32x4.ge_s",e.i32x4_ge_u="~lib/builtins/i32x4.ge_u",e.i32x4_trunc_sat_f32x4_s="~lib/builtins/i32x4.trunc_sat_f32x4_s",e.i32x4_trunc_sat_f32x4_u="~lib/builtins/i32x4.trunc_sat_f32x4_u",e.i32x4_widen_low_i16x8_s="~lib/builtins/i32x4.widen_low_i16x8_s",e.i32x4_widen_low_i16x8_u="~lib/builtins/i32x4.widen_low_i16x8_u",e.i32x4_widen_high_i16x8_s="~lib/builtins/i32x4.widen_high_i16x8_s",e.i32x4_widen_high_i16x8_u="~lib/builtins/i32x4.widen_high_i16x8_u",e.i32x4_load16x4_s="~lib/builtins/i32x4.load16x4_s",e.i32x4_load16x4_u="~lib/builtins/i32x4.load16x4_u",e.i64x2_splat="~lib/builtins/i64x2.splat",e.i64x2_extract_lane="~lib/builtins/i64x2.extract_lane",e.i64x2_replace_lane="~lib/builtins/i64x2.replace_lane",e.i64x2_add="~lib/builtins/i64x2.add",e.i64x2_sub="~lib/builtins/i64x2.sub",e.i64x2_neg="~lib/builtins/i64x2.neg",e.i64x2_shl="~lib/builtins/i64x2.shl",e.i64x2_shr_s="~lib/builtins/i64x2.shr_s",e.i64x2_shr_u="~lib/builtins/i64x2.shr_u",e.i64x2_any_true="~lib/builtins/i64x2.any_true",e.i64x2_all_true="~lib/builtins/i64x2.all_true",e.i64x2_trunc_sat_f64x2_s="~lib/builtins/i64x2.trunc_sat_f64x2_s",e.i64x2_trunc_sat_f64x2_u="~lib/builtins/i64x2.trunc_sat_f64x2_u",e.i64x2_load32x2_s="~lib/builtins/i64x2.load32x2_s",e.i64x2_load32x2_u="~lib/builtins/i64x2.load32x2_u",e.f32x4_splat="~lib/builtins/f32x4.splat",e.f32x4_extract_lane="~lib/builtins/f32x4.extract_lane",e.f32x4_replace_lane="~lib/builtins/f32x4.replace_lane",e.f32x4_add="~lib/builtins/f32x4.add",e.f32x4_sub="~lib/builtins/f32x4.sub",e.f32x4_mul="~lib/builtins/f32x4.mul",e.f32x4_div="~lib/builtins/f32x4.div",e.f32x4_neg="~lib/builtins/f32x4.neg",e.f32x4_min="~lib/builtins/f32x4.min",e.f32x4_max="~lib/builtins/f32x4.max",e.f32x4_abs="~lib/builtins/f32x4.abs",e.f32x4_sqrt="~lib/builtins/f32x4.sqrt",e.f32x4_eq="~lib/builtins/f32x4.eq",e.f32x4_ne="~lib/builtins/f32x4.ne",e.f32x4_lt="~lib/builtins/f32x4.lt",e.f32x4_le="~lib/builtins/f32x4.le",e.f32x4_gt="~lib/builtins/f32x4.gt",e.f32x4_ge="~lib/builtins/f32x4.ge",e.f32x4_convert_i32x4_s="~lib/builtins/f32x4.convert_i32x4_s",e.f32x4_convert_i32x4_u="~lib/builtins/f32x4.convert_i32x4_u",e.f32x4_qfma="~lib/builtins/f32x4.qfma",e.f32x4_qfms="~lib/builtins/f32x4.qfms",e.f64x2_splat="~lib/builtins/f64x2.splat",e.f64x2_extract_lane="~lib/builtins/f64x2.extract_lane",e.f64x2_replace_lane="~lib/builtins/f64x2.replace_lane",e.f64x2_add="~lib/builtins/f64x2.add",e.f64x2_sub="~lib/builtins/f64x2.sub",e.f64x2_mul="~lib/builtins/f64x2.mul",e.f64x2_div="~lib/builtins/f64x2.div",e.f64x2_neg="~lib/builtins/f64x2.neg",e.f64x2_min="~lib/builtins/f64x2.min",e.f64x2_max="~lib/builtins/f64x2.max",e.f64x2_abs="~lib/builtins/f64x2.abs",e.f64x2_sqrt="~lib/builtins/f64x2.sqrt",e.f64x2_eq="~lib/builtins/f64x2.eq",e.f64x2_ne="~lib/builtins/f64x2.ne",e.f64x2_lt="~lib/builtins/f64x2.lt",e.f64x2_le="~lib/builtins/f64x2.le",e.f64x2_gt="~lib/builtins/f64x2.gt",e.f64x2_ge="~lib/builtins/f64x2.ge",e.f64x2_convert_i64x2_s="~lib/builtins/f64x2.convert_i64x2_s",e.f64x2_convert_i64x2_u="~lib/builtins/f64x2.convert_i64x2_u",e.f64x2_qfma="~lib/builtins/f64x2.qfma",e.f64x2_qfms="~lib/builtins/f64x2.qfms",e.v8x16_shuffle="~lib/builtins/v8x16.shuffle",e.v8x16_swizzle="~lib/builtins/v8x16.swizzle",e.v8x16_load_splat="~lib/builtins/v8x16.load_splat",e.v16x8_load_splat="~lib/builtins/v16x8.load_splat",e.v32x4_load_splat="~lib/builtins/v32x4.load_splat",e.v64x2_load_splat="~lib/builtins/v64x2.load_splat",e.heap_base="~lib/heap/__heap_base",e.rtti_base="~lib/rt/__rtti_base",e.visit_globals="~lib/rt/__visit_globals",e.visit_members="~lib/rt/__visit_members",e.isNaN="~lib/number/isNaN",e.isFinite="~lib/number/isFinite",e.ERROR="~lib/diagnostics/ERROR",e.WARNING="~lib/diagnostics/WARNING",e.INFO="~lib/diagnostics/INFO",e.memory_size="~lib/memory/memory.size",e.memory_grow="~lib/memory/memory.grow",e.memory_copy="~lib/memory/memory.copy",e.memory_fill="~lib/memory/memory.fill",e.memory_allocate="~lib/memory/memory.allocate",e.memory_free="~lib/memory/memory.free",e.memory_reset="~lib/memory/memory.reset",e.runtime_instanceof="~lib/runtime/runtime.instanceof",e.runtime_flags="~lib/runtime/runtime.flags",e.runtime_allocate="~lib/util/runtime/allocate",e.runtime_reallocate="~lib/util/runtime/reallocate",e.runtime_register="~lib/util/runtime/register",e.runtime_discard="~lib/util/runtime/discard",e.runtime_makeArray="~lib/util/runtime/makeArray",e.Int8Array="~lib/typedarray/Int8Array",e.Uint8Array="~lib/typedarray/Uint8Array",e.Int16Array="~lib/typedarray/Int16Array",e.Uint16Array="~lib/typedarray/Uint16Array",e.Int32Array="~lib/typedarray/Int32Array",e.Uint32Array="~lib/typedarray/Uint32Array",e.Int64Array="~lib/typedarray/Int64Array",e.Uint64Array="~lib/typedarray/Uint64Array",e.Uint8ClampedArray="~lib/typedarray/Uint8ClampedArray",e.Float32Array="~lib/typedarray/Float32Array",e.Float64Array="~lib/typedarray/Float64Array",e.started="~lib/started",e.argc="~lib/argc",e.setargc="~lib/setargc",e.capabilities="~lib/capabilities"}(a=r.BuiltinSymbols||(r.BuiltinSymbols={})),r.compileCall=T,r.compileAbort=f,r.compileVisitGlobals=function(e){var r,t,i=e.module,s=new Array,o=e.ensureFunctionType([c.Type.u32],c.Type.void),l=e.options.nativeSizeType,_=assert(e.program.visitInstance);e.compileFunction(_);try{for(var h=n(e.program.elementsByName.values()),y=h.next();!y.done;y=h.next()){var T=y.value;if(T.kind==p.ElementKind.GLOBAL){var m=T,f=m.type,g=f.classReference;if(f.is(256)&&null!==g&&!g.hasDecorator(p.DecoratorFlags.UNMANAGED)&&m.is(d.CommonFlags.COMPILED))if(m.is(d.CommonFlags.INLINED)){var E=m.constantIntegerValue;(i64_low(E)||i64_high(E))&&s.push(i.call(_.internalName,[e.options.isWasm64?i.i64(i64_low(E),i64_high(E)):i.i32(i64_low(E))],u.NativeType.None))}else s.push(i.if(i.local_tee(1,i.global_get(m.internalName,l)),i.call(_.internalName,[i.local_get(1,l),i.local_get(0,u.NativeType.I32)],u.NativeType.None)))}}}catch(e){r={error:e}}finally{try{y&&!y.done&&(t=h.return)&&t.call(h)}finally{if(r)throw r.error}}i.addFunction(a.visit_globals,o,[l],s.length?i.block(null,s):i.nop())},r.compileVisitMembers=function(e){var r,t,o,l,_,h,d=e.program,y=e.module,T=d.options.usizeType,m=T.toNativeType(),f=T.byteSize,g=e.ensureFunctionType([T,c.Type.i32],c.Type.void),E=d.managedClasses,v=assert(d.visitInstance),b=new Array,I=u.Relooper.create(y),x=I.addBlockWithSwitch(y.nop(),y.load(f,!1,m==u.NativeType.I64?y.binary(u.BinaryOp.SubI64,y.local_get(0,m),y.i64(8)):y.binary(u.BinaryOp.SubI32,y.local_get(0,m),y.i32(8)),u.NativeType.I32,0)),A=0;try{for(var N=n(E),S=N.next();!S.done;S=N.next()){var O=i(S.value,2),C=O[0],R=O[1];assert(R.type.isManaged),assert(C==A++);var L=void 0,k=new Array;if(R.isDeclaredInLibrary&&(L=R.lookupInSelf("__visit_impl"))){assert(L.kind==p.ElementKind.FUNCTION_PROTOTYPE);var F=d.resolver.resolveFunction(L,null);if(F&&e.compileFunction(F)){var D=F.signature;assert(1==D.parameterTypes.length&&D.parameterTypes[0]==c.Type.u32&&D.returnType==c.Type.void&&D.thisType==R.type),k.push(y.call(F.internalName,[y.local_get(0,m),y.local_get(1,u.NativeType.I32)],u.NativeType.None))}else k.push(y.unreachable())}else{var B=R.members;if(B)try{for(var P=(o=void 0,n(B.values())),w=P.next();!w.done;w=P.next()){var U=w.value;if(U.kind==p.ElementKind.FIELD)if(U.parent===R)if(U.type.isManaged){var M=U.memoryOffset;assert(M>=0),k.push(y.if(y.local_tee(2,y.load(f,!1,y.local_get(0,m),m,M)),y.call(v.internalName,[y.local_get(2,m),y.local_get(1,u.NativeType.I32)],u.NativeType.None)))}}}catch(e){o={error:e}}finally{try{w&&!w.done&&(l=P.return)&&l.call(P)}finally{if(o)throw o.error}}}R.base||k.push(y.return());var G=I.addBlock(s.flatten(y,k,u.NativeType.None));I.addBranchForSwitch(x,G,[C]),b.push(G)}}catch(e){r={error:e}}finally{try{S&&!S.done&&(t=N.return)&&t.call(N)}finally{if(r)throw r.error}}try{for(var V=n(E),K=V.next();!K.done;K=V.next()){var z=i(K.value,2),Y=(C=z[0],(R=z[1]).base);Y&&I.addBranch(b[C],b[Y.id])}}catch(e){_={error:e}}finally{try{K&&!K.done&&(h=V.return)&&h.call(V)}finally{if(_)throw _.error}}b.push(I.addBlock(y.unreachable())),I.addBranchForSwitch(x,b[b.length-1],[]),e.compileFunction(v),y.addFunction(a.visit_members,g,[m],I.renderAndDispose(x,2))},r.compileRTTI=function(e){var r,t,s=e.program,o=e.module,l=s.managedClasses,c=l.size,p=4+8*c,_=new Uint8Array(p);y.writeI32(c,_,0);var h=4,d=s.arrayBufferViewInstance,T=d.prototype,m=s.arrayPrototype,f=s.setPrototype,E=s.mapPrototype,v=0;try{for(var b=n(l),I=b.next();!I.done;I=b.next()){var x=i(I.value,2),A=x[0],N=x[1];assert(A==v++);var S=0;if(N.isAcyclic&&(S|=16),N!==d&&N.extends(T)){var O=N.getArrayValueType();S|=1,N.extends(m)&&(S|=2),S|=32*g(O)}else if(N.extends(f)){var C=assert(N.getTypeArgumentsTo(f));assert(1==C.length),S|=4,S|=32*g(C[0])}else if(N.extends(E)){C=assert(N.getTypeArgumentsTo(E));assert(2==C.length),S|=8,S|=16384*g(C[0]),S|=32*g(C[1])}y.writeI32(S,_,h),h+=4,N.rttiFlags=S;var R=N.base;y.writeI32(R?R.id:0,_,h),h+=4}}catch(e){r={error:e}}finally{try{I&&!I.done&&(t=b.return)&&t.call(b)}finally{if(r)throw r.error}}assert(h==p);var L=s.options.usizeType,k=e.addMemorySegment(_);if(8==L.size){var F=k.offset;o.addGlobal(a.rtti_base,u.NativeType.I64,!1,o.i64(i64_low(F),i64_high(F)))}else o.addGlobal(a.rtti_base,u.NativeType.I32,!1,o.i32(i64_low(k.offset)))}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(5),i=function(){function e(){this.text=[],this.functionId=0}return e.decompile=function(r){var t=new e;return t.decompile(r),t.finish()},e.prototype.decompile=function(e){throw new Error("not implemented")},e.prototype.decompileFunction=function(e){var r=n.getFunctionName(e)||"$"+this.functionId.toString(10),t=n.getFunctionBody(e);this.push("function "),this.push(r),this.push("(");for(var i=0,s=n.getFunctionParamCount(e);i<s;++i)i>0&&this.push(", "),this.push("$"),this.push(i.toString(10)),this.push(": "),this.push(a(n.getFunctionParamType(e,i)));this.push("): "),this.push(a(n.getFunctionResultType(e))),this.push(" "),n.getExpressionId(t)!=n.ExpressionId.Block&&this.push("{\n"),this.decompileExpression(t),n.getExpressionId(t)!=n.ExpressionId.Block&&this.push("\n}\n"),++this.functionId},e.prototype.decompileExpression=function(e){var r,t,i,s,o=n.getExpressionId(e),l=n.getExpressionType(e);switch(o){case n.ExpressionId.Block:for(null!=(t=n.getBlockName(e))&&(this.push(t),this.push(": ")),this.push("{\n"),s=n.getBlockChildCount(e),i=0;i<s;++i)this.decompileExpression(n.getBlockChild(e,i));return void this.push("}\n");case n.ExpressionId.If:return void(l==n.NativeType.None?(this.push("if ("),this.decompileExpression(n.getIfCondition(e)),this.push(") "),this.decompileExpression(n.getIfTrue(e)),(r=n.getIfFalse(e))&&(this.push(" else "),this.decompileExpression(r))):(this.decompileExpression(n.getIfCondition(e)),this.push(" ? "),this.decompileExpression(n.getIfTrue(e)),this.push(" : "),this.decompileExpression(n.getIfFalse(e))));case n.ExpressionId.Loop:null!=(t=n.getLoopName(e))&&(this.push(t),this.push(": ")),this.push("do "),this.decompileExpression(n.getLoopBody(e)),this.push("while (0);\n");case n.ExpressionId.Break:return(r=n.getBreakCondition(e))&&(this.push("if ("),this.decompileExpression(r),this.push(") ")),void(null!=(t=n.getBreakName(e))?(this.push("break "),this.push(t),this.push(";\n")):this.push("break;\n"));case n.ExpressionId.Switch:case n.ExpressionId.Call:case n.ExpressionId.CallIndirect:throw new Error("not implemented");case n.ExpressionId.LocalGet:return this.push("$"),void this.push(n.getLocalGetIndex(e).toString(10));case n.ExpressionId.LocalSet:return this.push("$"),this.push(n.getLocalSetIndex(e).toString(10)),this.push(" = "),void this.decompileExpression(n.getLocalSetValue(e));case n.ExpressionId.GlobalGet:case n.ExpressionId.GlobalSet:throw new Error("not implemented");case n.ExpressionId.Load:return this.push("load<"),this.push(a(l)),this.push(">("),this.push(n.getLoadOffset(e).toString(10)),this.push(" + "),this.decompileExpression(n.getLoadPtr(e)),void this.push(")");case n.ExpressionId.Store:return this.push("store<"),this.push(a(l)),this.push(">("),this.push(n.getStoreOffset(e).toString(10)),this.push(" + "),this.decompileExpression(n.getStorePtr(e)),this.push(", "),this.decompileExpression(n.getStoreValue(e)),void this.push(")");case n.ExpressionId.Const:switch(l){case n.NativeType.I32:return void this.push(n.getConstValueI32(e).toString(10));case n.NativeType.I64:return void this.push(i64_to_string(i64_new(n.getConstValueI64Low(e),n.getConstValueI64High(e))));case n.NativeType.F32:return void this.push(n.getConstValueF32(e).toString(10));case n.NativeType.F64:return void this.push(n.getConstValueF64(e).toString(10))}break;case n.ExpressionId.Unary:switch(n.getUnaryOp(e)){case n.UnaryOp.ClzI32:return this.push("clz<i32>("),this.decompileExpression(n.getUnaryValue(e)),void this.push(")");case n.UnaryOp.CtzI32:return this.push("ctz<i32>("),this.decompileExpression(n.getUnaryValue(e)),void this.push(")");case n.UnaryOp.PopcntI32:return this.push("popcnt<i32>("),this.decompileExpression(n.getUnaryValue(e)),void this.push(")");case n.UnaryOp.NegF32:case n.UnaryOp.NegF64:return this.push("-"),void this.decompileExpression(n.getUnaryValue(e));case n.UnaryOp.AbsF32:return this.push("abs<f32>("),this.decompileExpression(n.getUnaryValue(e)),void this.push(")");case n.UnaryOp.CeilF32:return this.push("ceil<f32>("),this.decompileExpression(n.getUnaryValue(e)),void this.push(")");case n.UnaryOp.FloorF32:return this.push("floor<f32>("),this.decompileExpression(n.getUnaryValue(e)),void this.push(")");case n.UnaryOp.TruncF32:return this.push("trunc<f32>("),this.decompileExpression(n.getUnaryValue(e)),void this.push(")");case n.UnaryOp.NearestF32:return this.push("nearest<i32>("),this.decompileExpression(n.getUnaryValue(e)),void this.push(")");case n.UnaryOp.SqrtF32:return this.push("sqrt<f32>("),this.decompileExpression(n.getUnaryValue(e)),void this.push(")");case n.UnaryOp.EqzI32:case n.UnaryOp.EqzI64:return this.push("!"),void this.decompileExpression(n.getUnaryValue(e));case n.UnaryOp.ClzI64:return this.push("clz<i64>("),this.decompileExpression(n.getUnaryValue(e)),void this.push(")");case n.UnaryOp.CtzI64:return this.push("ctz<i64>("),this.decompileExpression(n.getUnaryValue(e)),void this.push(")");case n.UnaryOp.PopcntI64:return this.push("popcnt<i64>("),this.decompileExpression(n.getUnaryValue(e)),void this.push(")");case n.UnaryOp.AbsF64:return this.push("abs<f64>("),this.decompileExpression(n.getUnaryValue(e)),void this.push(")");case n.UnaryOp.CeilF64:return this.push("ceil<f64>("),this.decompileExpression(n.getUnaryValue(e)),void this.push(")");case n.UnaryOp.FloorF64:return this.push("floor<f64>("),this.decompileExpression(n.getUnaryValue(e)),void this.push(")");case n.UnaryOp.TruncF64:return this.push("trunc<f64>("),this.decompileExpression(n.getUnaryValue(e)),void this.push(")");case n.UnaryOp.NearestF64:return this.push("nearest<f64>("),this.decompileExpression(n.getUnaryValue(e)),void this.push(")");case n.UnaryOp.SqrtF64:return this.push("sqrt<f64>("),this.decompileExpression(n.getUnaryValue(e)),void this.push(")");case n.UnaryOp.ExtendI32:return this.push("<i64>"),void this.decompileExpression(n.getUnaryValue(e));case n.UnaryOp.ExtendU32:return this.push("<i64><u64>"),void this.decompileExpression(n.getUnaryValue(e));case n.UnaryOp.WrapI64:case n.UnaryOp.TruncF32ToI32:return this.push("<i32>"),void this.decompileExpression(n.getUnaryValue(e));case n.UnaryOp.TruncF32ToI64:return this.push("<i64>"),void this.decompileExpression(n.getUnaryValue(e));case n.UnaryOp.TruncF32ToU32:return this.push("<i32><u32>"),void this.decompileExpression(n.getUnaryValue(e));case n.UnaryOp.TruncF32ToU64:return this.push("<i64><u64>"),void this.decompileExpression(n.getUnaryValue(e));case n.UnaryOp.TruncF64ToI32:return this.push("<i32>"),void this.decompileExpression(n.getUnaryValue(e));case n.UnaryOp.TruncF64ToI64:return this.push("<i64>"),void this.decompileExpression(n.getUnaryValue(e));case n.UnaryOp.TruncF64ToU32:return this.push("<i32><u32>"),void this.decompileExpression(n.getUnaryValue(e));case n.UnaryOp.TruncF64ToU64:return this.push("<i64><u64>"),void this.decompileExpression(n.getUnaryValue(e));case n.UnaryOp.ReinterpretF32:return this.push("reinterpret<f32,i32>("),this.decompileExpression(n.getUnaryValue(e)),void this.push(")");case n.UnaryOp.ReinterpretF64:return this.push("reinterpret<f64,i64>("),this.decompileExpression(n.getUnaryValue(e)),void this.push(")");case n.UnaryOp.ConvertI32ToF32:return this.push("<f32>"),void this.decompileExpression(n.getUnaryValue(e));case n.UnaryOp.ConvertI32ToF64:return this.push("<f64>"),void this.decompileExpression(n.getUnaryValue(e));case n.UnaryOp.ConvertU32ToF32:return this.push("<f32><u32>"),void this.decompileExpression(n.getUnaryValue(e));case n.UnaryOp.ConvertU32ToF64:return this.push("<f64><u32>"),void this.decompileExpression(n.getUnaryValue(e));case n.UnaryOp.ConvertI64ToF32:return this.push("<f32>"),void this.decompileExpression(n.getUnaryValue(e));case n.UnaryOp.ConvertI64ToF64:return this.push("<f64>"),void this.decompileExpression(n.getUnaryValue(e));case n.UnaryOp.ConvertU64ToF32:return this.push("<f32><u64>"),void this.decompileExpression(n.getUnaryValue(e));case n.UnaryOp.ConvertU64ToF64:return this.push("<f64><u64>"),void this.decompileExpression(n.getUnaryValue(e));case n.UnaryOp.PromoteF32:return this.push("<f64>"),void this.decompileExpression(n.getUnaryValue(e));case n.UnaryOp.DemoteF64:return this.push("<f32>"),void this.decompileExpression(n.getUnaryValue(e));case n.UnaryOp.ReinterpretI32:return this.push("reinterpret<i32,f32>("),this.decompileExpression(n.getUnaryValue(e)),void this.push(")");case n.UnaryOp.ReinterpretI64:return this.push("reinterpret<i64,f64>("),this.decompileExpression(n.getUnaryValue(e)),void this.push(")")}break;case n.ExpressionId.Binary:switch(n.getBinaryOp(e)){case n.BinaryOp.AddI32:case n.BinaryOp.AddI64:case n.BinaryOp.AddF32:case n.BinaryOp.AddF64:return this.decompileExpression(n.getBinaryLeft(e)),this.push(" + "),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.SubI32:case n.BinaryOp.SubI64:case n.BinaryOp.SubF32:case n.BinaryOp.SubF64:return this.decompileExpression(n.getBinaryLeft(e)),this.push(" - "),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.MulI32:case n.BinaryOp.MulI64:case n.BinaryOp.MulF32:case n.BinaryOp.MulF64:return this.decompileExpression(n.getBinaryLeft(e)),this.push(" * "),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.DivI32:case n.BinaryOp.DivI64:case n.BinaryOp.DivF32:case n.BinaryOp.DivF64:return this.decompileExpression(n.getBinaryLeft(e)),this.push(" / "),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.DivU32:return this.push("<i32>(<u32>"),this.decompileExpression(n.getBinaryLeft(e)),this.push(" / <u32>"),this.decompileExpression(n.getBinaryRight(e)),void this.push(")");case n.BinaryOp.RemI32:case n.BinaryOp.RemI64:return this.decompileExpression(n.getBinaryLeft(e)),this.push(" % "),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.RemU32:return this.push("<i32>(<u32>"),this.decompileExpression(n.getBinaryLeft(e)),this.push(" / <u32>"),this.decompileExpression(n.getBinaryRight(e)),void this.push(")");case n.BinaryOp.AndI32:case n.BinaryOp.AndI64:return this.decompileExpression(n.getBinaryLeft(e)),this.push(" & "),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.OrI32:case n.BinaryOp.OrI64:return this.decompileExpression(n.getBinaryLeft(e)),this.push(" | "),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.XorI32:case n.BinaryOp.XorI64:return this.decompileExpression(n.getBinaryLeft(e)),this.push(" ^ "),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.ShlI32:case n.BinaryOp.ShlI64:return this.decompileExpression(n.getBinaryLeft(e)),this.push(" << "),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.ShrU32:case n.BinaryOp.ShrU64:return this.decompileExpression(n.getBinaryLeft(e)),this.push(" >>> "),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.ShrI32:case n.BinaryOp.ShrI64:return this.decompileExpression(n.getBinaryLeft(e)),this.push(" >> "),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.RotlI32:return this.push("rotl<i32>("),this.decompileExpression(n.getBinaryLeft(e)),this.push(", "),this.decompileExpression(n.getBinaryRight(e)),void this.push(")");case n.BinaryOp.RotrI32:return this.push("rotr<i32>("),this.decompileExpression(n.getBinaryLeft(e)),this.push(", "),this.decompileExpression(n.getBinaryRight(e)),void this.push(")");case n.BinaryOp.EqI32:case n.BinaryOp.EqI64:case n.BinaryOp.EqF32:case n.BinaryOp.EqF64:return this.decompileExpression(n.getBinaryLeft(e)),this.push(" == "),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.NeI32:case n.BinaryOp.NeI64:case n.BinaryOp.NeF32:case n.BinaryOp.NeF64:return this.decompileExpression(n.getBinaryLeft(e)),this.push(" != "),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.LtI32:case n.BinaryOp.LtI64:case n.BinaryOp.LtF32:case n.BinaryOp.LtF64:return this.decompileExpression(n.getBinaryLeft(e)),this.push(" < "),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.LtU32:return this.push("<u32>"),this.decompileExpression(n.getBinaryLeft(e)),this.push(" < <u32>"),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.LeI32:case n.BinaryOp.LeI64:case n.BinaryOp.LeF32:case n.BinaryOp.LeF64:return this.decompileExpression(n.getBinaryLeft(e)),this.push(" <= "),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.LeU32:return this.push("<u32>"),this.decompileExpression(n.getBinaryLeft(e)),this.push(" <= <u32>"),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.GtI32:case n.BinaryOp.GtI64:case n.BinaryOp.GtF32:case n.BinaryOp.GtF64:return this.decompileExpression(n.getBinaryLeft(e)),this.push(" > "),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.GtU32:return this.push("<u32>"),this.decompileExpression(n.getBinaryLeft(e)),this.push(" > <u32>"),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.GeI32:case n.BinaryOp.GeI64:case n.BinaryOp.GeF32:case n.BinaryOp.GeF64:return this.decompileExpression(n.getBinaryLeft(e)),this.push(" >= "),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.GeU32:return this.push("<u32>"),this.decompileExpression(n.getBinaryLeft(e)),this.push(" >= <u32>"),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.DivU64:return this.push("<u64>"),this.decompileExpression(n.getBinaryLeft(e)),this.push(" / <u64>"),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.RemU64:return this.push("<u64>"),this.decompileExpression(n.getBinaryLeft(e)),this.push(" % <u64>"),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.RotlI64:return this.push("rotl<i64>("),this.decompileExpression(n.getBinaryLeft(e)),this.push(", "),this.decompileExpression(n.getBinaryRight(e)),void this.push(")");case n.BinaryOp.RotrI64:return this.push("rotr<i64>("),this.decompileExpression(n.getBinaryLeft(e)),this.push(", "),this.decompileExpression(n.getBinaryRight(e)),void this.push(")");case n.BinaryOp.LtU64:return this.push("<u64>"),this.decompileExpression(n.getBinaryLeft(e)),this.push(" < <u64>"),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.LeU64:return this.push("<u64>"),this.decompileExpression(n.getBinaryLeft(e)),this.push(" <= <u64>"),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.GtU64:return this.push("<u64>"),this.decompileExpression(n.getBinaryLeft(e)),this.push(" > <u64>"),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.GeU64:return this.push("<u64>"),this.decompileExpression(n.getBinaryLeft(e)),this.push(" >= <u64>"),void this.decompileExpression(n.getBinaryRight(e));case n.BinaryOp.CopysignF32:return this.push("copysign<f32>("),this.decompileExpression(n.getBinaryLeft(e)),this.push(", "),this.decompileExpression(n.getBinaryRight(e)),void this.push(")");case n.BinaryOp.MinF32:return this.push("min<f32>("),this.decompileExpression(n.getBinaryLeft(e)),this.push(", "),this.decompileExpression(n.getBinaryRight(e)),void this.push(")");case n.BinaryOp.MaxF32:return this.push("max<f32>("),this.decompileExpression(n.getBinaryLeft(e)),this.push(", "),this.decompileExpression(n.getBinaryRight(e)),void this.push(")");case n.BinaryOp.CopysignF64:return this.push("copysign<f64>("),this.decompileExpression(n.getBinaryLeft(e)),this.push(", "),this.decompileExpression(n.getBinaryRight(e)),void this.push(")");case n.BinaryOp.MinF64:return this.push("min<f64>("),this.decompileExpression(n.getBinaryLeft(e)),this.push(", "),this.decompileExpression(n.getBinaryRight(e)),void this.push(")");case n.BinaryOp.MaxF64:return this.push("max<f64>("),this.decompileExpression(n.getBinaryLeft(e)),this.push(", "),this.decompileExpression(n.getBinaryRight(e)),void this.push(")")}return;case n.ExpressionId.Select:return this.push("select<"),this.push(a(l)),this.push(">("),this.decompileExpression(n.getSelectThen(e)),this.push(", "),this.decompileExpression(n.getSelectElse(e)),this.push(", "),this.decompileExpression(n.getSelectCondition(e)),void this.push(")");case n.ExpressionId.Drop:return this.decompileExpression(n.getDropValue(e)),void this.push(";\n");case n.ExpressionId.Return:return void((r=n.getReturnValue(e))?(this.push("return "),this.decompileExpression(r),this.push(";\n")):this.push("return;\n"));case n.ExpressionId.Host:switch(n.getHostOp(e)){case n.HostOp.MemorySize:return void this.push("memory.size()");case n.HostOp.MemoryGrow:return this.push("memory.grow("),this.decompileExpression(n.getHostOperand(e,0)),void this.push(")")}break;case n.ExpressionId.Nop:return void this.push(";\n");case n.ExpressionId.Unreachable:return void this.push("unreachable()");case n.ExpressionId.AtomicCmpxchg:case n.ExpressionId.AtomicRMW:case n.ExpressionId.AtomicWait:case n.ExpressionId.AtomicNotify:}throw new Error("not implemented")},e.prototype.push=function(e){this.text.push(e)},e.prototype.finish=function(){var e=this.text.join("");return this.text=[],e},e}();function a(e){switch(e){case n.NativeType.None:return"void";case n.NativeType.I32:return"i32";case n.NativeType.I64:return"i64";case n.NativeType.F32:return"f32";case n.NativeType.F64:return"f64";case n.NativeType.V128:return"v128";case n.NativeType.Unreachable:throw new Error("unreachable type");case n.NativeType.Auto:throw new Error("auto type");default:throw new Error("unexpected type")}}r.Decompiler=i},function(e,r,t){"use strict";var n,i=this&&this.__extends||(n=function(e,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(e,r)},function(e,r){function t(){this.constructor=e}n(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}),a=this&&this.__values||function(e){var r="function"==typeof Symbol&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,i,a=t.call(e),s=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(t=a.return)&&t.call(a)}finally{if(i)throw i.error}}return s};Object.defineProperty(r,"__esModule",{value:!0});var o=t(0),l=t(4),c=t(3),u=t(1),p=function(){function e(e,r){void 0===r&&(r=!1),this.seen=new Map,this.program=e,this.includePrivate}return e.prototype.walk=function(){var e,r;try{for(var t=a(this.program.filesByName.values()),n=t.next();!n.done;n=t.next()){var i=n.value;i.source.sourceKind==c.SourceKind.USER_ENTRY&&this.visitFile(i)}}catch(r){e={error:r}}finally{try{n&&!n.done&&(r=t.return)&&r.call(t)}finally{if(e)throw e.error}}},e.prototype.visitFile=function(e){var r,t,n,i,o=e.exports;if(o)try{for(var l=a(o),c=l.next();!c.done;c=l.next()){var u=s(c.value,2),p=u[0],_=u[1];this.visitElement(p,_)}}catch(e){r={error:e}}finally{try{c&&!c.done&&(t=l.return)&&t.call(l)}finally{if(r)throw r.error}}var h=e.exportsStar;if(h)try{for(var d=a(h),y=d.next();!y.done;y=d.next()){var T=y.value;this.visitFile(T)}}catch(e){n={error:e}}finally{try{y&&!y.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}},e.prototype.visitElement=function(e,r){if(!r.is(o.CommonFlags.PRIVATE)||this.includePrivate){var t=this.seen;if(t.has(r))this.visitAlias(e,r,t.get(r));else switch(t.set(r,e),r.kind){case l.ElementKind.GLOBAL:r.is(o.CommonFlags.COMPILED)&&this.visitGlobal(e,r);break;case l.ElementKind.ENUM:r.is(o.CommonFlags.COMPILED)&&this.visitEnum(e,r);break;case l.ElementKind.FUNCTION_PROTOTYPE:this.visitFunctionInstances(e,r);break;case l.ElementKind.CLASS_PROTOTYPE:this.visitClassInstances(e,r);break;case l.ElementKind.FIELD:r.is(o.CommonFlags.COMPILED)&&this.visitField(e,r);break;case l.ElementKind.PROPERTY_PROTOTYPE:this.visitPropertyInstances(e,r);break;case l.ElementKind.PROPERTY:var n=r,i=n.getterInstance;i&&this.visitFunction(e,i);var s=n.setterInstance;s&&this.visitFunction(e,s);break;case l.ElementKind.NAMESPACE:(function e(r){var t,n,i,s,c,u;var p=r.members;if(p)try{for(var _=a(p.values()),h=_.next();!h.done;h=_.next()){var d=h.value;switch(d.kind){case l.ElementKind.FUNCTION_PROTOTYPE:if(m=d.instances)try{for(var y=(i=void 0,a(m.values())),T=y.next();!T.done;T=y.next()){if(T.value.is(o.CommonFlags.COMPILED))return!0}}catch(e){i={error:e}}finally{try{T&&!T.done&&(s=y.return)&&s.call(y)}finally{if(i)throw i.error}}break;case l.ElementKind.CLASS_PROTOTYPE:var m;if(m=d.instances)try{for(var f=(c=void 0,a(m.values())),g=f.next();!g.done;g=f.next()){if(g.value.is(o.CommonFlags.COMPILED))return!0}}catch(e){c={error:e}}finally{try{g&&!g.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}break;default:if(d.is(o.CommonFlags.COMPILED)||e(d))return!0}}}catch(e){t={error:e}}finally{try{h&&!h.done&&(n=_.return)&&n.call(_)}finally{if(t)throw t.error}}return!1})(r)&&this.visitNamespace(e,r);break;case l.ElementKind.TYPEDEFINITION:break;default:assert(!1)}}},e.prototype.visitFunctionInstances=function(e,r){var t,n,i=r.instances;if(i)try{for(var s=a(i.values()),l=s.next();!l.done;l=s.next()){var c=l.value;c.is(o.CommonFlags.COMPILED)&&this.visitFunction(e,c)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}},e.prototype.visitClassInstances=function(e,r){var t,n,i=r.instances;if(i)try{for(var s=a(i.values()),l=s.next();!l.done;l=s.next()){var c=l.value;c.is(o.CommonFlags.COMPILED)&&this.visitClass(e,c)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}},e.prototype.visitPropertyInstances=function(e,r){assert(!1)},e}();r.ExportsWalker=p;var _=function(e){function r(r,t){void 0===t&&(t=!1);var n=e.call(this,r,t)||this;return n.sb=[],n.indentLevel=0,n}return i(r,e),r.build=function(e){return new r(e).build()},r.prototype.visitGlobal=function(e,r){var t=this.sb,n=r.is(o.CommonFlags.INLINED);if(u.indent(t,this.indentLevel),n&&t.push("const "),t.push(this.typeToString(r.type)),t.push(" "),t.push(e),n)switch(r.constantValueKind){case 1:t.push(" = "),t.push(i64_to_string(r.constantIntegerValue));break;case 2:t.push(" = "),t.push(r.constantFloatValue.toString());break;default:assert(!1)}t.push(";\n")},r.prototype.visitEnum=function(e,r){var t,n,i,c,p=this.sb;u.indent(p,this.indentLevel++),p.push("interface "),p.push(e),p.push(" {\n");var _=r.members;if(_){try{for(var h=a(_),d=h.next();!d.done;d=h.next()){var y=s(d.value,2),T=y[0];if((E=y[1]).kind==l.ElementKind.ENUMVALUE){var m=E.is(o.CommonFlags.INLINED);u.indent(p,this.indentLevel),m?p.push("const "):p.push("readonly "),p.push("unsigned long "),p.push(T),m&&(p.push(" = "),assert(1==E.constantValueKind),p.push(i64_low(E.constantIntegerValue).toString(10))),p.push(";\n")}}}catch(e){t={error:e}}finally{try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(t)throw t.error}}try{for(var f=a(_.values()),g=f.next();!g.done;g=f.next()){var E;(E=g.value).kind!=l.ElementKind.ENUMVALUE&&this.visitElement(E.name,E)}}catch(e){i={error:e}}finally{try{g&&!g.done&&(c=f.return)&&c.call(f)}finally{if(i)throw i.error}}}u.indent(p,--this.indentLevel),p.push("}\n")},r.prototype.visitFunction=function(e,r){var t,n,i=this.sb,s=r.signature;u.indent(i,this.indentLevel),i.push(this.typeToString(s.returnType)),i.push(" "),i.push(e),i.push("(");for(var o=s.parameterTypes,l=o.length,c=0;c<l;++c)c&&i.push(", "),i.push(this.typeToString(o[c])),i.push(" "),i.push(s.getParameterName(c));i.push(");\n");var p=r.members;if(p&&p.size){u.indent(i,this.indentLevel),i.push("interface "),i.push(r.name),i.push(" {\n");try{for(var _=a(p.values()),h=_.next();!h.done;h=_.next()){var d=h.value;this.visitElement(d.name,d)}}catch(e){t={error:e}}finally{try{h&&!h.done&&(n=_.return)&&n.call(_)}finally{if(t)throw t.error}}u.indent(i,--this.indentLevel),i.push("}\n")}},r.prototype.visitClass=function(e,r){var t=this.sb;u.indent(t,this.indentLevel++),t.push("interface "),t.push(e),t.push(" {\n"),u.indent(t,--this.indentLevel),t.push("}\n")},r.prototype.visitInterface=function(e,r){this.visitClass(e,r)},r.prototype.visitField=function(e,r){},r.prototype.visitNamespace=function(e,r){var t,n,i=this.sb;u.indent(i,this.indentLevel++),i.push("interface "),i.push(e),i.push(" {\n");var s=r.members;if(s)try{for(var o=a(s.values()),l=o.next();!l.done;l=o.next()){var c=l.value;this.visitElement(c.name,c)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}u.indent(i,--this.indentLevel),i.push("}\n")},r.prototype.visitAlias=function(e,r,t){},r.prototype.typeToString=function(e){switch(e.kind){case 0:return"byte";case 1:return"short";case 2:return"long";case 3:return"long long";case 4:return this.program.options.isWasm64?"long long":"long";case 5:return"octet";case 6:return"unsigned short";case 7:return"unsigned long";case 8:return"unsigned long long";case 9:return this.program.options.isWasm64?"unsigned long long":"unsigned long";case 10:return"boolean";case 11:return"unrestricted float";case 12:return"unrestricted double";case 15:return"void";default:return assert(!1),""}},r.prototype.build=function(){var e=this.sb;return e.push("interface ASModule {\n"),++this.indentLevel,this.walk(),--this.indentLevel,e.push("}\n"),e.join("")},r}(p);r.IDLBuilder=_;var h=function(e){function r(r,t){void 0===t&&(t=!1);var n=e.call(this,r,t)||this;return n.sb=[],n.indentLevel=0,n.unknown=new Set,n}return i(r,e),r.build=function(e){return new r(e).build()},r.prototype.visitGlobal=function(e,r){var t=this.sb,n=r.is(o.CommonFlags.INLINED);u.indent(t,this.indentLevel),r.is(o.CommonFlags.STATIC)?n?t.push("static readonly "):t.push("static "):n?t.push("export const "):t.push("export var "),t.push(e),t.push(": "),t.push(this.typeToString(r.type)),t.push(";\n"),this.visitNamespace(e,r)},r.prototype.visitEnum=function(e,r){var t,n,i=this.sb;u.indent(i,this.indentLevel++),i.push("export enum "),i.push(e),i.push(" {\n");var c=r.members;if(c){var p=c.size;try{for(var _=a(c),h=_.next();!h.done;h=_.next()){var d=s(h.value,2),y=d[0],T=d[1];T.kind==l.ElementKind.ENUMVALUE&&(u.indent(i,this.indentLevel),i.push(y),T.is(o.CommonFlags.INLINED)&&(i.push(" = "),assert(1==T.constantValueKind),i.push(i64_low(T.constantIntegerValue).toString(10))),i.push(",\n"),--p)}}catch(e){t={error:e}}finally{try{h&&!h.done&&(n=_.return)&&n.call(_)}finally{if(t)throw t.error}}p&&this.visitNamespace(e,r)}u.indent(i,--this.indentLevel),i.push("}\n")},r.prototype.visitFunction=function(e,r){if(!r.isAny(o.CommonFlags.PRIVATE|o.CommonFlags.SET)){var t=this.sb,n=r.signature;if(u.indent(t,this.indentLevel),r.is(o.CommonFlags.PROTECTED)&&t.push("protected "),r.is(o.CommonFlags.STATIC)&&t.push("static "),r.is(o.CommonFlags.GET))return t.push("get "),t.push(e),t.push("(): "),t.push(this.typeToString(n.returnType)),void t.push(";\n");r.isAny(o.CommonFlags.STATIC|o.CommonFlags.INSTANCE)||t.push("export function "),t.push(e),t.push("(");for(var i=n.parameterTypes,a=i.length,s=0;s<a;++s)s&&t.push(", "),t.push(n.getParameterName(s)),t.push(": "),t.push(this.typeToString(i[s]));r.isAny(o.CommonFlags.CONSTRUCTOR|o.CommonFlags.SET)?t.push(")"):(t.push("): "),t.push(this.typeToString(n.returnType))),t.push(";\n"),this.visitNamespace(e,r)}},r.prototype.visitClass=function(e,r){var t,n,i,s,c=this.sb,p=r.kind==l.ElementKind.INTERFACE;u.indent(c,this.indentLevel++),p?c.push("export interface "):(r.is(o.CommonFlags.ABSTRACT)&&c.push("abstract "),c.push("export class ")),c.push(e),c.push(" {\n");var _=r.prototype.members;if(_)try{for(var h=a(_.values()),d=h.next();!d.done;d=h.next()){var y=d.value;this.visitElement(y.name,y)}}catch(e){t={error:e}}finally{try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(t)throw t.error}}var T=r.members;if(T)try{for(var m=a(T.values()),f=m.next();!f.done;f=m.next()){y=f.value;this.visitElement(y.name,y)}}catch(e){i={error:e}}finally{try{f&&!f.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}u.indent(c,--this.indentLevel),c.push("}\n")},r.prototype.visitInterface=function(e,r){this.visitClass(e,r)},r.prototype.visitField=function(e,r){if(!r.is(o.CommonFlags.PRIVATE)){var t=this.sb;u.indent(t,this.indentLevel),r.is(o.CommonFlags.PROTECTED)&&t.push("protected "),r.is(o.CommonFlags.STATIC)&&t.push("static "),r.is(o.CommonFlags.READONLY)&&t.push("readonly "),t.push(e),t.push(": "),t.push(this.typeToString(r.type)),t.push(";\n")}},r.prototype.visitNamespace=function(e,r){var t,n,i=r.members;if(i&&i.size){var s=this.sb;u.indent(s,this.indentLevel++),s.push("export namespace "),s.push(e),s.push(" {\n");try{for(var o=a(i.values()),l=o.next();!l.done;l=o.next()){var c=l.value;this.visitElement(c.name,c)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}u.indent(s,--this.indentLevel),s.push("}\n")}},r.prototype.visitAlias=function(e,r,t){var n=this.sb;u.indent(n,this.indentLevel),n.push("export const "),n.push(e),n.push(": typeof "),n.push(t),n.push(";\n")},r.prototype.typeToString=function(e){switch(e.kind){case 0:return"i8";case 1:return"i16";case 2:return"i32";case 3:return"I64";case 4:return this.program.options.isWasm64?"I64":"i32";case 5:return"u8";case 6:return"u16";case 7:return"u32";case 8:return"U64";case 9:return this.program.options.isWasm64?"U64":"u32";case 10:return"bool";case 11:return"f32";case 12:return"f64";case 13:return"v128";case 15:return"void";default:return assert(!1),"any"}},r.prototype.build=function(){var e=this.sb;return e.push("declare module ASModule {\n"),e.push("  type i8 = number;\n"),e.push("  type i16 = number;\n"),e.push("  type i32 = number;\n"),e.push("  type u8 = number;\n"),e.push("  type u16 = number;\n"),e.push("  type u32 = number;\n"),e.push("  type f32 = number;\n"),e.push("  type f64 = number;\n"),e.push("  type bool = any;\n"),++this.indentLevel,this.walk(),--this.indentLevel,e.push("}\n"),e.push("export default ASModule;\n"),this.sb.join("")},r}(p);r.TSDBuilder=h},function(e,r,t){"use strict";var n,i=this&&this.__extends||(n=function(e,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(e,r)},function(e,r){function t(){this.constructor=e}n(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)});Object.defineProperty(r,"__esModule",{value:!0});var a=t(0),s=t(4),o=t(7),l=t(2),c=t(1),u=t(3),p=function(e){function r(){var r=e.call(this)||this;return r.backlog=new Array,r.seenlog=new Set,r.donelog=new Set,r.onComment=null,r.dependees=new Map,r.tryParseSignatureIsSignature=!1,r.parseParametersThis=null,r.program=new s.Program(r.diagnostics),r}return i(r,e),r.prototype.parseFile=function(e,r,t){var n=c.normalizePath(r),i=u.mangleInternalPath(n);if(!this.donelog.has(i)){this.donelog.add(i),this.seenlog.add(i);var s=new u.Source(n,e,t?u.SourceKind.USER_ENTRY:r.startsWith(a.LIBRARY_PREFIX)?r.indexOf(a.PATH_DELIMITER,a.LIBRARY_PREFIX.length)<0?u.SourceKind.LIBRARY_ENTRY:u.SourceKind.LIBRARY:u.SourceKind.USER),l=this.program;l.sources.push(s),this.currentSource=s;var p=new o.Tokenizer(s,l.diagnostics);p.onComment=this.onComment,s.tokenizer=p;for(var _=s.statements;!p.skip(o.Token.ENDOFFILE);){var h=this.parseTopLevelStatement(p,null);h&&_.push(h)}p.finish()}},r.prototype.parseTopLevelStatement=function(e,r){void 0===r&&(r=null);for(var t=a.CommonFlags.NONE,n=-1,i=null;e.skip(o.Token.AT);){n<0&&(n=e.tokenPos);var s=this.parseDecorator(e);s?i?i.push(s):i=[s]:this.skipStatement(e)}var c=0,p=0,_=0,h=0;e.skip(o.Token.EXPORT)&&(n<0&&(n=e.tokenPos),t|=a.CommonFlags.EXPORT,c=e.tokenPos,p=e.pos,e.skip(o.Token.DEFAULT)&&(_=e.tokenPos,h=e.pos));var d=0,y=0,T=null!=r&&r.is(a.CommonFlags.AMBIENT);e.skip(o.Token.DECLARE)?T?this.error(l.DiagnosticCode.A_declare_modifier_cannot_be_used_in_an_already_ambient_context,e.range()):(n<0&&(n=e.tokenPos),d=n,y=e.pos,t|=a.CommonFlags.DECLARE|a.CommonFlags.AMBIENT):T&&(t|=a.CommonFlags.AMBIENT);var m=null,f=e.peek();switch(n<0&&(n=e.nextTokenPos),f){case o.Token.CONST:e.next(),t|=a.CommonFlags.CONST,m=e.skip(o.Token.ENUM)?this.parseEnum(e,t,i,n):this.parseVariable(e,t,i,n),i=null;break;case o.Token.LET:t|=a.CommonFlags.LET;case o.Token.VAR:e.next(),m=this.parseVariable(e,t,i,n),i=null;break;case o.Token.ENUM:e.next(),m=this.parseEnum(e,t,i,n),i=null;break;case o.Token.FUNCTION:e.next(),m=this.parseFunction(e,t,i,n),i=null;break;case o.Token.ABSTRACT:var g=e.mark();if(e.next(),!e.skip(o.Token.CLASS)){e.reset(g),m=this.parseStatement(e,!0);break}e.discard(g),t|=a.CommonFlags.ABSTRACT;case o.Token.CLASS:case o.Token.INTERFACE:e.next(),m=this.parseClassOrInterface(e,t,i,n),i=null;break;case o.Token.NAMESPACE:g=e.mark();e.next(),e.peek(!1,o.IdentifierHandling.PREFER)==o.Token.IDENTIFIER?(e.discard(g),m=this.parseNamespace(e,t,i,n),i=null):(e.reset(g),m=this.parseStatement(e,!0));break;case o.Token.IMPORT:e.next(),m=(t|=a.CommonFlags.IMPORT)&a.CommonFlags.EXPORT?this.parseExportImport(e,n):this.parseImport(e);break;case o.Token.TYPE:g=e.mark();e.next(),e.peek(!1,o.IdentifierHandling.PREFER)==o.Token.IDENTIFIER?(e.discard(g),m=this.parseTypeDeclaration(e,t,i,n),i=null):(e.reset(g),m=this.parseStatement(e,!0));break;default:t&a.CommonFlags.EXPORT?h&&e.skipIdentifier(o.IdentifierHandling.PREFER)?(y&&this.error(l.DiagnosticCode.An_export_assignment_cannot_have_modifiers,e.range(d,y)),m=this.parseExportDefaultAlias(e,n,_,h),_=h=0):m=this.parseExport(e,n,0!=(t&a.CommonFlags.DECLARE)):(p&&this.error(l.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(c,p),"export"),y&&this.error(l.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(d,y),"declare"),r||(m=this.parseStatement(e,!0)))}if(i)for(var E=0,v=i.length;E<v;++E)this.error(l.DiagnosticCode.Decorators_are_not_valid_here,i[E].range);if(h&&null!==m)switch(m.kind){case u.NodeKind.ENUMDECLARATION:case u.NodeKind.FUNCTIONDECLARATION:case u.NodeKind.CLASSDECLARATION:case u.NodeKind.INTERFACEDECLARATION:case u.NodeKind.NAMESPACEDECLARATION:return u.Node.createExportDefaultStatement(m,e.range(n,e.pos));default:this.error(l.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(_,h),"default")}return m},r.prototype.nextFile=function(){var e=this.backlog;return e.length?e.shift():null},r.prototype.getDependee=function(e){var r=this.dependees.get(e);return r?r.internalPath:null},r.prototype.finish=function(){if(this.backlog.length)throw new Error("backlog is not empty");return this.backlog=[],this.seenlog.clear(),this.donelog.clear(),this.dependees.clear(),this.program},r.prototype.parseType=function(e,r,t){void 0===r&&(r=!0),void 0===t&&(t=!1);var n,i=e.next(),a=e.tokenPos;if(i==o.Token.OPENPAREN){var s=e.skip(o.Token.OPENPAREN),c=this.tryParseFunctionType(e);if(c){if(s){if(!e.skip(o.Token.CLOSEPAREN))return this.error(l.DiagnosticCode._0_expected,e.range(),")"),null;if(!e.skip(o.Token.BAR))return this.error(l.DiagnosticCode._0_expected,e.range(),"|"),null;e.skip(o.Token.NULL)||this.error(l.DiagnosticCode._0_expected,e.range(),"null"),c.isNullable=!0}return c}if(s||this.tryParseSignatureIsSignature)return this.error(l.DiagnosticCode.Unexpected_token,e.range()),null;if(!r)return this.error(l.DiagnosticCode.Unexpected_token,e.range()),null;var p=this.parseType(e,!1,t);if(!p)return null;if(!e.skip(o.Token.CLOSEPAREN))return t||this.error(l.DiagnosticCode._0_expected,e.range(e.pos),")"),null;(n=p).range.start=a,n.range.end=e.pos}else if(i==o.Token.VOID)n=u.Node.createNamedType(u.Node.createSimpleTypeName("void",e.range()),[],!1,e.range(a,e.pos));else if(i==o.Token.THIS)n=u.Node.createNamedType(u.Node.createSimpleTypeName("this",e.range()),[],!1,e.range(a,e.pos));else if(i==o.Token.TRUE||i==o.Token.FALSE)n=u.Node.createNamedType(u.Node.createSimpleTypeName("bool",e.range()),[],!1,e.range(a,e.pos));else if(i==o.Token.STRINGLITERAL)e.readString(),n=u.Node.createNamedType(u.Node.createSimpleTypeName("string",e.range()),[],!1,e.range(a,e.pos));else{if(i!=o.Token.IDENTIFIER)return t||this.error(l.DiagnosticCode.Identifier_expected,e.range()),null;for(var _=u.Node.createSimpleTypeName(e.readIdentifier(),e.range()),h=_,d=null,y=!1;e.skip(o.Token.DOT);){if(!e.skip(o.Token.IDENTIFIER))return this.error(l.DiagnosticCode.Identifier_expected,e.range(e.pos)),null;var T=u.Node.createSimpleTypeName(e.readIdentifier(),e.range());h.next=T,h=T}if(e.skip(o.Token.LESSTHAN)){do{var m=this.parseType(e,!0,t);if(!m)return null;d?d.push(m):d=[m]}while(e.skip(o.Token.COMMA));if(!e.skip(o.Token.GREATERTHAN))return t||this.error(l.DiagnosticCode._0_expected,e.range(e.pos),">"),null}for(;e.skip(o.Token.BAR);){if(!e.skip(o.Token.NULL))return t||this.error(l.DiagnosticCode._0_expected,e.range(e.pos),"null"),null;y=!0}n=u.Node.createNamedType(_,d||[],y,e.range(a,e.pos))}for(;e.skip(o.Token.OPENBRACKET);){var f=e.tokenPos;if(!e.skip(o.Token.CLOSEBRACKET))return t||this.error(l.DiagnosticCode._0_expected,e.range(),"]"),null;var g=e.range(f,e.pos);y=!1;if(e.skip(o.Token.BAR)){if(!e.skip(o.Token.NULL))return t||this.error(l.DiagnosticCode._0_expected,e.range(),"null"),null;y=!0}if(n=u.Node.createNamedType(u.Node.createSimpleTypeName("Array",g),[n],y,e.range(a,e.pos)),y)break}return n},r.prototype.tryParseFunctionType=function(e){var r,t=e.mark(),n=e.tokenPos,i=null,a=null,s=!1,c=null,p=u.ParameterKind.DEFAULT;if(e.skip(o.Token.CLOSEPAREN))s=!0,e.discard(t),i=[];else{s=!1;do{var _=u.ParameterKind.DEFAULT;if(e.skip(o.Token.DOT_DOT_DOT)&&(s=!0,e.discard(t),_=u.ParameterKind.REST),e.skip(o.Token.THIS)){if(!e.skip(o.Token.COLON))return e.reset(t),this.tryParseSignatureIsSignature=!1,null;s=!0,e.discard(t);var h=this.parseType(e,!1);if(!h)return null;if(h.kind!=u.NodeKind.NAMEDTYPE)return this.error(l.DiagnosticCode.Identifier_expected,h.range),this.tryParseSignatureIsSignature=!0,null;a=h}else{if(!e.skipIdentifier())return s?this.error(l.DiagnosticCode.Identifier_expected,e.range()):e.reset(t),this.tryParseSignatureIsSignature=s,null;var d=u.Node.createIdentifierExpression(e.readIdentifier(),e.range(e.tokenPos,e.pos));if(e.skip(o.Token.QUESTION)&&(s=!0,e.discard(t),_==u.ParameterKind.REST?this.error(l.DiagnosticCode.A_rest_parameter_cannot_be_optional,e.range()):_=u.ParameterKind.OPTIONAL),e.skip(o.Token.COLON)){s=!0,e.discard(t);var y=this.parseType(e);if(!y)return this.tryParseSignatureIsSignature=s,null;(T=new u.ParameterNode).parameterKind=_,T.name=d,T.type=y,i?i.push(T):i=[T]}else{var T;if(s||e.peek()==o.Token.COMMA&&(s=!0,e.discard(t)),s)(T=new u.ParameterNode).parameterKind=_,T.name=d,T.type=u.Node.createOmittedType(e.range().atEnd),i?i.push(T):i=[T],this.error(l.DiagnosticCode.Type_expected,T.type.range);else i||(c=d,p=_)}}}while(e.skip(o.Token.COMMA));if(!e.skip(o.Token.CLOSEPAREN))return s?this.error(l.DiagnosticCode._0_expected,e.range(),")"):e.reset(t),this.tryParseSignatureIsSignature=s,null}return e.skip(o.Token.EQUALS_GREATERTHAN)?(s||(s=!0,e.discard(t),c&&((T=new u.ParameterNode).parameterKind=p,T.name=c,T.type=u.Node.createOmittedType(c.range.atEnd),i?i.push(T):i=[T],this.error(l.DiagnosticCode.Type_expected,T.type.range))),(r=this.parseType(e))?(this.tryParseSignatureIsSignature=!0,u.Node.createFunctionType(i||[],r,a,!1,e.range(n,e.pos))):(this.tryParseSignatureIsSignature=s,null)):(s?this.error(l.DiagnosticCode._0_expected,e.range(),"=>"):e.reset(t),this.tryParseSignatureIsSignature=s,null)},r.prototype.parseDecorator=function(e){var r=e.tokenPos;if(e.skipIdentifier()){for(var t=e.readIdentifier(),n=u.Node.createIdentifierExpression(t,e.range(r,e.pos));e.skip(o.Token.DOT);){if(!e.skipIdentifier())return this.error(l.DiagnosticCode.Identifier_expected,e.range()),null;t=e.readIdentifier(),n=u.Node.createPropertyAccessExpression(n,u.Node.createIdentifierExpression(t,e.range()),e.range(r,e.pos))}var i=void 0;if(!e.skip(o.Token.OPENPAREN))return u.Node.createDecorator(n,null,e.range(r,e.pos));if(i=this.parseArguments(e))return u.Node.createDecorator(n,i,e.range(r,e.pos))}else this.error(l.DiagnosticCode.Identifier_expected,e.range());return null},r.prototype.parseVariable=function(e,r,t,n){var i=new Array;do{var a=this.parseVariableDeclaration(e,r,t);if(!a)return null;i.push(a)}while(e.skip(o.Token.COMMA));var s=u.Node.createVariableStatement(i,t,e.range(n,e.pos));return e.skip(o.Token.SEMICOLON),s},r.prototype.parseVariableDeclaration=function(e,r,t){if(!e.skipIdentifier())return this.error(l.DiagnosticCode.Identifier_expected,e.range()),null;var n=u.Node.createIdentifierExpression(e.readIdentifier(),e.range());o.isIllegalVariableIdentifier(n.text)&&this.error(l.DiagnosticCode.Identifier_expected,n.range);var i=r;e.skip(o.Token.EXCLAMATION)&&(i|=a.CommonFlags.DEFINITE_ASSIGNMENT);var s=null;e.skip(o.Token.COLON)&&(s=this.parseType(e));var c=null;if(e.skip(o.Token.EQUALS)){if(i&a.CommonFlags.AMBIENT&&this.error(l.DiagnosticCode.Initializers_are_not_allowed_in_ambient_contexts,e.range()),!(c=this.parseExpression(e,2)))return null}else i&a.CommonFlags.CONST?i&a.CommonFlags.AMBIENT||this.error(l.DiagnosticCode._const_declarations_must_be_initialized,n.range):s||this.error(l.DiagnosticCode.Type_expected,e.range(e.pos));var p=o.Range.join(n.range,e.range());return i&a.CommonFlags.DEFINITE_ASSIGNMENT&&c&&this.error(l.DiagnosticCode.A_definite_assignment_assertion_is_not_permitted_in_this_context,p),u.Node.createVariableDeclaration(n,s,c,t,i,p)},r.prototype.parseEnum=function(e,r,t,n){if(e.next()!=o.Token.IDENTIFIER)return this.error(l.DiagnosticCode.Identifier_expected,e.range()),null;var i=u.Node.createIdentifierExpression(e.readIdentifier(),e.range());if(e.next()!=o.Token.OPENBRACE)return this.error(l.DiagnosticCode._0_expected,e.range(),"{"),null;for(var s=new Array;!e.skip(o.Token.CLOSEBRACE);){var c=this.parseEnumValue(e,a.CommonFlags.NONE);if(!c)return null;if(s.push(c),!e.skip(o.Token.COMMA)){if(e.skip(o.Token.CLOSEBRACE))break;return this.error(l.DiagnosticCode._0_expected,e.range(),"}"),null}}var p=u.Node.createEnumDeclaration(i,s,t,r,e.range(n,e.pos));return e.skip(o.Token.SEMICOLON),p},r.prototype.parseEnumValue=function(e,r){if(!e.skipIdentifier())return this.error(l.DiagnosticCode.Identifier_expected,e.range()),null;var t=u.Node.createIdentifierExpression(e.readIdentifier(),e.range()),n=null;return e.skip(o.Token.EQUALS)&&!(n=this.parseExpression(e,2))?null:u.Node.createEnumValueDeclaration(t,n,r,o.Range.join(t.range,e.range()))},r.prototype.parseReturn=function(e){var r=e.tokenPos,t=null;if(e.peek(!0)!=o.Token.SEMICOLON&&e.nextToken!=o.Token.CLOSEBRACE&&!e.nextTokenOnNewLine&&!(t=this.parseExpression(e)))return null;var n=u.Node.createReturnStatement(t,e.range(r,e.pos));return e.skip(o.Token.SEMICOLON),n},r.prototype.parseTypeParameters=function(e){for(var r=null,t=!1;!e.skip(o.Token.GREATERTHAN);){var n=this.parseTypeParameter(e);if(!n)return null;if(null!==n.defaultType?t=!0:t&&(this.error(l.DiagnosticCode.Required_type_parameters_may_not_follow_optional_type_parameters,n.range),n.defaultType=null),r?r.push(n):r=[n],!e.skip(o.Token.COMMA)){if(e.skip(o.Token.GREATERTHAN))break;return this.error(l.DiagnosticCode._0_expected,e.range(),">"),null}}return r&&r.length||this.error(l.DiagnosticCode.Type_parameter_list_cannot_be_empty,e.range()),r},r.prototype.parseTypeParameter=function(e){if(e.next()==o.Token.IDENTIFIER){var r=u.Node.createIdentifierExpression(e.readIdentifier(),e.range()),t=null;if(e.skip(o.Token.EXTENDS)){if(!(i=this.parseType(e)))return null;if(i.kind!=u.NodeKind.NAMEDTYPE)return this.error(l.DiagnosticCode.Identifier_expected,i.range),null;t=i}var n=null;if(e.skip(o.Token.EQUALS)){var i;if(!(i=this.parseType(e)))return null;if(i.kind!=u.NodeKind.NAMEDTYPE)return this.error(l.DiagnosticCode.Identifier_expected,i.range),null;n=i}return u.Node.createTypeParameter(r,t,n,o.Range.join(r.range,e.range()))}return this.error(l.DiagnosticCode.Identifier_expected,e.range()),null},r.prototype.parseParameters=function(e,r){void 0===r&&(r=!1);var t=new Array,n=null,i=!1,a=!1,s=null;if(this.parseParametersThis=null,e.skip(o.Token.THIS)){if(!e.skip(o.Token.COLON))return this.error(l.DiagnosticCode._0_expected,e.range(),":"),null;if(!(s=this.parseType(e)))return null;if(s.kind==u.NodeKind.NAMEDTYPE?this.parseParametersThis=s:this.error(l.DiagnosticCode.Identifier_expected,s.range),!e.skip(o.Token.COMMA))return e.skip(o.Token.CLOSEPAREN)?t:(this.error(l.DiagnosticCode._0_expected,e.range(),")"),null)}for(;!e.skip(o.Token.CLOSEPAREN);){var c=this.parseParameter(e,r);if(!c)return null;switch(n&&!a&&(this.error(l.DiagnosticCode.A_rest_parameter_must_be_last_in_a_parameter_list,n.name.range),a=!0),c.parameterKind){default:i&&this.error(l.DiagnosticCode.A_required_parameter_cannot_follow_an_optional_parameter,c.name.range);break;case u.ParameterKind.OPTIONAL:i=!0;break;case u.ParameterKind.REST:n=c}if(t.push(c),!e.skip(o.Token.COMMA)){if(e.skip(o.Token.CLOSEPAREN))break;return this.error(l.DiagnosticCode._0_expected,e.range(),")"),null}}return t},r.prototype.parseParameter=function(e,r){void 0===r&&(r=!1);var t=!1,n=!1,i=null,s=a.CommonFlags.NONE;if(r&&(e.skip(o.Token.PUBLIC)?(i=e.range(),s|=a.CommonFlags.PUBLIC):e.skip(o.Token.PROTECTED)?(i=e.range(),s|=a.CommonFlags.PROTECTED):e.skip(o.Token.PRIVATE)&&(i=e.range(),s|=a.CommonFlags.PRIVATE),e.peek()==o.Token.READONLY)){var c=e.mark();e.next(),e.peek()!=o.Token.COLON?(e.discard(c),i||(i=e.range()),s|=a.CommonFlags.READONLY):e.reset(c)}if(e.skip(o.Token.DOT_DOT_DOT)&&(s?this.error(l.DiagnosticCode.A_parameter_property_cannot_be_declared_using_a_rest_parameter,e.range()):i=e.range(),t=!0),e.skipIdentifier()){t||(i=e.range());var p=u.Node.createIdentifierExpression(e.readIdentifier(),e.range()),_=null;if((n=e.skip(o.Token.QUESTION))&&t&&this.error(l.DiagnosticCode.A_rest_parameter_cannot_be_optional,p.range),e.skip(o.Token.COLON)){if(!(_=this.parseType(e)))return null}else _=u.Node.createOmittedType(e.range(e.pos));var h=null;if(e.skip(o.Token.EQUALS)&&(t&&this.error(l.DiagnosticCode.A_rest_parameter_cannot_have_an_initializer,p.range),n?this.error(l.DiagnosticCode.Parameter_cannot_have_question_mark_and_initializer,p.range):n=!0,!(h=this.parseExpression(e,2))))return null;var d=u.Node.createParameter(p,_,h,t?u.ParameterKind.REST:n?u.ParameterKind.OPTIONAL:u.ParameterKind.DEFAULT,o.Range.join(i,e.range()));return d.flags|=s,d}return this.error(l.DiagnosticCode.Identifier_expected,e.range()),null},r.prototype.parseFunction=function(e,r,t,n){if(!e.skipIdentifier())return this.error(l.DiagnosticCode.Identifier_expected,e.range(e.pos)),null;var i=u.Node.createIdentifierExpression(e.readIdentifier(),e.range()),s=-1,c=null;if(e.skip(o.Token.LESSTHAN)){if(s=e.tokenPos,!(c=this.parseTypeParameters(e)))return null;r|=a.CommonFlags.GENERIC}if(!e.skip(o.Token.OPENPAREN))return this.error(l.DiagnosticCode._0_expected,e.range(e.pos),"("),null;s<0&&(s=e.tokenPos);var p=this.parseParameters(e);if(!p)return null;var _=this.parseParametersThis,h=0!=(r&a.CommonFlags.SET);h&&(1!=p.length&&this.error(l.DiagnosticCode.A_set_accessor_must_have_exactly_one_parameter,i.range),p.length&&p[0].initializer&&this.error(l.DiagnosticCode.A_set_accessor_parameter_cannot_have_an_initializer,i.range)),r&a.CommonFlags.GET&&p.length&&this.error(l.DiagnosticCode.A_get_accessor_cannot_have_parameters,i.range);var d=null;if(e.skip(o.Token.COLON)&&!(d=this.parseType(e,!0,h)))return null;d||(d=u.Node.createOmittedType(e.range(e.pos)),h||this.error(l.DiagnosticCode.Type_expected,d.range));var y=u.Node.createFunctionType(p,d,_,!1,e.range(s,e.pos)),T=null;if(e.skip(o.Token.OPENBRACE)){if(r&a.CommonFlags.AMBIENT&&this.error(l.DiagnosticCode.An_implementation_cannot_be_declared_in_ambient_contexts,e.range()),!(T=this.parseBlockStatement(e,!1)))return null}else r&a.CommonFlags.AMBIENT||this.error(l.DiagnosticCode.Function_implementation_is_missing_or_not_immediately_following_the_declaration,e.range(e.pos));var m=u.Node.createFunctionDeclaration(i,c,y,T,t,r,0,e.range(n,e.pos));return e.skip(o.Token.SEMICOLON),m},r.prototype.parseFunctionExpression=function(e){var r,t=e.tokenPos,n=0;if(e.token==o.Token.FUNCTION){if(r=e.skipIdentifier()?u.Node.createIdentifierExpression(e.readIdentifier(),e.range()):u.Node.createEmptyIdentifierExpression(e.range(e.pos)),!e.skip(o.Token.OPENPAREN))return this.error(l.DiagnosticCode._0_expected,e.range(e.pos),"("),null}else n=1,assert(e.token==o.Token.OPENPAREN),r=u.Node.createEmptyIdentifierExpression(e.range(e.tokenPos));var i=e.pos,a=this.parseParameters(e);return a?this.parseFunctionExpressionCommon(e,r,a,n,t,i):null},r.prototype.parseFunctionExpressionCommon=function(e,r,t,n,i,s){void 0===i&&(i=-1),void 0===s&&(s=-1),i<0&&(i=r.range.start),s<0&&(s=i);var c=null;if(2!=n&&e.skip(o.Token.COLON)){if(!(c=this.parseType(e)))return null}else c=u.Node.createOmittedType(e.range(e.pos));if(n&&!e.skip(o.Token.EQUALS_GREATERTHAN))return this.error(l.DiagnosticCode._0_expected,e.range(e.pos),"=>"),null;var p=u.Node.createFunctionType(t,c,null,!1,e.range(s,e.pos)),_=null;if(n)if(e.skip(o.Token.OPENBRACE))_=this.parseBlockStatement(e,!1);else{var h=this.parseExpression(e,2);h&&(_=u.Node.createExpressionStatement(h))}else{if(!e.skip(o.Token.OPENBRACE))return this.error(l.DiagnosticCode._0_expected,e.range(e.pos),"{"),null;_=this.parseBlockStatement(e,!1)}if(!_)return null;var d=u.Node.createFunctionDeclaration(r,null,p,_,null,a.CommonFlags.NONE,n,e.range(i,e.pos));return u.Node.createFunctionExpression(d)},r.prototype.parseClassOrInterface=function(e,r,t,n){var i=e.token==o.Token.INTERFACE;if(!e.skipIdentifier())return this.error(l.DiagnosticCode.Identifier_expected,e.range()),null;var s=u.Node.createIdentifierExpression(e.readIdentifier(),e.range()),c=null;if(e.skip(o.Token.LESSTHAN)){if(!(c=this.parseTypeParameters(e)))return null;r|=a.CommonFlags.GENERIC}var p=null;if(e.skip(o.Token.EXTENDS)){var _=this.parseType(e);if(!_)return null;if(_.kind!=u.NodeKind.NAMEDTYPE)return this.error(l.DiagnosticCode.Identifier_expected,_.range),null;p=_}var h=null;if(e.skip(o.Token.IMPLEMENTS)){i&&this.error(l.DiagnosticCode.Interface_declaration_cannot_have_implements_clause,e.range());do{var d=this.parseType(e);if(!d)return null;i||(h?h.push(d):h=[d])}while(e.skip(o.Token.COMMA))}if(!e.skip(o.Token.OPENBRACE))return this.error(l.DiagnosticCode._0_expected,e.range(),"{"),null;var y,T=new Array;if(i?(assert(!h),y=u.Node.createInterfaceDeclaration(s,c,p,T,t,r,e.range(n,e.pos))):y=u.Node.createClassDeclaration(s,c,p,h,T,t,r,e.range(n,e.pos)),!e.skip(o.Token.CLOSEBRACE))do{var m=this.parseClassMember(e,y);if(m)T.push(m);else if(this.skipStatement(e),e.skip(o.Token.ENDOFFILE))return this.error(l.DiagnosticCode._0_expected,e.range(),"}"),null}while(!e.skip(o.Token.CLOSEBRACE));return y.range.end=e.pos,y},r.prototype.parseClassExpression=function(e){var r,t=e.tokenPos;if(r=e.skipIdentifier()?u.Node.createIdentifierExpression(e.readIdentifier(),e.range()):u.Node.createEmptyIdentifierExpression(e.range(e.pos)),!e.skip(o.Token.OPENBRACE))return this.error(l.DiagnosticCode._0_expected,e.range(e.pos),"{"),null;var n=new Array,i=u.Node.createClassDeclaration(r,[],null,null,n,null,a.CommonFlags.NONE,e.range(t,e.pos));if(!e.skip(o.Token.CLOSEBRACE))do{var s=this.parseClassMember(e,i);if(s)n.push(s);else if(this.skipStatement(e),e.skip(o.Token.ENDOFFILE))return this.error(l.DiagnosticCode._0_expected,e.range(),"}"),null}while(!e.skip(o.Token.CLOSEBRACE));return i.range.end=e.pos,u.Node.createClassExpression(i)},r.prototype.parseClassMember=function(e,r){var t=e.pos,n=r.kind==u.NodeKind.INTERFACEDECLARATION,i=null;if(e.skip(o.Token.AT)){do{var s=this.parseDecorator(e);if(!s)break;i?i.push(s):i=[s]}while(e.skip(o.Token.AT));i&&n&&this.error(l.DiagnosticCode.Decorators_are_not_valid_here,o.Range.join(i[0].range,i[i.length-1].range))}var c=r.flags&a.CommonFlags.AMBIENT;n&&(c|=a.CommonFlags.VIRTUAL);var p=0,_=0;e.skip(o.Token.PUBLIC)?(n&&this.error(l.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(),"public"),c|=a.CommonFlags.PUBLIC,p=e.tokenPos,_=e.pos):e.skip(o.Token.PRIVATE)?(n&&this.error(l.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(),"private"),c|=a.CommonFlags.PRIVATE,p=e.tokenPos,_=e.pos):e.skip(o.Token.PROTECTED)&&(n&&this.error(l.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(),"protected"),c|=a.CommonFlags.PROTECTED,p=e.tokenPos,_=e.pos);var h=0,d=0,y=0,T=0;e.skip(o.Token.STATIC)?(n&&this.error(l.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(),"static"),c|=a.CommonFlags.STATIC,h=e.tokenPos,d=e.pos):(c|=a.CommonFlags.INSTANCE,e.skip(o.Token.ABSTRACT)&&(n&&this.error(l.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(),"abstract"),c|=a.CommonFlags.ABSTRACT,y=e.tokenPos,T=e.pos),r.flags&a.CommonFlags.GENERIC&&(c|=a.CommonFlags.GENERIC_CONTEXT));var m=0,f=0;if(e.peek()==o.Token.READONLY){var g=e.mark();e.next(),e.peek()!=o.Token.COLON?(e.discard(g),c|=a.CommonFlags.READONLY,m=e.tokenPos,f=e.pos):e.reset(g)}var E,v=e.mark(),b=!1,I=!1,x=!1,A=0,N=0;if(n||(e.skip(o.Token.GET)?e.peek(!0,o.IdentifierHandling.PREFER)!=o.Token.IDENTIFIER||e.nextTokenOnNewLine?e.reset(v):(c|=a.CommonFlags.GET,I=!0,A=e.tokenPos,N=e.pos,c&a.CommonFlags.READONLY&&this.error(l.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(m,f),"readonly")):e.skip(o.Token.SET)?e.peek(!0,o.IdentifierHandling.PREFER)!=o.Token.IDENTIFIER||e.nextTokenOnNewLine?e.reset(v):(c|=a.CommonFlags.SET,x=!0,A=e.tokenPos,N=e.pos,c&a.CommonFlags.READONLY&&this.error(l.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(m,f),"readonly")):e.skip(o.Token.CONSTRUCTOR)&&(b=!0,(c|=a.CommonFlags.CONSTRUCTOR)&a.CommonFlags.STATIC&&this.error(l.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(h,d),"static"),c&a.CommonFlags.ABSTRACT&&this.error(l.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(y,T),"abstract"),c&a.CommonFlags.READONLY&&this.error(l.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(m,f),"readonly"))),b)E=u.Node.createConstructorExpression(e.range());else{if(!I&&!x&&e.skip(o.Token.OPENBRACKET)){c&a.CommonFlags.PUBLIC?this.error(l.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(p,_),"public"):c&a.CommonFlags.PROTECTED?this.error(l.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(p,_),"protected"):c&a.CommonFlags.PRIVATE&&this.error(l.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(p,_),"protected"),c&a.CommonFlags.STATIC&&this.error(l.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(h,d),"static"),c&a.CommonFlags.ABSTRACT&&this.error(l.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(y,T),"abstract"),c&a.CommonFlags.READONLY&&this.error(l.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(m,f),"readonly");var S=this.parseIndexSignatureDeclaration(e,i);return S?(e.skip(o.Token.SEMICOLON),S):null}if(!e.skipIdentifier())return this.error(l.DiagnosticCode.Identifier_expected,e.range()),null;E=u.Node.createIdentifierExpression(e.readIdentifier(),e.range())}var O=null;if(e.skip(o.Token.LESSTHAN)){var C=e.tokenPos;if(!(O=this.parseTypeParameters(e)))return null;b?this.error(l.DiagnosticCode.Type_parameters_cannot_appear_on_a_constructor_declaration,e.range(C,e.pos)):I||x?this.error(l.DiagnosticCode.An_accessor_cannot_have_type_parameters,e.range(C,e.pos)):c|=a.CommonFlags.GENERIC}if(e.skip(o.Token.OPENPAREN)){var R=e.tokenPos,L=this.parseParameters(e,b);if(!L)return null;var k=this.parseParametersThis;if(b)for(var F=0,D=L.length;F<D;++F){var B=L[F];if(B.isAny(a.CommonFlags.PUBLIC|a.CommonFlags.PROTECTED|a.CommonFlags.PRIVATE|a.CommonFlags.READONLY)){var P=u.Node.createFieldDeclaration(B.name,B.type,null,null,B.flags|a.CommonFlags.INSTANCE,B.range);P.parameterIndex=F,B.implicitFieldDeclaration=P,r.members.push(P)}}else I?L.length&&this.error(l.DiagnosticCode.A_get_accessor_cannot_have_parameters,E.range):x&&(1!=L.length&&this.error(l.DiagnosticCode.A_set_accessor_must_have_exactly_one_parameter,E.range),L.length&&L[0].initializer&&this.error(l.DiagnosticCode.A_set_accessor_parameter_cannot_have_an_initializer,E.range));var w=null;if(e.skip(o.Token.COLON)){if(E.kind==u.NodeKind.CONSTRUCTOR?this.error(l.DiagnosticCode.Type_annotation_cannot_appear_on_a_constructor_declaration,e.range()):x&&this.error(l.DiagnosticCode.A_set_accessor_cannot_have_a_return_type_annotation,e.range()),!(w=this.parseType(e,E.kind==u.NodeKind.CONSTRUCTOR||x)))return null}else w=u.Node.createOmittedType(e.range(e.pos)),x||E.kind==u.NodeKind.CONSTRUCTOR||this.error(l.DiagnosticCode.Type_expected,w.range);var U=u.Node.createFunctionType(L,w,k,!1,e.range(R,e.pos)),M=null;if(e.skip(o.Token.OPENBRACE)){if(c&a.CommonFlags.AMBIENT?this.error(l.DiagnosticCode.An_implementation_cannot_be_declared_in_ambient_contexts,e.range()):c&a.CommonFlags.ABSTRACT&&this.error(l.DiagnosticCode.Method_0_cannot_have_an_implementation_because_it_is_marked_abstract,e.range(),E.text),!(M=this.parseBlockStatement(e,!1)))return null}else c&a.CommonFlags.AMBIENT||n||this.error(l.DiagnosticCode.Function_implementation_is_missing_or_not_immediately_following_the_declaration,e.range());var G=u.Node.createMethodDeclaration(E,O,U,M,i,c,e.range(t,e.pos));return e.skip(o.Token.SEMICOLON),G}if(b)this.error(l.DiagnosticCode.Constructor_implementation_is_missing,E.range);else{if(!I&&!x){c&a.CommonFlags.ABSTRACT&&this.error(l.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(y,T),"abstract"),c&a.CommonFlags.GET&&this.error(l.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(0,0),"get"),c&a.CommonFlags.SET&&this.error(l.DiagnosticCode._0_modifier_cannot_be_used_here,e.range(A,N),"set");var V=null;if(e.skip(o.Token.QUESTION)&&this.error(l.DiagnosticCode.Optional_properties_are_not_supported,e.range(t,e.pos)),e.skip(o.Token.EXCLAMATION)&&(c|=a.CommonFlags.DEFINITE_ASSIGNMENT),e.skip(o.Token.COLON)){if(!(V=this.parseType(e)))return null}else this.error(l.DiagnosticCode.Type_expected,e.range());var K=null;if(e.skip(o.Token.EQUALS)&&!(K=this.parseExpression(e)))return null;var z=e.range(t,e.pos);c&a.CommonFlags.DEFINITE_ASSIGNMENT&&(c&a.CommonFlags.STATIC||n||K)&&this.error(l.DiagnosticCode.A_definite_assignment_assertion_is_not_permitted_in_this_context,z);var Y=u.Node.createFieldDeclaration(E,V,K,i,c,z);return e.skip(o.Token.SEMICOLON),Y}this.error(l.DiagnosticCode.Function_implementation_is_missing_or_not_immediately_following_the_declaration,E.range)}return null},r.prototype.parseIndexSignatureDeclaration=function(e,r){r&&r.length&&this.error(l.DiagnosticCode.Decorators_are_not_valid_here,o.Range.join(r[0].range,r[r.length-1].range));var t=e.tokenPos;if(e.skipIdentifier())if("key"==e.readIdentifier())if(e.skip(o.Token.COLON)){var n=this.parseType(e);if(!n)return null;if(n.kind!=u.NodeKind.NAMEDTYPE)return this.error(l.DiagnosticCode.Type_expected,e.range()),null;if(e.skip(o.Token.CLOSEBRACKET)){if(e.skip(o.Token.COLON)){var i=this.parseType(e);return i?u.Node.createIndexSignatureDeclaration(n,i,e.range(t,e.pos)):null}this.error(l.DiagnosticCode._0_expected,e.range(),":")}else this.error(l.DiagnosticCode._0_expected,e.range(),"]")}else this.error(l.DiagnosticCode._0_expected,e.range(),":");else this.error(l.DiagnosticCode._0_expected,e.range(),"key");else this.error(l.DiagnosticCode.Identifier_expected,e.range());return null},r.prototype.parseNamespace=function(e,r,t,n){if(e.skipIdentifier()){var i=u.Node.createIdentifierExpression(e.readIdentifier(),e.range());if(e.skip(o.Token.OPENBRACE)){for(var a=new Array,s=u.Node.createNamespaceDeclaration(i,a,t,r,e.range(n,e.pos));!e.skip(o.Token.CLOSEBRACE);){var c=this.parseTopLevelStatement(e,s);if(c)a.push(c);else if(this.skipStatement(e),e.skip(o.Token.ENDOFFILE))return this.error(l.DiagnosticCode._0_expected,e.range(),"}"),null}return s.range.end=e.pos,e.skip(o.Token.SEMICOLON),s}this.error(l.DiagnosticCode._0_expected,e.range(),"{")}else this.error(l.DiagnosticCode.Identifier_expected,e.range());return null},r.prototype.parseExport=function(e,r,t){var n=null;if(e.skip(o.Token.OPENBRACE)){for(var i=new Array;!e.skip(o.Token.CLOSEBRACE);){var a=this.parseExportMember(e);if(!a)return null;if(i.push(a),!e.skip(o.Token.COMMA)){if(e.skip(o.Token.CLOSEBRACE))break;return this.error(l.DiagnosticCode._0_expected,e.range(),"}"),null}}if(e.skip(o.Token.FROM)){if(!e.skip(o.Token.STRINGLITERAL))return this.error(l.DiagnosticCode.String_literal_expected,e.range()),null;n=u.Node.createStringLiteralExpression(e.readString(),e.range())}return null===(c=(s=u.Node.createExportStatement(i,n,t,e.range(r,e.pos))).internalPath)||this.seenlog.has(c)||(this.dependees.set(c,this.currentSource),this.backlog.push(c),this.seenlog.add(c)),e.skip(o.Token.SEMICOLON),s}if(e.skip(o.Token.ASTERISK))if(e.skip(o.Token.FROM)){if(e.skip(o.Token.STRINGLITERAL)){n=u.Node.createStringLiteralExpression(e.readString(),e.range());var s=u.Node.createExportStatement(null,n,t,e.range(r,e.pos)),c=assert(s.internalPath),p=e.source;return p.exportPaths||(p.exportPaths=new Set),p.exportPaths.add(c),this.seenlog.has(c)||(this.dependees.set(c,this.currentSource),this.backlog.push(c)),e.skip(o.Token.SEMICOLON),s}this.error(l.DiagnosticCode.String_literal_expected,e.range())}else this.error(l.DiagnosticCode._0_expected,e.range(),"from");else this.error(l.DiagnosticCode._0_expected,e.range(),"{");return null},r.prototype.parseExportMember=function(e){if(e.skipIdentifier()){var r=u.Node.createIdentifierExpression(e.readIdentifier(),e.range()),t=null;if(e.skip(o.Token.AS)){if(!e.skipIdentifier(o.IdentifierHandling.ALWAYS))return this.error(l.DiagnosticCode.Identifier_expected,e.range()),null;t=u.Node.createIdentifierExpression(e.readIdentifier(),e.range())}return u.Node.createExportMember(r,t,t?o.Range.join(r.range,t.range):r.range)}return this.error(l.DiagnosticCode.Identifier_expected,e.range()),null},r.prototype.parseExportDefaultAlias=function(e,r,t,n){var i=e.readIdentifier(),a=e.range(),s=u.Node.createExportStatement([u.Node.createExportMember(u.Node.createIdentifierExpression(i,a),u.Node.createIdentifierExpression("default",e.range(t,n)),a)],null,!1,e.range(r,e.pos));return e.skip(o.Token.SEMICOLON),s},r.prototype.parseImport=function(e){var r=e.tokenPos,t=null,n=null,i=!1;if(e.skip(o.Token.OPENBRACE))for(t=new Array;!e.skip(o.Token.CLOSEBRACE);){var a=this.parseImportDeclaration(e);if(!a)return null;if(t.push(a),!e.skip(o.Token.COMMA)){if(e.skip(o.Token.CLOSEBRACE))break;return this.error(l.DiagnosticCode._0_expected,e.range(),"}"),null}}else if(e.skip(o.Token.ASTERISK)){if(!e.skip(o.Token.AS))return this.error(l.DiagnosticCode._0_expected,e.range(),"as"),null;if(!e.skipIdentifier())return this.error(l.DiagnosticCode.Identifier_expected,e.range()),null;n=u.Node.createIdentifierExpression(e.readIdentifier(),e.range())}else if(e.skip(o.Token.IDENTIFIER,o.IdentifierHandling.PREFER)){var s=e.readIdentifier(),c=e.range();if(t=[u.Node.createImportDeclaration(u.Node.createIdentifierExpression("default",c),u.Node.createIdentifierExpression(s,c),c)],e.skip(o.Token.COMMA))return this.error(l.DiagnosticCode.Not_implemented,e.range()),null}else i=!0;if(i||e.skip(o.Token.FROM)){if(e.skip(o.Token.STRINGLITERAL)){var p=u.Node.createStringLiteralExpression(e.readString(),e.range()),_=void 0;n?(assert(!t),_=u.Node.createImportStatementWithWildcard(n,p,e.range(r,e.pos))):_=u.Node.createImportStatement(t,p,e.range(r,e.pos));var h=_.internalPath;return this.seenlog.has(h)||(this.dependees.set(h,this.currentSource),this.backlog.push(h)),e.skip(o.Token.SEMICOLON),_}this.error(l.DiagnosticCode.String_literal_expected,e.range())}else this.error(l.DiagnosticCode._0_expected,e.range(),"from");return null},r.prototype.parseImportDeclaration=function(e){if(e.skipIdentifier(o.IdentifierHandling.ALWAYS)){var r=u.Node.createIdentifierExpression(e.readIdentifier(),e.range()),t=null;if(e.skip(o.Token.AS)){if(!e.skipIdentifier())return this.error(l.DiagnosticCode.Identifier_expected,e.range()),null;t=u.Node.createIdentifierExpression(e.readIdentifier(),e.range())}return u.Node.createImportDeclaration(r,t,t?o.Range.join(r.range,t.range):r.range)}return this.error(l.DiagnosticCode.Identifier_expected,e.range()),null},r.prototype.parseExportImport=function(e,r){if(e.skipIdentifier()){var t=u.Node.createIdentifierExpression(e.readIdentifier(),e.range());if(e.skip(o.Token.EQUALS)){if(e.skipIdentifier()){var n=u.Node.createIdentifierExpression(e.readIdentifier(),e.range()),i=u.Node.createExportImportStatement(n,t,e.range(r,e.pos));return e.skip(o.Token.SEMICOLON),i}this.error(l.DiagnosticCode.Identifier_expected,e.range())}else this.error(l.DiagnosticCode._0_expected,e.range(),"=")}else this.error(l.DiagnosticCode.Identifier_expected,e.range());return null},r.prototype.parseStatement=function(e,r){void 0===r&&(r=!1);var t=e.mark(),n=null;switch(e.next()){case o.Token.BREAK:n=this.parseBreak(e);break;case o.Token.CONST:n=this.parseVariable(e,a.CommonFlags.CONST,null,e.tokenPos);break;case o.Token.CONTINUE:n=this.parseContinue(e);break;case o.Token.DO:n=this.parseDoStatement(e);break;case o.Token.FOR:n=this.parseForStatement(e);break;case o.Token.IF:n=this.parseIfStatement(e);break;case o.Token.LET:n=this.parseVariable(e,a.CommonFlags.LET,null,e.tokenPos);break;case o.Token.VAR:n=this.parseVariable(e,a.CommonFlags.NONE,null,e.tokenPos);break;case o.Token.OPENBRACE:n=this.parseBlockStatement(e,r);break;case o.Token.RETURN:r&&this.error(l.DiagnosticCode.A_return_statement_can_only_be_used_within_a_function_body,e.range()),n=this.parseReturn(e);break;case o.Token.SEMICOLON:return u.Node.createEmptyStatement(e.range(e.tokenPos));case o.Token.SWITCH:n=this.parseSwitchStatement(e);break;case o.Token.THROW:n=this.parseThrowStatement(e);break;case o.Token.TRY:n=this.parseTryStatement(e);break;case o.Token.VOID:n=this.parseVoidStatement(e);break;case o.Token.WHILE:n=this.parseWhileStatement(e);break;case o.Token.TYPE:if(e.peek(!1,o.IdentifierHandling.PREFER)==o.Token.IDENTIFIER){n=this.parseTypeDeclaration(e,a.CommonFlags.NONE,null,e.tokenPos);break}default:e.reset(t),n=this.parseExpressionStatement(e)}return n?e.discard(t):(e.reset(t),this.skipStatement(e)),n},r.prototype.parseBlockStatement=function(e,r){for(var t=e.tokenPos,n=new Array;!e.skip(o.Token.CLOSEBRACE);){var i=e.mark(),a=this.parseStatement(e,r);if(a)e.discard(i),n.push(a);else{if(e.token==o.Token.ENDOFFILE)return null;e.reset(i),this.skipStatement(e)}}var s=u.Node.createBlockStatement(n,e.range(t,e.pos));return e.skip(o.Token.SEMICOLON),s},r.prototype.parseBreak=function(e){var r=null;e.peek(!0)!=o.Token.IDENTIFIER||e.nextTokenOnNewLine||(e.next(o.IdentifierHandling.PREFER),r=u.Node.createIdentifierExpression(e.readIdentifier(),e.range()));var t=u.Node.createBreakStatement(r,e.range());return e.skip(o.Token.SEMICOLON),t},r.prototype.parseContinue=function(e){var r=null;e.peek(!0)!=o.Token.IDENTIFIER||e.nextTokenOnNewLine||(e.next(o.IdentifierHandling.PREFER),r=u.Node.createIdentifierExpression(e.readIdentifier(),e.range()));var t=u.Node.createContinueStatement(r,e.range());return e.skip(o.Token.SEMICOLON),t},r.prototype.parseDoStatement=function(e){var r=e.tokenPos,t=this.parseStatement(e);if(!t)return null;if(e.skip(o.Token.WHILE))if(e.skip(o.Token.OPENPAREN)){var n=this.parseExpression(e);if(!n)return null;if(e.skip(o.Token.CLOSEPAREN)){var i=u.Node.createDoStatement(t,n,e.range(r,e.pos));return e.skip(o.Token.SEMICOLON),i}this.error(l.DiagnosticCode._0_expected,e.range(),")")}else this.error(l.DiagnosticCode._0_expected,e.range(),"(");else this.error(l.DiagnosticCode._0_expected,e.range(),"while");return null},r.prototype.parseExpressionStatement=function(e){var r=this.parseExpression(e);if(!r)return null;var t=u.Node.createExpressionStatement(r);return e.skip(o.Token.SEMICOLON),t},r.prototype.parseForStatement=function(e){var r=e.tokenPos;if(e.skip(o.Token.OPENPAREN)){var t=null;if(e.skip(o.Token.CONST))t=this.parseVariable(e,a.CommonFlags.CONST,null,e.tokenPos);else if(e.skip(o.Token.LET))t=this.parseVariable(e,a.CommonFlags.LET,null,e.tokenPos);else if(e.skip(o.Token.VAR))t=this.parseVariable(e,a.CommonFlags.NONE,null,e.tokenPos);else if(!e.skip(o.Token.SEMICOLON)&&!(t=this.parseExpressionStatement(e)))return null;if(e.token==o.Token.SEMICOLON){var n=null;if(!e.skip(o.Token.SEMICOLON)&&!(n=this.parseExpressionStatement(e)))return null;if(e.token==o.Token.SEMICOLON){var i=null;if(!e.skip(o.Token.CLOSEPAREN)){if(!(i=this.parseExpression(e)))return null;if(!e.skip(o.Token.CLOSEPAREN))return this.error(l.DiagnosticCode._0_expected,e.range(),")"),null}var s=this.parseStatement(e);return s?u.Node.createForStatement(t,n?n.expression:null,i,s,e.range(r,e.pos)):null}this.error(l.DiagnosticCode._0_expected,e.range(),";")}else this.error(l.DiagnosticCode._0_expected,e.range(),";")}else this.error(l.DiagnosticCode._0_expected,e.range(),"(");return null},r.prototype.parseIfStatement=function(e){var r=e.tokenPos;if(e.skip(o.Token.OPENPAREN)){var t=this.parseExpression(e);if(!t)return null;if(e.skip(o.Token.CLOSEPAREN)){var n=this.parseStatement(e);if(!n)return null;var i=null;return e.skip(o.Token.ELSE)&&!(i=this.parseStatement(e))?null:u.Node.createIfStatement(t,n,i,e.range(r,e.pos))}this.error(l.DiagnosticCode._0_expected,e.range(),")")}else this.error(l.DiagnosticCode._0_expected,e.range(),"(");return null},r.prototype.parseSwitchStatement=function(e){var r=e.tokenPos;if(e.skip(o.Token.OPENPAREN)){var t=this.parseExpression(e);if(!t)return null;if(e.skip(o.Token.CLOSEPAREN)){if(e.skip(o.Token.OPENBRACE)){for(var n=new Array;!e.skip(o.Token.CLOSEBRACE);){var i=this.parseSwitchCase(e);if(!i)return null;n.push(i)}var a=u.Node.createSwitchStatement(t,n,e.range(r,e.pos));return e.skip(o.Token.SEMICOLON),a}this.error(l.DiagnosticCode._0_expected,e.range(),"{")}else this.error(l.DiagnosticCode._0_expected,e.range(),")")}else this.error(l.DiagnosticCode._0_expected,e.range(),"(");return null},r.prototype.parseSwitchCase=function(e){var r,t,n=e.tokenPos;if(e.skip(o.Token.CASE)){var i=this.parseExpression(e);if(!i)return null;if(e.skip(o.Token.COLON)){for(r=new Array;e.peek()!=o.Token.CASE&&e.nextToken!=o.Token.DEFAULT&&e.nextToken!=o.Token.CLOSEBRACE;){if(!(t=this.parseStatement(e)))return null;r.push(t)}return u.Node.createSwitchCase(i,r,e.range(n,e.pos))}this.error(l.DiagnosticCode._0_expected,e.range(),":")}else if(e.skip(o.Token.DEFAULT)){if(e.skip(o.Token.COLON)){for(r=new Array;e.peek()!=o.Token.CASE&&e.nextToken!=o.Token.DEFAULT&&e.nextToken!=o.Token.CLOSEBRACE;){if(!(t=this.parseStatement(e)))return null;r.push(t)}return u.Node.createSwitchCase(null,r,e.range(n,e.pos))}this.error(l.DiagnosticCode._0_expected,e.range(),":")}else this.error(l.DiagnosticCode._case_or_default_expected,e.range());return null},r.prototype.parseThrowStatement=function(e){var r=e.tokenPos,t=this.parseExpression(e);if(!t)return null;var n=u.Node.createThrowStatement(t,e.range(r,e.pos));return e.skip(o.Token.SEMICOLON),n},r.prototype.parseTryStatement=function(e){var r,t=e.tokenPos;if(e.skip(o.Token.OPENBRACE)){for(var n=new Array;!e.skip(o.Token.CLOSEBRACE);){if(!(r=this.parseStatement(e)))return null;n.push(r)}var i=null,a=null,s=null;if(e.skip(o.Token.CATCH)){if(!e.skip(o.Token.OPENPAREN))return this.error(l.DiagnosticCode._0_expected,e.range(),"("),null;if(!e.skipIdentifier())return this.error(l.DiagnosticCode.Identifier_expected,e.range()),null;if(i=u.Node.createIdentifierExpression(e.readIdentifier(),e.range()),!e.skip(o.Token.CLOSEPAREN))return this.error(l.DiagnosticCode._0_expected,e.range(),")"),null;if(!e.skip(o.Token.OPENBRACE))return this.error(l.DiagnosticCode._0_expected,e.range(),"{"),null;for(a=[];!e.skip(o.Token.CLOSEBRACE);){if(!(r=this.parseStatement(e)))return null;a.push(r)}}if(e.skip(o.Token.FINALLY)){if(!e.skip(o.Token.OPENBRACE))return this.error(l.DiagnosticCode._0_expected,e.range(),"{"),null;for(s=[];!e.skip(o.Token.CLOSEBRACE);){if(!(r=this.parseStatement(e)))return null;s.push(r)}}if(!a&&!s)return this.error(l.DiagnosticCode._0_expected,e.range(),"catch"),null;var c=u.Node.createTryStatement(n,i,a,s,e.range(t,e.pos));return e.skip(o.Token.SEMICOLON),c}return this.error(l.DiagnosticCode._0_expected,e.range(),"{"),null},r.prototype.parseTypeDeclaration=function(e,r,t,n){if(e.skipIdentifier()){var i=u.Node.createIdentifierExpression(e.readIdentifier(),e.range()),s=null;if(e.skip(o.Token.LESSTHAN)){if(!(s=this.parseTypeParameters(e)))return null;r|=a.CommonFlags.GENERIC}if(e.skip(o.Token.EQUALS)){var c=this.parseType(e);if(!c)return null;var p=u.Node.createTypeDeclaration(i,s,c,t,r,e.range(n,e.pos));return e.skip(o.Token.SEMICOLON),p}this.error(l.DiagnosticCode._0_expected,e.range(),"=")}else this.error(l.DiagnosticCode.Identifier_expected,e.range());return null},r.prototype.parseVoidStatement=function(e){var r=e.tokenPos,t=this.parseExpression(e,21);if(!t)return null;var n=u.Node.createVoidStatement(t,e.range(r,e.pos));return e.skip(o.Token.SEMICOLON),n},r.prototype.parseWhileStatement=function(e){var r=e.tokenPos;if(e.skip(o.Token.OPENPAREN)){var t=this.parseExpression(e);if(!t)return null;if(e.skip(o.Token.CLOSEPAREN)){var n=this.parseStatement(e);if(!n)return null;var i=u.Node.createWhileStatement(t,n,e.range(r,e.pos));return e.skip(o.Token.SEMICOLON),i}this.error(l.DiagnosticCode._0_expected,e.range(),")")}else this.error(l.DiagnosticCode._0_expected,e.range(),"(");return null},r.prototype.parseExpressionStart=function(e){var r=e.next(o.IdentifierHandling.PREFER),t=e.tokenPos,n=function(e){switch(e){case o.Token.DOT_DOT_DOT:return 2;case o.Token.YIELD:return 3;case o.Token.EXCLAMATION:case o.Token.TILDE:case o.Token.PLUS:case o.Token.MINUS:case o.Token.PLUS_PLUS:case o.Token.MINUS_MINUS:case o.Token.TYPEOF:case o.Token.VOID:case o.Token.DELETE:return 17;case o.Token.NEW:return 20}return 0}(r);if(0!=n){var i=void 0;return r==o.Token.NEW?(i=this.parseExpression(e,19))?i.kind==u.NodeKind.CALL?u.Node.createNewExpression(i.expression,i.typeArguments,i.arguments,e.range(t,e.pos)):(this.error(l.DiagnosticCode.This_expression_is_not_constructable,i.range),null):null:(i=this.parseExpression(e,n))?(r!=o.Token.PLUS_PLUS&&r!=o.Token.MINUS_MINUS||i.kind!=u.NodeKind.IDENTIFIER&&i.kind!=u.NodeKind.ELEMENTACCESS&&i.kind!=u.NodeKind.PROPERTYACCESS&&this.error(l.DiagnosticCode.The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_or_a_property_access,i.range),u.Node.createUnaryPrefixExpression(r,i,e.range(t,e.pos))):null}var a=null;switch(r){case o.Token.NULL:return u.Node.createNullExpression(e.range());case o.Token.TRUE:return u.Node.createTrueExpression(e.range());case o.Token.FALSE:return u.Node.createFalseExpression(e.range());case o.Token.OPENPAREN:if(e.skip(o.Token.CLOSEPAREN))return this.parseFunctionExpressionCommon(e,u.Node.createEmptyIdentifierExpression(e.range(t)),[],1);var s=e.mark(),c=!0;do{switch(e.next(o.IdentifierHandling.PREFER)){case o.Token.DOT_DOT_DOT:return e.reset(s),this.parseFunctionExpression(e);case o.Token.IDENTIFIER:switch(e.readIdentifier(),e.next()){case o.Token.CLOSEPAREN:if(!e.skip(o.Token.COLON)&&!e.skip(o.Token.EQUALS_GREATERTHAN)){c=!1;break}case o.Token.COLON:return e.reset(s),this.parseFunctionExpression(e);case o.Token.QUESTION:if(e.skip(o.Token.COLON)||e.skip(o.Token.COMMA)||e.skip(o.Token.CLOSEPAREN))return e.reset(s),this.parseFunctionExpression(e);c=!1;break;case o.Token.COMMA:break;default:c=!1}break;default:c=!1}}while(c);return e.reset(s),(a=this.parseExpression(e))?e.skip(o.Token.CLOSEPAREN)?u.Node.createParenthesizedExpression(a,e.range(t,e.pos)):(this.error(l.DiagnosticCode._0_expected,e.range(),")"),null):null;case o.Token.OPENBRACKET:for(var p=new Array;!e.skip(o.Token.CLOSEBRACKET);){if(e.peek()==o.Token.COMMA)a=null;else if(!(a=this.parseExpression(e,2)))return null;if(p.push(a),!e.skip(o.Token.COMMA)){if(e.skip(o.Token.CLOSEBRACKET))break;return this.error(l.DiagnosticCode._0_expected,e.range(),"]"),null}}return u.Node.createArrayLiteralExpression(p,e.range(t,e.pos));case o.Token.OPENBRACE:for(var _=e.tokenPos,h=new Array,d=new Array,y=void 0;!e.skip(o.Token.CLOSEBRACE);){if(e.skipIdentifier())y=u.Node.createIdentifierExpression(e.readIdentifier(),e.range());else{if(!e.skip(o.Token.STRINGLITERAL))return this.error(l.DiagnosticCode.Identifier_expected,e.range()),null;(y=u.Node.createIdentifierExpression(e.readString(),e.range())).isQuoted=!0}if(h.push(y),e.skip(o.Token.COLON)){var T=this.parseExpression(e,2);if(!T)return null;d.push(T)}else{if(y.isQuoted)return this.error(l.DiagnosticCode._0_expected,e.range(),":"),null;d.push(y)}if(!e.skip(o.Token.COMMA)){if(e.skip(o.Token.CLOSEBRACE))break;return this.error(l.DiagnosticCode._0_expected,e.range(),"}"),null}}return u.Node.createObjectLiteralExpression(h,d,e.range(_,e.pos));case o.Token.LESSTHAN:var m=this.parseType(e);return m?e.skip(o.Token.GREATERTHAN)?(a=this.parseExpression(e,19))?u.Node.createAssertionExpression(u.AssertionKind.PREFIX,a,m,e.range(t,e.pos)):null:(this.error(l.DiagnosticCode._0_expected,e.range(),">"),null):null;case o.Token.IDENTIFIER:var f=e.readIdentifier();if("null"==f)return u.Node.createNullExpression(e.range());var g=u.Node.createIdentifierExpression(f,e.range(t,e.pos));return e.peek(!0)!=o.Token.EQUALS_GREATERTHAN||e.nextTokenOnNewLine?g:this.parseFunctionExpressionCommon(e,u.Node.createEmptyIdentifierExpression(e.range(t)),[u.Node.createParameter(g,u.Node.createOmittedType(g.range.atEnd),null,u.ParameterKind.DEFAULT,g.range)],2,t);case o.Token.THIS:return u.Node.createThisExpression(e.range(t,e.pos));case o.Token.CONSTRUCTOR:return u.Node.createConstructorExpression(e.range(t,e.pos));case o.Token.SUPER:return e.peek()!=o.Token.DOT&&e.nextToken!=o.Token.OPENPAREN&&this.error(l.DiagnosticCode._super_must_be_followed_by_an_argument_list_or_member_access,e.range()),u.Node.createSuperExpression(e.range(t,e.pos));case o.Token.STRINGLITERAL:return u.Node.createStringLiteralExpression(e.readString(),e.range(t,e.pos));case o.Token.INTEGERLITERAL:return u.Node.createIntegerLiteralExpression(e.readInteger(),e.range(t,e.pos));case o.Token.FLOATLITERAL:return u.Node.createFloatLiteralExpression(e.readFloat(),e.range(t,e.pos));case o.Token.SLASH:var E=e.readRegexpPattern();return e.skip(o.Token.SLASH)?u.Node.createRegexpLiteralExpression(E,e.readRegexpFlags(),e.range(t,e.pos)):(this.error(l.DiagnosticCode._0_expected,e.range(),"/"),null);case o.Token.FUNCTION:return this.parseFunctionExpression(e);case o.Token.CLASS:return this.parseClassExpression(e);default:return r==o.Token.ENDOFFILE?this.error(l.DiagnosticCode.Unexpected_end_of_text,e.range(t)):this.error(l.DiagnosticCode.Expression_expected,e.range()),null}},r.prototype.tryParseTypeArgumentsBeforeArguments=function(e){var r=e.mark();if(!e.skip(o.Token.LESSTHAN))return null;var t=null;do{if(e.peek()===o.Token.GREATERTHAN)break;var n=this.parseType(e,!0,!0);if(!n)return e.reset(r),null;t?t.push(n):t=[n]}while(e.skip(o.Token.COMMA));return e.skip(o.Token.GREATERTHAN)&&e.skip(o.Token.OPENPAREN)?t:(e.reset(r),null)},r.prototype.parseArguments=function(e){for(var r=new Array;!e.skip(o.Token.CLOSEPAREN);){var t=this.parseExpression(e,2);if(!t)return null;if(r.push(t),!e.skip(o.Token.COMMA)){if(e.skip(o.Token.CLOSEPAREN))break;return this.error(l.DiagnosticCode._0_expected,e.range(),")"),null}}return r},r.prototype.parseExpression=function(e,r){void 0===r&&(r=1),assert(0!=r);var t=this.parseExpressionStart(e);if(!t)return null;for(var n,i,a=(t=this.maybeParseCallExpression(e,t)).range.start,s=null;(i=_(n=e.peek()))>=r;){switch(e.next(),n){case o.Token.AS:var c=this.parseType(e);if(!c)return null;t=u.Node.createAssertionExpression(u.AssertionKind.AS,t,c,e.range(a,e.pos));break;case o.Token.EXCLAMATION:t=u.Node.createAssertionExpression(u.AssertionKind.NONNULL,t,null,e.range(a,e.pos));break;case o.Token.INSTANCEOF:var p=this.parseType(e);if(!p)return null;t=u.Node.createInstanceOfExpression(t,p,e.range(a,e.pos));break;case o.Token.OPENBRACKET:if(!(s=this.parseExpression(e)))return null;if(!e.skip(o.Token.CLOSEBRACKET))return this.error(l.DiagnosticCode._0_expected,e.range(),"]"),null;t=u.Node.createElementAccessExpression(t,s,e.range(a,e.pos));break;case o.Token.PLUS_PLUS:case o.Token.MINUS_MINUS:t.kind!=u.NodeKind.IDENTIFIER&&t.kind!=u.NodeKind.ELEMENTACCESS&&t.kind!=u.NodeKind.PROPERTYACCESS&&this.error(l.DiagnosticCode.The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_or_a_property_access,t.range),t=u.Node.createUnaryPostfixExpression(n,t,e.range(a,e.pos));break;case o.Token.QUESTION:var d=this.parseExpression(e);if(!d)return null;if(!e.skip(o.Token.COLON))return this.error(l.DiagnosticCode._0_expected,e.range(),":"),null;var y=this.parseExpression(e,r>1?2:1);if(!y)return null;t=u.Node.createTernaryExpression(t,d,y,e.range(a,e.pos));break;case o.Token.COMMA:var T=[t];do{if(!(t=this.parseExpression(e,2)))return null;T.push(t)}while(e.skip(o.Token.COMMA));t=u.Node.createCommaExpression(T,e.range(a,e.pos));break;default:if(n==o.Token.DOT){if(e.skipIdentifier())s=u.Node.createIdentifierExpression(e.readIdentifier(),e.range());else if(!(s=this.parseExpression(e,h(n)?i:i+1)))return null;if(s.kind==u.NodeKind.IDENTIFIER)t=u.Node.createPropertyAccessExpression(t,s,e.range(a,e.pos));else{if(s.kind!=u.NodeKind.CALL)return this.error(l.DiagnosticCode.Identifier_expected,s.range),null;if(!(t=this.joinPropertyCall(e,a,t,s)))return null}}else{if(!(s=this.parseExpression(e,h(n)?i:i+1)))return null;t=u.Node.createBinaryExpression(n,t,s,e.range(a,e.pos))}}t=this.maybeParseCallExpression(e,t)}return t},r.prototype.joinPropertyCall=function(e,r,t,n){var i=n.expression;switch(i.kind){case u.NodeKind.IDENTIFIER:n.expression=u.Node.createPropertyAccessExpression(t,i,e.range(r,e.pos));break;case u.NodeKind.CALL:var a=this.joinPropertyCall(e,r,t,i);if(!a)return null;n.expression=a,n.range=e.range(r,e.pos);break;default:return this.error(l.DiagnosticCode.Identifier_expected,n.range),null}return n},r.prototype.maybeParseCallExpression=function(e,r){if(u.nodeIsCallable(r.kind))for(var t=null;e.skip(o.Token.OPENPAREN)||u.nodeIsGenericCallable(r.kind)&&null!==(t=this.tryParseTypeArgumentsBeforeArguments(e));){var n=this.parseArguments(e);if(!n)break;r=u.Node.createCallExpression(r,t,n,e.range(r.range.start,e.pos))}return r},r.prototype.skipStatement=function(e){for(e.peek(!0),e.nextTokenOnNewLine&&e.next();;){var r=e.peek(!0);if(r==o.Token.ENDOFFILE||r==o.Token.SEMICOLON){e.next();break}if(e.nextTokenOnNewLine)break;switch(e.next()){case o.Token.IDENTIFIER:e.readIdentifier();break;case o.Token.STRINGLITERAL:e.readString();break;case o.Token.INTEGERLITERAL:e.readInteger();break;case o.Token.FLOATLITERAL:e.readFloat();break;case o.Token.OPENBRACE:this.skipBlock(e)}}},r.prototype.skipBlock=function(e){var r=1,t=!0;do{switch(e.next()){case o.Token.ENDOFFILE:this.error(l.DiagnosticCode._0_expected,e.range(),"}"),t=!1;break;case o.Token.OPENBRACE:++r;break;case o.Token.CLOSEBRACE:--r||(t=!1);break;case o.Token.IDENTIFIER:e.readIdentifier();break;case o.Token.STRINGLITERAL:e.readString();break;case o.Token.INTEGERLITERAL:e.readInteger();break;case o.Token.FLOATLITERAL:e.readFloat()}}while(t)},r}(l.DiagnosticEmitter);function _(e){switch(e){case o.Token.COMMA:return 1;case o.Token.EQUALS:case o.Token.PLUS_EQUALS:case o.Token.MINUS_EQUALS:case o.Token.ASTERISK_ASTERISK_EQUALS:case o.Token.ASTERISK_EQUALS:case o.Token.SLASH_EQUALS:case o.Token.PERCENT_EQUALS:case o.Token.LESSTHAN_LESSTHAN_EQUALS:case o.Token.GREATERTHAN_GREATERTHAN_EQUALS:case o.Token.GREATERTHAN_GREATERTHAN_GREATERTHAN_EQUALS:case o.Token.AMPERSAND_EQUALS:case o.Token.CARET_EQUALS:case o.Token.BAR_EQUALS:return 4;case o.Token.QUESTION:return 5;case o.Token.BAR_BAR:return 6;case o.Token.AMPERSAND_AMPERSAND:return 7;case o.Token.BAR:return 8;case o.Token.CARET:return 9;case o.Token.AMPERSAND:return 10;case o.Token.EQUALS_EQUALS:case o.Token.EXCLAMATION_EQUALS:case o.Token.EQUALS_EQUALS_EQUALS:case o.Token.EXCLAMATION_EQUALS_EQUALS:return 11;case o.Token.AS:case o.Token.IN:case o.Token.INSTANCEOF:case o.Token.LESSTHAN:case o.Token.GREATERTHAN:case o.Token.LESSTHAN_EQUALS:case o.Token.GREATERTHAN_EQUALS:return 12;case o.Token.LESSTHAN_LESSTHAN:case o.Token.GREATERTHAN_GREATERTHAN:case o.Token.GREATERTHAN_GREATERTHAN_GREATERTHAN:return 13;case o.Token.PLUS:case o.Token.MINUS:return 14;case o.Token.ASTERISK:case o.Token.SLASH:case o.Token.PERCENT:return 15;case o.Token.ASTERISK_ASTERISK:return 16;case o.Token.PLUS_PLUS:case o.Token.MINUS_MINUS:return 18;case o.Token.DOT:case o.Token.NEW:case o.Token.OPENBRACKET:case o.Token.EXCLAMATION:return 20}return 0}function h(e){switch(e){case o.Token.EQUALS:case o.Token.PLUS_EQUALS:case o.Token.MINUS_EQUALS:case o.Token.ASTERISK_ASTERISK_EQUALS:case o.Token.ASTERISK_EQUALS:case o.Token.SLASH_EQUALS:case o.Token.PERCENT_EQUALS:case o.Token.LESSTHAN_LESSTHAN_EQUALS:case o.Token.GREATERTHAN_GREATERTHAN_EQUALS:case o.Token.GREATERTHAN_GREATERTHAN_GREATERTHAN_EQUALS:case o.Token.AMPERSAND_EQUALS:case o.Token.CARET_EQUALS:case o.Token.BAR_EQUALS:case o.Token.QUESTION:case o.Token.ASTERISK_ASTERISK:return!0;default:return!1}}r.Parser=p,function(e){e[e.NONE=0]="NONE",e[e.COMMA=1]="COMMA",e[e.SPREAD=2]="SPREAD",e[e.YIELD=3]="YIELD",e[e.ASSIGNMENT=4]="ASSIGNMENT",e[e.CONDITIONAL=5]="CONDITIONAL",e[e.LOGICAL_OR=6]="LOGICAL_OR",e[e.LOGICAL_AND=7]="LOGICAL_AND",e[e.BITWISE_OR=8]="BITWISE_OR",e[e.BITWISE_XOR=9]="BITWISE_XOR",e[e.BITWISE_AND=10]="BITWISE_AND",e[e.EQUALITY=11]="EQUALITY",e[e.RELATIONAL=12]="RELATIONAL",e[e.SHIFT=13]="SHIFT",e[e.ADDITIVE=14]="ADDITIVE",e[e.MULTIPLICATIVE=15]="MULTIPLICATIVE",e[e.EXPONENTIATED=16]="EXPONENTIATED",e[e.UNARY_PREFIX=17]="UNARY_PREFIX",e[e.UNARY_POSTFIX=18]="UNARY_POSTFIX",e[e.CALL=19]="CALL",e[e.MEMBERACCESS=20]="MEMBERACCESS",e[e.GROUPING=21]="GROUPING"}(r.Precedence||(r.Precedence={}))},function(e,r,t){t(18),e.exports=t(28)},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),t(19),t(21),t(22),t(23);var n=t(5);n.Module.prototype.toText=function(){return binaryen.wrapModule(this.ref).emitStackIR(!0)},n.Module.prototype.toAsmjs=function(){return binaryen.wrapModule(this.ref).emitAsmjs()}},function(e,r,t){(function(e){const r=e.Binaryen||t(20);for(var n in e.binaryen=r,r)(n.startsWith("_Binaryen")||n.startsWith("_Relooper"))&&(e[n]=r[n]);e.__memory_allocate=r._malloc,e.__memory_free=r._free,e.__memory_copy=r._memmove,e.__store=function(e,t){r.HEAPU8[e]=t},e.__load=function(e){return r.HEAPU8[e]}}).call(this,t(8))},function(r,t){r.exports=e},function(e,r,t){(function(e){var r="undefined"!=typeof window&&window||void 0!==e&&e||self;r.ASC_TARGET=2,r.ASC_NO_ASSERT=!1,r.ASC_MEMORY_BASE=0,r.ASC_OPTIMIZE_LEVEL=3,r.ASC_SHRINK_LEVEL=0,r.ASC_FEATURE_MUTABLE_GLOBAL=!1,r.ASC_FEATURE_SIGN_EXTENSION=!1,r.ASC_FEATURE_BULK_MEMORY=!1,r.ASC_FEATURE_SIMD=!1,r.ASC_FEATURE_THREADS=!1;var t=new Float64Array(1),n=new Uint32Array(t.buffer);function i(){Error.captureStackTrace?Error.captureStackTrace(this,i):this.stack=this.name+": "+this.message+"\n"+(new Error).stack}function a(e){this.message=e||"assertion failed",Error.captureStackTrace?Error.captureStackTrace(this,a):this.stack=this.name+": "+this.message+"\n"+(new Error).stack}function s(e,r){if(e===r){if(0!==e)return 0;e=1/e,r=1/r}else{var t=e!=e,n=r!=r;if(t|n)return t-n;null==e&&(e=String(e)),null==r&&(r=String(r))}return e>r?1:-1}Object.defineProperties(r.i8=function(e){return e<<24>>24},{MIN_VALUE:{value:-128,writable:!1},MAX_VALUE:{value:127,writable:!1}}),Object.defineProperties(r.i16=function(e){return e<<16>>16},{MIN_VALUE:{value:-32768,writable:!1},MAX_VALUE:{value:32767,writable:!1}}),Object.defineProperties(r.i32=r.isize=function(e){return 0|e},{MIN_VALUE:{value:-2147483648,writable:!1},MAX_VALUE:{value:2147483647,writable:!1}}),Object.defineProperties(r.u8=function(e){return 255&e},{MIN_VALUE:{value:0,writable:!1},MAX_VALUE:{value:255,writable:!1}}),Object.defineProperties(r.u16=function(e){return 65535&e},{MIN_VALUE:{value:0,writable:!1},MAX_VALUE:{value:65535,writable:!1}}),Object.defineProperties(r.u32=r.usize=function(e){return e>>>0},{MIN_VALUE:{value:0,writable:!1},MAX_VALUE:{value:4294967295,writable:!1}}),Object.defineProperties(r.bool=function(e){return!!e},{MIN_VALUE:{value:!1,writable:!1},MAX_VALUE:{value:!0,writable:!1}}),Object.defineProperties(r.f32=function(e){return Math.fround(e)},{EPSILON:{value:Math.fround(1.1920929e-7),writable:!1},MIN_VALUE:{value:Math.fround(14012985e-52),writable:!1},MAX_VALUE:{value:Math.fround(34028235e31),writable:!1},MIN_NORMAL_VALUE:{value:Math.fround(117549435e-46),writable:!1},MIN_SAFE_INTEGER:{value:-16777215,writable:!1},MAX_SAFE_INTEGER:{value:16777215,writable:!1}}),Object.defineProperties(r.f64=function(e){return+e},{EPSILON:{value:2220446049250313e-31,writable:!1},MIN_VALUE:{value:5e-324,writable:!1},MAX_VALUE:{value:17976931348623157e292,writable:!1},MIN_NORMAL_VALUE:{value:22250738585072014e-324,writable:!1},MIN_SAFE_INTEGER:{value:-9007199254740991,writable:!1},MAX_SAFE_INTEGER:{value:9007199254740991,writable:!1}}),r.clz=Math.clz32,r.ctz=function(e){var r=Math.clz32(e&-e);return e?31-r:r},r.popcnt=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},r.rotl=function(e,r){return e<<(r&=31)|e>>>32-r},r.rotr=function(e,r){return e>>>(r&=31)|e<<32-r},r.abs=Math.abs,r.max=Math.max,r.min=Math.min,r.ceil=Math.ceil,r.floor=Math.floor,r.nearest=function(e){return.5===Math.abs(e-Math.trunc(e))?2*Math.round(.5*e):Math.round(e)},r.select=function(e,r,t){return t?e:r},r.sqrt=Math.sqrt,r.trunc=Math.trunc,r.copysign=function(e,r){return Math.abs(e)*Math.sign(r)},r.bswap=function(e){var r=e>>8&16711935,t=(16711935&e)<<8;return(r=(e=r|t)>>16&65535)|(t=(65535&e)<<16)},r.bswap16=function(e){return e<<8&65280|e>>8&255|4294901760&e},i.prototype=Object.create(Error.prototype),i.prototype.name="UnreachableError",i.prototype.message="unreachable",r.unreachable=function(){throw new i},a.prototype=Object.create(Error.prototype),a.prototype.name="AssertionError",r.assert=function(e,r){if(e)return e;throw new a(r)},r.changetype=function(e){return e},String.fromCharCodes=function(e){return String.fromCharCode.apply(String,e)},String.fromCodePoints=function(e){return String.fromCodePoint.apply(String,e)},String.prototype.replaceAll||Object.defineProperty(String.prototype,"replaceAll",{value:function(e,r){var t=this.split(e).join(r);return e.length||(t=r+t+r),t}});const o=Array.prototype.sort;Array.prototype.sort=function(e){return o.call(this,e||s)},r.isInteger=Number.isInteger,r.isFloat=function(e){return"number"==typeof e},r.isNullable=function(e){return!0},r.isReference=function(e){return"object"==typeof e||"string"==typeof e},r.isFunction=function(e){return"function"==typeof e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isArray=Array.isArray,r.isArrayLike=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&Math.trunc(e.length)===e.length},r.isDefined=function(e){return void 0!==e},r.isConstant=function(e){return!1},r.unchecked=function(e){return e},r.fmod=function(e,r){return e%r},r.fmodf=function(e,r){return Math.fround(e%r)},r.JSMath=Math,Object.defineProperties(r.JSMath,{sincos_sin:{value:0,writable:!0},sincos_cos:{value:0,writable:!0},signbit:{value:function(e){return t[0]=e,Boolean(n[1]>>>31&e==e)}},sincos:{value:function(e){this.sincos_sin=Math.sin(e),this.sincos_cos=Math.cos(e)}}}),r.memory=(()=>{var e=new Uint8Array(0),t=0;return{allocate:r.__memory_allocate||function(r){if(!(r>>>=0))return 0;if(t+r>e.length){var n=e;(e=new Uint8Array(Math.max(65536,e.length+r,2*e.length))).set(n)}var i=t;return 7&(t+=r)&&(t=1+(7|t)),i},fill:r.__memory_fill||function(r,t,n){e.fill(t,r,r+n)},free:r.__memory_free||function(e){},copy:r.__memory_copy||function(r,t,n){e.copyWithin(r,t,t+n)},reset:r.__memory_reset||function(){e=new Uint8Array(0),t=0}}})(),r.store=r.__store||function(e,r,t){HEAP[(0|e)+(0|t)]=r},r.load=r.__load||function(e,r){return HEAP[(0|e)+(0|r)]},r.unmanaged=function(){}}).call(this,t(8))},function(e,r,t){(function(e){const r=new Float64Array(1),t=new Float32Array(r.buffer),n=new Int32Array(r.buffer);e.f32_as_i32=function(e){return t[0]=e,n[0]},e.i32_as_f32=function(e){return n[0]=e,t[0]},e.f64_as_i64=function(e){return r[0]=e,i64_new(n[0],n[1])},e.i64_as_f64=function(e){return n[0]=i64_low(e),n[1]=i64_high(e),r[0]}}).call(this,t(8))},function(e,r,t){(function(e){const r=e.Long||t(24);e.i64_zero=r.ZERO,e.i64_one=r.ONE,e.i64_new=function(e,t){return r.fromBits(e,t)},e.i64_low=function(e){return e.low},e.i64_high=function(e){return e.high},e.i64_add=function(e,r){return e.add(r)},e.i64_sub=function(e,r){return e.sub(r)},e.i64_mul=function(e,r){return e.mul(r)},e.i64_div=function(e,r){return e.div(r)},e.i64_div_u=function(e,r){return e.toUnsigned().div(r.toUnsigned()).toSigned()},e.i64_rem=function(e,r){return e.mod(r)},e.i64_rem_u=function(e,r){return e.toUnsigned().mod(r.toUnsigned()).toSigned()},e.i64_and=function(e,r){return e.and(r)},e.i64_or=function(e,r){return e.or(r)},e.i64_xor=function(e,r){return e.xor(r)},e.i64_shl=function(e,r){return e.shl(r)},e.i64_shr=function(e,r){return e.shr(r)},e.i64_shr_u=function(e,r){return e.shru(r)},e.i64_not=function(e){return e.not()},e.i64_eq=function(e,r){return e.eq(r)},e.i64_ne=function(e,r){return e.ne(r)},e.i64_align=function(e,t){assert(t&&0==(t&t-1));var n=r.fromInt(t-1);return e.add(n).and(n.not())},e.i64_is_i8=function(e){return 0===e.high&&e.low>=0&&e.low<=i8.MAX_VALUE||-1===e.high&&e.low>=i8.MIN_VALUE&&e.low<0},e.i64_is_i16=function(e){return 0===e.high&&e.low>=0&&e.low<=i16.MAX_VALUE||-1===e.high&&e.low>=i16.MIN_VALUE&&e.low<0},e.i64_is_i32=function(e){return 0===e.high&&e.low>=0||-1===e.high&&e.low<0},e.i64_is_u8=function(e){return 0===e.high&&e.low>=0&&e.low<=u8.MAX_VALUE},e.i64_is_u16=function(e){return 0===e.high&&e.low>=0&&e.low<=u16.MAX_VALUE},e.i64_is_u32=function(e){return 0===e.high},e.i64_is_bool=function(e){return 0===e.high&&(0===e.low||1===e.low)};const n=r.fromNumber(f32.MIN_SAFE_INTEGER),i=r.fromNumber(f32.MAX_SAFE_INTEGER);e.i64_is_f32=function(e){return e.gte(n)&&e.lte(i)};const a=r.fromNumber(f64.MIN_SAFE_INTEGER),s=r.fromNumber(f64.MAX_SAFE_INTEGER);e.i64_is_f64=function(e){return e.gte(a)&&e.lte(s)},e.i64_to_f32=function(r){return e.Math.fround(r.toNumber())},e.i64_to_f64=function(e){return e.toNumber()},e.i64_to_string=function(e,r){return(r?e.toUnsigned():e).toString(10)}}).call(this,t(8))},function(e,r){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,r,t){this.low=0|e,this.high=0|r,this.unsigned=!!t}function i(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=i;var a={},s={};function o(e,r){var t,n,i;return r?(i=0<=(e>>>=0)&&e<256)&&(n=s[e])?n:(t=c(e,(0|e)<0?-1:0,!0),i&&(s[e]=t),t):(i=-128<=(e|=0)&&e<128)&&(n=a[e])?n:(t=c(e,e<0?-1:0,!1),i&&(a[e]=t),t)}function l(e,r){if(isNaN(e))return r?f:m;if(r){if(e<0)return f;if(e>=d)return I}else{if(e<=-y)return x;if(e+1>=y)return b}return e<0?l(-e,r).neg():c(e%h|0,e/h|0,r)}function c(e,r,t){return new n(e,r,t)}n.fromInt=o,n.fromNumber=l,n.fromBits=c;var u=Math.pow;function p(e,r,t){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"==typeof r?(t=r,r=!1):r=!!r,(t=t||10)<2||36<t)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return p(e.substring(1),r,t).neg();for(var i=l(u(t,8)),a=m,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+o),t);if(o<8){var _=l(u(t,o));a=a.mul(_).add(l(c))}else a=(a=a.mul(i)).add(l(c))}return a.unsigned=r,a}function _(e,r){return"number"==typeof e?l(e,r):"string"==typeof e?p(e,r):c(e.low,e.high,"boolean"==typeof r?r:e.unsigned)}n.fromString=p,n.fromValue=_;var h=4294967296,d=h*h,y=d/2,T=o(1<<24),m=o(0);n.ZERO=m;var f=o(0,!0);n.UZERO=f;var g=o(1);n.ONE=g;var E=o(1,!0);n.UONE=E;var v=o(-1);n.NEG_ONE=v;var b=c(-1,2147483647,!1);n.MAX_VALUE=b;var I=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=I;var x=c(0,-2147483648,!1);n.MIN_VALUE=x;var A=n.prototype;A.toInt=function(){return this.unsigned?this.low>>>0:this.low},A.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},A.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(x)){var r=l(e),t=this.div(r),n=t.mul(r).sub(this);return t.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=l(u(e,6),this.unsigned),a=this,s="";;){var o=a.div(i),c=(a.sub(o.mul(i)).toInt()>>>0).toString(e);if((a=o).isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}},A.getHighBits=function(){return this.high},A.getHighBitsUnsigned=function(){return this.high>>>0},A.getLowBits=function(){return this.low},A.getLowBitsUnsigned=function(){return this.low>>>0},A.getNumBitsAbs=function(){if(this.isNegative())return this.eq(x)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,r=31;r>0&&0==(e&1<<r);r--);return 0!=this.high?r+33:r+1},A.isZero=function(){return 0===this.high&&0===this.low},A.eqz=A.isZero,A.isNegative=function(){return!this.unsigned&&this.high<0},A.isPositive=function(){return this.unsigned||this.high>=0},A.isOdd=function(){return 1==(1&this.low)},A.isEven=function(){return 0==(1&this.low)},A.equals=function(e){return i(e)||(e=_(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},A.eq=A.equals,A.notEquals=function(e){return!this.eq(e)},A.neq=A.notEquals,A.ne=A.notEquals,A.lessThan=function(e){return this.comp(e)<0},A.lt=A.lessThan,A.lessThanOrEqual=function(e){return this.comp(e)<=0},A.lte=A.lessThanOrEqual,A.le=A.lessThanOrEqual,A.greaterThan=function(e){return this.comp(e)>0},A.gt=A.greaterThan,A.greaterThanOrEqual=function(e){return this.comp(e)>=0},A.gte=A.greaterThanOrEqual,A.ge=A.greaterThanOrEqual,A.compare=function(e){if(i(e)||(e=_(e)),this.eq(e))return 0;var r=this.isNegative(),t=e.isNegative();return r&&!t?-1:!r&&t?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},A.comp=A.compare,A.negate=function(){return!this.unsigned&&this.eq(x)?x:this.not().add(g)},A.neg=A.negate,A.add=function(e){i(e)||(e=_(e));var r=this.high>>>16,t=65535&this.high,n=this.low>>>16,a=65535&this.low,s=e.high>>>16,o=65535&e.high,l=e.low>>>16,u=0,p=0,h=0,d=0;return h+=(d+=a+(65535&e.low))>>>16,p+=(h+=n+l)>>>16,u+=(p+=t+o)>>>16,u+=r+s,c((h&=65535)<<16|(d&=65535),(u&=65535)<<16|(p&=65535),this.unsigned)},A.subtract=function(e){return i(e)||(e=_(e)),this.add(e.neg())},A.sub=A.subtract,A.multiply=function(e){if(this.isZero())return m;if(i(e)||(e=_(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(x))return e.isOdd()?x:m;if(e.eq(x))return this.isOdd()?x:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(T)&&e.lt(T))return l(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,n=65535&this.high,a=this.low>>>16,s=65535&this.low,o=e.high>>>16,u=65535&e.high,p=e.low>>>16,h=65535&e.low,d=0,y=0,f=0,g=0;return f+=(g+=s*h)>>>16,y+=(f+=a*h)>>>16,f&=65535,y+=(f+=s*p)>>>16,d+=(y+=n*h)>>>16,y&=65535,d+=(y+=a*p)>>>16,y&=65535,d+=(y+=s*u)>>>16,d+=r*h+n*p+a*u+s*o,c((f&=65535)<<16|(g&=65535),(d&=65535)<<16|(y&=65535),this.unsigned)},A.mul=A.multiply,A.divide=function(e){if(i(e)||(e=_(e)),e.isZero())throw Error("division by zero");var r,n,a;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?f:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return f;if(e.gt(this.shru(1)))return E;a=f}else{if(this.eq(x))return e.eq(g)||e.eq(v)?x:e.eq(x)?g:(r=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?g:v:(n=this.sub(e.mul(r)),a=r.add(n.div(e)));if(e.eq(x))return this.unsigned?f:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();a=m}for(n=this;n.gte(e);){r=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(r)/Math.LN2),o=s<=48?1:u(2,s-48),p=l(r),h=p.mul(e);h.isNegative()||h.gt(n);)h=(p=l(r-=o,this.unsigned)).mul(e);p.isZero()&&(p=g),a=a.add(p),n=n.sub(h)}return a},A.div=A.divide,A.modulo=function(e){return i(e)||(e=_(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},A.mod=A.modulo,A.rem=A.modulo,A.not=function(){return c(~this.low,~this.high,this.unsigned)},A.and=function(e){return i(e)||(e=_(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},A.or=function(e){return i(e)||(e=_(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},A.xor=function(e){return i(e)||(e=_(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},A.shiftLeft=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},A.shl=A.shiftLeft,A.shiftRight=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},A.shr=A.shiftRight,A.shiftRightUnsigned=function(e){if(i(e)&&(e=e.toInt()),0===(e&=63))return this;var r=this.high;return e<32?c(this.low>>>e|r<<32-e,r>>>e,this.unsigned):c(32===e?r:r>>>e-32,0,this.unsigned)},A.shru=A.shiftRightUnsigned,A.shr_u=A.shiftRightUnsigned,A.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},A.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},A.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},A.toBytesLE=function(){var e=this.high,r=this.low;return[255&r,r>>>8&255,r>>>16&255,r>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},A.toBytesBE=function(){var e=this.high,r=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,r>>>24,r>>>16&255,r>>>8&255,255&r]},n.fromBytes=function(e,r,t){return t?n.fromBytesLE(e,r):n.fromBytesBE(e,r)},n.fromBytesLE=function(e,r){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)},n.fromBytesBE=function(e,r){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e){e[e.NONE=0]="NONE",e[e.SIGN_EXTENSION=1]="SIGN_EXTENSION",e[e.MUTABLE_GLOBALS=2]="MUTABLE_GLOBALS",e[e.NONTRAPPING_F2I=4]="NONTRAPPING_F2I",e[e.BULK_MEMORY=8]="BULK_MEMORY",e[e.SIMD=16]="SIMD",e[e.THREADS=32]="THREADS",e[e.EXCEPTION_HANDLING=64]="EXCEPTION_HANDLING",e[e.TAIL_CALLS=128]="TAIL_CALLS",e[e.REFERENCE_TYPES=256]="REFERENCE_TYPES"}(r.Feature||(r.Feature={})),r.featureToString=function(e){switch(e){case 1:return"sign-extension";case 2:return"mutable-globals";case 4:return"nontrapping-f2i";case 8:return"bulk-memory";case 16:return"simd";case 32:return"threads";case 64:return"exception-handling";case 128:return"tail-calls";case 256:return"reference-types"}return assert(!1),""}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e){e[e.WASM32=0]="WASM32",e[e.WASM64=1]="WASM64",e[e.JS=2]="JS"}(r.Target||(r.Target={}))},function(e,r,t){"use strict";var n=this&&this.__decorate||function(e,r,t,n){var i,a=arguments.length,s=a<3?r:null===n?n=Object.getOwnPropertyDescriptor(r,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,r,t,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(a<3?i(s):a>3?i(r,t,s):i(r,t))||s);return a>3&&s&&Object.defineProperty(r,t,s),s};Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(){}return e=n([unmanaged],e)}();r.Typeinfo=i,function(e){e[e.NONE=0]="NONE",e[e.ARRAYBUFFERVIEW=1]="ARRAYBUFFERVIEW",e[e.ARRAY=2]="ARRAY",e[e.SET=4]="SET",e[e.MAP=8]="MAP",e[e.ACYCLIC=16]="ACYCLIC",e[e.VALUE_ALIGN_0=32]="VALUE_ALIGN_0",e[e.VALUE_ALIGN_1=64]="VALUE_ALIGN_1",e[e.VALUE_ALIGN_2=128]="VALUE_ALIGN_2",e[e.VALUE_ALIGN_3=256]="VALUE_ALIGN_3",e[e.VALUE_ALIGN_4=512]="VALUE_ALIGN_4",e[e.VALUE_SIGNED=1024]="VALUE_SIGNED",e[e.VALUE_FLOAT=2048]="VALUE_FLOAT",e[e.VALUE_NULLABLE=4096]="VALUE_NULLABLE",e[e.VALUE_MANAGED=8192]="VALUE_MANAGED",e[e.KEY_ALIGN_0=16384]="KEY_ALIGN_0",e[e.KEY_ALIGN_1=32768]="KEY_ALIGN_1",e[e.KEY_ALIGN_2=65536]="KEY_ALIGN_2",e[e.KEY_ALIGN_3=131072]="KEY_ALIGN_3",e[e.KEY_ALIGN_4=262144]="KEY_ALIGN_4",e[e.KEY_SIGNED=524288]="KEY_SIGNED",e[e.KEY_FLOAT=1048576]="KEY_FLOAT",e[e.KEY_NULLABLE=2097152]="KEY_NULLABLE",e[e.KEY_MANAGED=4194304]="KEY_MANAGED"}(r.TypeinfoFlags||(r.TypeinfoFlags={}))},function(e,r,t){"use strict";var n=this&&this.__values||function(e){var r="function"==typeof Symbol&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};function i(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}Object.defineProperty(r,"__esModule",{value:!0});var a=t(11),s=t(14),o=t(15),l=t(2);r.formatDiagnostic=l.formatDiagnosticMessage;var c=t(16);r.parseFile=function(e,r,t,n){return void 0===t&&(t=!1),void 0===n&&(n=null),n||(n=new c.Parser),n.parseFile(e,r,t),n},r.nextFile=function(e){return e.nextFile()},r.getDependee=function(e,r){return e.getDependee(r)},r.nextDiagnostic=function(e){var r=e.program;return r.diagnosticsOffset<r.diagnostics.length?r.diagnostics[r.diagnosticsOffset++]:null},r.isInfo=function(e){return e.category==l.DiagnosticCategory.INFO},r.isWarning=function(e){return e.category==l.DiagnosticCategory.WARNING},r.isError=function(e){return e.category==l.DiagnosticCategory.ERROR},r.createOptions=function(){return new a.Options},r.setTarget=function(e,r){e.target=r},r.setNoAssert=function(e,r){e.noAssert=r},r.setImportMemory=function(e,r){e.importMemory=r},r.setSharedMemory=function(e,r){e.sharedMemory=r},r.setImportTable=function(e,r){e.importTable=r},r.setSourceMap=function(e,r){e.sourceMap=r},r.setMemoryBase=function(e,r){e.memoryBase=r},r.setGlobalAlias=function(e,r,t){var n=e.globalAliases;n||(e.globalAliases=n=new Map),n.set(r,t)},r.setExplicitStart=function(e,r){e.explicitStart=r},r.setNoUnsafe=function(e,r){e.noUnsafe=r},r.FEATURE_SIGN_EXTENSION=1,r.FEATURE_MUTABLE_GLOBALS=2,r.FEATURE_NONTRAPPING_F2I=4,r.FEATURE_BULK_MEMORY=8,r.FEATURE_SIMD=16,r.FEATURE_THREADS=32,r.FEATURE_EXCEPTION_HANDLING=64,r.FEATURE_TAIL_CALLS=128,r.FEATURE_REFERENCE_TYPES=256,r.enableFeature=function(e,r){e.features|=r},r.disableFeature=function(e,r){e.features&=~r},r.setOptimizeLevelHints=function(e,r,t){e.optimizeLevelHint=r,e.shrinkLevelHint=t},r.finishParsing=function(e){return e.finish()},r.getSource=function(e,r){return e.getSource(r)},r.compileProgram=function(e,r){return void 0===r&&(r=null),new a.Compiler(e,r).compile()},r.decompileModule=function(e){var r=new s.Decompiler;return r.decompile(e),r.finish()},r.buildIDL=function(e){return o.IDLBuilder.build(e)},r.buildTSD=function(e){return o.TSDBuilder.build(e)},r.buildRTTI=function(e){var r,t,i,a,s,o,l=new Array;l.push('{\n  "names": [\n');try{for(var c=n(e.managedClasses.values()),u=c.next();!u.done;u=c.next()){var p=u.value;l.push('    "'),l.push(p.internalName),l.push('",\n')}}catch(e){r={error:e}}finally{try{u&&!u.done&&(t=c.return)&&t.call(c)}finally{if(r)throw r.error}}l.push('  ],\n  "base": [\n');try{for(var _=n(e.managedClasses.values()),h=_.next();!h.done;h=_.next()){var d=(p=h.value).base;l.push("    "),l.push(d?d.id.toString():"0"),l.push(",\n")}}catch(e){i={error:e}}finally{try{h&&!h.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}l.push('  ],\n  "flags": [\n');try{for(var y=n(e.managedClasses.values()),T=y.next();!T.done;T=y.next()){p=T.value;l.push("    "),l.push(p.rttiFlags.toString()),l.push(",\n")}}catch(e){s={error:e}}finally{try{T&&!T.done&&(o=y.return)&&o.call(y)}finally{if(s)throw s.error}}return l.push("  ]\n}\n"),l.join("")};var u=t(0);r.LIBRARY_PREFIX=u.LIBRARY_PREFIX,i(t(3)),i(t(0)),i(t(11)),i(t(14)),i(t(15)),i(t(12)),i(t(2)),i(t(10)),i(t(5)),i(t(16)),i(t(4)),i(t(9)),i(t(7)),i(t(6)),i(t(1))},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.bitsetIs=function(e,r){return assert(r>=0&&r<64),i64_ne(i64_and(e,i64_shl(i64_one,i64_new(r))),i64_zero)},r.bitsetSet=function(e,r,t){return assert(r>=0&&r<64),t?i64_or(e,i64_shl(i64_one,i64_new(r))):i64_and(e,i64_not(i64_shl(i64_one,i64_new(r))))}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e){e[e.NULL=0]="NULL",e[e.LINEFEED=10]="LINEFEED",e[e.CARRIAGERETURN=13]="CARRIAGERETURN",e[e.LINESEPARATOR=8232]="LINESEPARATOR",e[e.PARAGRAPHSEPARATOR=8233]="PARAGRAPHSEPARATOR",e[e.NEXTLINE=133]="NEXTLINE",e[e.SPACE=32]="SPACE",e[e.NONBREAKINGSPACE=160]="NONBREAKINGSPACE",e[e.ENQUAD=8192]="ENQUAD",e[e.EMQUAD=8193]="EMQUAD",e[e.ENSPACE=8194]="ENSPACE",e[e.EMSPACE=8195]="EMSPACE",e[e.THREEPEREMSPACE=8196]="THREEPEREMSPACE",e[e.FOURPEREMSPACE=8197]="FOURPEREMSPACE",e[e.SIXPEREMSPACE=8198]="SIXPEREMSPACE",e[e.FIGURESPACE=8199]="FIGURESPACE",e[e.PUNCTUATIONSPACE=8200]="PUNCTUATIONSPACE",e[e.THINSPACE=8201]="THINSPACE",e[e.HAIRSPACE=8202]="HAIRSPACE",e[e.ZEROWIDTHSPACE=8203]="ZEROWIDTHSPACE",e[e.NARROWNOBREAKSPACE=8239]="NARROWNOBREAKSPACE",e[e.IDEOGRAPHICSPACE=12288]="IDEOGRAPHICSPACE",e[e.MATHEMATICALSPACE=8287]="MATHEMATICALSPACE",e[e.OGHAM=5760]="OGHAM",e[e._=95]="_",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.AMPERSAND=38]="AMPERSAND",e[e.ASTERISK=42]="ASTERISK",e[e.AT=64]="AT",e[e.BACKSLASH=92]="BACKSLASH",e[e.BACKTICK=96]="BACKTICK",e[e.BAR=124]="BAR",e[e.CARET=94]="CARET",e[e.CLOSEBRACE=125]="CLOSEBRACE",e[e.CLOSEBRACKET=93]="CLOSEBRACKET",e[e.CLOSEPAREN=41]="CLOSEPAREN",e[e.COLON=58]="COLON",e[e.COMMA=44]="COMMA",e[e.DOLLAR=36]="DOLLAR",e[e.DOT=46]="DOT",e[e.DOUBLEQUOTE=34]="DOUBLEQUOTE",e[e.EQUALS=61]="EQUALS",e[e.EXCLAMATION=33]="EXCLAMATION",e[e.GREATERTHAN=62]="GREATERTHAN",e[e.HASH=35]="HASH",e[e.LESSTHAN=60]="LESSTHAN",e[e.MINUS=45]="MINUS",e[e.OPENBRACE=123]="OPENBRACE",e[e.OPENBRACKET=91]="OPENBRACKET",e[e.OPENPAREN=40]="OPENPAREN",e[e.PERCENT=37]="PERCENT",e[e.PLUS=43]="PLUS",e[e.QUESTION=63]="QUESTION",e[e.SEMICOLON=59]="SEMICOLON",e[e.SINGLEQUOTE=39]="SINGLEQUOTE",e[e.SLASH=47]="SLASH",e[e.TILDE=126]="TILDE",e[e.BACKSPACE=8]="BACKSPACE",e[e.FORMFEED=12]="FORMFEED",e[e.BYTEORDERMARK=65279]="BYTEORDERMARK",e[e.TAB=9]="TAB",e[e.VERTICALTAB=11]="VERTICALTAB"}(r.CharCode||(r.CharCode={})),r.isLineBreak=function(e){switch(e){case 10:case 13:case 8232:case 8233:return!0;default:return!1}},r.isWhiteSpace=function(e){switch(e){case 32:case 9:case 11:case 12:case 160:case 133:case 5760:case 8239:case 8287:case 12288:case 65279:return!0;default:return e>=8192&&e<=8203}},r.isDecimalDigit=function(e){return e>=48&&e<=57},r.isOctalDigit=function(e){return e>=48&&e<=55},r.isIdentifierStart=function(e){return e>=97&&e<=122||e>=65&&e<=90||95==e||36==e||e>127&&(!((r=e)<0||r>65535)&&a(r,n));var r},r.isKeywordCharacter=function(e){return e>=97&&e<=122},r.isIdentifierPart=function(e){return e>=97&&e<=122||e>=65&&e<=90||e>=48&&e<=57||95==e||36==e||e>127&&(!((r=e)<0||r>65535)&&a(r,i));var r};var n=[170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,880,884,886,887,890,893,902,902,904,906,908,908,910,929,931,1013,1015,1153,1162,1319,1329,1366,1369,1369,1377,1415,1488,1514,1520,1522,1568,1610,1646,1647,1649,1747,1749,1749,1765,1766,1774,1775,1786,1788,1791,1791,1808,1808,1810,1839,1869,1957,1969,1969,1994,2026,2036,2037,2042,2042,2048,2069,2074,2074,2084,2084,2088,2088,2112,2136,2208,2208,2210,2220,2308,2361,2365,2365,2384,2384,2392,2401,2417,2423,2425,2431,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2493,2493,2510,2510,2524,2525,2527,2529,2544,2545,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2649,2652,2654,2654,2674,2676,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2749,2749,2768,2768,2784,2785,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2877,2877,2908,2909,2911,2913,2929,2929,2947,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3024,3024,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3133,3133,3160,3161,3168,3169,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3261,3261,3294,3294,3296,3297,3313,3314,3333,3340,3342,3344,3346,3386,3389,3389,3406,3406,3424,3425,3450,3455,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3585,3632,3634,3635,3648,3654,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3760,3762,3763,3773,3773,3776,3780,3782,3782,3804,3807,3840,3840,3904,3911,3913,3948,3976,3980,4096,4138,4159,4159,4176,4181,4186,4189,4193,4193,4197,4198,4206,4208,4213,4225,4238,4238,4256,4293,4295,4295,4301,4301,4304,4346,4348,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4992,5007,5024,5108,5121,5740,5743,5759,5761,5786,5792,5866,5870,5872,5888,5900,5902,5905,5920,5937,5952,5969,5984,5996,5998,6e3,6016,6067,6103,6103,6108,6108,6176,6263,6272,6312,6314,6314,6320,6389,6400,6428,6480,6509,6512,6516,6528,6571,6593,6599,6656,6678,6688,6740,6823,6823,6917,6963,6981,6987,7043,7072,7086,7087,7098,7141,7168,7203,7245,7247,7258,7293,7401,7404,7406,7409,7413,7414,7424,7615,7680,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8305,8305,8319,8319,8336,8348,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11310,11312,11358,11360,11492,11499,11502,11506,11507,11520,11557,11559,11559,11565,11565,11568,11623,11631,11631,11648,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11823,11823,12293,12295,12321,12329,12337,12341,12344,12348,12353,12438,12445,12447,12449,12538,12540,12543,12549,12589,12593,12686,12704,12730,12784,12799,13312,19893,19968,40908,40960,42124,42192,42237,42240,42508,42512,42527,42538,42539,42560,42606,42623,42647,42656,42735,42775,42783,42786,42888,42891,42894,42896,42899,42912,42922,43e3,43009,43011,43013,43015,43018,43020,43042,43072,43123,43138,43187,43250,43255,43259,43259,43274,43301,43312,43334,43360,43388,43396,43442,43471,43471,43520,43560,43584,43586,43588,43595,43616,43638,43642,43642,43648,43695,43697,43697,43701,43702,43705,43709,43712,43712,43714,43714,43739,43741,43744,43754,43762,43764,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43968,44002,44032,55203,55216,55238,55243,55291,63744,64109,64112,64217,64256,64262,64275,64279,64285,64285,64287,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65136,65140,65142,65276,65313,65338,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500],i=[170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,768,884,886,887,890,893,902,902,904,906,908,908,910,929,931,1013,1015,1153,1155,1159,1162,1319,1329,1366,1369,1369,1377,1415,1425,1469,1471,1471,1473,1474,1476,1477,1479,1479,1488,1514,1520,1522,1552,1562,1568,1641,1646,1747,1749,1756,1759,1768,1770,1788,1791,1791,1808,1866,1869,1969,1984,2037,2042,2042,2048,2093,2112,2139,2208,2208,2210,2220,2276,2302,2304,2403,2406,2415,2417,2423,2425,2431,2433,2435,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2492,2500,2503,2504,2507,2510,2519,2519,2524,2525,2527,2531,2534,2545,2561,2563,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2620,2620,2622,2626,2631,2632,2635,2637,2641,2641,2649,2652,2654,2654,2662,2677,2689,2691,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2748,2757,2759,2761,2763,2765,2768,2768,2784,2787,2790,2799,2817,2819,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2876,2884,2887,2888,2891,2893,2902,2903,2908,2909,2911,2915,2918,2927,2929,2929,2946,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3006,3010,3014,3016,3018,3021,3024,3024,3031,3031,3046,3055,3073,3075,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3133,3140,3142,3144,3146,3149,3157,3158,3160,3161,3168,3171,3174,3183,3202,3203,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3260,3268,3270,3272,3274,3277,3285,3286,3294,3294,3296,3299,3302,3311,3313,3314,3330,3331,3333,3340,3342,3344,3346,3386,3389,3396,3398,3400,3402,3406,3415,3415,3424,3427,3430,3439,3450,3455,3458,3459,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3530,3530,3535,3540,3542,3542,3544,3551,3570,3571,3585,3642,3648,3662,3664,3673,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3769,3771,3773,3776,3780,3782,3782,3784,3789,3792,3801,3804,3807,3840,3840,3864,3865,3872,3881,3893,3893,3895,3895,3897,3897,3902,3911,3913,3948,3953,3972,3974,3991,3993,4028,4038,4038,4096,4169,4176,4253,4256,4293,4295,4295,4301,4301,4304,4346,4348,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4957,4959,4992,5007,5024,5108,5121,5740,5743,5759,5761,5786,5792,5866,5870,5872,5888,5900,5902,5908,5920,5940,5952,5971,5984,5996,5998,6e3,6002,6003,6016,6099,6103,6103,6108,6109,6112,6121,6155,6157,6160,6169,6176,6263,6272,6314,6320,6389,6400,6428,6432,6443,6448,6459,6470,6509,6512,6516,6528,6571,6576,6601,6608,6617,6656,6683,6688,6750,6752,6780,6783,6793,6800,6809,6823,6823,6912,6987,6992,7001,7019,7027,7040,7155,7168,7223,7232,7241,7245,7293,7376,7378,7380,7414,7424,7654,7676,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8204,8205,8255,8256,8276,8276,8305,8305,8319,8319,8336,8348,8400,8412,8417,8417,8421,8432,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11310,11312,11358,11360,11492,11499,11507,11520,11557,11559,11559,11565,11565,11568,11623,11631,11631,11647,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11744,11775,11823,11823,12293,12295,12321,12335,12337,12341,12344,12348,12353,12438,12441,12442,12445,12447,12449,12538,12540,12543,12549,12589,12593,12686,12704,12730,12784,12799,13312,19893,19968,40908,40960,42124,42192,42237,42240,42508,42512,42539,42560,42607,42612,42621,42623,42647,42655,42737,42775,42783,42786,42888,42891,42894,42896,42899,42912,42922,43e3,43047,43072,43123,43136,43204,43216,43225,43232,43255,43259,43259,43264,43309,43312,43347,43360,43388,43392,43456,43471,43481,43520,43574,43584,43597,43600,43609,43616,43638,43642,43643,43648,43714,43739,43741,43744,43759,43762,43766,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43968,44010,44012,44013,44016,44025,44032,55203,55216,55238,55243,55291,63744,64109,64112,64217,64256,64262,64275,64279,64285,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65024,65039,65056,65062,65075,65076,65101,65103,65136,65140,65142,65276,65296,65305,65313,65338,65343,65343,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500];function a(e,r){if(e<r[0])return!1;for(var t,n,i=0,a=r.length;i+1<a;){if(t=i+(a-i>>1),(n=r[t-=1&t])<=e&&e<=r[t+1])return!0;e<n?a=t:i=t+2}return!1}},function(e,r,t){"use strict";var n=this&&this.__values||function(e){var r="function"==typeof Symbol&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,i,a=t.call(e),s=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(t=a.return)&&t.call(a)}finally{if(i)throw i.error}}return s};Object.defineProperty(r,"__esModule",{value:!0}),r.makeArray=function(e){if(void 0===e&&(e=null),e){for(var r=new Array(e.length),t=0,n=e.length;t<n;++t)unchecked(r[t]=e[t]);return r}return new Array},r.makeSet=function(e){var r,t;if(void 0===e&&(e=null),e){var i=new Set;try{for(var a=n(e),s=a.next();!s.done;s=a.next()){var o=s.value;i.add(o)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(r)throw r.error}}return i}return new Set},r.makeMap=function(e,r){var t,a,s,o,l,c;void 0===e&&(e=null),void 0===r&&(r=null);var u=new Map;if(e){try{for(var p=n(e),_=p.next();!_.done;_=p.next()){var h=i(_.value,2),d=h[0],y=h[1];u.set(d,y)}}catch(e){t={error:e}}finally{try{_&&!_.done&&(a=p.return)&&a.call(p)}finally{if(t)throw t.error}}if(r)try{for(var T=n(r),m=T.next();!m.done;m=T.next()){var f=i(m.value,2);d=f[0],y=f[1];u.set(d,y)}}catch(e){s={error:e}}finally{try{m&&!m.done&&(o=T.return)&&o.call(T)}finally{if(s)throw s.error}}}else if(r)try{for(var g=n(r),E=g.next();!E.done;E=g.next()){var v=i(E.value,2);d=v[0],y=v[1];u.set(d,y)}}catch(e){l={error:e}}finally{try{E&&!E.done&&(c=g.return)&&c.call(g)}finally{if(l)throw l.error}}return u}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(0),i=47;function a(e){for(var r,t=0,n=e.length;t+1<n&&46==e.charCodeAt(t)&&e.charCodeAt(t+1)==i;)t+=2;for((t>0||n<e.length)&&(e=e.substring(t,n),n-=t,t=0);t+1<n;){if(r=!1,e.charCodeAt(t)==i&&46==e.charCodeAt(t+1)){if((r=t+2==n)||t+2<n&&e.charCodeAt(t+2)==i){e=r?e.substring(0,t):e.substring(0,t)+e.substring(t+2),n-=2;continue}if((r=t+3==n)&&46==e.charCodeAt(t+2)||t+3<n&&46==e.charCodeAt(t+2)&&e.charCodeAt(t+3)==i){for(var a=t;--a>=0;)if(e.charCodeAt(a)==i){t-a==3&&46==e.charCodeAt(a+1)&&46==e.charCodeAt(a+2)||(e=r?e.substring(0,a):e.substring(0,a)+e.substring(t+3),n-=t+3-a,t=a-1);break}if(a<0&&t>0&&(2!=t||46!=e.charCodeAt(0)||46!=e.charCodeAt(1))){n=(e=e.substring(t+4)).length;continue}}}t++}return n>0?e:"."}function s(e){var r=e.length;if(r<=1){if(0==r)return".";if(e.charCodeAt(0)==i)return e}for(;--r>0;)if(e.charCodeAt(r)==i)return e.substring(0,r);return"."}r.normalizePath=a,r.resolvePath=function(e,r){return e.startsWith("std/")?e:a(s(r)+n.PATH_DELIMITER+e)},r.dirname=s},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="  ",i="    ",a="        ";r.indent=function(e,r){for(;r>=4;)e.push(a),r-=4;r>=2&&(e.push(i),r-=2),r&&e.push(n)}},function(e,r,t){"use strict";function n(e,r){return e[r]|e[r+1]<<8|e[r+2]<<16|e[r+3]<<24}function i(e,r,t){r[t]=e,r[t+1]=e>>>8,r[t+2]=e>>>16,r[t+3]=e>>>24}function a(e,r){var t=n(e,r),i=n(e,r+4);return i64_new(t,i)}Object.defineProperty(r,"__esModule",{value:!0}),r.readI8=function(e,r){return e[r]},r.writeI8=function(e,r,t){r[t]=e},r.readI16=function(e,r){return e[r]|e[r+1]<<8},r.writeI16=function(e,r,t){r[t]=e,r[t+1]=e>>>8},r.readI32=n,r.writeI32=i,r.readI64=a,r.writeI64=function(e,r,t){i(i64_low(e),r,t),i(i64_high(e),r,t+4)},r.readF32=function(e,r){return i32_as_f32(n(e,r))},r.writeF32=function(e,r,t){i(f32_as_i32(e),r,t)},r.readF64=function(e,r){return i64_as_f64(a(e,r))},r.writeF64=function(e,r,t){var n=f64_as_i64(e);i(i64_low(n),r,t),i(i64_high(n),r,t+4)}}])}));
//# sourceMappingURL=assemblyscript.js.map